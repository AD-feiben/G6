"use strict";(self.webpackChunk_antv_g6_site=self.webpackChunk_antv_g6_site||[]).push([[2643],{90097:function(r,e,n){n.d(e,{w:function(){return t}});var o=n(41398),t=(0,o.createContext)({})},95084:function(r,e,n){n.r(e),n.d(e,{default:function(){return s}});var o=n(41398),t=n(7574),a=n(90097),i=n(46228);function s(){var d=(0,t.pC)();return(0,i.jsx)(a.w.Provider,{value:{meta:{exampleTopics:[{id:"case",title:{zh:"\u573A\u666F\u6848\u4F8B",en:"Case"},icon:"gallery",examples:[{demos:[{id:"graphinsight",screenshot:"https://gw.alipayobjects.com/mdn/rms_0d75e8/afts/img/A*eXL9T6xqPlUAAAAAAAAAAAAAARQnAQ",source:`const container = document.getElementById('container');

const iframe = document.createElement('iframe');
iframe.id = 'graphinsight-bank-demo';

iframe.src =
  'https://codesandbox.io/embed/condescending-platform-mt37im?fontsize=14&hidenavigation=1&theme=dark';
iframe.style =
  'width:100%; height:100%; min-height:500px; border:0; border-radius: 4px; overflow:hidden;';
iframe.allow =
  'accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking';
iframe.sandbox =
  'allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts';
iframe.title = 'condescending-graphinsight-bank';

const info = document.createElement('div');
info.innerHTML = \`
<p>\u53CB\u60C5\u63D0\u793A\uFF0C\u5982\u679CCodeSandbox\u6253\u5F00\u6BD4\u8F83\u6162\uFF0C\u53EF\u4EE5\u8BBF\u95EE <a href='https://graphinsight.antgroup.com/#/workspace?type=case' target='_blank'>\u300CGraphInsight\u300D</a> \u5728\u7EBF\u67E5\u770B\uFF0C
\u5B83\u662F AntV \u56E2\u961F\u57FA\u4E8E G6 \u7814\u53D1\u7684\u4E00\u6B3E\u56FE\u5206\u6790\u5E94\u7528\u4F4E\u4EE3\u7801\u642D\u5EFA\u5DE5\u5177\u4E0E\u5206\u6790\u6D1E\u5BDF\u4EA7\u54C1\uFF0C\u5B83\u65E2\u53EF\u4EE5\u5E2E\u52A9\u7528\u6237\u5728\u7EBF\u5B9E\u73B0\u5173\u7CFB\u6570\u636E\u7684\u53EF\u89C6\u5316\uFF0C\u4E5F\u53EF\u5E2E\u52A9\u5F00\u53D1\u8005\u4E00\u952E\u5BFC\u51FA\u56FE\u753B\u5E03SDK\uFF0C\u6781\u5927\u63D0\u9AD8\u7814\u53D1\u6548\u7387
</p>
\`;
container.appendChild(info);
container.appendChild(iframe);
`,title:{zh:"GraphInsight \u6848\u4F8B",en:"GraphInsight Case"},filename:"graphinsight.js",isNew:!1},{id:"largeGraph",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*a6N9Q6q44Q0AAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

// \u5B9E\u9645\u5F00\u53D1\u4E2D\u628A window.AntVUtil \u6362\u6210\u4ECE @antv/util \u5F15\u5165\u7684\u76F8\u5173\u6A21\u5757
// replace window.AntVUtil.isObject with
// import { isNumber, isArray } from '@antv/util';
const { isNumber, isArray } = window.AntVUtil;

insertCss(\`
  .g6-component-contextmenu {
    position: absolute;
    z-index: 2;
    list-style-type: none;
    background-color: #363b40;
    border-radius: 6px;
    font-size: 14px;
    color: hsla(0,0%,100%,.85);
    width: fit-content;
    transition: opacity .2s;
    text-align: center;
    padding: 0px 20px 0px 20px;
		box-shadow: 0 5px 18px 0 rgba(0, 0, 0, 0.6);
		border: 0px;
  }
  .g6-component-contextmenu ul {
		padding-left: 0px;
		margin: 0;
  }
  .g6-component-contextmenu li {
    cursor: pointer;
    list-style-type: none;
    list-style: none;
    margin-left: 0;
    line-height: 38px;
  }
  .g6-component-contextmenu li:hover {
    color: #aaaaaa;
	}
\`);

const { labelPropagation, louvain, findShortestPath } = G6.Algorithm;
const { uniqueId } = G6.Util;

const NODESIZEMAPPING = 'degree';
const SMALLGRAPHLABELMAXLENGTH = 5;
let labelMaxLength = SMALLGRAPHLABELMAXLENGTH;
const DEFAULTNODESIZE = 20;
const DEFAULTAGGREGATEDNODESIZE = 53;
const NODE_LIMIT = 40; // TODO: find a proper number for maximum node number on the canvas

let graph = null;
let currentUnproccessedData = { nodes: [], edges: [] };
let nodeMap = {};
let aggregatedNodeMap = {};
let hiddenItemIds = []; // \b\u9690\u85CF\u7684\u5143\u7D20 id \u6570\u7EC4
let largeGraphMode = true;
let cachePositions = {};
let manipulatePosition = undefined;
let descreteNodeCenter;
let layout = {
  type: '',
  instance: null,
  destroyed: true,
};
let expandArray = [];
let collapseArray = [];
let shiftKeydown = false;
let CANVAS_WIDTH = 800,
  CANVAS_HEIGHT = 800;

const duration = 2000;
const animateOpacity = 0.6;
const animateBackOpacity = 0.1;
const virtualEdgeOpacity = 0.1;
const realEdgeOpacity = 0.2;

const darkBackColor = 'rgb(43, 47, 51)';
const disableColor = '#777';
const theme = 'dark';
const subjectColors = [
  '#5F95FF', // blue
  '#61DDAA',
  '#65789B',
  '#F6BD16',
  '#7262FD',
  '#78D3F8',
  '#9661BC',
  '#F6903D',
  '#008685',
  '#F08BB4',
];

const colorSets = G6.Util.getColorSetsBySubjectColors(
  subjectColors,
  darkBackColor,
  theme,
  disableColor,
);

const global = {
  node: {
    style: {
      fill: '#2B384E',
    },
    labelCfg: {
      style: {
        fill: '#acaeaf',
        stroke: '#191b1c',
      },
    },
    stateStyles: {
      focus: {
        fill: '#2B384E',
      },
    },
  },
  edge: {
    style: {
      stroke: '#acaeaf',
      realEdgeStroke: '#acaeaf', //'#f00',
      realEdgeOpacity,
      strokeOpacity: realEdgeOpacity,
    },
    labelCfg: {
      style: {
        fill: '#acaeaf',
        realEdgeStroke: '#acaeaf', //'#f00',
        realEdgeOpacity: 0.5,
        stroke: '#191b1c',
      },
    },
    stateStyles: {
      focus: {
        stroke: '#fff', // '#3C9AE8',
      },
    },
  },
};

// Custom super node
G6.registerNode(
  'aggregated-node',
  {
    draw(cfg, group) {
      let width = 53,
        height = 27;
      const style = cfg.style || {};
      const colorSet = cfg.colorSet || colorSets[0];

      // halo for hover
      group.addShape('rect', {
        attrs: {
          x: -width * 0.55,
          y: -height * 0.6,
          width: width * 1.1,
          height: height * 1.2,
          fill: colorSet.mainFill,
          opacity: 0.9,
          lineWidth: 0,
          radius: (height / 2 || 13) * 1.2,
        },
        name: 'halo-shape',
        visible: false,
      });

      // focus stroke for hover
      group.addShape('rect', {
        attrs: {
          x: -width * 0.55,
          y: -height * 0.6,
          width: width * 1.1,
          height: height * 1.2,
          fill: colorSet.mainFill, // '#3B4043',
          stroke: '#AAB7C4',
          lineWidth: 1,
          lineOpacty: 0.85,
          radius: (height / 2 || 13) * 1.2,
        },
        name: 'stroke-shape',
        visible: false,
      });

      const keyShape = group.addShape('rect', {
        attrs: {
          ...style,
          x: -width / 2,
          y: -height / 2,
          width,
          height,
          fill: colorSet.mainFill, // || '#3B4043',
          stroke: colorSet.mainStroke,
          lineWidth: 2,
          cursor: 'pointer',
          radius: height / 2 || 13,
          lineDash: [2, 2],
        },
        name: 'aggregated-node-keyShape',
      });

      let labelStyle = {};
      if (cfg.labelCfg) {
        labelStyle = Object.assign(labelStyle, cfg.labelCfg.style);
      }
      group.addShape('text', {
        attrs: {
          text: \`\${cfg.count}\`,
          x: 0,
          y: 0,
          textAlign: 'center',
          textBaseline: 'middle',
          cursor: 'pointer',
          fontSize: 12,
          fill: '#fff',
          opacity: 0.85,
          fontWeight: 400,
        },
        name: 'count-shape',
        className: 'count-shape',
        draggable: true,
      });

      // tag for new node
      if (cfg.new) {
        group.addShape('circle', {
          attrs: {
            x: width / 2 - 3,
            y: -height / 2 + 3,
            r: 4,
            fill: '#6DD400',
            lineWidth: 0.5,
            stroke: '#FFFFFF',
          },
          name: 'typeNode-tag-circle',
        });
      }
      return keyShape;
    },
    setState: (name, value, item) => {
      const group = item.get('group');
      if (name === 'layoutEnd' && value) {
        const labelShape = group.find((e) => e.get('name') === 'text-shape');
        if (labelShape) labelShape.set('visible', true);
      } else if (name === 'hover') {
        if (item.hasState('focus')) {
          return;
        }
        const halo = group.find((e) => e.get('name') === 'halo-shape');
        const keyShape = item.getKeyShape();
        const colorSet = item.getModel().colorSet || colorSets[0];
        if (value) {
          halo && halo.show();
          keyShape.attr('fill', colorSet.activeFill);
        } else {
          halo && halo.hide();
          keyShape.attr('fill', colorSet.mainFill);
        }
      } else if (name === 'focus') {
        const stroke = group.find((e) => e.get('name') === 'stroke-shape');
        const keyShape = item.getKeyShape();
        const colorSet = item.getModel().colorSet || colorSets[0];
        if (value) {
          stroke && stroke.show();
          keyShape.attr('fill', colorSet.selectedFill);
        } else {
          stroke && stroke.hide();
          keyShape.attr('fill', colorSet.mainFill);
        }
      }
    },
    update: undefined,
  },
  'single-node',
);

// Custom real node
G6.registerNode(
  'real-node',
  {
    draw(cfg, group) {
      let r = 30;
      if (isNumber(cfg.size)) {
        r = cfg.size / 2;
      } else if (isArray(cfg.size)) {
        r = cfg.size[0] / 2;
      }
      const style = cfg.style || {};
      const colorSet = cfg.colorSet || colorSets[0];

      // halo for hover
      group.addShape('circle', {
        attrs: {
          x: 0,
          y: 0,
          r: r + 5,
          fill: style.fill || colorSet.mainFill || '#2B384E',
          opacity: 0.9,
          lineWidth: 0,
        },
        name: 'halo-shape',
        visible: false,
      });

      // focus stroke for hover
      group.addShape('circle', {
        attrs: {
          x: 0,
          y: 0,
          r: r + 5,
          fill: style.fill || colorSet.mainFill || '#2B384E',
          stroke: '#fff',
          strokeOpacity: 0.85,
          lineWidth: 1,
        },
        name: 'stroke-shape',
        visible: false,
      });

      const keyShape = group.addShape('circle', {
        attrs: {
          ...style,
          x: 0,
          y: 0,
          r,
          fill: colorSet.mainFill,
          stroke: colorSet.mainStroke,
          lineWidth: 2,
          cursor: 'pointer',
        },
        name: 'aggregated-node-keyShape',
      });

      let labelStyle = {};
      if (cfg.labelCfg) {
        labelStyle = Object.assign(labelStyle, cfg.labelCfg.style);
      }

      if (cfg.label) {
        const text = cfg.label;
        let labelStyle = {};
        let refY = 0;
        if (cfg.labelCfg) {
          labelStyle = Object.assign(labelStyle, cfg.labelCfg.style);
          refY += cfg.labelCfg.refY || 0;
        }
        let offsetY = 0;
        const fontSize = labelStyle.fontSize < 8 ? 8 : labelStyle.fontSize;
        const lineNum = cfg.labelLineNum || 1;
        offsetY = lineNum * (fontSize || 12);
        group.addShape('text', {
          attrs: {
            text,
            x: 0,
            y: r + refY + offsetY + 5,
            textAlign: 'center',
            textBaseLine: 'alphabetic',
            cursor: 'pointer',
            fontSize,
            fill: '#fff',
            opacity: 0.85,
            fontWeight: 400,
            stroke: global.edge.labelCfg.style.stroke,
          },
          name: 'text-shape',
          className: 'text-shape',
        });
      }

      // tag for new node
      if (cfg.new) {
        group.addShape('circle', {
          attrs: {
            x: r - 3,
            y: -r + 3,
            r: 4,
            fill: '#6DD400',
            lineWidth: 0.5,
            stroke: '#FFFFFF',
          },
          name: 'typeNode-tag-circle',
        });
      }

      return keyShape;
    },
    setState: (name, value, item) => {
      const group = item.get('group');
      if (name === 'layoutEnd' && value) {
        const labelShape = group.find((e) => e.get('name') === 'text-shape');
        if (labelShape) labelShape.set('visible', true);
      } else if (name === 'hover') {
        if (item.hasState('focus')) {
          return;
        }
        const halo = group.find((e) => e.get('name') === 'halo-shape');
        const keyShape = item.getKeyShape();
        const colorSet = item.getModel().colorSet || colorSets[0];
        if (value) {
          halo && halo.show();
          keyShape.attr('fill', colorSet.activeFill);
        } else {
          halo && halo.hide();
          keyShape.attr('fill', colorSet.mainFill);
        }
      } else if (name === 'focus') {
        const stroke = group.find((e) => e.get('name') === 'stroke-shape');
        const label = group.find((e) => e.get('name') === 'text-shape');
        const keyShape = item.getKeyShape();
        const colorSet = item.getModel().colorSet || colorSets[0];
        if (value) {
          stroke && stroke.show();
          keyShape.attr('fill', colorSet.selectedFill);
          label && label.attr('fontWeight', 800);
        } else {
          stroke && stroke.hide();
          keyShape.attr('fill', colorSet.mainFill); // '#2B384E'
          label && label.attr('fontWeight', 400);
        }
      }
    },
    update: undefined,
  },
  'aggregated-node',
); // \u8FD9\u6837\u53EF\u4EE5\u7EE7\u627F aggregated-node \u7684 setState

// Custom the quadratic edge for multiple edges between one node pair
G6.registerEdge(
  'custom-quadratic',
  {
    setState: (name, value, item) => {
      const group = item.get('group');
      const model = item.getModel();
      if (name === 'focus') {
        const back = group.find((ele) => ele.get('name') === 'back-line');
        if (back) {
          back.stopAnimate();
          back.remove();
          back.destroy();
        }
        const keyShape = group.find((ele) => ele.get('name') === 'edge-shape');
        const arrow = model.style.endArrow;
        if (value) {
          if (keyShape.cfg.animation) {
            keyShape.stopAnimate(true);
          }
          keyShape.attr({
            strokeOpacity: animateOpacity,
            opacity: animateOpacity,
            stroke: '#fff',
            endArrow: {
              ...arrow,
              stroke: '#fff',
              fill: '#fff',
            },
          });
          if (model.isReal) {
            const { lineWidth, path, endArrow, stroke } = keyShape.attr();
            const back = group.addShape('path', {
              attrs: {
                lineWidth,
                path,
                stroke,
                endArrow,
                opacity: animateBackOpacity,
              },
              name: 'back-line',
            });
            back.toBack();
            const length = keyShape.getTotalLength();
            keyShape.animate(
              (ratio) => {
                // the operations in each frame. Ratio ranges from 0 to 1 indicating the prograss of the animation. Returns the modified configurations
                const startLen = ratio * length;
                // Calculate the lineDash
                const cfg = {
                  lineDash: [startLen, length - startLen],
                };
                return cfg;
              },
              {
                repeat: true, // Whether executes the animation repeatly
                duration, // the duration for executing once
              },
            );
          } else {
            let index = 0;
            const lineDash = keyShape.attr('lineDash');
            const totalLength = lineDash[0] + lineDash[1];
            keyShape.animate(
              () => {
                index++;
                if (index > totalLength) {
                  index = 0;
                }
                const res = {
                  lineDash,
                  lineDashOffset: -index,
                };
                // returns the modified configurations here, lineDash and lineDashOffset here
                return res;
              },
              {
                repeat: true, // whether executes the animation repeatly
                duration, // the duration for executing once
              },
            );
          }
        } else {
          keyShape.stopAnimate();
          const stroke = '#acaeaf';
          const opacity = model.isReal ? realEdgeOpacity : virtualEdgeOpacity;
          keyShape.attr({
            stroke,
            strokeOpacity: opacity,
            opacity,
            endArrow: {
              ...arrow,
              stroke,
              fill: stroke,
            },
          });
        }
      }
    },
  },
  'quadratic',
);

// Custom the line edge for single edge between one node pair
G6.registerEdge(
  'custom-line',
  {
    setState: (name, value, item) => {
      const group = item.get('group');
      const model = item.getModel();
      if (name === 'focus') {
        const keyShape = group.find((ele) => ele.get('name') === 'edge-shape');
        const back = group.find((ele) => ele.get('name') === 'back-line');
        if (back) {
          back.stopAnimate();
          back.remove();
          back.destroy();
        }
        const arrow = model.style.endArrow;
        if (value) {
          if (keyShape.cfg.animation) {
            keyShape.stopAnimate(true);
          }
          keyShape.attr({
            strokeOpacity: animateOpacity,
            opacity: animateOpacity,
            stroke: '#fff',
            endArrow: {
              ...arrow,
              stroke: '#fff',
              fill: '#fff',
            },
          });
          if (model.isReal) {
            const { path, stroke, lineWidth } = keyShape.attr();
            const back = group.addShape('path', {
              attrs: {
                path,
                stroke,
                lineWidth,
                opacity: animateBackOpacity,
              },
              name: 'back-line',
            });
            back.toBack();
            const length = keyShape.getTotalLength();
            keyShape.animate(
              (ratio) => {
                // the operations in each frame. Ratio ranges from 0 to 1 indicating the prograss of the animation. Returns the modified configurations
                const startLen = ratio * length;
                // Calculate the lineDash
                const cfg = {
                  lineDash: [startLen, length - startLen],
                };
                return cfg;
              },
              {
                repeat: true, // Whether executes the animation repeatly
                duration, // the duration for executing once
              },
            );
          } else {
            const lineDash = keyShape.attr('lineDash');
            const totalLength = lineDash[0] + lineDash[1];
            let index = 0;
            keyShape.animate(
              () => {
                index++;
                if (index > totalLength) {
                  index = 0;
                }
                const res = {
                  lineDash,
                  lineDashOffset: -index,
                };
                // returns the modified configurations here, lineDash and lineDashOffset here
                return res;
              },
              {
                repeat: true, // whether executes the animation repeatly
                duration, // the duration for executing once
              },
            );
          }
        } else {
          keyShape.stopAnimate();
          const stroke = '#acaeaf';
          const opacity = model.isReal ? realEdgeOpacity : virtualEdgeOpacity;
          keyShape.attr({
            stroke,
            strokeOpacity: opacity,
            opacity: opacity,
            endArrow: {
              ...arrow,
              stroke,
              fill: stroke,
            },
          });
        }
      }
    },
  },
  'single-edge',
);

const descendCompare = (p) => {
  // \u8FD9\u662F\u6BD4\u8F83\u51FD\u6570
  return function (m, n) {
    const a = m[p];
    const b = n[p];
    return b - a; // \u964D\u5E8F
  };
};

const clearFocusItemState = (graph) => {
  if (!graph) return;
  clearFocusNodeState(graph);
  clearFocusEdgeState(graph);
};

// \u6E05\u9664\u56FE\u4E0A\u6240\u6709\u8282\u70B9\u7684 focus \u72B6\u6001\u53CA\u76F8\u5E94\u6837\u5F0F
const clearFocusNodeState = (graph) => {
  const focusNodes = graph.findAllByState('node', 'focus');
  focusNodes.forEach((fnode) => {
    graph.setItemState(fnode, 'focus', false); // false
  });
};

// \u6E05\u9664\u56FE\u4E0A\u6240\u6709\u8FB9\u7684 focus \u72B6\u6001\u53CA\u76F8\u5E94\u6837\u5F0F
const clearFocusEdgeState = (graph) => {
  const focusEdges = graph.findAllByState('edge', 'focus');
  focusEdges.forEach((fedge) => {
    graph.setItemState(fedge, 'focus', false);
  });
};

// \u622A\u65AD\u957F\u6587\u672C\u3002length \u4E3A\u6587\u672C\u622A\u65AD\u540E\u957F\u5EA6\uFF0Celipsis \u662F\u540E\u7F00
const formatText = (text, length = 5, elipsis = '...') => {
  if (!text) return '';
  if (text.length > length) {
    return \`\${text.substr(0, length)}\${elipsis}\`;
  }
  return text;
};

const labelFormatter = (text, minLength = 10) => {
  if (text && text.split('').length > minLength) return \`\${text.substr(0, minLength)}...\`;
  return text;
};

const processNodesEdges = (
  nodes,
  edges,
  width,
  height,
  largeGraphMode,
  edgeLabelVisible,
  isNewGraph = false,
) => {
  if (!nodes || nodes.length === 0) return {};
  const currentNodeMap = {};
  let maxNodeCount = -Infinity;
  const paddingRatio = 0.3;
  const paddingLeft = paddingRatio * width;
  const paddingTop = paddingRatio * height;
  nodes.forEach((node) => {
    node.type = node.level === 0 ? 'real-node' : 'aggregated-node';
    node.isReal = node.level === 0 ? true : false;
    node.label = \`\${node.id}\`;
    node.labelLineNum = undefined;
    node.oriLabel = node.label;
    node.label = formatText(node.label, labelMaxLength, '...');
    node.degree = 0;
    node.inDegree = 0;
    node.outDegree = 0;
    if (currentNodeMap[node.id]) {
      console.warn('node exists already!', node.id);
      node.id = \`\${node.id}\${Math.random()}\`;
    }
    currentNodeMap[node.id] = node;
    if (node.count > maxNodeCount) maxNodeCount = node.count;
    const cachePosition = cachePositions ? cachePositions[node.id] : undefined;
    if (cachePosition) {
      node.x = cachePosition.x;
      node.y = cachePosition.y;
      node.new = false;
    } else {
      node.new = isNewGraph ? false : true;
      if (manipulatePosition && !node.x && !node.y) {
        node.x = manipulatePosition.x + 30 * Math.cos(Math.random() * Math.PI * 2);
        node.y = manipulatePosition.y + 30 * Math.sin(Math.random() * Math.PI * 2);
      }
    }
  });

  let maxCount = -Infinity;
  let minCount = Infinity;
  // let maxCount = 0;
  edges.forEach((edge) => {
    // to avoid the dulplicated id to nodes
    if (!edge.id) edge.id = uniqueId('edge');
    else if (edge.id.split('-')[0] !== 'edge') edge.id = \`edge-\${edge.id}\`;
    // TODO: delete the following line after the queried data is correct
    if (!currentNodeMap[edge.source] || !currentNodeMap[edge.target]) {
      console.warn('edge source target does not exist', edge.source, edge.target, edge.id);
      return;
    }
    const sourceNode = currentNodeMap[edge.source];
    const targetNode = currentNodeMap[edge.target];

    if (!sourceNode || !targetNode)
      console.warn('source or target is not defined!!!', edge, sourceNode, targetNode);

    // calculate the degree
    sourceNode.degree++;
    targetNode.degree++;
    sourceNode.outDegree++;
    targetNode.inDegree++;

    if (edge.count > maxCount) maxCount = edge.count;
    if (edge.count < minCount) minCount = edge.count;
  });

  nodes.sort(descendCompare(NODESIZEMAPPING));
  const maxDegree = nodes[0].degree || 1;

  const descreteNodes = [];
  nodes.forEach((node, i) => {
    // assign the size mapping to the outDegree
    const countRatio = node.count / maxNodeCount;
    const isRealNode = node.level === 0;
    node.size = isRealNode ? DEFAULTNODESIZE : DEFAULTAGGREGATEDNODESIZE;
    node.isReal = isRealNode;
    node.labelCfg = {
      position: 'bottom',
      offset: 5,
      style: {
        fill: global.node.labelCfg.style.fill,
        fontSize: 6 + countRatio * 6 || 12,
        stroke: global.node.labelCfg.style.stroke,
        lineWidth: 3,
      },
    };

    if (!node.degree) {
      descreteNodes.push(node);
    }
  });

  const countRange = maxCount - minCount;
  const minEdgeSize = 1;
  const maxEdgeSize = 7;
  const edgeSizeRange = maxEdgeSize - minEdgeSize;
  edges.forEach((edge) => {
    // set edges' style
    const targetNode = currentNodeMap[edge.target];

    const size = ((edge.count - minCount) / countRange) * edgeSizeRange + minEdgeSize || 1;
    edge.size = size;

    const arrowWidth = Math.max(size / 2 + 2, 3);
    const arrowLength = 10;
    const arrowBeging = targetNode.size + arrowLength;
    let arrowPath = \`M \${arrowBeging},0 L \${arrowBeging + arrowLength},-\${arrowWidth} L \${arrowBeging + arrowLength
      },\${arrowWidth} Z\`;
    let d = targetNode.size / 2 + arrowLength;
    if (edge.source === edge.target) {
      edge.type = 'loop';
      arrowPath = undefined;
    }
    const sourceNode = currentNodeMap[edge.source];
    const isRealEdge = targetNode.isReal && sourceNode.isReal;
    edge.isReal = isRealEdge;
    const stroke = isRealEdge ? global.edge.style.realEdgeStroke : global.edge.style.stroke;
    const opacity = isRealEdge
      ? global.edge.style.realEdgeOpacity
      : global.edge.style.strokeOpacity;
    const dash = Math.max(size, 2);
    const lineDash = isRealEdge ? undefined : [dash, dash];
    edge.style = {
      stroke,
      strokeOpacity: opacity,
      cursor: 'pointer',
      lineAppendWidth: Math.max(edge.size || 5, 5),
      fillOpacity: 1,
      lineDash,
      endArrow: arrowPath
        ? {
          path: arrowPath,
          d,
          fill: stroke,
          strokeOpacity: 0,
        }
        : false,
    };
    edge.labelCfg = {
      autoRotate: true,
      style: {
        stroke: global.edge.labelCfg.style.stroke,
        fill: global.edge.labelCfg.style.fill,
        lineWidth: 4,
        fontSize: 12,
        lineAppendWidth: 10,
        opacity: 1,
      },
    };
    if (!edge.oriLabel) edge.oriLabel = edge.label;
    if (largeGraphMode || !edgeLabelVisible) edge.label = '';
    else {
      edge.label = labelFormatter(edge.label, labelMaxLength);
    }

    // arrange the other nodes around the hub
    const sourceDis = sourceNode.size / 2 + 20;
    const targetDis = targetNode.size / 2 + 20;
    if (sourceNode.x && !targetNode.x) {
      targetNode.x = sourceNode.x + sourceDis * Math.cos(Math.random() * Math.PI * 2);
    }
    if (sourceNode.y && !targetNode.y) {
      targetNode.y = sourceNode.y + sourceDis * Math.sin(Math.random() * Math.PI * 2);
    }
    if (targetNode.x && !sourceNode.x) {
      sourceNode.x = targetNode.x + targetDis * Math.cos(Math.random() * Math.PI * 2);
    }
    if (targetNode.y && !sourceNode.y) {
      sourceNode.y = targetNode.y + targetDis * Math.sin(Math.random() * Math.PI * 2);
    }

    if (!sourceNode.x && !sourceNode.y && manipulatePosition) {
      sourceNode.x = manipulatePosition.x + 30 * Math.cos(Math.random() * Math.PI * 2);
      sourceNode.y = manipulatePosition.y + 30 * Math.sin(Math.random() * Math.PI * 2);
    }
    if (!targetNode.x && !targetNode.y && manipulatePosition) {
      targetNode.x = manipulatePosition.x + 30 * Math.cos(Math.random() * Math.PI * 2);
      targetNode.y = manipulatePosition.y + 30 * Math.sin(Math.random() * Math.PI * 2);
    }
  });

  descreteNodeCenter = {
    x: width - paddingLeft,
    y: height - paddingTop,
  };
  descreteNodes.forEach((node) => {
    if (!node.x && !node.y) {
      node.x = descreteNodeCenter.x + 30 * Math.cos(Math.random() * Math.PI * 2);
      node.y = descreteNodeCenter.y + 30 * Math.sin(Math.random() * Math.PI * 2);
    }
  });

  G6.Util.processParallelEdges(edges, 12.5, 'custom-quadratic', 'custom-line');
  return {
    maxDegree,
    edges,
  };
};

const getForceLayoutConfig = (graph, largeGraphMode, configSettings) => {
  let {
    linkDistance,
    edgeStrength,
    nodeStrength,
    nodeSpacing,
    preventOverlap,
    nodeSize,
    collideStrength,
    alpha,
    alphaDecay,
    alphaMin,
  } = configSettings || { preventOverlap: true };

  if (!linkDistance && linkDistance !== 0) linkDistance = 225;
  if (!edgeStrength && edgeStrength !== 0) edgeStrength = 50;
  if (!nodeStrength && nodeStrength !== 0) nodeStrength = 200;
  if (!nodeSpacing && nodeSpacing !== 0) nodeSpacing = 5;

  const config = {
    type: 'gForce',
    minMovement: 0.01,
    maxIteration: 5000,
    preventOverlap,
    damping: 0.99,
    linkDistance: (d) => {
      let dist = linkDistance;
      const sourceNode = nodeMap[d.source] || aggregatedNodeMap[d.source];
      const targetNode = nodeMap[d.target] || aggregatedNodeMap[d.target];
      // // \u4E24\u7AEF\u90FD\u662F\u805A\u5408\u70B9
      // if (sourceNode.level && targetNode.level) dist = linkDistance * 3;
      // // \u4E00\u7AEF\u662F\u805A\u5408\u70B9\uFF0C\u4E00\u7AEF\u662F\u771F\u5B9E\u8282\u70B9
      // else if (sourceNode.level || targetNode.level) dist = linkDistance * 1.5;
      if (!sourceNode.level && !targetNode.level) dist = linkDistance * 0.3;
      return dist;
    },
    edgeStrength: (d) => {
      const sourceNode = nodeMap[d.source] || aggregatedNodeMap[d.source];
      const targetNode = nodeMap[d.target] || aggregatedNodeMap[d.target];
      // \u805A\u5408\u8282\u70B9\u4E4B\u95F4\u7684\u5F15\u529B\u5C0F
      if (sourceNode.level && targetNode.level) return edgeStrength / 2;
      // \u805A\u5408\u8282\u70B9\u4E0E\u771F\u5B9E\u8282\u70B9\u4E4B\u95F4\u5F15\u529B\u5927
      if (sourceNode.level || targetNode.level) return edgeStrength;
      return edgeStrength;
    },
    nodeStrength: (d) => {
      // \u7ED9\u79BB\u6563\u70B9\u5F15\u529B\uFF0C\u8BA9\u5B83\u4EEC\u805A\u96C6
      if (d.degree === 0) return -10;
      // \u805A\u5408\u70B9\u7684\u65A5\u529B\u5927
      if (d.level) return nodeStrength * 2;
      return nodeStrength;
    },
    nodeSize: (d) => {
      if (!nodeSize && d.size) return d.size;
      return 50;
    },
    nodeSpacing: (d) => {
      if (d.degree === 0) return nodeSpacing * 2;
      if (d.level) return nodeSpacing;
      return nodeSpacing;
    },
    onLayoutEnd: () => {
      if (largeGraphMode) {
        graph.getEdges().forEach((edge) => {
          if (!edge.oriLabel) return;
          edge.update({
            label: labelFormatter(edge.oriLabel, labelMaxLength),
          });
        });
      }
    },
    tick: () => {
      graph.refreshPositions();
    },
  };

  if (nodeSize) config['nodeSize'] = nodeSize;
  if (collideStrength) config['collideStrength'] = collideStrength;
  if (alpha) config['alpha'] = alpha;
  if (alphaDecay) config['alphaDecay'] = alphaDecay;
  if (alphaMin) config['alphaMin'] = alphaMin;

  return config;
};

const hideItems = (graph) => {
  hiddenItemIds.forEach((id) => {
    graph.hideItem(id);
  });
};

const showItems = (graph) => {
  graph.getNodes().forEach((node) => {
    if (!node.isVisible()) graph.showItem(node);
  });
  graph.getEdges().forEach((edge) => {
    if (!edge.isVisible()) edge.showItem(edge);
  });
  hiddenItemIds = [];
};

const handleRefreshGraph = (
  graph,
  graphData,
  width,
  height,
  largeGraphMode,
  edgeLabelVisible,
  isNewGraph,
) => {
  if (!graphData || !graph) return;
  clearFocusItemState(graph);
  // reset the filtering
  graph.getNodes().forEach((node) => {
    if (!node.isVisible()) node.show();
  });
  graph.getEdges().forEach((edge) => {
    if (!edge.isVisible()) edge.show();
  });

  let nodes = [],
    edges = [];

  nodes = graphData.nodes;
  const processRes = processNodesEdges(
    nodes,
    graphData.edges || [],
    width,
    height,
    largeGraphMode,
    edgeLabelVisible,
    isNewGraph,
  );

  edges = processRes.edges;

  graph.changeData({ nodes, edges });

  hideItems(graph);
  graph.getNodes().forEach((node) => {
    node.toFront();
  });

  // layout.instance.stop();
  // force \u9700\u8981\u4F7F\u7528\u4E0D\u540C id \u7684\u5BF9\u8C61\u624D\u80FD\u8FDB\u884C\u5168\u65B0\u7684\u5E03\u5C40\uFF0C\u5426\u5219\u4F1A\u4F7F\u7528\u539F\u6765\u7684\u5F15\u7528\u3002\u56E0\u6B64\u590D\u5236\u4E00\u4EFD\u8282\u70B9\u548C\u8FB9\u4F5C\u4E3A force \u7684\u5E03\u5C40\u6570\u636E
  layout.instance.init({
    nodes: graphData.nodes,
    edges,
  });

  layout.instance.minMovement = 0.0001;
  // layout.instance.getCenter = d => {
  // 	const cachePosition = cachePositions[d.id];
  // 	if (!cachePosition && (d.x || d.y)) return [d.x, d.y, 10];
  // 	else if (cachePosition) return [cachePosition.x, cachePosition.y, 10];
  // 	return [width / 2, height / 2, 10];
  // }
  layout.instance.getMass = (d) => {
    const cachePosition = cachePositions[d.id];
    if (cachePosition) return 5;
    return 1;
  };
  layout.instance.execute();
  return { nodes, edges };
};

const getMixedGraph = (
  aggregatedData,
  originData,
  nodeMap,
  aggregatedNodeMap,
  expandArray,
  collapseArray,
) => {
  let nodes = [],
    edges = [];

  const expandMap = {},
    collapseMap = {};
  expandArray.forEach((expandModel) => {
    expandMap[expandModel.id] = true;
  });
  collapseArray.forEach((collapseModel) => {
    collapseMap[collapseModel.id] = true;
  });

  aggregatedData.clusters.forEach((cluster, i) => {
    if (expandMap[cluster.id]) {
      nodes = nodes.concat(cluster.nodes);
      aggregatedNodeMap[cluster.id].expanded = true;
    } else {
      nodes.push(aggregatedNodeMap[cluster.id]);
      aggregatedNodeMap[cluster.id].expanded = false;
    }
  });
  originData.edges.forEach((edge) => {
    const isSourceInExpandArray = expandMap[nodeMap[edge.source].clusterId];
    const isTargetInExpandArray = expandMap[nodeMap[edge.target].clusterId];
    if (isSourceInExpandArray && isTargetInExpandArray) {
      edges.push(edge);
    } else if (isSourceInExpandArray) {
      const targetClusterId = nodeMap[edge.target].clusterId;
      const vedge = {
        source: edge.source,
        target: targetClusterId,
        id: uniqueId('edge'),
        label: '',
      };
      edges.push(vedge);
    } else if (isTargetInExpandArray) {
      const sourceClusterId = nodeMap[edge.source].clusterId;
      const vedge = {
        target: edge.target,
        source: sourceClusterId,
        id: uniqueId('edge'),
        label: '',
      };
      edges.push(vedge);
    }
  });
  aggregatedData.clusterEdges.forEach((edge) => {
    if (expandMap[edge.source] || expandMap[edge.target]) return;
    else edges.push(edge);
  });
  return { nodes, edges };
};

const getNeighborMixedGraph = (
  centerNodeModel,
  step,
  originData,
  clusteredData,
  currentData,
  nodeMap,
  aggregatedNodeMap,
  maxNeighborNumPerNode = 5,
) => {
  // update the manipulate position for center gravity of the new nodes
  manipulatePosition = { x: centerNodeModel.x, y: centerNodeModel.y };

  // the neighborSubGraph does not include the centerNodeModel. the elements are all generated new nodes and edges
  const neighborSubGraph = generateNeighbors(centerNodeModel, step, maxNeighborNumPerNode);
  // update the origin data
  originData.nodes = originData.nodes.concat(neighborSubGraph.nodes);
  originData.edges = originData.edges.concat(neighborSubGraph.edges);
  // update the origin nodeMap
  neighborSubGraph.nodes.forEach((node) => {
    nodeMap[node.id] = node;
  });
  // update the clusteredData
  const clusterId = centerNodeModel.clusterId;
  clusteredData.clusters.forEach((cluster) => {
    if (cluster.id !== clusterId) return;
    cluster.nodes = cluster.nodes.concat(neighborSubGraph.nodes);
    cluster.sumTot += neighborSubGraph.edges.length;
  });
  // update the count
  aggregatedNodeMap[clusterId].count += neighborSubGraph.nodes.length;

  currentData.nodes = currentData.nodes.concat(neighborSubGraph.nodes);
  currentData.edges = currentData.edges.concat(neighborSubGraph.edges);
  return currentData;
};

const generateNeighbors = (centerNodeModel, step, maxNeighborNumPerNode = 5) => {
  if (step <= 0) return undefined;
  let nodes = [],
    edges = [];
  const clusterId = centerNodeModel.clusterId;
  const centerId = centerNodeModel.id;
  const neighborNum = Math.ceil(Math.random() * maxNeighborNumPerNode);
  for (let i = 0; i < neighborNum; i++) {
    const neighborNode = {
      id: uniqueId('node'),
      clusterId,
      level: 0,
      colorSet: centerNodeModel.colorSet,
    };
    nodes.push(neighborNode);
    const dire = Math.random() > 0.5;
    const source = dire ? centerId : neighborNode.id;
    const target = dire ? neighborNode.id : centerId;
    const neighborEdge = {
      id: uniqueId('edge'),
      source,
      target,
      label: \`\${source}-\${target}\`,
    };
    edges.push(neighborEdge);
    const subNeighbors = generateNeighbors(neighborNode, step - 1, maxNeighborNumPerNode);
    if (subNeighbors) {
      nodes = nodes.concat(subNeighbors.nodes);
      edges = edges.concat(subNeighbors.edges);
    }
  }
  return { nodes, edges };
};

const getExtractNodeMixedGraph = (
  extractNodeData,
  originData,
  nodeMap,
  aggregatedNodeMap,
  currentUnproccessedData,
) => {
  const extractNodeId = extractNodeData.id;
  // const extractNodeClusterId = extractNodeData.clusterId;
  // push to the current rendering data
  currentUnproccessedData.nodes.push(extractNodeData);
  // update the count of aggregatedNodeMap, when to revert?
  // aggregatedNodeMap[extractNodeClusterId].count --;

  // extract the related edges
  originData.edges.forEach((edge) => {
    if (edge.source === extractNodeId) {
      const targetClusterId = nodeMap[edge.target].clusterId;
      if (!aggregatedNodeMap[targetClusterId].expanded) {
        // did not expand, create an virtual edge fromt he extract node to the cluster
        currentUnproccessedData.edges.push({
          id: uniqueId('edge'),
          source: extractNodeId,
          target: targetClusterId,
        });
      } else {
        // if the cluster is already expanded, push the origin edge
        currentUnproccessedData.edges.push(edge);
      }
    } else if (edge.target === extractNodeId) {
      const sourceClusterId = nodeMap[edge.source].clusterId;
      if (!aggregatedNodeMap[sourceClusterId].expanded) {
        // did not expand, create an virtual edge fromt he extract node to the cluster
        currentUnproccessedData.edges.push({
          id: uniqueId('edge'),
          target: extractNodeId,
          source: sourceClusterId,
        });
      } else {
        // if the cluster is already expanded, push the origin edge
        currentUnproccessedData.edges.push(edge);
      }
    }
  });
  return currentUnproccessedData;
};

const examAncestors = (model, expandedArray, length, keepTags) => {
  for (let i = 0; i < length; i++) {
    const expandedNode = expandedArray[i];
    if (!keepTags[i] && model.parentId === expandedNode.id) {
      keepTags[i] = true; // \u9700\u8981\u88AB\u4FDD\u7559
      examAncestors(expandedNode, expandedArray, length, keepTags);
      break;
    }
  }
};

const manageExpandCollapseArray = (nodeNumber, model, collapseArray, expandArray) => {
  manipulatePosition = { x: model.x, y: model.y };

  // \u7EF4\u62A4 expandArray\uFF0C\u82E5\u5F53\u524D\u753B\u5E03\u8282\u70B9\u6570\u9AD8\u4E8E\u4E0A\u9650\uFF0C\u79FB\u51FA expandedArray \u4E2D\u975E model \u7956\u5148\u7684\u8282\u70B9)
  if (nodeNumber > NODE_LIMIT) {
    // \u82E5 keepTags[i] \u4E3A true\uFF0C\u5219 expandedArray \u7684\u7B2C i \u4E2A\u8282\u70B9\u9700\u8981\u88AB\u4FDD\u7559
    const keepTags = {};
    const expandLen = expandArray.length;
    // \u68C0\u67E5 X \u7684\u6240\u6709\u7956\u5148\u5E76\u6807\u8BB0 keepTags
    examAncestors(model, expandArray, expandLen, keepTags);
    // \u5BFB\u627E expandedArray \u4E2D\u7B2C\u4E00\u4E2A keepTags \u4E0D\u4E3A true \u7684\u70B9
    let shiftNodeIdx = -1;
    for (let i = 0; i < expandLen; i++) {
      if (!keepTags[i]) {
        shiftNodeIdx = i;
        break;
      }
    }
    // \u5982\u679C\u6709\u7B26\u5408\u6761\u4EF6\u7684\u8282\u70B9\uFF0C\u5C06\u5176\u4ECE expandedArray \u4E2D\u79FB\u9664
    if (shiftNodeIdx !== -1) {
      let foundNode = expandArray[shiftNodeIdx];
      if (foundNode.level === 2) {
        let foundLevel1 = false;
        // \u627E\u5230 expandedArray \u4E2D parentId = foundNode.id \u4E14 level = 1 \u7684\u7B2C\u4E00\u4E2A\u8282\u70B9
        for (let i = 0; i < expandLen; i++) {
          const eNode = expandArray[i];
          if (eNode.parentId === foundNode.id && eNode.level === 1) {
            foundLevel1 = true;
            foundNode = eNode;
            expandArray.splice(i, 1);
            break;
          }
        }
        // \u82E5\u672A\u627E\u5230\uFF0C\u5219 foundNode \u4E0D\u53D8, \u76F4\u63A5\u5220\u53BB foundNode
        if (!foundLevel1) expandArray.splice(shiftNodeIdx, 1);
      } else {
        // \u76F4\u63A5\u5220\u53BB foundNode
        expandArray.splice(shiftNodeIdx, 1);
      }
      // const removedNode = expandedArray.splice(shiftNodeIdx, 1); // splice returns an array
      const idSplits = foundNode.id.split('-');
      let collapseNodeId;
      // \u53BB\u6389\u6700\u540E\u4E00\u4E2A\u540E\u7F00
      for (let i = 0; i < idSplits.length - 1; i++) {
        const str = idSplits[i];
        if (collapseNodeId) collapseNodeId = \`\${collapseNodeId}-\${str}\`;
        else collapseNodeId = str;
      }
      const collapseNode = {
        id: collapseNodeId,
        parentId: foundNode.id,
        level: foundNode.level - 1,
      };
      collapseArray.push(collapseNode);
    }
  }

  const currentNode = {
    id: model.id,
    level: model.level,
    parentId: model.parentId,
  };

  // \u52A0\u5165\u5F53\u524D\u9700\u8981\u5C55\u5F00\u7684\u8282\u70B9
  expandArray.push(currentNode);

  graph.get('canvas').setCursor('default');
  return { expandArray, collapseArray };
};

const cacheNodePositions = (nodes) => {
  const positionMap = {};
  const nodeLength = nodes.length;
  for (let i = 0; i < nodeLength; i++) {
    const node = nodes[i].getModel();
    positionMap[node.id] = {
      x: node.x,
      y: node.y,
      level: node.level,
    };
  }
  return positionMap;
};

const stopLayout = () => {
  layout.instance.stop();
};

const bindListener = (graph) => {
  graph.on('keydown', (evt) => {
    const code = evt.key;
    if (!code) {
      return;
    }
    if (code.toLowerCase() === 'shift') {
      shiftKeydown = true;
    } else {
      shiftKeydown = false;
    }
  });
  graph.on('keyup', (evt) => {
    const code = evt.key;
    if (!code) {
      return;
    }
    if (code.toLowerCase() === 'shift') {
      shiftKeydown = false;
    }
  });
  graph.on('node:mouseenter', (evt) => {
    const { item } = evt;
    const model = item.getModel();
    const currentLabel = model.label;
    model.oriFontSize = model.labelCfg.style.fontSize;
    item.update({
      label: model.oriLabel,
    });
    model.oriLabel = currentLabel;
    graph.setItemState(item, 'hover', true);
    item.toFront();
  });

  graph.on('node:mouseleave', (evt) => {
    const { item } = evt;
    const model = item.getModel();
    const currentLabel = model.label;
    item.update({
      label: model.oriLabel,
    });
    model.oriLabel = currentLabel;
    graph.setItemState(item, 'hover', false);
  });

  graph.on('edge:mouseenter', (evt) => {
    const { item } = evt;
    const model = item.getModel();
    const currentLabel = model.label;
    item.update({
      label: model.oriLabel,
    });
    model.oriLabel = currentLabel;
    item.toFront();
    item.getSource().toFront();
    item.getTarget().toFront();
  });

  graph.on('edge:mouseleave', (evt) => {
    const { item } = evt;
    const model = item.getModel();
    const currentLabel = model.label;
    item.update({
      label: model.oriLabel,
    });
    model.oriLabel = currentLabel;
  });
  // click node to show the detail drawer
  graph.on('node:click', (evt) => {
    stopLayout();
    if (!shiftKeydown) clearFocusItemState(graph);
    else clearFocusEdgeState(graph);
    const { item } = evt;

    // highlight the clicked node, it is down by click-select
    graph.setItemState(item, 'focus', true);

    if (!shiftKeydown) {
      // \u5C06\u76F8\u5173\u8FB9\u4E5F\u9AD8\u4EAE
      const relatedEdges = item.getEdges();
      relatedEdges.forEach((edge) => {
        graph.setItemState(edge, 'focus', true);
      });
    }
  });

  // click edge to show the detail of integrated edge drawer
  graph.on('edge:click', (evt) => {
    stopLayout();
    if (!shiftKeydown) clearFocusItemState(graph);
    const { item } = evt;
    // highlight the clicked edge
    graph.setItemState(item, 'focus', true);
  });

  // click canvas to cancel all the focus state
  graph.on('canvas:click', (evt) => {
    clearFocusItemState(graph);
    console.log(graph.getGroup(), graph.getGroup().getBBox(), graph.getGroup().getCanvasBBox());
  });
};

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')
  .then((res) => res.json())
  .then((data) => {
    const container = document.getElementById('container');
    const descriptionDiv = document.createElement('div');
    descriptionDiv.innerHTML = \`<a href='/en/largegraph' target='_blanck'>Click\u3010HERE\u3011To Full Demo</a>
      <br/>
      <a href='/zh/largegraph' target='_blanck'>\u70B9\u51FB\u3010\u8FD9\u91CC\u3011\u8FDB\u5165\u5B8C\u6574 Demo</a>\`;
    descriptionDiv.style.textAlign = 'right';
    descriptionDiv.style.color = '#fff';
    descriptionDiv.style.position = 'absolute';
    descriptionDiv.style.right = '32px';
    descriptionDiv.style.marginTop = '8px';
    container.appendChild(descriptionDiv);

    container.style.backgroundColor = '#2b2f33';

    CANVAS_WIDTH = container.scrollWidth;
    CANVAS_HEIGHT = (container.scrollHeight || 500) - 30;

    nodeMap = {};
    const clusteredData = louvain(data, false, 'weight');
    const aggregatedData = { nodes: [], edges: [] };
    clusteredData.clusters.forEach((cluster, i) => {
      cluster.nodes.forEach((node) => {
        node.level = 0;
        node.label = node.id;
        node.type = '';
        node.colorSet = colorSets[i];
        nodeMap[node.id] = node;
      });
      const cnode = {
        id: cluster.id,
        type: 'aggregated-node',
        count: cluster.nodes.length,
        level: 1,
        label: cluster.id,
        colorSet: colorSets[i],
        idx: i,
      };
      aggregatedNodeMap[cluster.id] = cnode;
      aggregatedData.nodes.push(cnode);
    });
    clusteredData.clusterEdges.forEach((clusterEdge) => {
      const cedge = {
        ...clusterEdge,
        size: Math.log(clusterEdge.count),
        label: '',
        id: uniqueId('edge'),
      };
      if (cedge.source === cedge.target) {
        cedge.type = 'loop';
        cedge.loopCfg = {
          dist: 20,
        };
      } else cedge.type = 'line';
      aggregatedData.edges.push(cedge);
    });

    data.edges.forEach((edge) => {
      edge.label = \`\${edge.source}-\${edge.target}\`;
      edge.id = uniqueId('edge');
    });

    currentUnproccessedData = aggregatedData;

    const { edges: processedEdges } = processNodesEdges(
      currentUnproccessedData.nodes,
      currentUnproccessedData.edges,
      CANVAS_WIDTH,
      CANVAS_HEIGHT,
      largeGraphMode,
      true,
      true,
    );

    const contextMenu = new G6.Menu({
      shouldBegin(evt) {
        if (evt.target && evt.target.isCanvas && evt.target.isCanvas()) return true;
        if (evt.item) return true;
        return false;
      },
      getContent(evt) {
        const { item } = evt;
        if (evt.target && evt.target.isCanvas && evt.target.isCanvas()) {
          return \`<ul>
          <li id='show'>Show all Hidden Items</li>
          <li id='collapseAll'>Collapse all Clusters</li>
        </ul>\`;
        } else if (!item) return;
        const itemType = item.getType();
        const model = item.getModel();
        if (itemType && model) {
          if (itemType === 'node') {
            if (model.level !== 0) {
              return \`<ul>
              <li id='expand'>Expand the Cluster</li>
              <li id='hide'>Hide the Node</li>
            </ul>\`;
            } else {
              return \`<ul>
              <li id='collapse'>Collapse the Cluster</li>
              <li id='neighbor-1'>Find 1-degree Neighbors</li>
              <li id='neighbor-2'>Find 2-degree Neighbors</li>
              <li id='neighbor-3'>Find 3-degree Neighbors</li>
              <li id='hide'>Hide the Node</li>
            </ul>\`;
            }
          } else {
            return \`<ul>
            <li id='hide'>Hide the Edge</li>
          </ul>\`;
          }
        }
      },
      handleMenuClick: (target, item) => {
        const model = item && item.getModel();
        const liIdStrs = target.id.split('-');
        let mixedGraphData;
        switch (liIdStrs[0]) {
          case 'hide':
            graph.hideItem(item);
            hiddenItemIds.push(model.id);
            break;
          case 'expand':
            const newArray = manageExpandCollapseArray(
              graph.getNodes().length,
              model,
              collapseArray,
              expandArray,
            );
            expandArray = newArray.expandArray;
            collapseArray = newArray.collapseArray;
            mixedGraphData = getMixedGraph(
              clusteredData,
              data,
              nodeMap,
              aggregatedNodeMap,
              expandArray,
              collapseArray,
            );
            break;
          case 'collapse':
            const aggregatedNode = aggregatedNodeMap[model.clusterId];
            manipulatePosition = { x: aggregatedNode.x, y: aggregatedNode.y };
            collapseArray.push(aggregatedNode);
            for (let i = 0; i < expandArray.length; i++) {
              if (expandArray[i].id === model.clusterId) {
                expandArray.splice(i, 1);
                break;
              }
            }
            mixedGraphData = getMixedGraph(
              clusteredData,
              data,
              nodeMap,
              aggregatedNodeMap,
              expandArray,
              collapseArray,
            );
            break;
          case 'collapseAll':
            expandArray = [];
            collapseArray = [];
            mixedGraphData = getMixedGraph(
              clusteredData,
              data,
              nodeMap,
              aggregatedNodeMap,
              expandArray,
              collapseArray,
            );
            break;
          case 'neighbor':
            const expandNeighborSteps = parseInt(liIdStrs[1]);
            mixedGraphData = getNeighborMixedGraph(
              model,
              expandNeighborSteps,
              data,
              clusteredData,
              currentUnproccessedData,
              nodeMap,
              aggregatedNodeMap,
              10,
            );
            break;
          case 'show':
            showItems(graph);
            break;
          default:
            break;
        }
        if (mixedGraphData) {
          cachePositions = cacheNodePositions(graph.getNodes());
          currentUnproccessedData = mixedGraphData;
          handleRefreshGraph(
            graph,
            currentUnproccessedData,
            CANVAS_WIDTH,
            CANVAS_HEIGHT,
            largeGraphMode,
            true,
            false,
          );
        }
      },
      // offsetX and offsetY include the padding of the parent container
      // \u9700\u8981\u52A0\u4E0A\u7236\u7EA7\u5BB9\u5668\u7684 padding-left 16 \u4E0E\u81EA\u8EAB\u504F\u79FB\u91CF 10
      offsetX: 16 + 10,
      // \u9700\u8981\u52A0\u4E0A\u7236\u7EA7\u5BB9\u5668\u7684 padding-top 24 \u3001\u753B\u5E03\u5144\u5F1F\u5143\u7D20\u9AD8\u5EA6\u3001\u4E0E\u81EA\u8EAB\u504F\u79FB\u91CF 10
      offsetY: 0,
      // the types of items that allow the menu show up
      // \u5728\u54EA\u4E9B\u7C7B\u578B\u7684\u5143\u7D20\u4E0A\u54CD\u5E94
      itemTypes: ['node', 'edge', 'canvas'],
    });

    graph = new G6.Graph({
      container: 'container',
      width: CANVAS_WIDTH,
      height: CANVAS_HEIGHT,
      linkCenter: true,
      minZoom: 0.1,
      groupByTypes: false,
      modes: {
        default: [
          {
            type: 'drag-canvas',
            enableOptimize: true,
          },
          {
            type: 'zoom-canvas',
            enableOptimize: true,
            optimizeZoom: 0.01,
          },
          'drag-node',
          'shortcuts-call',
        ],
        lassoSelect: [
          {
            type: 'zoom-canvas',
            enableOptimize: true,
            optimizeZoom: 0.01,
          },
          {
            type: 'lasso-select',
            selectedState: 'focus',
            trigger: 'drag',
          },
        ],
        fisheyeMode: [],
      },
      defaultNode: {
        type: 'aggregated-node',
        size: DEFAULTNODESIZE,
      },
      plugins: [contextMenu],
    });

    graph.get('canvas').set('localRefresh', false);

    const layoutConfig = getForceLayoutConfig(graph, largeGraphMode);
    layoutConfig.center = [CANVAS_WIDTH / 2, CANVAS_HEIGHT / 2];
    layout.instance = new G6.Layout['gForce'](layoutConfig);
    layout.instance.init({
      nodes: currentUnproccessedData.nodes,
      edges: processedEdges,
    });
    layout.instance.execute();

    bindListener(graph);
    graph.data({ nodes: aggregatedData.nodes, edges: processedEdges });
    graph.render();
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    const container = document.getElementById('container');
    if (!container) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);
  };
`,title:{zh:"\u5927\u89C4\u6A21\u56FE\u4E0B\u94BB\u5F0F\u63A2\u7D22",en:"Large Graph Exploration"},filename:"largeGraph.js",isNew:!1},{id:"christmasBubbles",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*yRU1QZbcQN4AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

// \u5B9E\u9645\u5F00\u53D1\u4E2D\u628A window.AntVUtil \u6362\u6210\u4ECE @antv/util \u5F15\u5165\u7684\u76F8\u5173\u6A21\u5757
// replace window.AntVUtil.isObject with
// import { mix } from '@antv/util';
const { mix } = window.AntVUtil;

let showNodes = [];
let showEdges = [];
let curShowNodes = [];
let curShowEdges = [];
let nodes = [];
let edges = [];
let nodeMap = new Map();
let edgesMap = new Map();
let curShowNodesMap = new Map();
let highlighting = false;
let currentFocus;
const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;

const LIMIT_OVERFLOW_WIDTH = width;
const LIMIT_OVERFLOW_HEIGHT = height;

const mapNodeSizeAndFontSize = (nodes, propertyName, visualRange) => {
  let minp = 9999999999;
  let maxp = -9999999999;
  nodes.forEach((node) => {
    const propertyValue = node[propertyName] > 5000 ? 5000 : node[propertyName];
    minp = propertyValue < minp ? propertyValue : minp;
    maxp = propertyValue > maxp ? propertyValue : maxp;
  });
  const rangepLength = maxp - minp;
  const rangevLength = visualRange[1] - visualRange[0];
  nodes.forEach((node) => {
    const propertyValue = node[propertyName] > 5000 ? 5000 : node[propertyName];
    node.size = ((propertyValue - minp) / rangepLength) * rangevLength + visualRange[0];
    if (node.labelCfg && node.labelCfg.style) {
      const textLength = node.label.length;
      let fontSize = (1.3 * node.size) / textLength;
      if (fontSize < 11) fontSize = 11;
      node.labelCfg.style.fontSize = fontSize;
    }
  });
};

const Colors = { noun: '#588c73', adj: '#f2e394', v: '#d96459', adv: '#f2ae72' };

let graph;
const layoutCfg = {
  type: 'force',
  nodeSize: (d) => {
    return d.size / 2 + 5;
  },
  nodeStrength: 2500,
  collideStrength: 0.8,
  alphaDecay: 0.01,
  preventOverlap: true,
  onTick: () => {
    const nodeItems = graph.getNodes();
    const height = graph.get('height');
    const width = graph.get('width');
    const padding = 10;
    nodeItems.forEach((item) => {
      const model = item.getModel();
      if (model.x > width - padding) model.x = width - padding;
      else if (model.x < padding) model.x = padding;

      if (model.y > height - padding) model.y = height - padding;
      else if (model.y < padding) model.y = padding;
    });
  },
};

// G6.registerBehavior('double-finger-drag-canvas', {
//   getEvents: function getEvents() {
//     return {
//       wheel: 'onWheel'
//     };
//   },

//   onWheel: ev => {
//     if (ev.ctrlKey) {
//       const canvas = graph.get('canvas');
//       const point = canvas.getPointByClient(ev.clientX, ev.clientY);
//       let ratio = graph.getZoom();
//       if (ev.wheelDelta > 0) {
//         ratio = ratio + ratio * 0.05;
//       } else {
//         ratio = ratio - ratio * 0.05;
//       }
//       graph.zoomTo(ratio, {
//         x: point.x,
//         y: point.y
//       });
//     } else {
//       const x = ev.deltaX || ev.movementX;
//       const y = ev.deltaY || ev.movementY;
//       translate(x, y);
//     }
//     ev.preventDefault();
//   }
// });

G6.registerNode(
  'bubble',
  {
    drawShape(cfg, group) {
      const self = this;
      const r = cfg.size / 2;
      // a circle by path
      const path = [
        ['M', -r, 0],
        ['C', -r, r / 2, -r / 2, r, 0, r],
        ['C', r / 2, r, r, r / 2, r, 0],
        ['C', r, -r / 2, r / 2, -r, 0, -r],
        ['C', -r / 2, -r, -r, -r / 2, -r, 0],
        ['Z'],
      ];
      const keyShape = group.addShape('path', {
        attrs: {
          x: 0,
          y: 0,
          path,
          fill: cfg.color || 'steelblue',
        },
        // must be assigned in G6 3.3 and later versions. it can be any value you want
        name: 'path-shape',
      });

      const mask = group.addShape('path', {
        attrs: {
          x: 0,
          y: 0,
          path,
          opacity: 0.25,
          fill: cfg.color || 'steelblue',
          shadowColor: cfg.color, // cfg.color.split(' ')[2].substr(2),
          shadowBlur: 40,
          shadowOffsetX: 0,
          shadowOffsetY: 30,
        },
        // must be assigned in G6 3.3 and later versions. it can be any value you want
        name: 'mask-shape',
      });

      const spNum = 10; // split points number
      const directions = [],
        rs = [];
      self.changeDirections(spNum, directions);
      for (let i = 0; i < spNum; i++) {
        const rr = r + directions[i] * ((Math.random() * r) / 1000); // +-r/6, the sign according to the directions
        if (rs[i] < 0.97 * r) rs[i] = 0.97 * r;
        else if (rs[i] > 1.03 * r) rs[i] = 1.03 * r;
        rs.push(rr);
      }
      keyShape.animate(
        () => {
          const path = self.getBubblePath(r, spNum, directions, rs);
          return { path };
        },
        {
          repeat: true,
          duration: 1000,
        },
      );

      const directions2 = [],
        rs2 = [];
      self.changeDirections(spNum, directions2);
      for (let i = 0; i < spNum; i++) {
        const rr = r + directions2[i] * ((Math.random() * r) / 1000); // +-r/6, the sign according to the directions
        if (rs2[i] < 0.97 * r) rs2[i] = 0.97 * r;
        else if (rs2[i] > 1.03 * r) rs2[i] = 1.03 * r;
        rs2.push(rr);
      }
      mask.animate(
        () => {
          const path = self.getBubblePath(r, spNum, directions2, rs2);
          return { path };
        },
        {
          repeat: true,
          duration: 1000,
        },
      );
      return keyShape;
    },
    changeDirections(num, directions) {
      for (let i = 0; i < num; i++) {
        if (!directions[i]) {
          const rand = Math.random();
          const dire = rand > 0.5 ? 1 : -1;
          directions.push(dire);
        } else {
          directions[i] = -1 * directions[i];
        }
      }
      return directions;
    },
    getBubblePath(r, spNum, directions, rs) {
      const path = [];
      const cpNum = spNum * 2; // control points number
      const unitAngle = (Math.PI * 2) / spNum; // base angle for split points
      let angleSum = 0;
      const sps = [];
      const cps = [];
      for (let i = 0; i < spNum; i++) {
        const speed = 0.001 * Math.random();
        rs[i] = rs[i] + directions[i] * speed * r; // +-r/6, the sign according to the directions
        if (rs[i] < 0.97 * r) {
          rs[i] = 0.97 * r;
          directions[i] = -1 * directions[i];
        } else if (rs[i] > 1.03 * r) {
          rs[i] = 1.03 * r;
          directions[i] = -1 * directions[i];
        }
        const spX = rs[i] * Math.cos(angleSum);
        const spY = rs[i] * Math.sin(angleSum);
        sps.push({ x: spX, y: spY });
        for (let j = 0; j < 2; j++) {
          const cpAngleRand = unitAngle / 3;
          const cpR = rs[i] / Math.cos(cpAngleRand);
          const sign = j === 0 ? -1 : 1;
          const x = cpR * Math.cos(angleSum + sign * cpAngleRand);
          const y = cpR * Math.sin(angleSum + sign * cpAngleRand);
          cps.push({ x, y });
        }
        angleSum += unitAngle;
      }
      path.push(['M', sps[0].x, sps[0].y]);
      for (let i = 1; i < spNum; i++) {
        path.push([
          'C',
          cps[2 * i - 1].x,
          cps[2 * i - 1].y,
          cps[2 * i].x,
          cps[2 * i].y,
          sps[i].x,
          sps[i].y,
        ]);
      }
      path.push(['C', cps[cpNum - 1].x, cps[cpNum - 1].y, cps[0].x, cps[0].y, sps[0].x, sps[0].y]);
      path.push(['Z']);
      return path;
    },
  },
  'single-node',
);

G6.registerNode(
  'animate-circle',
  {
    setState(name, value, item) {
      const shape = item.get('keyShape');
      const label = shape.get('parent').get('children')[1];
      if (name === 'disappearing' && value) {
        shape.animate(
          (ratio) => {
            return {
              opacity: 1 - ratio,
              r: shape.attr('r') * (1 - ratio),
            };
          },
          {
            duration: 200,
          },
        );
        label.animate(
          (ratio) => {
            return {
              opacity: 1 - ratio,
            };
          },
          {
            duration: 500,
          },
        );
      } else if (name === 'appearing' && value) {
        const r = item.getModel().size / 2;
        shape.animate(
          (ratio) => {
            return {
              opacity: ratio,
              r: r * ratio,
              fill: shape.attr('fill'),
            };
          },
          {
            duration: 300,
          },
        );
        label.animate(
          (ratio) => {
            return {
              opacity: ratio,
            };
          },
          {
            duration: 500,
          },
        );
      }
    },
  },
  'circle',
);

G6.registerEdge(
  'animate-line',
  {
    drawShape(cfg, group) {
      const self = this;
      let shapeStyle = self.getShapeStyle(cfg);
      shapeStyle = mix(shapeStyle, {
        opacity: 0,
        strokeOpacity: 0,
      });
      const keyShape = group.addShape('path', {
        attrs: shapeStyle,
        // must be assigned in G6 3.3 and later versions. it can be any value you want
        name: 'path-shape',
      });
      return keyShape;
    },
    afterDraw(cfg, group) {
      const shape = group.get('children')[0];
      shape.animate(
        (ratio) => {
          const opacity = ratio * cfg.style.opacity;
          const strokeOpacity = ratio * cfg.style.strokeOpacity;
          return {
            opacity: ratio || opacity,
            strokeOpacity: ratio || strokeOpacity,
          };
        },
        {
          duration: 300,
        },
      );
    },
    setState(name, value, item) {
      const shape = item.get('keyShape');
      if (name === 'disappearing' && value) {
        shape.animate(
          (ratio) => {
            return {
              opacity: 1 - ratio,
              strokeOpacity: 1 - ratio,
            };
          },
          {
            duration: 200,
          },
        );
      }
    },
  },
  'line',
);

graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  layout: layoutCfg,
  modes: {
    default: ['drag-canvas'],
  },
  defaultNode: {
    type: 'bubble',
    size: 30,
    labelCfg: {
      position: 'center',
      style: {
        fill: 'white',
        fontStyle: 'bold',
      },
    },
  },
  defaultEdge: {
    color: '#888',
    type: 'animate-line',
  },
});

function translate(x, y) {
  let moveX = x;
  let moveY = y;

  /* \u83B7\u5F97\u5F53\u524D\u504F\u79FB\u91CF*/
  const group = graph.get('group');
  const bbox = group.getBBox();
  const leftTopPoint = graph.getCanvasByPoint(bbox.minX, bbox.minY);
  const rightBottomPoint = graph.getCanvasByPoint(bbox.maxX, bbox.maxY);
  /* \u5982\u679C x \u8F74\u5728\u533A\u57DF\u5185\uFF0C\u4E0D\u5141\u8BB8\u5DE6\u53F3\u8D85\u8FC7100 */
  if (x < 0 && leftTopPoint.x - x > LIMIT_OVERFLOW_WIDTH) {
    moveX = 0;
  }
  if (x > 0 && rightBottomPoint.x - x < width - LIMIT_OVERFLOW_WIDTH) {
    moveX = 0;
  }

  if (y < 0 && leftTopPoint.y - y > LIMIT_OVERFLOW_HEIGHT) {
    moveY = 0;
  }
  if (y > 0 && rightBottomPoint.y - y < height - LIMIT_OVERFLOW_HEIGHT) {
    moveY = 0;
  }
  graph.translate(-moveX, -moveY);
}

function refreshDragedNodePosition(e) {
  const model = e.item.get('model');
  model.fx = e.x;
  model.fy = e.y;
}
graph.on('node:dragstart', (e) => {
  graph.layout();
  refreshDragedNodePosition(e);
});
graph.on('node:drag', (e) => {
  refreshDragedNodePosition(e);
});
graph.on('node:dragend', (e) => {
  e.item.get('model').fx = null;
  e.item.get('model').fy = null;
});

const loadData = (data) => {
  const layoutController = graph.get('layoutController');
  layoutController.layoutCfg.nodeStrength = 30;
  layoutController.layoutCfg.collideStrength = 0.8;
  layoutController.layoutCfg.alphaDecay = 0.01;
  nodes = data.nodes;
  edges = data.edges;

  showNodes = [];
  showEdges = [];
  nodeMap = new Map();
  edgesMap = new Map();
  // find the roots
  nodes.forEach((node) => {
    if (!node.neighbor) {
      node.label = node.text;
      node.color = Colors[node.type];
      node.style = {
        fill: Colors[node.type],
        lineWidth: 0,
      };
      let labelColor = '#fff';
      if (node.type === 'adj') {
        labelColor = Colors.noun;
      }
      node.labelCfg = {
        style: {
          fontSize: 15,
          fill: labelColor,
          fontWeight: 300,
        },
      };
      node.x = Math.random() * 800;
      node.y = Math.random() * 800;
      showNodes.push(node);
    }
    nodeMap.set(node.id, node);
  });

  mapNodeSizeAndFontSize(showNodes, 'count', [40, 120]);
  showNodes.forEach((snode) => {
    if (snode.size < 80) {
      snode.type = 'circle';
    }
  });

  edges.forEach((edge) => {
    // map the id
    edge.id = \`\${edge.source}-\${edge.target}\`;
    edge.style = {
      lineWidth: 0.5,
      opacity: 1,
      strokeOpacity: 1,
    };
    edgesMap.set(edge.id, edge);
  });
  graph.data({
    nodes: showNodes,
    edges: showEdges,
  });
  graph.render();
};

fetch('https://gw.alipayobjects.com/os/basement_prod/0a749386-8593-44a2-a132-81dfa1fc3158.json')
  .then((res) => res.json())
  .then((data) => {
    loadData(data);
  });

// click root to expand
graph.on('node:click', (e) => {
  curShowNodes = [];
  curShowEdges = [];
  const item = e.item;
  const model = item.getModel();
  if (model.neighbor) {
    return;
  }
  // if clicked a root, hide unrelated items and show the related items
  if (!model.neighbor) {
    const layoutController = graph.get('layoutController');
    const forceLayout = layoutController.layoutMethods[0];
    forceLayout.forceSimulation.stop();
    // light the level 0 nodes
    showNodes.forEach((snode) => {
      if (snode.x < 0.5 * width) {
        snode.x = 300;
      } else {
        snode.x = width - 300;
      }
    });
    model.x = width / 2;
    model.y = height / 2;
    // animatively hide the items which are going to disappear
    if (curShowEdges.length) {
      curShowEdges.forEach((csedge) => {
        const item = graph.findById(csedge.id);
        item && graph.setItemState(item, 'disappearing', true);
      });
    }
    curShowNodes.forEach((csnode) => {
      const item = graph.findById(csnode.id);
      item && graph.setItemState(item, 'disappearing', true);
    });
    graph.positionsAnimate();

    // reset curShowNodes nad curShowEdges
    curShowNodes = [];
    curShowEdges = [];

    // click on the same node which is the current focus node, hide the small nodes, change the layout parameters to roots view
    if (currentFocus && currentFocus.id === model.id) {
      currentFocus = undefined;
      layoutController.layoutCfg.nodeStrength = 100;
      layoutController.layoutCfg.collideStrength = 0.8;
      layoutController.layoutCfg.alphaDecay = 0.01;
    } else {
      // click other focus node, hide the current small nodes and show the related nodes
      currentFocus = model;
      // change data after the original items disappearing
      const layoutController = graph.get('layoutController');
      layoutController.layoutCfg.nodeStrength = () => {
        return -80;
      };
      layoutController.layoutCfg.collideStrength = 0.2;
      layoutController.layoutCfg.linkDistance = (d) => {
        if (!d.source.neighbor && !d.target.neighbor) return 150;
        return 80;
      };
      layoutController.layoutCfg.edgeStrength = () => {
        return 2;
      };

      curShowNodesMap = new Map();
      // find the nodes which are the descendants of clicked model
      edges.forEach((edge) => {
        let nodeId = '';
        let node;
        if (edge.source === model.id) {
          nodeId = edge.target;
        } else if (edge.target === model.id) {
          nodeId = edge.source;
        } else {
          return;
        }
        nodes.forEach((tnode) => {
          if (tnode.id === nodeId) {
            node = tnode;
          }
        });
        if (!node) return;
        const randomAngle = Math.random() * 2 * Math.PI;
        node.x = model.x + (Math.cos(randomAngle) * model.size) / 2 + 10;
        node.y = model.y + (Math.sin(randomAngle) * model.size) / 2 + 10;
        // const dist = (model.x - node.x) * (model.x - node.x) + (model.y - node.y) * (model.y - node.y);

        if (!node.style) node.style = {};
        node.style.lineWidth = 0;
        node.style.opacity = 1;
        if (node.neighbor) {
          node.type = 'animate-circle';
          node.label = node.text;
          const color = model.style.fill;
          node.color = color;
          node.style.fill = '#fff';
          node.style.lineWidth = 1;
          node.size = 30;
          node.labelCfg = {
            style: {
              fontSize: 13,
              lineHeight: 19,
              fill: '#697B8C',
            },
            position: 'center',
          };
        }
        curShowNodes.push(node);
        curShowNodesMap.set(node.id, node);

        // add the edge connect from model to node which exists in edges
        const edgeId = \`\${model.id}-\${node.id}\`;
        const medge = edgesMap.get(edgeId);
        if (medge) {
          medge.color = model.color;
          curShowEdges.push(medge);
        }
      });

      edges.forEach((edge) => {
        if (edge.source === model.id || edge.target === model.id) {
          curShowEdges.push(edge);
        }
      });
    }
    setTimeout(() => {
      graph.changeData({
        nodes: showNodes.concat(curShowNodes),
        edges: showEdges.concat(curShowEdges),
      });
      const nodeItems = graph.getNodes();
      const edgeItems = graph.getEdges();
      edgeItems.forEach((item) => {
        graph.clearItemStates(item);
      });
      nodeItems.forEach((item) => {
        graph.clearItemStates(item);
        graph.setItemState(item, 'appearing', true);
      });
    }, 400);
  }
});
graph.on('canvas:click', () => {
  currentFocus = undefined;
  const forceLayout = graph.get('layoutController').layoutMethods[0];
  forceLayout.forceSimulation.stop();
  const nodeItems = graph.getNodes();
  const edgeItems = graph.getEdges();
  if (highlighting) {
    highlighting = false;
  } else {
    nodeItems.forEach((item) => {
      const model = item.getModel();
      if (model.neighbor) {
        graph.setItemState(item, 'disappearing', true);
      }
    });
    edgeItems.forEach((item) => {
      graph.setItemState(item, 'disappearing', true);
    });
    curShowNodes = [];
    curShowEdges = [];
    setTimeout(() => {
      const layoutController = graph.get('layoutController');
      layoutController.layoutCfg.nodeStrength = 100;
      layoutController.layoutCfg.collideStrength = 0.8;
      layoutController.layoutCfg.alphaDecay = 0.01;

      graph.changeData({
        nodes: showNodes,
        edges: showEdges,
      });
    }, 400);
  }
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u5723\u8BDE\u63A8\u6587\u53EF\u89C6\u5316",en:"Christmas Bubbles"},filename:"christmasBubbles.js",isNew:!1},{id:"edgeBundling",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*z9iXQq_kcrYAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

/**
 * \u8BE5\u793A\u4F8B\u6F14\u793A\u8FB9\u7ED1\u5B9A
 * by \u5341\u543E
 */

insertCss(\`
  .g6-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
\`);

const lightBlue = 'rgb(119, 243, 252)';
const llightBlue16 = '#C8FDFC';
const lightOrange = 'rgb(230, 100, 64)';
const llightOrange16 = '#FFAA86';

fetch('https://gw.alipayobjects.com/os/basement_prod/7ba82250-8367-4351-82b2-d48604cd2261.json')
  .then((res) => res.json())
  .then((data) => {
    const nodes = data.nodes;
    const edges = data.edges;
    nodes.forEach((n) => {
      n.y = -n.y;
      n.degree = 0;
      n.inDegree = 0;
      n.outDegree = 0;
    });
    // compute the degree of each node
    const nodeIdMap = new Map();
    nodes.forEach((node) => {
      nodeIdMap.set(node.id, node);
    });
    edges.forEach((e) => {
      const source = nodeIdMap.get(e.source);
      const target = nodeIdMap.get(e.target);
      source.outDegree++;
      target.inDegree++;
      source.degree++;
      target.degree++;
      if (e.sytle === undefined) e.style = {};
      e.style.lineWidth = 0.7;
      e.style.strokeOpacity = 0.1;
      e.style.stroke = \`l(0) 0:\${llightOrange16} 1:\${llightBlue16}\`;
      if (nodeIdMap.get(e.source).x < nodeIdMap.get(e.target).x) {
        e.style.stroke = \`l(0) 0:\${llightBlue16} 1:\${llightOrange16}\`;
      }
    });
    let maxDegree = -9999;
    let minDegree = 9999;
    nodes.forEach((n) => {
      if (maxDegree < n.degree) maxDegree = n.degree;
      if (minDegree > n.degree) minDegree = n.degree;
    });
    const sizeRange = [1, 20];
    const sizeDataRange = [minDegree, maxDegree];
    scaleNodeProp(nodes, 'size', 'degree', sizeDataRange, sizeRange);

    // customize the node
    G6.registerNode(
      'pie-node',
      {
        draw: (cfg, group) => {
          const radius = cfg.size / 2;
          const inPercentage = cfg.inDegree / cfg.degree;
          const inAngle = inPercentage * Math.PI * 2;
          const inArcEnd = [radius * Math.cos(inAngle), radius * Math.sin(inAngle)];
          let isInBigArc = 1;
          let isOutBigArc = 0;
          if (inAngle > Math.PI) {
            isInBigArc = 0;
            isOutBigArc = 1;
          }
          const fanIn = group.addShape('path', {
            attrs: {
              path: [
                ['M', radius, 0],
                ['A', radius, radius, 0, isInBigArc, 0, inArcEnd[0], inArcEnd[1]],
                ['L', 0, 0],
                ['Z'],
              ],
              stroke: lightOrange,
              lineWidth: 0,
              fill: lightOrange,
            },
            name: 'fan-in-path',
          });

          group.addShape('path', {
            attrs: {
              path: [
                ['M', inArcEnd[0], inArcEnd[1]],
                ['A', radius, radius, 0, isOutBigArc, 0, radius, 0],
                ['L', 0, 0],
                ['Z'],
              ],
              stroke: lightBlue,
              lineWidth: 0,
              fill: lightBlue,
            },
            name: 'fan-out-path',
          });
          return fanIn;
        },
      },
      'single-node',
    );

    const edgeBundling = new G6.Bundling({
      bundleThreshold: 0.6,
      K: 100,
    });

    const container = document.getElementById('container');
    container.style.background = '#000';
    const width = container.scrollWidth;
    const height = container.scrollHeight || 500;
    const graph = new G6.Graph({
      container: 'container',
      width,
      height,
      plugins: [edgeBundling],
      fitView: true,
      defaultNode: {
        type: 'pie-node',
        size: 3,
        color: 'steelblue',
        style: {
          lineWidth: 0,
          fill: 'steelblue',
        },
      },
      modes: {
        default: [
          'drag-canvas',
          'zoom-canvas',
          {
            type: 'tooltip',
            formatText(model) {
              const text = \`Longitude: \${model.lon} \\n Latitude: \${model.lat}\`;
              return text;
            },
            shouldUpdate: (e) => true,
          },
        ],
      },
    });

    edgeBundling.bundling(data);
    graph.data(data);
    graph.render();
    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });

function scaleNodeProp(nodes, propName, refPropName, dataRange, outRange) {
  const outLength = outRange[1] - outRange[0];
  const dataLength = dataRange[1] - dataRange[0];
  nodes.forEach((n) => {
    n[propName] = ((n[refPropName] - dataRange[0]) * outLength) / dataLength + outRange[0];
  });
}
`,title:{zh:"\u7F8E\u56FD\u8FC1\u5F99\u56FE\u8FB9\u7ED1\u5B9A",en:"Edge Bundling"},filename:"edgeBundling.js",isNew:!1},{id:"decisionBubbles",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*wvofQ6DuC0YAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
/**
 * by Shiwu
 */
let showNodes = [];
let showEdges = [];
let curShowNodes = [];
let curShowEdges = [];
let nodes = [];
let edges = [];
let nodeMap = new Map();
let edgesMap = new Map();
let curShowNodesMap = new Map();
let highlighting = false;
let currentFocus;
const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;

const LIMIT_OVERFLOW_WIDTH = width;
const LIMIT_OVERFLOW_HEIGHT = height;

const mapNodeSize = (nodes, propertyName, visualRange) => {
  let minp = 9999999999;
  let maxp = -9999999999;
  nodes.forEach((node) => {
    minp = node[propertyName] < minp ? node[propertyName] : minp;
    maxp = node[propertyName] > maxp ? node[propertyName] : maxp;
  });
  const rangepLength = maxp - minp;
  const rangevLength = visualRange[1] - visualRange[0];
  nodes.forEach((node) => {
    node.size = ((node[propertyName] - minp) / rangepLength) * rangevLength + visualRange[0];
  });
};

const lightColors = [
  '#8FE9FF',
  '#87EAEF',
  '#FFC9E3',
  '#A7C2FF',
  '#FFA1E3',
  '#FFE269',
  '#BFCFEE',
  '#FFA0C5',
  '#D5FF86',
];
const darkColors = [
  '#7DA8FF',
  '#44E6C1',
  '#FF68A7',
  '#7F86FF',
  '#AE6CFF',
  '#FF5A34',
  '#5D7092',
  '#FF6565',
  '#6BFFDE',
];
const uLightColors = [
  '#CFF6FF',
  '#BCFCFF',
  '#FFECF5',
  '#ECFBFF',
  '#EAD9FF',
  '#FFF8DA',
  '#DCE2EE',
  '#FFE7F0',
  '#EEFFCE',
];
const uDarkColors = [
  '#CADBFF',
  '#A9FFEB',
  '#FFC4DD',
  '#CACDFF',
  '#FFD4F2',
  '#FFD3C9',
  '#EBF2FF',
  '#FFCBCB',
  '#CAFFF3',
];

const gColors = [];
const unlightColorMap = new Map();
lightColors.forEach((lcolor, i) => {
  gColors.push('l(0) 0:' + lcolor + ' 1:' + darkColors[i]);
  unlightColorMap.set(gColors[i], 'l(0) 0:' + uLightColors[i] + ' 1:' + uDarkColors[i]);
});

let graph;
const layoutCfg = {
  type: 'force',
  nodeSize: (d) => {
    return d.size / 2 + 5;
  },
  nodeStrength: 2500,
  collideStrength: 0.8,
  alphaDecay: 0.01,
  preventOverlap: true,
  onTick: () => {
    const nodeItems = graph.getNodes();
    const height = graph.get('height');
    const width = graph.get('width');
    const padding = 10;
    nodeItems.forEach((item) => {
      const model = item.getModel();
      if (model.x > width - padding) model.x = width - padding;
      else if (model.x < padding) model.x = padding;

      if (model.y > height - padding) model.y = height - padding;
      else if (model.y < padding) model.y = padding;
    });
  },
};

G6.registerBehavior('double-finger-drag-canvas', {
  getEvents: function getEvents() {
    return {
      wheel: 'onWheel',
    };
  },

  onWheel: (ev) => {
    if (ev.ctrlKey) {
      const canvas = graph.get('canvas');
      const point = canvas.getPointByClient(ev.clientX, ev.clientY);
      let ratio = graph.getZoom();
      if (ev.wheelDelta > 0) {
        ratio = ratio + ratio * 0.05;
      } else {
        ratio = ratio - ratio * 0.05;
      }
      graph.zoomTo(ratio, {
        x: point.x,
        y: point.y,
      });
    } else {
      const x = ev.deltaX || ev.movementX;
      const y = ev.deltaY || ev.movementY || (-ev.wheelDelta * 125) / 3;
      translate(x, y);
    }
    ev.preventDefault();
  },
});

G6.registerNode(
  'bubble',
  {
    drawShape(cfg, group) {
      const self = this;
      const r = cfg.size / 2;
      // a circle by path
      const path = [
        ['M', -r, 0],
        ['C', -r, r / 2, -r / 2, r, 0, r],
        ['C', r / 2, r, r, r / 2, r, 0],
        ['C', r, -r / 2, r / 2, -r, 0, -r],
        ['C', -r / 2, -r, -r, -r / 2, -r, 0],
        ['Z'],
      ];
      const keyShape = group.addShape('path', {
        attrs: {
          x: 0,
          y: 0,
          path,
          fill: cfg.color || 'steelblue',
        },
        name: 'path-shape',
      });

      const mask = group.addShape('path', {
        attrs: {
          x: 0,
          y: 0,
          path,
          opacity: 0.25,
          fill: cfg.color || 'steelblue',
          shadowColor: cfg.color.split(' ')[2].substr(2),
          shadowBlur: 40,
          shadowOffsetX: 0,
          shadowOffsetY: 30,
        },
        name: 'mask-shape',
      });

      const spNum = 10; // split points number
      const directions = [],
        rs = [];
      self.changeDirections(spNum, directions);
      for (let i = 0; i < spNum; i++) {
        const rr = r + directions[i] * ((Math.random() * r) / 1000); // +-r/6, the sign according to the directions
        if (rs[i] < 0.97 * r) rs[i] = 0.97 * r;
        else if (rs[i] > 1.03 * r) rs[i] = 1.03 * r;
        rs.push(rr);
      }
      keyShape.animate(
        () => {
          const path = self.getBubblePath(r, spNum, directions, rs);
          return { path };
        },
        {
          repeat: true,
          duration: 10000,
        },
      );

      const directions2 = [],
        rs2 = [];
      self.changeDirections(spNum, directions2);
      for (let i = 0; i < spNum; i++) {
        const rr = r + directions2[i] * ((Math.random() * r) / 1000); // +-r/6, the sign according to the directions
        if (rs2[i] < 0.97 * r) rs2[i] = 0.97 * r;
        else if (rs2[i] > 1.03 * r) rs2[i] = 1.03 * r;
        rs2.push(rr);
      }
      mask.animate(
        () => {
          const path = self.getBubblePath(r, spNum, directions2, rs2);
          return { path };
        },
        {
          repeat: true,
          duration: 10000,
        },
      );
      return keyShape;
    },
    changeDirections(num, directions) {
      for (let i = 0; i < num; i++) {
        if (!directions[i]) {
          const rand = Math.random();
          const dire = rand > 0.5 ? 1 : -1;
          directions.push(dire);
        } else {
          directions[i] = -1 * directions[i];
        }
      }
      return directions;
    },
    getBubblePath(r, spNum, directions, rs) {
      const path = [];
      const cpNum = spNum * 2; // control points number
      const unitAngle = (Math.PI * 2) / spNum; // base angle for split points
      let angleSum = 0;
      const sps = [];
      const cps = [];
      for (let i = 0; i < spNum; i++) {
        const speed = 0.001 * Math.random();
        rs[i] = rs[i] + directions[i] * speed * r; // +-r/6, the sign according to the directions
        if (rs[i] < 0.97 * r) {
          rs[i] = 0.97 * r;
          directions[i] = -1 * directions[i];
        } else if (rs[i] > 1.03 * r) {
          rs[i] = 1.03 * r;
          directions[i] = -1 * directions[i];
        }
        const spX = rs[i] * Math.cos(angleSum);
        const spY = rs[i] * Math.sin(angleSum);
        sps.push({ x: spX, y: spY });
        for (let j = 0; j < 2; j++) {
          const cpAngleRand = unitAngle / 3;
          const cpR = rs[i] / Math.cos(cpAngleRand);
          const sign = j === 0 ? -1 : 1;
          const x = cpR * Math.cos(angleSum + sign * cpAngleRand);
          const y = cpR * Math.sin(angleSum + sign * cpAngleRand);
          cps.push({ x, y });
        }
        angleSum += unitAngle;
      }
      path.push(['M', sps[0].x, sps[0].y]);
      for (let i = 1; i < spNum; i++) {
        path.push([
          'C',
          cps[2 * i - 1].x,
          cps[2 * i - 1].y,
          cps[2 * i].x,
          cps[2 * i].y,
          sps[i].x,
          sps[i].y,
        ]);
      }
      path.push(['C', cps[cpNum - 1].x, cps[cpNum - 1].y, cps[0].x, cps[0].y, sps[0].x, sps[0].y]);
      path.push(['Z']);
      return path;
    },
    setState(name, value, item) {
      const shape = item.get('keyShape');
      if (name === 'dark') {
        if (value) {
          if (shape.attr('fill') !== '#fff') {
            shape.oriFill = shape.attr('fill');
            const uColor = unlightColorMap.get(shape.attr('fill'));
            shape.attr('fill', uColor);
          } else {
            shape.attr('opacity', 0.2);
          }
        } else {
          if (shape.attr('fill') !== '#fff') {
            shape.attr('fill', shape.oriFill || shape.attr('fill'));
          } else {
            shape.attr('opacity', 1);
          }
        }
      }
    },
  },
  'single-node',
);

G6.registerNode(
  'animate-circle',
  {
    setState(name, value, item) {
      const shape = item.get('keyShape');
      const label = shape.get('parent').get('children')[1];
      if (name === 'disappearing' && value) {
        shape.animate(
          (ratio) => {
            return {
              opacity: 1 - ratio,
              r: shape.attr('r') * (1 - ratio),
            };
          },
          {
            duration: 200,
          },
        );
        label.animate(
          (ratio) => {
            return {
              opacity: 1 - ratio,
            };
          },
          {
            duration: 500,
          },
        );
      } else if (name === 'appearing' && value) {
        const r = item.getModel().size / 2;
        shape.animate(
          (ratio) => {
            return {
              opacity: ratio,
              r: r * ratio,
              fill: shape.attr('fill'),
            };
          },
          {
            duration: 300,
          },
        );
        label.animate(
          {
            onFrame(ratio) {
              return {
                opacity: ratio,
              };
            },
          },
          {
            duration: 300,
          },
        );
      } else if (name === 'dark') {
        if (value) {
          if (shape.attr('fill') !== '#fff') {
            shape.oriFill = shape.attr('fill');
            const uColor = unlightColorMap.get(shape.attr('fill'));
            shape.attr('fill', uColor);
          } else {
            shape.attr('opacity', 0.2);
            label.attr('fill', '#A3B1BF');
          }
        } else {
          if (shape.attr('fill') !== '#fff') {
            shape.attr('fill', shape.oriFill || shape.attr('fill'));
          } else {
            shape.attr('opacity', 1);
            label.attr('fill', '#697B8C');
          }
        }
      }
    },
  },
  'circle',
);

G6.registerEdge(
  'animate-line',
  {
    drawShape(cfg, group) {
      const self = this;
      let shapeStyle = self.getShapeStyle(cfg);
      shapeStyle = Object.assign(shapeStyle, {
        opacity: 0,
        strokeOpacity: 0,
      });
      const keyShape = group.addShape('path', {
        attrs: shapeStyle,
        name: 'path-shape',
      });
      return keyShape;
    },
    afterDraw(cfg, group) {
      const shape = group.get('children')[0];
      shape.animate(
        (ratio) => {
          const opacity = ratio * cfg.style.opacity;
          const strokeOpacity = ratio * cfg.style.strokeOpacity;
          return {
            opacity: ratio || opacity,
            strokeOpacity: ratio || strokeOpacity,
          };
        },
        {
          duration: 300,
        },
      );
    },
    setState(name, value, item) {
      const shape = item.get('keyShape');
      if (name === 'disappearing' && value) {
        shape.animate(
          (ratio) => {
            return {
              opacity: 1 - ratio,
              strokeOpacity: 1 - ratio,
            };
          },
          {
            duration: 200,
          },
        );
      } else if (name === 'dark') {
        if (value) shape.attr('opacity', 0.2);
        else shape.attr('opacity', 1);
      }
    },
  },
  'line',
);

graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  layout: layoutCfg,
  modes: {
    default: ['drag-canvas'],
  },
  defaultNode: {
    type: 'bubble',
    size: 95,
    labelCfg: {
      position: 'center',
      style: {
        fill: 'white',
        fontStyle: 'bold',
      },
    },
  },
  defaultEdge: {
    color: '#888',
    type: 'animate-line', //'animate-line'
  },
});
graph.get('canvas').set('localRefresh', false);

function translate(x, y) {
  let moveX = x;
  let moveY = y;

  /* \u83B7\u5F97\u5F53\u524D\u504F\u79FB\u91CF*/
  const group = graph.get('group');
  const bbox = group.getBBox();
  const leftTopPoint = graph.getCanvasByPoint(bbox.minX, bbox.minY);
  const rightBottomPoint = graph.getCanvasByPoint(bbox.maxX, bbox.maxY);
  /* \u5982\u679C x \u8F74\u5728\u533A\u57DF\u5185\uFF0C\u4E0D\u5141\u8BB8\u5DE6\u53F3\u8D85\u8FC7100 */
  if (x < 0 && leftTopPoint.x - x > LIMIT_OVERFLOW_WIDTH) {
    moveX = 0;
  }
  if (x > 0 && rightBottomPoint.x - x < width - LIMIT_OVERFLOW_WIDTH) {
    moveX = 0;
  }

  if (y < 0 && leftTopPoint.y - y > LIMIT_OVERFLOW_HEIGHT) {
    moveY = 0;
  }
  if (y > 0 && rightBottomPoint.y - y < height - LIMIT_OVERFLOW_HEIGHT) {
    moveY = 0;
  }
  graph.translate(-moveX, -moveY);
}

function refreshDragedNodePosition(e) {
  const model = e.item.get('model');
  model.fx = e.x;
  model.fy = e.y;
}
graph.on('node:dragstart', (e) => {
  graph.layout();
  refreshDragedNodePosition(e);
});
graph.on('node:drag', (e) => {
  refreshDragedNodePosition(e);
});
graph.on('node:dragend', (e) => {
  e.item.get('model').fx = null;
  e.item.get('model').fy = null;
});

const loadData = (data) => {
  const layoutController = graph.get('layoutController');
  layoutController.layoutCfg.nodeStrength = 2500;
  layoutController.layoutCfg.collideStrength = 0.8;
  layoutController.layoutCfg.alphaDecay = 0.01;
  nodes = data.nodes;
  edges = data.edges;

  showNodes = [];
  showEdges = [];
  nodeMap = new Map();
  edgesMap = new Map();
  // find the roots
  nodes.forEach((node) => {
    if (node.level === 0) {
      node.color = gColors[showNodes.length % gColors.length];
      node.style = {
        fill: gColors[showNodes.length % gColors.length],
        lineWidth: 0,
      };
      node.labelCfg = {
        style: {
          fontSize: 25,
          fill: '#fff',
          fontWeight: 300,
        },
      };
      node.x = Math.random() * 800;
      node.y = Math.random() * 800;
      showNodes.push(node);
    }
    if (!node.isLeaf) {
      const num = node.childrenNum ? \`\\n(\${node.childrenNum})\` : '';
      node.label = \`\${node.name}\${num}\`;
    } else {
      node.label = node.name;
    }
    nodeMap.set(node.id, node);
  });

  mapNodeSize(showNodes, 'childrenNum', [120, 180]);

  // map the color to F nodes, same to its parent
  nodes.forEach((node) => {
    if (node.level !== 0 && !node.isLeaf) {
      const parent = nodeMap.get(node.tags[0]);
      node.color = parent.color;
      node.style = {
        fill: parent.color,
      };
    }
  });
  edges.forEach((edge) => {
    // map the id
    edge.id = \`\${edge.source}-\${edge.target}\`;
    edge.style = {
      lineWidth: 0.5,
      opacity: 1,
      strokeOpacity: 1,
    };
    edgesMap.set(edge.id, edge);
  });
  graph.data({
    nodes: showNodes,
    edges: showEdges,
  });
  graph.render();
};

graph.on('node:mouseenter', (e) => {
  const item = e.item;
  const model = item.getModel();
  if (model.level === 0) {
    return;
  }
  highlighting = true;
  graph.setAutoPaint(false);
  const nodeItems = graph.getNodes();
  const edgeItems = graph.getEdges();
  nodeItems.forEach((node) => {
    graph.setItemState(node, 'dark', true);
    node.getModel().light = false;
  });
  graph.setItemState(item, 'dark', false);
  model.light = true;
  const tags = model.tags;
  const findTagsMap = new Map();
  let mid = 0;

  let fTag = '';
  // if the model is F node, find the leaves of it
  if (!model.isLeaf && model.level !== 0) {
    fTag = model.tag;
    nodeItems.forEach((item) => {
      const itemModel = item.getModel();
      if (!itemModel.isLeaf) return;
      const modelTags = itemModel.tags;
      modelTags.forEach((mt) => {
        const mts = mt.split('-');
        if (mts[1] === fTag) {
          graph.setItemState(item, 'dark', false);
          itemModel.light = true;
        }
      });
    });
  }

  // find the tags
  tags.forEach((t) => {
    const ts = t.split('-');
    findTagsMap.set(ts[0], mid);
    mid++;
    if (ts[1]) {
      findTagsMap.set(ts[1], mid);
      mid++;
    }
  });
  // find the nodes with tag === tags[?]
  nodeItems.forEach((item) => {
    const node = item.getModel();
    if (findTagsMap.get(node.tag) !== undefined) {
      graph.setItemState(item, 'dark', false);
      node.light = true;
    }
  });
  edgeItems.forEach((item) => {
    const source = item.getSource().getModel();
    const target = item.getTarget().getModel();
    if (source.light && target.light) {
      graph.setItemState(item, 'dark', false);
    } else {
      graph.setItemState(item, 'dark', true);
    }
  });
  graph.paint();
  graph.setAutoPaint(true);
});

graph.on('node:mouseleave', () => {
  if (highlighting) {
    const nodeItems = graph.getNodes();
    const edgeItems = graph.getEdges();
    highlighting = false;
    nodeItems.forEach((item) => {
      graph.setItemState(item, 'dark', false);
    });
    edgeItems.forEach((item) => {
      graph.setItemState(item, 'dark', false);
    });
  }
});

fetch('https://gw.alipayobjects.com/os/bmw-prod/fc6e64fc-be94-40fb-b9e2-2d13dd414f38.json')
  .then((res) => res.json())
  .then((data) => {
    loadData(data);
  });

// click root to expand
graph.on('node:click', (e) => {
  curShowNodes = [];
  curShowEdges = [];
  const item = e.item;
  const model = item.getModel();
  if (!model.isLeaf && model.level !== 0) {
    return;
  }
  // if clicked a root, hide unrelated items and show the related items
  if (model.level === 0) {
    const layoutController = graph.get('layoutController');
    const forceLayout = layoutController.layoutMethods[0];
    forceLayout.forceSimulation.stop();
    // light the level 0 nodes
    showNodes.forEach((snode) => {
      const item = graph.findById(snode.id);
      graph.setItemState(item, 'dark', false);
      if (snode.x < 0.5 * width) {
        snode.x = 300;
      } else {
        snode.x = width - 300;
      }
    });
    model.x = width / 2;
    model.y = height / 2;
    // animatively hide the items which are going to disappear
    if (curShowEdges.length) {
      curShowEdges.forEach((csedge) => {
        const item = graph.findById(csedge.id);
        item && graph.setItemState(item, 'disappearing', true);
      });
    }
    curShowNodes.forEach((csnode) => {
      const item = graph.findById(csnode.id);
      item && graph.setItemState(item, 'disappearing', true);
    });
    graph.positionsAnimate();

    // reset curShowNodes nad curShowEdges
    curShowNodes = [];
    curShowEdges = [];

    // click on the same node which is the current focus node, hide the small nodes, change the layout parameters to roots view
    if (currentFocus && currentFocus.id === model.id) {
      currentFocus = undefined;
      layoutController.layoutCfg.nodeStrength = 2500;
      layoutController.layoutCfg.collideStrength = 0.8;
      layoutController.layoutCfg.alphaDecay = 0.01;
    } else {
      // click other focus node, hide the current small nodes and show the related nodes
      currentFocus = model;
      // change data after the original items disappearing
      const layoutController = graph.get('layoutController');
      layoutController.layoutCfg.nodeStrength = () => {
        return -80;
      };
      layoutController.layoutCfg.collideStrength = 0.2;
      layoutController.layoutCfg.linkDistance = (d) => {
        if (d.source.level !== 0) return 120;
        const length = 250;
        return length;
      };
      layoutController.layoutCfg.edgeStrength = () => {
        return 2;
      };

      const tag = model.tag;
      const findTags = [];
      curShowNodesMap = new Map();
      // find the nodes which are the descendants of clicked model
      nodes.forEach((node) => {
        if (!node.tags) return;
        const tags = node.tags;
        const tlength = tags.length;
        let isChild = false;
        const parents = [];
        for (let i = 0; i < tlength; i++) {
          const ts = tags[i].split('-');
          if (ts[0] === tag) {
            isChild = true;
          }
          parents.push(nodeMap.get(ts[0]));
        }
        if (isChild) {
          const randomAngle = Math.random() * 2 * Math.PI;
          node.x = model.x + (Math.cos(randomAngle) * model.size) / 2 + 10;
          node.y = model.y + (Math.sin(randomAngle) * model.size) / 2 + 10;
          // const dist = (model.x - node.x) * (model.x - node.x) + (model.y - node.y) * (model.y - node.y);

          if (!node.style) node.style = {};
          node.style.lineWidth = 0;
          node.style.opacity = 1;
          if (node.isLeaf) {
            node.type = 'animate-circle';
            let color = 'l(0)';
            const parentsNum = parents.length;
            parents.forEach((parent, i) => {
              const parentColor = parent.color.split(' ')[1].substr(2);
              color += \` \${i / (parentsNum - 1)}:\${parentColor}\`;
            });
            if (parentsNum === 1) {
              color = model.color.split(' ')[1].substr(2);
            }
            node.color = color;
            node.style.fill = color;
            node.style.fill = '#fff';
            node.style.lineWidth = 1;
            node.size = 60;
            node.labelCfg = {
              style: {
                fontSize: 11,
                lineHeight: 19,
                fill: '#697B8C',
              },
              position: 'center',
            };
          } else if (node.level !== 0) {
            node.type = 'circle'; // 'bubble';
            node.size = 95;
            if (!node.style) node.style = {};
            node.color = model.color;
            node.style.fill = model.color;
            node.labelCfg = {
              style: {
                fill: '#fff',
                fontSize: 14,
              },
              position: 'center',
            };
          }
          curShowNodes.push(node);
          curShowNodesMap.set(node.id, node);

          // add the edge connect from model to node which exists in edges
          const edgeId = \`\${model.id}-\${node.id}\`;
          const edge = edgesMap.get(edgeId);
          if (edge) {
            edge.color = model.color;
            curShowEdges.push(edge);
          }
          tags.forEach((t) => {
            const ts = t.split('-');
            if (ts[0] !== tag) {
              findTags.push(ts[0]);
            }
            if (ts[1]) {
              findTags.push(ts[1]);
            }
          });
        }
      });

      // find the nodes which are the ancestors of the current curShowNodes
      nodes.forEach((node) => {
        const findTagsLength = findTags.length;
        for (let i = 0; i < findTagsLength; i++) {
          if (node.tag === findTags[i] && curShowNodesMap.get(node.id) === undefined) {
            curShowNodes.push(node);
            curShowNodesMap.set(node.id, node);
            return;
          }
        }
      });

      // find the edges whose target end source are in the curShowNodes
      curShowNodes.forEach((nu, i) => {
        const lu = nu.level;
        curShowNodes.forEach((nv, j) => {
          if (j <= i) return;
          const lv = nv.level;
          let edgeId;
          if (lu < lv) {
            edgeId = \`\${nu.id}-\${nv.id}\`;
          } else {
            edgeId = \`\${nv.id}-\${nu.id}\`;
          }
          let color = model.color;
          if (nu.isLeaf) {
            if (nv.level === 0 && nv.tag !== model.tag) color = '#DFE5EB';
            else if (!nv.isLeaf && nv.tags[0] !== model.tag) {
              color = '#DFE5EB';
            }
          } else if (nv.isLeaf) {
            if (nu.level === 0 && nu.tag !== model.tag) color = '#DFE5EB';
            else if (!nu.isLeaf && nu.tags[0] !== model.tag) {
              color = '#DFE5EB';
            }
          }
          const edge = edgesMap.get(edgeId);
          if (edge) {
            edge.color = color;
            curShowEdges.push(edge);
          }
        });
      });
    }
    setTimeout(() => {
      graph.changeData({
        nodes: showNodes.concat(curShowNodes),
        edges: showEdges.concat(curShowEdges),
      });
      const nodeItems = graph.getNodes();
      const edgeItems = graph.getEdges();
      edgeItems.forEach((item) => {
        graph.clearItemStates(item);
      });
      nodeItems.forEach((item) => {
        graph.clearItemStates(item);
        graph.setItemState(item, 'appearing', true);
      });
    }, 400);
  }
});
graph.on('canvas:click', () => {
  currentFocus = undefined;
  const forceLayout = graph.get('layoutController').layoutMethods[0];
  forceLayout.forceSimulation.stop();
  const nodeItems = graph.getNodes();
  const edgeItems = graph.getEdges();
  if (highlighting) {
    highlighting = false;
    nodeItems.forEach((item) => {
      graph.setItemState(item, 'dark', false);
    });
    edgeItems.forEach((item) => {
      graph.setItemState(item, 'dark', false);
    });
  } else {
    nodeItems.forEach((item) => {
      const model = item.getModel();
      if (model.level === 0) {
        graph.setItemState(item, 'dark', false);
      } else {
        graph.setItemState(item, 'disappearing', true);
      }
    });
    edgeItems.forEach((item) => {
      graph.setItemState(item, 'disappearing', true);
    });
    curShowNodes = [];
    curShowEdges = [];
    setTimeout(() => {
      const layoutController = graph.get('layoutController');
      layoutController.layoutCfg.nodeStrength = 2500;
      layoutController.layoutCfg.collideStrength = 0.8;
      layoutController.layoutCfg.alphaDecay = 0.01;

      graph.changeData({
        nodes: showNodes,
        edges: showEdges,
      });
    }, 400);
  }
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u56FE\u8868\u51B3\u7B56",en:"Decision Bubbles"},filename:"decisionBubbles.js",isNew:!1},{id:"simplifyCluster",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*yU5sRLivdLIAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

insertCss(\`
  .g6-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
\`);

/**
 * \u8BE5\u793A\u4F8B\u6F14\u793A Fruchterman \u5E03\u5C40\u7B97\u6CD5\u7684\u805A\u7C7B\u6548\u679C\uFF0C\u4EE5\u53CA\u70B9\u51FB\u4EA4\u4E92\u8FDB\u884C\u805A\u7C7B\u7684\u805A\u5408\u548C\u6269\u6563\u6548\u679C
 * by \u5341\u543E
 */
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = 'Reading data & Doing layout......';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);
const width = container.scrollWidth;
const height = container.scrollHeight - 30;

const colors = ['#f5222d', '#faad14', '#a0d911', '#13c2c2', '#1890ff', '#b37feb', '#eb2f96'];
const beginColor = '#5b8c00'; // green
const endColor = '#ff4d4f'; // red

fetch('https://gw.alipayobjects.com/os/basement_prod/7bacd7d1-4119-4ac1-8be3-4c4b9bcbc25f.json')
  .then((res) => res.json())
  .then((data) => {
    const nodes = data.nodes;
    const edges = data.edges;

    const nodeMap = new Map();
    const clusterMap = new Map();
    let cidx = 0;
    nodes.forEach(function (n) {
      nodeMap.set(n.id, n);
      let region = n.region.split(' ');
      if (n.region === 'East Asia') region = n.region;
      else region = region[region.length - 1];

      if (clusterMap.get(region) === undefined) {
        clusterMap.set(region, cidx);
        cidx++;
      }
      const clusterId = clusterMap.get(region);
      const color = colors[clusterId % colors.length];
      n.style = {
        color,
        fill: color,
        stroke: '#666',
        lineWidth: 0.6,
      };
      n.cluster = clusterId;
      n.importValue = 0;
      n.exportValue = 0;
    });
    // map the value of
    edges.forEach(function (e) {
      if (e.value === '') e.value = 0;
      const v = parseFloat(e.value);
      nodeMap.get(e.source).exportValue += v;
      nodeMap.get(e.target).importValue += v;
    });
    mapValueToProp(nodes, 'exportValue', 'size', [2, 12]);
    const graph = new G6.Graph({
      container: 'container',
      width,
      height,
      layout: {
        type: 'fruchterman',
        maxIteration: 8000,
        gravity: 10,
        clustering: true,
        clusterGravity: 30,
        workerEnabled: true,
      },
      fitView: true,
      linkCenter: true,
      defaultNode: {
        type: 'circle',
        size: 5,
      },
      defaultEdge: {
        type: 'quadratic',
      },
      modes: {
        default: [
          'drag-node',
          'drag-canvas',
          {
            type: 'tooltip',
            formatText: function formatText(model) {
              let name = '';
              let countries = '';
              if (model.name) name = model.name + '<br/>';
              if (model.countries) countries = '<br/>Number of Countries: ' + model.countries;
              const text = \`\${name} Export Value: \${model.exportValue}(1000USD)<br/>Region: \${model.region}<br/>Cluster: \${model.cluster} \${countries}\`;
              return text;
            },

            shouldUpdate: function shouldUpdate() {
              return true;
            },
          },
        ],
      },
    });

    graph.on('afterlayout', function () {
      descriptionDiv.innerHTML = 'Done!';
    });

    graph.data(data);
    graph.render();

    const edgeItems = graph.getEdges();
    edgeItems.forEach(function (e) {
      const lineWidth = 0.4;
      const strokeOpacity = 0.2;
      let stroke = 'l(0) 0:' + beginColor + ' 1:' + endColor;
      const sourceModel = e.getSource().getModel();
      const targetModel = e.getTarget().getModel();
      if (sourceModel.x > targetModel.x) {
        stroke = 'l(0) 0:' + endColor + ' 1:' + beginColor;
      }
      e.update({
        style: {
          lineWidth,
          strokeOpacity,
          stroke,
        },
      });
    });
    graph.paint();

    graph.on('node:click', function (e) {
      const targetItem = e.item;
      const model = targetItem.getModel();
      const graphEdges = graph.getEdges();
      const graphNodes = graph.getNodes();
      // click on the cluster node
      if (model.id.substr(0, 7) === 'cluster') {
        graphNodes.forEach(function (gn) {
          const gnModel = gn.getModel();
          // show the common nodes
          if (gnModel.cluster === model.cluster && gnModel.id.substr(0, 7) !== 'cluster') {
            gn.show();
          }
          // remove the cluster nodes
          if (gnModel.id === model.id) graph.removeItem(gn);
        });

        graphEdges.forEach(function (ge) {
          const sourceModel = ge.get('sourceNode').getModel();
          const targetModel = ge.get('targetNode').getModel();
          // show the common edges
          if (
            (sourceModel.cluster === model.cluster && sourceModel.id.substr(0, 7) !== 'cluster') ||
            (targetModel.cluster === model.cluster && targetModel.id.substr(0, 7) !== 'cluster')
          ) {
            ge.show();
            // add the edges to other cluster nodes
            if (!ge.get('sourceNode').get('visible') && sourceModel.cluster !== model.cluster) {
              let c1 = beginColor,
                c2 = endColor;
              if (model.x > targetModel.x) {
                c1 = endColor;
                c2 = beginColor;
              }
              graph.addItem('edge', {
                source: 'cluster' + sourceModel.cluster,
                target: targetModel.id,
                id: 'cluster-edge-' + ge.id,
                style: {
                  stroke: 'l(0) 0:' + c1 + ' 1:' + c2,
                  lineWidth: 0.4,
                  strokeOpacity: 0.2,
                },
              });
            } else if (
              ge.get('targetNode').get('visible') &&
              targetModel.cluster !== model.cluster
            ) {
              let _c = beginColor,
                _c2 = endColor;
              if (sourceModel.x > model.x) {
                _c = endColor;
                _c2 = beginColor;
              }
              graph.addItem('edge', {
                source: sourceModel.id,
                target: 'cluster' + targetModel.id,
                id: 'cluster-edge-' + ge.id,
                style: {
                  stroke: 'l(0) 0:' + _c + ' 1:' + _c2,
                  lineWidth: 0.4,
                  strokeOpacity: 0.2,
                },
              });
            }
            // hide the edges to the common nodes in other clusters
            if (!ge.get('sourceNode').get('visible') || !ge.get('targetNode').get('visible')) {
              ge.hide();
            }
          }
          // remove the cluster edges
          if (sourceModel.id === model.id || targetModel.id === model.id) {
            graph.removeItem(ge);
          }
        });
      } else {
        // click on the common node, cllapse them
        // calculate the cluster center
        const center = {
          x: 0,
          y: 0,
          count: 0,
          exportValue: 0,
        };
        nodes.forEach(function (n) {
          if (n.cluster === model.cluster) {
            center.x += n.x;
            center.y += n.y;
            center.count++;
            center.exportValue += n.exportValue;
          }
        });
        center.x /= center.count;
        center.y /= center.count;
        // add cluster node on the center
        const size = center.count * 1;
        const clusterNodeId = 'cluster' + model.cluster;
        const color = colors[model.cluster % colors.length];
        const regionStrs = model.region.split(' ');
        let region = regionStrs[regionStrs.length - 1];
        if (model.region === 'East Asia') region = model.region;
        let labelPosition = 'center';
        if (region.length > size) labelPosition = 'left';
        graph.addItem('node', {
          x: center.x,
          y: center.y,
          id: clusterNodeId,
          cluster: model.cluster,
          region,
          countries: center.count,
          exportValue: center.exportValue,
          style: {
            color,
            fill: color,
            stroke: '#666',
            lineWidth: 0.6,
          },
          size,
          label: region,
          labelCfg: {
            style: {
              fontSize: 8.5,
            },
            position: labelPosition,
          },
        });

        // add edges about the cluster
        graphEdges.forEach(function (ge) {
          const sourceModel = ge.get('sourceNode').getModel();
          const targetModel = ge.get('targetNode').getModel();
          if (!ge.get('sourceNode').get('visible') || !ge.get('targetNode').get('visible')) return;
          if (sourceModel.cluster === model.cluster && targetModel.cluster !== model.cluster) {
            let c1 = beginColor,
              c2 = endColor;
            if (center.x > targetModel.x) {
              c1 = endColor;
              c2 = beginColor;
            }
            graph.addItem('edge', {
              source: clusterNodeId,
              target: targetModel.id,
              id: 'cluster-edge-' + ge.id,
              style: {
                stroke: 'l(0) 0:' + c1 + ' 1:' + c2,
                lineWidth: 0.4,
                strokeOpacity: 0.2,
              },
            });
          } else if (
            targetModel.cluster === model.cluster &&
            sourceModel.cluster !== model.cluster
          ) {
            let _c3 = beginColor,
              _c4 = endColor;
            if (sourceModel.x > center.x) {
              _c3 = endColor;
              _c4 = beginColor;
            }
            graph.addItem('edge', {
              source: sourceModel.id,
              target: clusterNodeId,
              id: 'cluster-edge-' + ge.id,
              style: {
                stroke: 'l(0) 0:' + _c3 + ' 1:' + _c4,
                lineWidth: 0.4,
                strokeOpacity: 0.2,
              },
            });
          }
        });

        // hide the common nodes in the cluster
        graphNodes.forEach(function (gn) {
          if (
            gn.getModel().cluster === model.cluster &&
            gn.getModel().id.substr(0, 7) !== 'cluster'
          )
            gn.hide();
        });
        // hide the common edges about cluster
        graphEdges.forEach(function (ge) {
          if (!ge.get('sourceNode').get('visible') || !ge.get('targetNode').get('visible'))
            ge.hide();
        });
      }
    });
    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });

function mapValueToProp(items, valueName, propName, range) {
  const valueRange = [9999999999, -9999999999];
  items.forEach(function (n) {
    if (n[valueName] > valueRange[1]) valueRange[1] = n[valueName];
    if (n[valueName] < valueRange[0]) valueRange[0] = n[valueName];
  });
  const valueLength = valueRange[1] - valueRange[0];
  const rLength = range[1] - range[0];
  const propNameStrs = propName.split('.');
  if (propNameStrs[0] === 'style' && propNameStrs.length > 1) {
    items.forEach(function (n) {
      if (n.style === undefined) n.style = {};
      n.style[propNameStrs[1]] =
        (rLength * (n[valueName] - valueRange[0])) / valueLength + range[0];
    });
  } else {
    items.forEach(function (n) {
      n[propNameStrs[0]] = (rLength * (n[valueName] - valueRange[0])) / valueLength + range[0];
    });
  }
}
`,title:{zh:"\u805A\u7C7B\u7684\u6298\u53E0/\u6269\u5C55",en:"Collapse/Expand Cluster"},filename:"simplifyCluster.js",isNew:!1},{id:"donutTransfer",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*YK6yRIfKQaIAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

/**
 * by Shiwu
 */

const data = {
  nodes: [
    {
      id: 'person A',
      label: 'person A',
      // the attributes for drawing donut
      donutAttrs: {
        'income': 10,
        'outcome': 20,
        'unknown': 25
      },
    },
    {
      id: 'person B',
      label: 'person B',
      donutAttrs: {
        'income': 20,
        'outcome': 10,
        'unknown': 5
      },
    },
    {
      id: 'person C',
      label: 'person C',
      donutAttrs: {
        'income': 200,
        'outcome': 20,
        'unknown': 25
      },
    },
    {
      id: 'person D',
      label: 'person D',
      donutAttrs: {
        'income': 50,
        'outcome': 10,
        'unknown': 15
      },
    },
    {
      id: 'person E',
      label: 'person E',
      donutAttrs: {
        'income': 80,
        'outcome': 40,
        'unknown': 45
      },
    },
    {
      id: 'person F',
      label: 'person F',
      donutAttrs: {
        'income': 90,
        'outcome': 110,
        'unknown': 15
      },
    },
  ],
  edges: [
    {source: 'person C', target: 'person F', size: 10},
    {source: 'person B', target: 'person A', size: 5},
    {source: 'person D', target: 'person E', size: 20},
    {source: 'person D', target: 'person C', size: 5},
    {source: 'person B', target: 'person C', size: 10},
    {source: 'person A', target: 'person C', size: 5},
  ]
};

data.edges.forEach(edge=> {
  edge.label = \`Transfer $\${edge.size}\`
})

const colors = {
  'income': '#61DDAA',
  'outcome': '#F08BB4',
  'unknown': '#65789B'
}

data.nodes.forEach(node => {
  node.donutColorMap = colors;
  node.size = 0;
  Object.keys(node.donutAttrs).forEach(key => {
    node.size += node.donutAttrs[key];
  })
  node.size = Math.sqrt(node.size) * 5
})


const legendData = {
  nodes: [{
    id: 'income',
    label: 'Income',
    order: 0,
    style: {
      fill: '#61DDAA',
    }
  }, {
    id: 'outcome',
    label: 'Outcome',
    order: 2,
    style: {
      fill: '#F08BB4',
    }
  }, {
    id: 'unknown',
    label: 'Unknown',
    order: 2,
    style: {
      fill: '#65789B',
    }
  }]
}
const legend = new G6.Legend({
  data: legendData,
  align: 'center',
  layout: 'horizontal', // vertical
  position: 'bottom-left',
  vertiSep: 12,
  horiSep: 24,
  offsetY: -24,
  padding: [4, 16, 8, 16],
  containerStyle: {
    fill: '#ccc',
    lineWidth: 1
  },
  title: ' ',
  titleConfig: {
    offsetY: -8,
  },
});


const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  plugins: [legend],
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'radial',
    focusNode: 'li',
    linkDistance: 200,
    unitRadius: 200
  },
  defaultEdge: {
    style: {
      endArrow: true
    },
    labelCfg: {
      autoRotate: true,
      style: {
        stroke: "#fff",
        lineWidth: 5
      }
    }
  },
  defaultNode: {
    type: 'donut',
    style: {
      lineWidth: 0,
    },
    labelCfg: {
      position: 'bottom',
    },
  },
});

graph.data(data);
graph.render();

graph.on('node:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('node:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

graph.on('node:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});
graph.on('canvas:click', (evt) => {
  graph.getNodes().forEach((node) => {
    graph.clearItemStates(node);
  });
});
`,title:{zh:"\u751C\u751C\u5708\u8F6C\u8D26\u56FE",en:"Donut Transfer"},filename:"donutTransfer.js",isNew:!1},{id:"customFlow",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*hk1QTqVIHnIAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';
/**
 * by Zhihui Hu
 * https://www.zhihu.com/people/wisdommm
 */

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;

/** ====== data preparation ======= */
// the first layer nodes
const baseData = {
  nodes: [
    { id: "intention1", time: "2022/03/20", title: "User Intend", expandRange: [0, 2], show: false, startPosition: 0, endPosition: 0 },
    { id: "intention2", time: "2022/03/20", title: "User Intend", expandRange: [1, 3], show: false, startPosition: 0, endPosition: 0 },
    { id: "intention3", time: "2022/03/20", title: "User Intend", expandRange: [3, 5], show: false, startPosition: 0, endPosition: 0 },
  ],
  edges: [
    { id: "edge1", source: "intention1", target: "intention2" },
    { id: "edge2", source: "intention2", target: "intention3" },
  ]
};
baseData.nodes.forEach(node => {
  node.type = 'customNode';
});
// layout for the first layer nodes
const gridLayout = new G6.Layout['grid']({
  rows: 1,
  width,
  sortBy: 'id'
});
gridLayout.init(baseData);
gridLayout.execute()

// the second layer nodes
const rangeData = {
  nodes: [
    { id: "0", label: "Like" },
    { id: "1", label: "Follow" },
    { id: "2", label: "Collect" },
    { id: "3", label: "Shop" },
    { id: "4", label: "Pay" },
    { id: "5", label: "Comment" }
  ],
};
rangeData.nodes.forEach(node => node.visible = false);


const graphData = {
  nodes: baseData.nodes.concat(rangeData.nodes),
  edges: baseData.edges
}

/** ====== custom a node type ======= */
G6.registerNode('customNode',
  {
    draw(cfg, group) {
      group.shapeMap = {};
      const rect = group.addShape('circle', {
        attrs: {
          x: 0,
          y: 0,
          r: 50,
          lineWidth: 1,
          fillOpacity: 1,
          radius: 12,
          stroke: 'rgba(0,0,0,0.2)',
          lineWidth: 1,
          fill: '#fff',
        },
        name: 'rect-intention',
      });
      // title
      group.addShape('text', {
        attrs: {
          x: 0,
          y: -10,
          text: cfg.title,
          fontSize: 14,
          fill: '#000',
          fontWeight: 'bold',
          textAlign: 'center'
        },
        name: 'rect-title',
      });
      // time
      group.addShape('text', {
        attrs: {
          x: 0,
          y: 20,
          text: cfg.time,
          fontSize: 14,
          fill: '#999',
          textAlign: 'center'
        },
        name: 'rect-time',
      });
      if (cfg.expandRange) {
        // expand button
        group.addShape('rect', {
          attrs: {
            x: -32.5,
            y: 35,
            width: 65,
            height: 20,
            radius: 8,
            stroke: '#FF6107',
            lineWidth: 1,
            fill: '#FFF',
          },
          name: 'rectBtn',
        });
        // button text
        group.addShape('text', {
          attrs: {
            x: 0,
            y: 51,
            text: cfg.show ? '- collapse' : '+ expand',
            fill: '#FF6107',
            fontSize: 12,
            textAlign: 'center'
          },
          capture: false,
          name: 'rectBtn-text',
        });
        group.shapeMap['rectBtn-text'] = expandShape;
      }

      const expandShape = group.addShape('polygon', {
        attrs: {
          points: [
            [30, 60],
            [-30, 60],
            [cfg.startPosition, 200],
            [cfg.endPosition, 200],
          ],
          fill: 'l(90) 0:rgba(255,97,7,0.18)  1:rgba(255,97,7,0)',
          opacity: 0.5
        },
        visible: false,
        name: 'polygon-shape',
      });
      expandShape.toBack();
      group.shapeMap['polygon-shape'] = expandShape;

      return rect;
    },
    update: (cfg, item) => {
      const group = item.getContainer();
      const expandText = group.shapeMap?.['rectBtn-text'] || group.find(e => e.get('name') === 'rectBtn-text');
      expandText.attr({
        text: cfg.show ? '- collapse' : '+ expand'
      });
      const expandShape = group.shapeMap?.['polygon-shape'] || group.find(e => e.get('name') === 'polygon-shape');
      if (cfg.show) {
        expandShape.set('visible', true);
        expandShape.attr({
          points: [
            [30, 60],
            [-30, 60],
            [cfg.startPosition, 200],
            [cfg.endPosition, 200],
          ],
          opacity: 0,
        });
        expandShape.animate({ opacity: 1 }, { duration: 300, repeat: false });
      } else {
        expandShape.set('visible', false);
        expandShape.animate({ opacity: 0 }, { duration: 300, repeat: false });
      }
    }
  },
  'single-node'
);


/** ====== init the graph ======= */
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas']
  },
  defaultNode: {
    type: 'circle',
    style: {
      r: 30,
      fill: '#fff',
      stroke: '#ccc',
      lineWidth: 1,
    },
  },
  defaultEdge: {
    style: {
      color: "#fff",
      stroke: "#FF6107",
      lineWidth: 12,
      opacity: 0.6
    }
  }
});
graph.read(graphData);


/** ====== bind listener ======= */
graph.on('rectBtn:click', (e) => {
  const model = e.item.getModel();
  const { expandRange } = model;
  if (expandRange) {
    showRoute(model);
  }
});
const showRoute = (nodeData) => {
  nodeData.show = !nodeData.show;

  let { nodes, edges } = graphData;
  const routeNodes = [];
  const routeEdges = [];
  const routeNodesMap = {};

  // the nodes will be shown in the second layer
  let showRangeIds = new Set();
  baseData.nodes.forEach(node => {
    if (!node.show) return;
    const { expandRange } = node;
    for (let i = +expandRange[0]; i < +expandRange[1] + 1; i++) {
      showRangeIds.add(i);
    }
  });
  showRangeIds = Array.from(showRangeIds);
  showRangeIds.sort((a, b) => a - b);

  const rangeLayoutNodes = [];
  rangeData.nodes.forEach(node => {
    const showIdx = showRangeIds.indexOf(+node.id);
    if (showIdx > -1) {
      graph.showItem(node.id);
      rangeLayoutNodes.push(node);
    }
    else graph.hideItem(node.id);
  });

  // layout for the second row nodes
  const rangeGridLayout = new G6.Layout['grid']({
    rows: 1,
    width: 1000,
    begin: [0, 200]
  });
  rangeGridLayout.init({ nodes: rangeLayoutNodes, edges: [] });
  rangeGridLayout.execute();
  rangeLayoutNodes.forEach(node => graph.update(node.id, { x: node.x, y: node.y }))

  // update the 'show', 'startPosition', and 'endPosition' for first layer node
  baseData.nodes.forEach((node) => {
    const { id: nodeId, expandRange, x } = node;
    if (!node.show) {
      graph.updateItem(nodeId, { show: false });
      return;
    }
    const [start, end] = expandRange;
    graph.updateItem(nodeId, {
      show: true,
      // the position for the bottom vertexes of the range polygon
      startPosition: graph.findById(\`\${start}\`).getModel().x - 30 - x,
      endPosition: graph.findById(\`\${end}\`).getModel().x + 30 - x,
    });
  });

  // remove the blue range edges
  graph.getEdges().forEach(edge => {
    if (edge.getModel().tag === 'range') graph.removeItem(edge);
  });

  // add new blue range edges
  showRangeIds.forEach((id, i) => {
    if (i === 0) return;
    graph.addItem('edge', {
      id: \`edge-\${Math.random()}\`,
      source: \`\${showRangeIds[i - 1]}\`,
      target: \`\${id}\`,
      tag: 'range',
      style: {
        lineWidth: 2,
        stroke: '#8CC2FC'
      }
    })
  })
}

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };`,title:{zh:"\u81EA\u5B9A\u4E49\u5206\u7C7B\u56FE",en:"Custom Category Graph"},filename:"customFlow.js",isNew:!1}],icon:"",id:"graphDemos",title:{en:"General Graph Demos",zh:"\u4E00\u822C\u56FE\u573A\u666F\u6848\u4F8B"},childrenKey:"demos",order:0},{demos:[{id:"australiaFire",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*WLzKQpZl5QEAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

insertCss(\`
  #legendContainer{
    position: absolute;
    top: 92px;
    left: 8px;
    width: 100px;
    height: 100px;
  }
  .g6-tooltip {
    border-radius: 6px;
    font-size: 12px;
    color: #fff;
    background-color: #000;
    padding: 2px 8px;
    text-align: center;
  }
  #time {
    position: absolute;
    color: #fff;
    font-size: 25px;
    top: 80px;
    width: 700px;
    text-align: center;
    height: auto;
  }
\`);

const LANG = 'en'; // 'zh'
const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graphDiv = document.getElementById('container');

const timeDiv = document.createElement('div');
timeDiv.id = 'time';
timeDiv.innerHTML = '11th January, 2020';
graphDiv.parentNode.appendChild(timeDiv);

const colors = ['#FD5854', '#FDA25A', '#FFD574', '#3A5A3C'];
const imgs = {
  'state-New South Wales': {
    src: 'https://gw.alipayobjects.com/zos/basement_prod/828aec79-8123-4ca7-baa8-1422a964003a.svg',
    width: 183,
    height: 146,
  },
  'state-Victoria': {
    src: 'https://gw.alipayobjects.com/zos/basement_prod/463d3b0c-b03f-40b3-b6e9-6309b5d637cf.svg',
    width: 116,
    height: 88,
  },
  'state-Queensland': {
    src: 'https://gw.alipayobjects.com/zos/basement_prod/617bc829-50e5-4537-978e-81bf424cb8fd.svg',
    width: 215,
    height: 311,
  },
  'state-Western Australia': {
    src: 'https://gw.alipayobjects.com/zos/basement_prod/c8b4cbb0-57fd-4c18-bbd1-4993b52e5048.svg',
    width: 221,
    height: 357,
  },
  'state-South Australia': {
    src: 'https://gw.alipayobjects.com/zos/basement_prod/6582ef8e-e5ce-4815-9183-b6a70caeb1db.svg',
    width: 169,
    height: 198,
  },
  'state-Tasmania': {
    src: 'https://gw.alipayobjects.com/zos/basement_prod/056fb079-58c1-4697-bb66-15f08512cfb8.svg',
    width: 50,
    height: 45,
  },
  'state-Northern Territory': {
    src: 'https://gw.alipayobjects.com/zos/basement_prod/a616ae60-ebe6-4e61-b085-1a207237e193.svg',
    width: 140,
    height: 243,
  },
  'country-australia': {
    src: 'https://gw.alipayobjects.com/zos/basement_prod/85c5e2e2-c015-495a-8710-3c881c49a3ed.svg',
    width: 559,
    height: 464,
  },
};
const mapImgScale = 0.2;
let minPop = Infinity;
let maxPop = -Infinity;
let minBrightness = Infinity;
let maxBrightness = -Infinity;
const leafSizeRange = [10, 100];

G6.registerNode(
  'circle-bar',
  {
    drawShape(cfg, group) {
      const dist2Ori = Math.sqrt(cfg.x * cfg.x + cfg.y * cfg.y);
      const vecToOrin = [cfg.x / dist2Ori, cfg.y / dist2Ori];
      const startPoint = [(vecToOrin[0] * cfg.size) / 2, (vecToOrin[1] * cfg.size) / 2];
      const scale = Math.sqrt(cfg.data.firePointNums[0]);
      const path = [
        ['M', startPoint[0], startPoint[1]],
        ['L', vecToOrin[0] * scale + startPoint[0], vecToOrin[1] * scale + startPoint[1]],
      ];

      let fillColor = colors[3];
      if (cfg.data.fireBrightnesses[0]) {
        const normalizedBrightness =
          (cfg.data.fireBrightnesses[0] - minBrightness) / (maxBrightness - minBrightness); // [0, 1];
        const colorIdx = Math.floor(normalizedBrightness * 2);
        fillColor = colors[colorIdx];
      }
      let count = 0;
      const timeDiv = document.getElementById('time');

      const keyShape = group.addShape('circle', {
        attrs: {
          x: 0,
          y: 0,
          r: cfg.size / 2,
          fill: fillColor,
          shadowColor: fillColor,
          shadowBlur: 20,
        },
      });
      const bar = group.addShape('path', {
        attrs: {
          path,
          lineWidth: 2,
          fill: fillColor,
          stroke: fillColor,
          shadowColor: fillColor,
          shadowBlur: 20,
        },
      });

      setInterval(
        () => {
          // if (count >= 7) return;
          bar.stopAnimate();
          count++;
          if (cfg.id === 'city-Sydney') {
            timeDiv.innerHTML = \`\${(count % 8) + 11}th January, 2020\`;
          }
          const firePointNum = cfg.data.firePointNums[count % 8] || 0;
          const targetScale = Math.sqrt(firePointNum);
          const targetPath = [
            ['M', startPoint[0], startPoint[1]],
            [
              'L',
              vecToOrin[0] * targetScale + startPoint[0],
              vecToOrin[1] * targetScale + startPoint[1],
            ],
          ];

          fillColor = colors[3];
          if (cfg.data.fireBrightnesses[count % 8]) {
            const normalizedBrightness =
              (cfg.data.fireBrightnesses[count % 8] - minBrightness) /
              (maxBrightness - minBrightness); // [0, 1];
            const colorIdx = Math.floor(normalizedBrightness * 2);
            fillColor = colors[colorIdx];
          }
          bar.animate(
            {
              path: targetPath,
              stroke: fillColor,
              fill: fillColor,
              shadowColor: fillColor,
            },
            {
              repeat: false,
              duration: 300,
            },
          );

          keyShape.stopAnimate();
          keyShape.animate(
            {
              fill: fillColor,
              shadowColor: fillColor,
            },
            {
              repeat: false,
              duration: 300,
            },
          );
        },
        1300,
        'easeCubic',
      );

      return keyShape;
    },
  },
  'circle',
);

const tooltip = new G6.Tooltip({
  // offsetX and offsetY include the padding of the parent container
  offsetX: 10,
  offsetY: 10,
  // the types of items that allow the tooltip show up
  // \u5141\u8BB8\u51FA\u73B0 tooltip \u7684 item \u7C7B\u578B
  itemTypes: ['node'],
  // custom the tooltip's content
  // \u81EA\u5B9A\u4E49 tooltip \u5185\u5BB9
  getContent: (e) => {
    const outDiv = document.createElement('div');
    const populationDes = LANG === 'en' ? 'Population' : '\u4EBA\u53E3\u603B\u6570';
    const model = e.item.getModel();
    const name = \`\${model.xlabel}</br>\${populationDes}: \${model.population}\`;
    outDiv.style.width = 'fit-content';
    //outDiv.style.padding = '0px 0px 20px 0px';
    outDiv.innerHTML = \`<div>\${name}</div>\`;
    return outDiv;
  },
});

fetch('https://gw.alipayobjects.com/os/basement_prod/d676014a-0a11-4ea9-9af4-4038bae3c0a1.json')
  .then((res) => res.json())
  .then((data) => {
    const container = document.getElementById('container');
    container.style.backgroundColor = '#000';
    container.style.textAlign = 'center';
    const graph = new G6.TreeGraph({
      container: 'container',
      width: height < width ? height : width,
      height: height < width ? height : width,
      fitView: true,
      fitViewPadding: 80,
      linkCenter: true,
      defaultNode: {
        size: 30,
        style: {
          lineWidth: 0,
          fill: '#3A5A3C',
        },
      },
      defaultEdge: {
        color: '#FEAB58',
        style: {
          lineWidth: 0.3,
          shadowBlur: 100,
          shadowColor: '#FF4654',
        },
      },
      nodeStateStyles: {
        hover: {
          stroke: '#fff',
          lineWidth: 1,
        },
      },
      modes: {
        default: ['drag-canvas', 'zoom-canvas'],
      },
      layout: {
        type: 'dendrogram',
        direction: 'LR',
        radial: true,
        nodeSep: 10,
        rankSep: 100,
      },
      plugins: [tooltip],
    });

    graph.node((node) => {
      const xlabel = node.label;
      let type = 'circle';
      if (node.isLeaf) type = 'circle-bar';
      else if (node.img) type = 'image';
      let label = node.isLeaf ? '' : node.label;
      switch (label) {
        case 'Australian Capital Territory':
          label = 'Australian\\nCapital Territory';
          break;
        case 'South Australia':
          label = 'South\\nAustralia';
          break;
        case 'New South Wales':
          label = 'New South\\nWales';
          break;
        case 'Northern Territory':
          label = 'Northern\\nTerritory';
          break;
        default:
          break;
      }
      return {
        type,
        xlabel,
        label,
        labelCfg: {
          position: 'center',
          style: {
            fill: '#fff',
            fontSize: 10,
          },
        },
      };
    });

    G6.Util.traverseTree(data, (item) => {
      if (minPop > item.population) minPop = item.population;
      if (maxPop < item.population) maxPop = item.population;
      if (item.data && item.data.fireBrightnesses) {
        item.data.fireBrightnesses.forEach((b) => {
          if (minBrightness > b && b) minBrightness = b;
          if (maxBrightness < b) maxBrightness = b;
        });
      }
    });
    const sizeScale = leafSizeRange[1] - leafSizeRange[0];
    G6.Util.traverseTree(data, (item) => {
      if (!item.isLeaf) {
        if (imgs[item.id]) {
          item.img = imgs[item.id].src;
          item.size = [imgs[item.id].width * mapImgScale, imgs[item.id].height * mapImgScale];
        } else {
          item.size = 10;
        }
        item.style = {
          shadowColor: '#FF4654',
          shadowBlur: 200,
        };
      } else {
        item.size = ((item.population - minPop) / (maxPop - minPop)) * sizeScale + leafSizeRange[0];
      }
      if (item.id === 'country-australia') {
        item.size = [559 * mapImgScale, 464 * mapImgScale];
        item.style.shadowBlur = 200;
      }
    });

    graph.data(data);
    graph.render();

    graph.on('node:mouseenter', (e) => {
      graph.setItemState(e.item, 'hover', true);
    });
    graph.on('node:mouseleave', () => {
      graph.getNodes().forEach((node) => {
        graph.setItemState(node, 'hover', false);
      });
    });

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });

const legendContainer = document.createElement('div');
legendContainer.id = 'legendContainer';
const legendGraphDiv = document.createElement('div');
legendGraphDiv.id = 'legend';
legendContainer.appendChild(legendGraphDiv);
graphDiv.parentNode.appendChild(legendContainer);
const legendGraph = new G6.Graph({
  container: 'legend',
  width: 200,
  height: 200,
  defaultNode: {
    size: 10,
    type: 'circle',
    labelCfg: {
      position: 'right',
      offset: 10,
      style: {
        fill: '#fff',
      },
    },
  },
});
const legendX = 20;
const legendBeginY = 50;
const legendYPadding = 25;
const legendData = {
  nodes: [
    {
      id: 'level1',
      x: legendX,
      y: legendBeginY,
      label: '\u53D7\u707E\u60C5\u51B5\u4E25\u91CD',
      label_en: 'Severely Affected',
      style: {
        fill: '#FD5854',
        lineWidth: 0,
      },
    },
    {
      id: 'level2',
      x: legendX,
      y: legendBeginY + legendYPadding,
      label_en: 'Affected',
      label: '\u53D7\u707E\u60C5\u51B5\u4E00\u822C',
      style: {
        fill: '#FDA25A',
        lineWidth: 0,
      },
    },
    {
      id: 'level3',
      label: '\u53D7\u707E\u60C5\u51B5\u8F83\u8F7B',
      label_en: 'Lightly Affected',
      x: legendX,
      y: legendBeginY + legendYPadding * 2,
      style: {
        fill: '#FFD574',
        lineWidth: 0,
      },
    },
    {
      id: 'level4',
      label: '\u706B\u707E\u672A\u6D89\u53CA',
      label_en: 'Not Affected',
      x: legendX,
      y: legendBeginY + legendYPadding * 3,
      style: {
        fill: '#3A5A3C',
        lineWidth: 0,
      },
    },
    {
      id: 'legendSize',
      label: '\u5706\u9762\u79EF\u4EE3\u8868\u57CE\u5E02\u4EBA\u53E3\u603B\u6570',
      label_en: 'Node Size - Population',
      x: legendX,
      y: legendBeginY + legendYPadding * 4,
      size: 15,
      style: {
        fill: '#3A5A3C',
        lineWidth: 0,
      },
    },
    {
      id: 'legendBar',
      label: '\u53D7\u707E\u70B9\u6570\u91CF',
      label_en: 'Bar Height - # Fire Points',
      x: legendX,
      y: legendBeginY + legendYPadding * 5 + 10,
      type: 'rect',
      size: [2, 30],
      style: {
        fill: '#3A5A3C',
        lineWidth: 0,
      },
    },
  ],
};
if (LANG === 'en') {
  legendData.nodes.forEach((node) => {
    node.label = node.label_en;
  });
}
legendGraph.data(legendData);
legendGraph.render();
`,title:{zh:"\u6FB3\u5927\u5229\u4E9A\u5927\u706B",en:"Australia Fire"},filename:"australiaFire.js",isNew:!1},{id:"mindmap",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/N5tGvsqQR9/xiazai%252520%2812%29.png",source:`import G6 from '@antv/g6';

const {
  Util
} = G6;

const colorArr = [
  '#5B8FF9',
  '#5AD8A6',
  '#5D7092',
  '#F6BD16',
  '#6F5EF9',
  '#6DC8EC',
  '#D3EEF9',
  '#DECFEA',
  '#FFE0C7',
  '#1E9493',
  '#BBDEDE',
  '#FF99C3',
  '#FFE0ED',
  '#CDDDFD',
  '#CDF3E4',
  '#CED4DE',
  '#FCEBB9',
  '#D3CEFD',
  '#945FB9',
  '#FF9845',
];

const rawData = {
  label: 'Modeling Methods',
  id: '0',
  children: [{
      label: 'Classification',
      id: '0-1',
      color: '#5AD8A6',
      children: [{
          label: 'Logistic regression',
          id: '0-1-1',
        },
        {
          label: 'Linear discriminant analysis',
          id: '0-1-2',
        },
        {
          label: 'Rules',
          id: '0-1-3',
        },
        {
          label: 'Decision trees',
          id: '0-1-4',
        },
        {
          label: 'Naive Bayes',
          id: '0-1-5',
        },
        {
          label: 'K nearest neighbor',
          id: '0-1-6',
        },
        {
          label: 'Probabilistic neural network',
          id: '0-1-7',
        },
        {
          label: 'Support vector machine',
          id: '0-1-8',
        },
      ],
    },
    {
      label: 'Consensus',
      id: '0-2',
      color: '#F6BD16',
      children: [{
          label: 'Models diversity',
          id: '0-2-1',
          children: [{
              label: 'Different initializations',
              id: '0-2-1-1',
            },
            {
              label: 'Different parameter choices',
              id: '0-2-1-2',
            },
            {
              label: 'Different architectures',
              id: '0-2-1-3',
            },
            {
              label: 'Different modeling methods',
              id: '0-2-1-4',
            },
            {
              label: 'Different training sets',
              id: '0-2-1-5',
            },
            {
              label: 'Different feature sets',
              id: '0-2-1-6',
            },
          ],
        },
        {
          label: 'Methods',
          id: '0-2-2',
          children: [{
              label: 'Classifier selection',
              id: '0-2-2-1',
            },
            {
              label: 'Classifier fusion',
              id: '0-2-2-2',
            },
          ],
        },
        {
          label: 'Common',
          id: '0-2-3',
          children: [{
              label: 'Bagging',
              id: '0-2-3-1',
            },
            {
              label: 'Boosting',
              id: '0-2-3-2',
            },
            {
              label: 'AdaBoost',
              id: '0-2-3-3',
            },
          ],
        },
      ],
    },
    {
      label: 'Regression',
      id: '0-3',
      color: '#269A99',
      children: [{
          label: 'Multiple linear regression',
          id: '0-3-1',
        },
        {
          label: 'Partial least squares',
          id: '0-3-2',
        },
        {
          label: 'Multi-layer feedforward neural network',
          id: '0-3-3',
        },
        {
          label: 'General regression neural network',
          id: '0-3-4',
        },
        {
          label: 'Support vector regression',
          id: '0-3-5',
        },
      ],
    },
  ],
};

G6.registerNode(
  'dice-mind-map-root', {
    jsx: (cfg) => {
      const width = Util.getTextSize(cfg.label, 16)[0] + 24;
      const stroke = cfg.style.stroke || '#096dd9';
      const fill = cfg.style.fill;

      return \`
      <group>
        <rect draggable="true" style={{width: \${width}, height: 42, stroke: \${stroke}, radius: 4}} keyshape>
          <text style={{ fontSize: 16, marginLeft: 12, marginTop: 12 }}>\${cfg.label}</text>
          <text style={{ marginLeft: \${
            width - 16
          }, marginTop: -20, stroke: '#66ccff', fill: '#000', cursor: 'pointer', opacity: \${
        cfg.hover ? 0.75 : 0
      } }} action="add">+</text>
        </rect>
      </group>
    \`;
    },
    getAnchorPoints() {
      return [
        [0, 0.5],
        [1, 0.5],
      ];
    },
  },
  'single-node',
);
G6.registerNode(
  'dice-mind-map-sub', {
    jsx: (cfg) => {
      const width = Util.getTextSize(cfg.label, 14)[0] + 24;
      const color = cfg.color || cfg.style.stroke;

      return \`
      <group>
        <rect draggable="true" style={{width: \${width + 24}, height: 22}} keyshape>
          <text draggable="true" style={{ fontSize: 14, marginLeft: 12, marginTop: 6 }}>\${
            cfg.label
          }</text>
          <text style={{ marginLeft: \${
            width - 8
          }, marginTop: -10, stroke: \${color}, fill: '#000', cursor: 'pointer', opacity: \${
        cfg.hover ? 0.75 : 0
      }, next: 'inline' }} action="add">+</text>
          <text style={{ marginLeft: \${
            width - 4
          }, marginTop: -10, stroke: \${color}, fill: '#000', cursor: 'pointer', opacity: \${
        cfg.hover ? 0.75 : 0
      }, next: 'inline' }} action="delete">-</text>
        </rect>
        <rect style={{ fill: \${color}, width: \${width + 24}, height: 2, x: 0, y: 22 }} />
        
      </group>
    \`;
    },
    getAnchorPoints() {
      return [
        [0, 0.965],
        [1, 0.965],
      ];
    },
  },
  'single-node',
);
G6.registerNode(
  'dice-mind-map-leaf', {
    jsx: (cfg) => {
      const width = Util.getTextSize(cfg.label, 12)[0] + 24;
      const color = cfg.color || cfg.style.stroke;

      return \`
      <group>
        <rect draggable="true" style={{width: \${width + 20}, height: 26, fill: 'transparent' }}>
          <text style={{ fontSize: 12, marginLeft: 12, marginTop: 6 }}>\${cfg.label}</text>
              <text style={{ marginLeft: \${
                width - 8
              }, marginTop: -10, stroke: \${color}, fill: '#000', cursor: 'pointer', opacity: \${
        cfg.hover ? 0.75 : 0
      }, next: 'inline' }} action="add">+</text>
              <text style={{ marginLeft: \${
                width - 4
              }, marginTop: -10, stroke: \${color}, fill: '#000', cursor: 'pointer', opacity: \${
        cfg.hover ? 0.75 : 0
      }, next: 'inline' }} action="delete">-</text>
        </rect>
        <rect style={{ fill: \${color}, width: \${width + 24}, height: 2, x: 0, y: 32 }} />
        
      </group>
    \`;
    },
    getAnchorPoints() {
      return [
        [0, 0.965],
        [1, 0.965],
      ];
    },
  },
  'single-node',
);
G6.registerBehavior('dice-mindmap', {
  getEvents() {
    return {
      'node:click': 'clickNode',
      'node:dblclick': 'editNode',
      'node:mouseenter': 'hoverNode',
      'node:mouseleave': 'hoverNodeOut',
    };
  },
  clickNode(evt) {
    const model = evt.item.get('model');
    const name = evt.target.get('action');
    switch (name) {
      case 'add':
        const newId =
          model.id +
          '-' +
          (((model.children || []).reduce((a, b) => {
              const num = Number(b.id.split('-').pop());
              return a < num ? num : a;
            }, 0) || 0) +
            1);
        evt.currentTarget.updateItem(evt.item, {
          children: (model.children || []).concat([{
            id: newId,
            direction: newId.charCodeAt(newId.length - 1) % 2 === 0 ? 'right' : 'left',
            label: 'New',
            type: 'dice-mind-map-leaf',
            color: model.color || colorArr[Math.floor(Math.random() * colorArr.length)],
          }, ]),
        });
        evt.currentTarget.layout(false);
        break;
      case 'delete':
        const parent = evt.item.get('parent');
        evt.currentTarget.updateItem(parent, {
          children: (parent.get('model').children || []).filter((e) => e.id !== model.id),
        });
        evt.currentTarget.layout(false);
        break;
      case 'edit':
        break;
      default:
        return;
    }
  },
  editNode(evt) {
    const item = evt.item;
    const model = item.get('model');
    const {
      x,
      y
    } = item.calculateBBox();
    const graph = evt.currentTarget;
    const realPosition = evt.currentTarget.getClientByPoint(x, y);
    const el = document.createElement('div');
    const fontSizeMap = {
      'dice-mind-map-root': 24,
      'dice-mind-map-sub': 18,
      'dice-mind-map-leaf': 16,
    };
    el.style.fontSize = fontSizeMap[model.type] + 'px';
    el.style.position = 'fixed';
    el.style.top = realPosition.y + 'px';
    el.style.left = realPosition.x + 'px';
    el.style.paddingLeft = '12px';
    el.style.transformOrigin = 'top left';
    el.style.transform = \`scale(\${evt.currentTarget.getZoom()})\`;
    const input = document.createElement('input');
    input.style.border = 'none';
    input.value = model.label;
    input.style.width = Util.getTextSize(model.label, fontSizeMap[model.type])[0] + 'px';
    input.className = 'dice-input';
    el.className = 'dice-input';
    el.appendChild(input);
    document.body.appendChild(el);
    const destroyEl = () => {
      document.body.removeChild(el);
    };
    const clickEvt = (event) => {
      if (!(event.target && event.target.className && event.target.className.includes('dice-input'))) {
        window.removeEventListener('mousedown', clickEvt);
        window.removeEventListener('scroll', clickEvt);
        graph.updateItem(item, {
          label: input.value,
        });
        graph.layout(false);
        graph.off('wheelZoom', clickEvt);
        destroyEl();
      }
    };
    graph.on('wheelZoom', clickEvt);
    window.addEventListener('mousedown', clickEvt);
    window.addEventListener('scroll', clickEvt);
    input.addEventListener('keyup', (event) => {
      if (event.key === 'Enter') {
        clickEvt({
          target: {},
        });
      }
    });
  },
  hoverNode(evt) {
    evt.currentTarget.updateItem(evt.item, {
      hover: true,
    });
  },
  hoverNodeOut(evt) {
    evt.currentTarget.updateItem(evt.item, {
      hover: false,
    });
  },
});
G6.registerBehavior('scroll-canvas', {
  getEvents: function getEvents() {
    return {
      wheel: 'onWheel',
    };
  },

  onWheel: function onWheel(ev) {
    const {
      graph
    } = this;
    if (!graph) {
      return;
    }
    if (ev.ctrlKey) {
      const canvas = graph.get('canvas');
      const point = canvas.getPointByClient(ev.clientX, ev.clientY);
      let ratio = graph.getZoom();
      if (ev.wheelDelta > 0) {
        ratio += ratio * 0.05;
      } else {
        ratio *= ratio * 0.05;
      }
      graph.zoomTo(ratio, {
        x: point.x,
        y: point.y,
      });
    } else {
      const x = ev.deltaX || ev.movementX;
      const y = ev.deltaY || ev.movementY || (-ev.wheelDelta * 125) / 3;
      graph.translate(-x, -y);
    }
    ev.preventDefault();
  },
});

const dataTransform = (data) => {
  const changeData = (d, level = 0, color) => {
    const data = {
      ...d,
    };
    switch (level) {
      case 0:
        data.type = 'dice-mind-map-root';
        break;
      case 1:
        data.type = 'dice-mind-map-sub';
        break;
      default:
        data.type = 'dice-mind-map-leaf';
        break;
    }

    data.hover = false;

    if (color) {
      data.color = color;
    }

    if (level === 1 && !d.direction) {
      if (!d.direction) {
        data.direction = d.id.charCodeAt(d.id.length - 1) % 2 === 0 ? 'right' : 'left';
      }
    }

    if (d.children) {
      data.children = d.children.map((child) => changeData(child, level + 1, data.color));
    }
    return data;
  };
  return changeData(data);
};

const container = document.getElementById('container');
const el = document.createElement('pre');
el.innerHTML =
  'Double click on node to change title, hover node to display ops buttons\\n\u53CC\u51FB\u4FEE\u6539\u8282\u70B9\u6807\u9898, hover\u8282\u70B9\u663E\u793A\u64CD\u4F5C\u6309\u94AE';

container.appendChild(el);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;
const tree = new G6.TreeGraph({
  container: 'container',
  width,
  height,
  fitView: true,
  fitViewPadding: [10, 20],
  layout: {
    type: 'mindmap',
    direction: 'H',
    getHeight: () => {
      return 16;
    },
    getWidth: (node) => {
      return node.level === 0 ?
        Util.getTextSize(node.label, 16)[0] + 12 :
        Util.getTextSize(node.label, 12)[0];
    },
    getVGap: () => {
      return 10;
    },
    getHGap: () => {
      return 60;
    },
    getSide: (node) => {
      return node.data.direction;
    },
  },
  defaultEdge: {
    type: 'cubic-horizontal',
    style: {
      lineWidth: 2,
    },
  },
  minZoom: 0.5,
  modes: {
    default: ['drag-canvas', 'zoom-canvas', 'dice-mindmap'],
  },
});

tree.data(dataTransform(rawData));

tree.render();
`,title:{zh:"\u601D\u7EF4\u5BFC\u56FE",en:"Mindmap"},filename:"mindmap.js",isNew:!1},{id:"customFlow",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1AZTQ4oSPowAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

// \u5B9E\u9645\u5F00\u53D1\u4E2D\u628A window.AntVUtil \u6362\u6210\u4ECE @antv/util \u5F15\u5165\u7684\u76F8\u5173\u6A21\u5757
// replace window.AntVUtil.isObject with
// import { isObject } from '@antv/util';
const isObject = window.AntVUtil.isObject;

/**
 * Fund Transfer Demo
 * by \u5341\u543E
 */
const colorMap = {
  A: '#72CC4A',
  B: '#1A91FF',
  C: '#FFAA15',
};
const data = {
  nodes: [
    {
      id: '1',
      label: 'Company1',
    },
    {
      id: '2',
      label: 'Company2',
    },
    {
      id: '3',
      label: 'Company3',
    },
    {
      id: '4',
      label: 'Company4',
    },
    {
      id: '5',
      label: 'Company5',
    },
    {
      id: '6',
      label: 'Company6',
    },
    {
      id: '7',
      label: 'Company7',
    },
    {
      id: '8',
      label: 'Company8',
    },
    {
      id: '9',
      label: 'Company9',
    },
  ],
  edges: [
    {
      source: '1',
      target: '2',
      data: {
        type: 'A',
        amount: '100,000 Yuan',
        date: '2019-08-03',
      },
    },
    {
      source: '1',
      target: '3',
      data: {
        type: 'B',
        amount: '100,000 Yuan',
        date: '2019-08-03',
      },
    },
    {
      source: '2',
      target: '5',
      data: {
        type: 'C',
        amount: '100,000 Yuan',
        date: '2019-08-03',
      },
    },
    {
      source: '5',
      target: '6',
      data: {
        type: 'B',
        amount: '100,000 Yuan',
        date: '2019-08-03',
      },
    },
    {
      source: '3',
      target: '4',
      data: {
        type: 'C',
        amount: '100,000 Yuan',
        date: '2019-08-03',
      },
    },
    {
      source: '4',
      target: '7',
      data: {
        type: 'B',
        amount: '100,000 Yuan',
        date: '2019-08-03',
      },
    },
    {
      source: '1',
      target: '8',
      data: {
        type: 'B',
        amount: '100,000 Yuan',
        date: '2019-08-03',
      },
    },
    {
      source: '1',
      target: '9',
      data: {
        type: 'C',
        amount: '100,000 Yuan',
        date: '2019-08-03',
      },
    },
  ],
};

G6.registerNode(
  'round-rect',
  {
    drawShape: function drawShape(cfg, group) {
      const width = cfg.style.width;
      const stroke = cfg.style.stroke;
      const rect = group.addShape('rect', {
        attrs: {
          x: -width / 2,
          y: -15,
          width,
          height: 30,
          radius: 15,
          stroke,
          lineWidth: 1.2,
          fillOpacity: 1,
        },
        name: 'rect-shape',
      });
      group.addShape('circle', {
        attrs: {
          x: -width / 2,
          y: 0,
          r: 3,
          fill: stroke,
        },
        name: 'circle-shape',
      });
      group.addShape('circle', {
        attrs: {
          x: width / 2,
          y: 0,
          r: 3,
          fill: stroke,
        },
        name: 'circle-shape2',
      });
      return rect;
    },
    getAnchorPoints: function getAnchorPoints() {
      return [
        [0, 0.5],
        [1, 0.5],
      ];
    },
    update: function update(cfg, item) {
      const group = item.getContainer();
      const children = group.get('children');
      const node = children[0];
      const circleLeft = children[1];
      const circleRight = children[2];

      const stroke = cfg.style.stroke;

      if (stroke) {
        node.attr('stroke', stroke);
        circleLeft.attr('fill', stroke);
        circleRight.attr('fill', stroke);
      }
    },
  },
  'single-node',
);

G6.registerEdge('fund-polyline', {
  itemType: 'edge',
  draw: function draw(cfg, group) {
    const startPoint = cfg.startPoint;
    const endPoint = cfg.endPoint;

    const Ydiff = endPoint.y - startPoint.y;

    const slope = Ydiff !== 0 ? Math.min(500 / Math.abs(Ydiff), 20) : 0;

    const cpOffset = slope > 15 ? 0 : 16;
    const offset = Ydiff < 0 ? cpOffset : -cpOffset;

    const line1EndPoint = {
      x: startPoint.x + slope,
      y: endPoint.y + offset,
    };
    const line2StartPoint = {
      x: line1EndPoint.x + cpOffset,
      y: endPoint.y,
    };

    // \u63A7\u5236\u70B9\u5750\u6807
    const controlPoint = {
      x:
        ((line1EndPoint.x - startPoint.x) * (endPoint.y - startPoint.y)) /
          (line1EndPoint.y - startPoint.y) +
        startPoint.x,
      y: endPoint.y,
    };

    let path = [
      ['M', startPoint.x, startPoint.y],
      ['L', line1EndPoint.x, line1EndPoint.y],
      ['Q', controlPoint.x, controlPoint.y, line2StartPoint.x, line2StartPoint.y],
      ['L', endPoint.x, endPoint.y],
    ];

    if (Math.abs(Ydiff) <= 5) {
      path = [
        ['M', startPoint.x, startPoint.y],
        ['L', endPoint.x, endPoint.y],
      ];
    }

    const endArrow = cfg?.style && cfg.style.endArrow ? cfg.style.endArrow : false;
    if (isObject(endArrow)) endArrow.fill = stroke;
    const line = group.addShape('path', {
      attrs: {
        path,
        stroke: colorMap[cfg.data && cfg.data.type],
        lineWidth: 1.2,
        endArrow,
      },
      name: 'path-shape',
    });

    const labelLeftOffset = 0;
    const labelTopOffset = 8;
    // amount
    const amount = group.addShape('text', {
      attrs: {
        text: cfg.data && cfg.data.amount,
        x: line2StartPoint.x + labelLeftOffset,
        y: endPoint.y - labelTopOffset - 2,
        fontSize: 14,
        textAlign: 'left',
        textBaseline: 'middle',
        fill: '#000000D9',
      },
      name: 'text-shape-amount',
    });
    // type
    group.addShape('text', {
      attrs: {
        text: cfg.data && cfg.data.type,
        x: line2StartPoint.x + labelLeftOffset,
        y: endPoint.y - labelTopOffset - amount.getBBox().height - 2,
        fontSize: 10,
        textAlign: 'left',
        textBaseline: 'middle',
        fill: '#000000D9',
      },
      name: 'text-shape-type',
    });
    // date
    group.addShape('text', {
      attrs: {
        text: cfg.data && cfg.data.date,
        x: line2StartPoint.x + labelLeftOffset,
        y: endPoint.y + labelTopOffset + 4,
        fontSize: 12,
        fontWeight: 300,
        textAlign: 'left',
        textBaseline: 'middle',
        fill: '#000000D9',
      },
      name: 'text-shape-date',
    });
    return line;
  },
});

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'dagre',
    rankdir: 'LR',
    nodesep: 30,
    ranksep: 100,
  },
  modes: {
    default: ['drag-canvas'],
  },
  defaultNode: {
    type: 'round-rect',
    labelCfg: {
      style: {
        fill: '#000000A6',
        fontSize: 10,
      },
    },
    style: {
      stroke: '#72CC4A',
      width: 150,
    },
  },
  defaultEdge: {
    type: 'fund-polyline',
  },
});

graph.data(data);
graph.render();

const edges = graph.getEdges();
edges.forEach(function (edge) {
  const line = edge.getKeyShape();
  const stroke = line.attr('stroke');
  const targetNode = edge.getTarget();
  targetNode.update({
    style: {
      stroke,
    },
  });
});
graph.paint();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u81EA\u5B9A\u4E49\u6D41\u5411\u56FE",en:"Custom Flow"},filename:"customFlow.js",isNew:!1},{id:"indentedTree",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*9EHDSZVmLVgAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const { Util } = G6;


const rawData = {
  label: 'Modeling Methods',
  id: '0',
  isRoot: true,
  children: [
    {
      label: 'Classification',
      id: '0-1',
      color: '#5AD8A6',
      children: [
        {
          label: 'Logistic regression',
          id: '0-1-1',
        },
        {
          label: 'Linear discriminant analysis',
          id: '0-1-2',
        },
        {
          label: 'Rules',
          id: '0-1-3',
        },
        {
          label: 'Decision trees',
          id: '0-1-4',
        },
        {
          label: 'Naive Bayes',
          id: '0-1-5',
        },
        {
          label: 'K nearest neighbor',
          id: '0-1-6',
        },
        {
          label: 'Probabilistic neural network',
          id: '0-1-7',
        },
        {
          label: 'Support vector machine',
          id: '0-1-8',
        },
      ],
    },
    {
      label: 'Consensus',
      id: '0-2',
      color: '#F6BD16',
      children: [
        {
          label: 'Models diversity',
          id: '0-2-1',
          children: [
            {
              label: 'Different initializations',
              id: '0-2-1-1',
            },
            {
              label: 'Different parameter choices',
              id: '0-2-1-2',
            },
            {
              label: 'Different architectures',
              id: '0-2-1-3',
            },
            {
              label: 'Different modeling methods',
              id: '0-2-1-4',
            },
            {
              label: 'Different training sets',
              id: '0-2-1-5',
            },
            {
              label: 'Different feature sets',
              id: '0-2-1-6',
            },
          ],
        },
        {
          label: 'Methods',
          id: '0-2-2',
          children: [
            {
              label: 'Classifier selection',
              id: '0-2-2-1',
            },
            {
              label: 'Classifier fusion',
              id: '0-2-2-2',
            },
          ],
        },
        {
          label: 'Common',
          id: '0-2-3',
          children: [
            {
              label: 'Bagging',
              id: '0-2-3-1',
            },
            {
              label: 'Boosting',
              id: '0-2-3-2',
            },
            {
              label: 'AdaBoost',
              id: '0-2-3-3',
            },
          ],
        },
      ],
    },
    {
      label: 'Regression',
      id: '0-3',
      color: '#269A99',
      children: [
        {
          label: 'Multiple linear regression',
          id: '0-3-1',
        },
        {
          label: 'Partial least squares',
          id: '0-3-2',
        },
        {
          label: 'Multi-layer feedforward neural network',
          id: '0-3-3',
        },
        {
          label: 'General regression neural network',
          id: '0-3-4',
        },
        {
          label: 'Support vector regression',
          id: '0-3-5',
        },
      ],
    },
  ],
};

const COLORS = ['#5B8FF9', '#F6BD16', '#5AD8A6', '#945FB9', '#E86452', '#6DC8EC', '#FF99C3', '#1E9493', '#FF9845', '#5D7092'];
const BaseConfig = {
  nameFontSize: 12,
  childCountWidth: 22,
  countMarginLeft: 0,
  propertyCountWidth: 30,
  itemPadding: 16,
  selectedIconWidth: 12,
  nameMarginLeft: 4,
  rootPadding: 18,
};
const KeyStyle = {
  background: {
    default: '',
    hover: '#e8f7ff',
    selected: '#e8f7ff',
    actived: '#e8f7ff',
  },
  borderColor: {
    default: '',
    hover: '#1890FF',
    selected: '#1890FF',
    actived: '#1890FF',
  },
};
const ChildCountStyle = {
  background: {
    default: '#fff',
    hover: '#E8F7FF',
    expanded: '#E6FFFB',
    expandedHover: '#CEF5EF',
  },
  borderColor: {
    default: '#1890ff',
    expanded: '#5CDBD3',
  },
};
const NameStyle = {
  color: {
    default: 'rgba(0, 0, 0, .65)',
    dash: 'rgba(0, 0, 0, .3)',
    hover: '#40A8FF',
    actived: '#40A8FF',
    selected: '#40A8FF',
  },
};
const MainStyle = {
  background: {
    default: '#fff',
    hover: '#e8f7ff',
    actived: '#e8f7ff',
    selected: '#e8f7ff',
  },
};


G6.registerNode('treeNode', {
  options: {
    style: {
      fill: '#e8f7ff',
    },
    stateStyles: {
      hover: {
        fillOpacity: 0.6,
      },
      selected: {},
    },
  },
  addLabel(group, label, x, y) {
    return group.addShape('text', {
      attrs: {
        text: label,
        x: x * 2,
        y,
        textAlign: 'left',
        textBaseline: 'top',
        fontFamily: 'PingFangSC-Regular',
      },
      cursor: 'pointer',
      name: 'name-text-shape',
    });
  },
  addBottomLine(group, rootNode, props) {
    if (!rootNode) {
      const { x, width, stroke, lineWidth } = props;
      return group.addShape('path', {
        attrs: {
          path: [
            ['M', x - 1, 0],
            ['L', width, 0],
          ],
          stroke,
          lineWidth,
        },
        name: 'node-path-shape',
      });
    }
  },
  addHoverBack(group, rootNode, props) {
    const {
      hasChildren,
      width,
      selectedIconWidth,
      childCountWidth,
      selected,
      fill,
      height,
      selectedUrl,
      x,
      y,
      mainX,
      mainY
    } = props;

    if (!rootNode) {
      // hover\u80CC\u666F
      let backgroundWidth = hasChildren ? width - childCountWidth : width;

      if (!selected) {
        backgroundWidth -= selectedIconWidth;
      }
      group.addShape('rect', {
        attrs: {
          x: mainX,
          y: mainY,
          width: backgroundWidth,
          height,
          radius: 14,
          fill: fill,
          cursor: 'pointer',
        },
        // capture: false,
        name: 'main-shape',
      });

      // \u9009\u4E2D\u72B6\u6001
      group.addShape('image', {
        attrs: {
          img: selected ? selectedUrl : '',
          x,
          y: y - 6,
          width: selectedIconWidth,
          height: 12,
          cursor: 'pointer',
        },
        name: 'main-selected-shape',
      });
    }
  },
  addName(group, rootNode, props) {
    const {
      label,
      mainX,
      rootPadding,
      fill,
      selected,
      selectedIconWidth,
      nameMarginLeft,
      y
    } = props;
    if (rootNode) {
      group.addShape('text', {
        attrs: {
          text: label,
          x: mainX + rootPadding,
          y: 1,
          textAlign: 'left',
          textBaseline: 'middle',
          fill,
          fontSize: 12,
          fontFamily: 'PingFangSC-Regular',
          cursor: 'pointer',
        },
        name: 'root-text-shape',
      });
    } else {
      group.addShape('text', {
        attrs: {
          text: label,
          x: selected ? mainX + 6 + selectedIconWidth + nameMarginLeft : mainX + 6,
          y: y - 5,
          textAlign: 'start',
          textBaseline: 'top',
          fill,
          fontSize: 12,
          fontFamily: 'PingFangSC-Regular',
          cursor: 'pointer'
        },
        name: 'not-root-text-shape',
      });
    }
  },
  addChildCount(group, rootNode, props) {
    const {
      hasChildren, width, childCountWidth, collapsed, schemaType
    } = props
    if (hasChildren && !rootNode) {
      const childCountHeight = 12;
      const childCountX = width - childCountWidth;
      const childCountY = -childCountHeight / 2;

      group.addShape('rect', {
        attrs: {
          width: childCountWidth,
          height: 12,
          stroke: collapsed
            ? ChildCountStyle.borderColor.default
            : ChildCountStyle.borderColor.expanded,
          fill: collapsed
            ? ChildCountStyle.background.default
            : ChildCountStyle.background.expanded,
          x: childCountX,
          y: childCountY,
          radius: 6,
          cursor: 'pointer',
        },
        name: 'child-count-rect-shape',
      });
      group.addShape('text', {
        attrs: {
          text: schemaType ? \`\${schemaType.subTypeCount}\` : '0',
          fill: 'rgba(0, 0, 0, .65)',
          x: childCountX + childCountWidth / 2,
          y: childCountY + 12,
          fontSize: 10,
          width: childCountWidth,
          textAlign: 'center',
          cursor: 'pointer',
        },
        name: 'child-count-text-shape',
      });
    }
  },
  draw(model, group) {
    const { collapsed, selected, isInclude, children, label } = model;
    const schemaType = model.schemaType;
    const hasChildren = children?.length;
    const {
      childCountWidth,
      countMarginLeft,
      itemPadding,
      selectedIconWidth,
      nameMarginLeft,
      rootPadding,
    } = BaseConfig;

    let width = 0;
    const height = 28;
    // let x = -width / 2;
    const x = 0;
    const y = -height / 2;
    const borderRadius = 4;
    // \u540D\u79F0\u6587\u672C
    const text = this.addLabel(group, label, x, y);
    const textWidth = text.getBBox().width;
    width = textWidth + itemPadding + selectedIconWidth + nameMarginLeft;

    width = width < minWidth ? minWidth : width;

    if (!rootNode && hasChildren) {
      width += countMarginLeft;
      width += childCountWidth;
    }

    const keyShapeAttrs = {
      x,
      y,
      width,
      height,
      radius: borderRadius,
      fill: undefined,
      stroke: undefined,
    };
    // keyShape\u6839\u8282\u70B9\u9009\u4E2D\u6837\u5F0F
    if (rootNode && selected) {
      keyShapeAttrs.fill = KeyStyle.background.selected;
      keyShapeAttrs.stroke = KeyStyle.borderColor.selected;
    }
    const keyShape = group.addShape('rect', {
      attrs: keyShapeAttrs,
      name: 'root-key-shape-rect-shape',
    });

    this.addBottomLine(group, rootNode, {
      stroke: '#AAB7C4',
      lineWidth: 1,
      x,
      width
    })

    const mainX = x - 6;
    const mainY = -height - 1;

    const hoverBackProps = {
      hasChildren, width, selectedIconWidth,
      childCountWidth,
      selected,
      fill: MainStyle.background.default,
      height,
      selectedUrl,
      x,
      y,
      mainX,
      mainY
    };
    this.addHoverBack(group, rootNode, hoverBackProps);

    let nameColor = NameStyle.color.default;
    if (selected) {
      nameColor = NameStyle.color.selected;
    }

    if (model.showInclude && !isInclude) {
      nameColor = NameStyle.color.dash;
    }

    // \u540D\u79F0
    const nameProps = {
      label,
      mainX,
      rootPadding,
      fill: nameColor,
      selected,
      selectedIconWidth,
      nameMarginLeft,
      y
    };
    this.addName(group, rootNode, nameProps);

    // \u5B50\u7C7B\u6570\u91CF
    const childCountProps = {
      hasChildren, width, childCountWidth, collapsed, schemaType
    }
    this.addChildCount(group, rootNode, childCountProps);

    return keyShape;
  },
});

G6.registerNode('indentedRoot', {
  draw(model, group) {
    const rootColor = '#576286';
    const keyShape = group.addShape('rect', {
      attrs: {
        x: -46,
        y: -16,
        width: 92,
        height: 32,
        fill: rootColor,
        radius: 2,
        stroke: '#5B8FF9',
        lineWidth: model.selected ? 2 : 0,
        cursor: 'pointer'
      },
      name: 'key-shape'
    })

    if (model.label) {
      const text = group.addShape('text', {
        attrs: {
          text: model.label,
          fill: "#fff",
          fontSize: 12,
          x: 0,
          y: 0,
          textAlign: 'center',
          textBaseline: 'middle',
          cursor: 'pointer'
        },
        name: 'root-text-shape'
      });
      const textBBox = text.getBBox();
      const width = textBBox.width + 24;
      const height = textBBox.height + 12;
      keyShape.attr({
        x: -width / 2,
        y: -height / 2,
        width,
        height
      })
    }

    const { collapsed, children } = model;
    const hasChildren = children?.length;
    let clickCircleY = 22;
    // \u5B50\u7C7B\u6570\u91CF\uFF0C\u7ED8\u5236\u5706\u70B9\u5728\u8282\u70B9\u6B63\u4E0B\u65B9
    if (hasChildren) {
      const schemaType = model.schemaType;
      const childCountGroup = group.addGroup({
        name: 'child-count-group'
      })
      childCountGroup.setMatrix([1, 0, 0, 0, 1, 0, 0, clickCircleY, 1])
      const countBackWidth = collapsed ? 26 : 12;
      childCountGroup.addShape('rect', {
        attrs: {
          width: countBackWidth,
          height: 12,
          radius: 6,
          stroke: rootColor,
          lineWidth: 2,
          fill: collapsed ? rootColor : '#fff',
          x: -countBackWidth / 2,
          y: -6,
          cursor: 'pointer',
        },
        name: 'child-count-rect-shape',
      });
      const childCountText = childCountGroup.addShape('text', {
        attrs: {
          text: schemaType ? \`\${schemaType.subTypeCount}\` : '0',
          fill: '#fff',
          x: 0,
          y: 0,
          fontSize: 10,
          textAlign: 'center',
          textBaseline: 'middle',
          cursor: 'pointer',
        },
        name: 'child-count-text-shape',
      });
      const childHoverIcon = childCountGroup.addShape('path', {
        attrs: {
          stroke: '#fff',
          lineWidth: 1,
          cursor: 'pointer',
          path: [['M', -3, 2], ['L', 0, -2], ['L', 3, 2]]
        },
        name: 'child-count-expand-icon',
        capture: false
      });
      childCountGroup.addShape('path', {
        attrs: {
          path: [['M', 0, -13], ['L', 0, -6]],
          stroke: rootColor,
          lineWidth: 2,
        }
      })
      childHoverIcon.hide();

      // \u8FDE\u63A5 count \u7684\u7EBF\u6BB5	
      const countLink = group.addShape('path', {
        attrs: {
          path: [['M', 0, 0], ['L', 0, 11]],
          stroke: model.branchColor,
          lineWidth: 2,
        },
        name: 'count-link'
      });
      countLink.toBack();

      if (collapsed) {
        childCountGroup.show();
        childCountText.show();
        countLink.show();
      }
      else {
        childCountGroup.hide();
        childCountText.hide();
        countLink.hide();
      }
      clickCircleY += 16;
    }

    // \u589E\u52A0\u5B50\u8282\u70B9 icon	
    const addChildIcon = group.addShape('marker', {
      attrs: {
        x: 0,
        y: clickCircleY,
        r: 6,
        symbol: G6.Marker.expand,
        stroke: '#999',
        fill: '#fff',
        lineWidth: 1,
        cursor: 'pointer'
      },
      name: 'add-child-icon',
    });

    addChildIcon.hide();
    // \u8FDE\u63A5\u589E\u52A0\u5B50\u8282\u70B9 icon \u7684\u7EBF\u6BB5	
    const addChildLink = group.addShape('path', {
      attrs: {
        path: [['M', 0, clickCircleY - 10], ['L', 0, clickCircleY]],
        stroke: model.branchColor,
        lineWidth: 2,
      },
      name: 'add-child-link'
    });
    addChildLink.toBack();
    addChildLink.hide();

    const bbox = keyShape.getBBox();
    const backContainer = group.addShape('path', {
      attrs: {
        path: hasChildren ? [
          ['M', bbox.minX, bbox.minY],
          ['L', bbox.maxX, bbox.minY],
          ['L', bbox.maxX, bbox.maxY],
          ['L', 10, bbox.maxY],
          ['L', 10, bbox.maxY + 28],
          ['L', -10, bbox.maxY + 28],
          ['L', -10, bbox.maxY],
          ['L', bbox.minX, bbox.maxY],
          ['Z']
        ] : [
          ['M', bbox.minX, bbox.minY],
          ['L', bbox.maxX, bbox.minY],
          ['L', bbox.maxX, bbox.maxY],
          ['L', 10, bbox.maxY],
          ['L', 10, bbox.maxY + 14],
          ['L', -10, bbox.maxY + 14],
          ['L', -10, bbox.maxY],
          ['L', bbox.minX, bbox.maxY],
          ['Z']
        ],
        fill: '#fff',
        opacity: 0
      },
      draggable: true
    })
    backContainer.toBack();
    return keyShape;
  },
  getAnchorPoints() {
    return [
      [0.5, 1],
    ];
  },
  update: undefined,
  setState(name, value, node) {
    if (name === 'closest') {
      const keyShape = node.getKeyShape();
      if (value) keyShape.attr('lineWidth', 2);
      else if (!node.getModel().selected) keyShape.attr('lineWidth', 1);
    }
  }
});

G6.registerNode('indentedNode', {
  addChildCount(group, tag, props) {
    const { collapsed, branchColor, count } = props;
    let clickCircleY = 10;
    // \u5B50\u7C7B\u6570\u91CF icon\uFF0C\u7ED8\u5236\u5706\u70B9\u5728\u8282\u70B9\u6B63\u4E0B\u65B9
    if (tag) {
      const childCountGroup = group.addGroup({
        name: 'child-count-group'
      });
      childCountGroup.setMatrix([1, 0, 0, 0, 1, 0, 0, clickCircleY, 1])
      const countBackWidth = collapsed ? 26 : 12;
      childCountGroup.addShape('rect', {
        attrs: {
          width: countBackWidth,
          height: 12,
          radius: 6,
          stroke: branchColor,
          lineWidth: 2,
          fill: collapsed ? branchColor : '#fff',
          x: -countBackWidth / 2,
          y: -6,
          cursor: 'pointer',
        },
        name: 'child-count-rect-shape',
      });
      const childCountText = childCountGroup.addShape('text', {
        attrs: {
          text: count,
          fill: '#fff',
          x: 0,
          y: 0,
          fontSize: 10,
          textAlign: 'center',
          textBaseline: 'middle',
          cursor: 'pointer',
        },
        name: 'child-count-text-shape',
      });
      const childHoverIcon = childCountGroup.addShape('path', {
        attrs: {
          stroke: '#fff',
          lineWidth: 1,
          cursor: 'pointer',
          path: [['M', -3, 2], ['L', 0, -2], ['L', 3, 2]]
        },
        name: 'child-count-expand-icon',
        capture: false
      });
      childHoverIcon.hide();

      // \u8FDE\u63A5 count \u7684\u7EBF\u6BB5
      const countLink = group.addShape('path', {
        attrs: {
          path: [['M', 0, 0], ['L', 0, 11]],
          stroke: branchColor,
          lineWidth: 2,
        },
        name: 'count-link'
      });
      countLink.toBack();

      if (collapsed) {
        childCountGroup.show();
        childCountText.show();
        countLink.show();
      }
      else {
        childCountGroup.hide();
        childCountText.hide();
        countLink.hide();
      }

      clickCircleY += 16;
    }

    // \u589E\u52A0\u5B50\u8282\u70B9 icon
    const addChildIcon = group.addShape('marker', {
      attrs: {
        x: 0,
        y: clickCircleY,
        r: 6,
        symbol: G6.Marker.expand,
        stroke: '#999',
        fill: '#fff',
        lineWidth: 1,
        cursor: 'pointer'
      },
      name: 'add-child-icon',
    });
    addChildIcon.hide();

    // \u8FDE\u63A5\u589E\u52A0\u5B50\u8282\u70B9 icon \u7684\u7EBF\u6BB5
    const addChildLink = group.addShape('path', {
      attrs: {
        path: [['M', 0, clickCircleY - 10], ['L', 0, clickCircleY]],
        stroke: branchColor,
        lineWidth: 2,
      },
      name: 'add-child-link'
    });
    addChildLink.toBack();
    addChildLink.hide();
  },
  addHoverBack(group, props) {
    const { mainX, mainY, width, height, fill } = props
    group.addShape('rect', {
      attrs: {
        x: mainX,
        y: mainY,
        width,
        height,
        radius: 11,
        fill,
        cursor: 'pointer'
      },
      // capture: false,
      name: 'main-shape',
      draggable: true
    });
  },
  addName(group, props) {
    const { label, x = 0, y, fill } = props;
    return group.addShape('text', {
      attrs: {
        text: label,
        x,
        y,
        textAlign: 'start',
        textBaseline: 'top',
        fill,
        fontSize: 14,
        fontFamily: 'PingFangSC-Regular',
        cursor: 'pointer',
      },
      name: 'not-root-text-shape',
      draggable: true
    });
  },
  draw(model, group) {
    const { collapsed, selected, depth, label } = model;
    // \u662F\u5426\u4E3A\u6839\u8282\u70B9
    const rootNode = depth === 0;
    // \u5B50\u8282\u70B9\u6570\u91CF
    const childCount = model.children?.length || 0;

    const {
      itemPadding,
      nameMarginLeft,
    } = BaseConfig;

    let width = 0;
    const height = 24;
    // let x = -width / 2;
    const x = 0;
    const y = -height / 2;
    const borderRadius = 4;
    // \u540D\u79F0\u6587\u672C
    const text = this.addName(group, { label, x, y });

    let textWidth = text.getBBox().width;
    width = textWidth + itemPadding + nameMarginLeft;

    const keyShapeAttrs = {
      x,
      y,
      width,
      height,
      radius: borderRadius,
      fill: undefined,
      stroke: undefined,
    };

    const keyShape = group.addShape('rect', {
      attrs: keyShapeAttrs,
      name: 'root-key-shape-rect-shape',
    });

    // \u5E95\u90E8\u6A2A\u7EBF
    // const branchThick = model.depth <= 2 ? 3 : model.depth <= 4 ? 2 : 1;
    const bottomLine = this.addBottomLine(group, false, {
      stroke: model.branchColor || '#AAB7C4',
      lineWidth: 3, // model.lineWidth || branchThick || 1,
      x,
      width
    });

    const mainX = x - 6;
    const mainY = -height - 6;

    // hover\u80CC\u666F
    this.addHoverBack(group, {
      fill: selected ? MainStyle.background.hover : MainStyle.background.default,
      height,
      width,
      mainX,
      mainY,
    });

    let nameColor = NameStyle.color.default;
    if (selected) {
      nameColor = NameStyle.color.hover;
    }

    // \u540D\u79F0
    text.attr({
      y: y - 12,
      fill: nameColor
    });
    text.toFront();
    textWidth = text.getBBox().width;

    if (bottomLine) bottomLine.toFront();

    this.addChildCount(group, childCount && !rootNode, {
      collapsed,
      branchColor: model.branchColor,
      count: childCount ? \`\${childCount}\` : undefined,
    });

    const bbox = group.getBBox();
    const backContainer = group.addShape('path', {
      attrs: {
        path: childCount ? [
          ['M', bbox.minX, bbox.minY],
          ['L', bbox.maxX, bbox.minY],
          ['L', bbox.maxX, bbox.maxY],
          ['L', bbox.minX + 20, bbox.maxY],
          ['L', bbox.minX + 20, bbox.maxY + 20],
          ['L', bbox.minX, bbox.maxY + 20],
          ['Z']
        ] : [
          ['M', bbox.minX, bbox.minY],
          ['L', bbox.maxX, bbox.minY],
          ['L', bbox.maxX, bbox.maxY],
          ['L', bbox.minX, bbox.maxY],
          ['Z']
        ],
        fill: '#fff',
        opacity: 0
      },
      draggable: true
    })
    backContainer.toBack();
    return keyShape;
  },
  setState(name, value, node) {
    if (name === 'closest' || name === 'selected') {
      const group = node.getContainer();
      const textShape = group.find(child => child.get('name') === 'not-root-text-shape');
      const mainShape = group.find(child => child.get('name') === 'main-shape');
      if (value) {
        if (textShape) {
          textShape.attr('fill', NameStyle.color.hover);
        }
        if (mainShape) {
          mainShape.attr('fill', MainStyle.background.hover);
        }
      } else {
        const selected = node.hasState('selected');
        if (selected) {
          if (textShape) {
            textShape.attr('fill', NameStyle.color.selected);
          }
          if (mainShape) {
            mainShape.attr('fill', MainStyle.background.default);
          }
        } else {
          if (textShape) {
            textShape.attr('fill', NameStyle.color.default);
          }
          if (mainShape) {
            mainShape.attr('fill', MainStyle.background.default);
          }
        }
      }
    }
  }
}, 'treeNode');

G6.registerEdge('indentedEdge', {
  afterDraw: (cfg, group) => {
    const sourceNode = cfg.sourceNode?.getModel();
    const targetNode = cfg.targetNode?.getModel();
    const color = sourceNode.branchColor || targetNode.branchColor || cfg.color || '#000';
    // const branchThick = sourceNode.depth <= 1 ? 3 : sourceNode.depth <= 3 ? 2 : 1;
    const keyShape = group.get('children')[0];
    keyShape.attr({
      stroke: color,
      lineWidth: 3 // branchThick
    });
    group.toBack();
  },
  getControlPoints: (cfg) => {
    const startPoint = cfg.startPoint;
    const endPoint = cfg.endPoint;
    return [
      startPoint,
      {
        x: startPoint.x,
        y: endPoint.y,
      },
      endPoint,
    ];
  },
  update: undefined
}, 'polyline');


G6.registerBehavior('wheel-scroll', {
  getDefaultCfg() {
    return {
      direction: 'y',
      zoomKey: 'ctrl',
      sensitivity: 3,
      // wheel-scroll \u53EF\u6EDA\u52A8\u7684\u6269\u5C55\u8303\u56F4\uFF0C\u9ED8\u8BA4\u4E3A 0\uFF0C\u5373\u6700\u591A\u53EF\u4EE5\u6EDA\u52A8\u4E00\u5C4F\u7684\u4F4D\u7F6E
      // \u5F53\u8BBE\u7F6E\u7684\u503C\u5927\u4E8E 0 \u65F6\uFF0C\u5373\u6EDA\u52A8\u53EF\u4EE5\u8D85\u8FC7\u4E00\u5C4F
      // \u5F53\u8BBE\u7F6E\u7684\u503C\u5C0F\u4E8E 0 \u65F6\uFF0C\u76F8\u5F53\u4E8E\u7F29\u5C0F\u4E86\u53EF\u6EDA\u52A8\u8303\u56F4
      // \u5177\u4F53\u5B9E\u4F8B\u53EF\u53C2\u8003\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IFfoS67_HssAAAAAAAAAAAAAARQnAQ
      scalableRange: -64,
    };
  },

  getEvents() {
    if (!this.zoomKey || ['shift', 'ctrl', 'alt', 'control'].indexOf(this.zoomKey) === -1) this.zoomKey = 'ctrl';
    return {
      wheel: 'onWheel',
    };
  },

  onWheel(ev) {
    const graph = this.graph;
    let keyDown = ev[\`\${this.zoomKey}Key\`];
    if (this.zoomKey === 'control') keyDown = ev.ctrlKey;
    if (keyDown) {
      const sensitivity = this.get('sensitivity');
      const canvas = graph.get('canvas');
      const point = canvas.getPointByClient(ev.clientX, ev.clientY);
      let ratio = graph.getZoom();
      if (ev.wheelDelta > 0) {
        ratio *= (1 + 0.01 * sensitivity);
      } else {
        ratio *= (1 - 0.01 * sensitivity);
      }
      graph.zoomTo(ratio, {
        x: point.x,
        y: point.y,
      });
      graph.emit('wheelzoom', ev);
    } else {
      let dx = ev.deltaX || ev.movementX;
      let dy = ev.deltaY || ev.movementY;
      if (!dy && navigator.userAgent.indexOf('Firefox') > -1) dy = (-ev.wheelDelta * 125) / 3

      const width = this.graph.get('width');
      const height = this.graph.get('height');
      const graphCanvasBBox = this.graph.get('group').getCanvasBBox();

      let expandWidth = this.scalableRange;
      let expandHeight = this.scalableRange;
      // \u82E5 scalableRange \u662F 0~1 \u7684\u5C0F\u6570\uFF0C\u5219\u4F5C\u4E3A\u6BD4\u4F8B\u8003\u8651
      if (expandWidth < 1 && expandWidth > -1) {
        expandWidth = width * expandWidth;
        expandHeight = height * expandHeight;
      }

      const { minX, maxX, minY, maxY } = graphCanvasBBox;

      if (dx > 0) {
        if (maxX < -expandWidth) {
          dx = 0
        } else if (maxX - dx < -expandWidth) {
          dx = maxX + expandWidth
        }
      } else if (dx < 0) {
        if (minX > width + expandWidth) {
          dx = 0
        } else if (minX - dx > width + expandWidth) {
          dx = minX - (width + expandWidth)
        }
      }

      if (dy > 0) {
        if (maxY < -expandHeight) {
          dy = 0
        } else if (maxY - dy < -expandHeight) {
          dy = maxY + expandHeight
        }
      } else if (dy < 0) {
        if (minY > height + expandHeight) {
          dy = 0
        } else if (minY - dy > height + expandHeight) {
          dy = minY - (height + expandHeight)
        }
      }

      if (this.get('direction') === 'x') {
        dy = 0;
      } else if (this.get('direction') === 'y') {
        dx = 0;
      }

      graph.translate(-dx, -dy);
    }
    ev.preventDefault();
  },
});
G6.registerBehavior('drag-branch', {

  getEvents: function getEvents() {
    return {
      'node:dragstart': 'dragstart',
      'node:drag': 'drag',
      'node:dragend': 'dragend',
      'node:dragenter': 'dragenter',
      'node:dragleave': 'dragleave',
    };
  },
  dragstart: function dragstart(e) {
    this.set('foundNode', undefined)
    this.origin = {
      x: e.x,
      y: e.y,
    };
    this.target = e.item;
    const graph = this.get('graph');
    // \u672A\u914D\u7F6E shouldBegin \u65F6 \u9ED8\u8BA4\u4E3A true
    if (this.shouldBegin && !this.shouldBegin(graph.findDataById(this.target?.getID()))) {
      this.began = false;
      return;
    }
    this.began = true;
  },
  dragenter: function dragenter(e) {
    if (!this.began) {
      return;
    }
    const graph = this.get('graph');
    const foundNode = e.item;
    if (foundNode) graph.setItemState(foundNode, 'closest', true);
    this.set('foundNode', foundNode);
  },
  dragleave: function dragleave(e) {
    if (!this.began) {
      return;
    }
    const graph = this.get('graph');
    const foundNode = this.get('foundNode');
    if (foundNode) graph.setItemState(foundNode, 'closest', false);
    this.set('foundNode', foundNode);
  },
  drag: function drag(e) {
    if (!this.began) {
      return;
    }
    // move the delegate
    this.updateDelegate(e);
  },
  dragend: function dragend(e) {
    const graph = this.get('graph');
    const foundNode = this.get('foundNode');
    if (foundNode) {
      graph.setItemState(foundNode, 'closest', false);
    }
    if (!this.began) {
      return;
    }
    this.began = false;
    const { item } = e;
    const id = item.getID();
    const data = graph.findDataById(id);

    // remove delegate
    if (this.delegateRect) {
      this.delegateRect.remove();
      this.delegateRect = null;
    }

    if (!foundNode) {
      graph.emit('afterdragbranch', { success: false, message: 'Failed. No node close to the dragged node.', branch: data })
      return;
    }

    const foundNodeId = foundNode.getID();

    let oriParentData;
    Util.traverseTree(graph.get('data'), (d) => {
      if (oriParentData) return false;
      if (d.children?.filter(child => child.id === id)?.length) {
        oriParentData = d;
      }
      return true;
    });

    // \u672A\u914D\u7F6E shouldEnd\uFF0C\u5219\u9ED8\u8BA4\u4E3A true
    if (this.shouldEnd && !this.shouldEnd(data, graph.findDataById(foundNodeId), oriParentData)) {
      return;
    }

    // if the foundNode is a descent of the dragged node, return
    let isDescent = false;

    Util.traverseTree(data, (d) => {
      if (d.id === foundNodeId) isDescent = true;
    });
    if (isDescent) {
      const newParentData = graph.findDataById(foundNodeId);
      graph.emit('afterdragbranch', { success: false, message: 'Failed. The target node is a descendant of the dragged node.', newParentData, branch: data })
      return;
    }

    const newParentData = graph.findDataById(foundNodeId);
    // \u89E6\u53D1\u5916\u90E8\u5BF9\u6570\u636E\u7684\u6539\u53D8
    graph.emit('afterdragbranch', { success: true, message: 'Success.', newParentData, oriParentData, branch: data })
    graph.removeChild(data.id);
    setTimeout(() => {
      let newChildren = newParentData.children;
      if (newChildren) newChildren.push(data);
      else newChildren = [data];
      // \u66F4\u65B0\u6B63\u5728\u88AB\u64CD\u4F5C\u7684\u5B50\u6811\u989C\u8272
      Util.traverseTree(data, d => {
        d.branchColor = newParentData.branchColor
      })
      graph.updateChildren(newChildren, newParentData.id);
    }, 600);
  },
  updateDelegate(e) {
    const { graph } = this;
    if (!this.delegateRect) {
      // \u62D6\u52A8\u591A\u4E2A
      const parent = graph.get('group');
      const attrs = {
        fill: '#F3F9FF',
        fillOpacity: 0.5,
        stroke: '#1890FF',
        strokeOpacity: 0.9,
        lineDash: [5, 5],
      };

      const { x: cx, y: cy, width, height, minX, minY } = this.calculationGroupPosition(e);
      this.originPoint = { x: cx, y: cy, width, height, minX, minY };
      // model\u4E0A\u7684x, y\u662F\u76F8\u5BF9\u4E8E\u56FE\u5F62\u4E2D\u5FC3\u7684\uFF0CdelegateShape\u662Fg\u5B9E\u4F8B\uFF0Cx,y\u662F\u7EDD\u5BF9\u5750\u6807
      this.delegateRect = parent.addShape('rect', {
        attrs: {
          width,
          height,
          x: cx,
          y: cy,
          ...attrs,
        },
        name: 'rect-delegate-shape',
      });
      this.delegateRect.set('capture', false);
    } else {
      const clientX = e.x - this.origin.x + this.originPoint.minX;
      const clientY = e.y - this.origin.y + this.originPoint.minY;
      this.delegateRect.attr({
        x: clientX,
        y: clientY,
      });
    }
  },
  calculationGroupPosition(evt) {
    let node = this.target;
    if (!node) {
      node = evt.item;
    }

    const bbox = node.getBBox();
    const { minX, minY, maxX, maxY } = bbox;

    return {
      x: Math.floor(minX),
      y: Math.floor(minY),
      width: Math.ceil(maxX) - Math.floor(minX),
      height: Math.ceil(maxY) - Math.floor(minY),
      minX,
      minY,
    };
  },
});
G6.registerBehavior('hover-node', {
  getEvents() {
    return {
      'node:mouseover': 'onNodeMouseOver',
      'node:mouseleave': 'onNodeMouseLeave',
      'node:mouseenter': 'onNodeMouseEnter'
    };
  },
  onNodeMouseEnter(ev) {
    const { item } = ev;
    if (!item || item.get('destroyed')) return;
    item.toFront();
    const model = item.getModel();
    const { collapsed, depth } = model;
    const rootNode = depth === 0 || model.isRoot;
    const group = item.getContainer();

    if (rootNode) return;

    // \u63A7\u5236\u5B50\u8282\u70B9\u4E2A\u6570\u6807\u8BB0
    if (!collapsed) {
      const childCountGroup = group.find(e => e.get('name') === 'child-count-group');
      if (childCountGroup) {
        childCountGroup.show();
      }
    }
    this.graph.setItemState(item, 'hover', true);
  },
  onNodeMouseOver(ev) {
    const shape = ev.target;

    // tooltip\u663E\u793A\u3001\u9690\u85CF
    this.graph.emit('tooltip: show', ev);

    // expand \u72B6\u6001\u4E0B\uFF0C\u82E5 hover \u5230\u5B50\u8282\u70B9\u4E2A\u6570\u6807\u8BB0\uFF0C\u586B\u5145\u80CC\u666F+\u663E\u793A\u6536\u8D77 icon
    const { item } = ev;
    const group = item.getContainer();
    const model = item.getModel();
    if (!model.collapsed) {
      const childCountGroup = group.find(e => e.get('name') === 'child-count-group');
      if (childCountGroup) {
        childCountGroup.show();
        const back = childCountGroup.find(e => e.get('name') === 'child-count-rect-shape');
        const expandIcon = childCountGroup.find(e => e.get('name') === 'child-count-expand-icon');
        const rootNode = model.depth === 0 || model.isRoot;
        const branchColor = rootNode ? '#576286' : model.branchColor;
        if (shape.get('parent').get('name') === 'child-count-group') {
          if (back) {
            back.attr('fill', branchColor || '#fff');
          }
          if (expandIcon) {
            expandIcon.show();
          }
        } else {
          if (back) {
            back.attr('fill', '#fff');
          }
          if (expandIcon) {
            expandIcon.hide();
          }
        }
      }
    }

    const addChildIcon = group.find(e => e.get('name') === 'add-child-icon');
    if (addChildIcon) {
      addChildIcon.show();
    }
    const addChildLink = group.find(e => e.get('name') === 'add-child-link');
    if (addChildLink) {
      addChildLink.show();
    }
  },
  onNodeMouseLeave(ev) {
    const { item } = ev;
    const model = item.getModel();
    const group = item.getContainer();
    const { collapsed } = model;

    if (!collapsed) {
      const childCountGroup = group.find(e => e.get('name') === 'child-count-group');
      if (childCountGroup) {
        childCountGroup.hide();
      }

      const iconsLinkPath = group.find(e => e.get('name') === 'icons-link-path');
      if (iconsLinkPath) {
        iconsLinkPath.hide();
      }
    }

    const addChildIcon = group.find(e => e.get('name') === 'add-child-icon');
    if (addChildIcon) {
      addChildIcon.hide();
    }

    const addChildLink = group.find(e => e.get('name') === 'add-child-link');
    if (addChildLink) {
      addChildLink.hide();
    }

    this.graph.emit('tooltip: hide', ev);
  },
});
G6.registerBehavior('click-node', {
  getEvents() {
    return {
      'node:click': 'onNodeClick',
      'canvas:click': 'onCanvasClick'
    };
  },
  onNodeClick(e) {
    const { item, target } = e;
    const shape = target;
    const shapeName = shape.cfg.name;

    // \u70B9\u51FB\u589E\u52A0\u8282\u70B9
    if (shapeName === 'add-child-icon') {
      const data = this.graph.findDataById(item.getID());
      if (!data.children) data.children = [];
      data.children.push({
        id: \`node-\${Math.random()}\`,
        label: 'new node',
        branchColor: data.branchColor,
        type: 'indentedNode'
      });
      this.graph.updateChildren(data.children, data.id)
      return;
    }
    // \u70B9\u51FB\u6536\u8D77/\u5C55\u5F00 icon
    if (shapeName === 'child-count-rect-shape' || shapeName === 'child-count-text-shape') {
      const model = item.getModel();
      const updatedCollapsed = !model.collapsed;
      this.graph.updateItem(item, { collapsed: updatedCollapsed });
      this.graph.layout();
      return;
    }

    // \u9009\u4E2D\u8282\u70B9
    this.graph.getNodes().forEach(node => {
      this.graph.setItemState(node, 'selected', false);
    });
    this.graph.setItemState(item, 'selected', true);

    return;
  },
  onCanvasClick(e) {
    this.graph.getNodes().forEach(node => {
      this.graph.setItemState(node, 'selected', false);
    })
  }
})

const dataTransform = (data) => {
  const changeData = (d, level = 0, color) => {
    const data = {
      ...d,
    };
    data.type = level === 0 ? 'indentedRoot' : 'indentedNode';
    data.hover = false;

    if (color) {
      data.color = color;
    }

    if (level === 1 && !d.direction) {
      if (!d.direction) {
        data.direction = d.id.charCodeAt(d.id.length - 1) % 2 === 0 ? 'right' : 'left';
      }
    }

    if (d.children) {
      data.children = d.children.map((child) => changeData(child, level + 1, data.color));
    }
    // \u7ED9\u5B9A branchColor \u548C 0-2 \u5C42\u8282\u70B9 depth
    if (data.children?.length) {
      data.depth = 0;
      data.children.forEach((subtree, i) => {
        subtree.branchColor = COLORS[i % COLORS.length];
        // dfs
        let currentDepth = 1;
        subtree.depth = currentDepth;
        Util.traverseTree(subtree, child => {
          child.branchColor = COLORS[i % COLORS.length];

          if (!child.depth) {
            child.depth = currentDepth + 1;
          }
          else currentDepth = subtree.depth;
          if (child.children) {
            child.children.forEach(subChild => {
              subChild.depth = child.depth + 1;
            })
          }
          // \u628A\u6CA1\u6709 children \u4F46\u6709 schemaType.subTypeCount \u7684\u8282\u70B9\u8BBE\u7F6E\u4E3A collapsed
          // \u8BF4\u660E\u5C55\u5F00\u9700\u8981\u589E\u91CF\u8BF7\u6C42 children\uFF0C\u672A\u8BF7\u6C42\u524D\u5C55\u793A collapsed \u72B6\u6001
          if (!child.children?.length && child.schemaType?.subTypeCount) {
            child.collapsed = true;
          }
          return true;
        })
      });
    }

    return data;
  };
  return changeData(data);
};

const tree = new G6.TreeGraph({
  container: 'container',
  width: 800,
  height: 800,
  layout: {
    type: 'indented',
    direction: 'LR',
    isHorizontal: true,
    indent: 40,
    getHeight: (d) => {
      if (d.isRoot) {
        return 30;
      }
      if (d.collapsed && d.children?.length) {
        return 36;
      }
      return 22;
    },
    getVGap: () => {
      return 10;
    },
  },
  defaultEdge: {
    type: 'indentedEdge',
    style: {
      lineWidth: 2,
      radius: 16,
    },
  },
  nodeStateStyles: {
    closest: {
      fill: '#f00',
      'node-label': {
        fill: '#f00',
      }
    },
  },
  minZoom: 0.5,
  modes: {
    default: [
      'drag-canvas',
      'wheel-scroll',
      'hover-node',
      'click-node',
      'drag-branch', {
        type: 'collapse-expand',
        trigger: 'dblclick'
      }
    ],
  },
});

tree.on('afterrender', e => {
  tree.getEdges().forEach(edge => {
    const targetNode = edge.getTarget().getModel();
    const color = targetNode.branchColor;
    tree.updateItem(edge, { color });
  });
  setTimeout(() => {
    tree.moveTo(32, 32);
    tree.zoomTo(0.7)
  }, 16);
});

tree.data(dataTransform(rawData));

tree.render();

`,title:{zh:"\u7F29\u8FDB\u6587\u4EF6\u6811",en:"Indented File Tree"},filename:"indentedTree.js",isNew:!1},{id:"knowledgeTreeGraph",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*2J5YTbvU5FoAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const minWidth = 60;

const BaseConfig = {
  nameFontSize: 12,
  childCountWidth: 22,
  countMarginLeft: 0,
  itemPadding: 16,
  nameMarginLeft: 4,
  rootPadding: 18,
};

G6.registerNode('treeNode', {
  draw: (cfg, group) => {
    const { id, label, collapsed, selected, children, depth } = cfg;
    const rootNode = depth === 0;
    const hasChildren = children && children.length !== 0;

    const {
      childCountWidth,
      countMarginLeft,
      itemPadding,
      selectedIconWidth,
      nameMarginLeft,
      rootPadding,
    } = BaseConfig;

    let width = 0;
    const height = 28;
    const x = 0;
    const y = -height / 2;

    // \u540D\u79F0\u6587\u672C
    const text = group.addShape('text', {
      attrs: {
        text: label,
        x: x * 2,
        y,
        textAlign: 'left',
        textBaseline: 'top',
        fontFamily: 'PingFangSC-Regular',
      },
      cursor: 'pointer',
      name: 'name-text-shape',
    });
    const textWidth = text.getBBox().width;
    width = textWidth + itemPadding + nameMarginLeft;

    width = width < minWidth ? minWidth : width;

    if (!rootNode && hasChildren) {
      width += countMarginLeft;
      width += childCountWidth;
    }

    const keyShapeAttrs = {
      x,
      y,
      width,
      height,
      radius: 4,
    };

    // keyShape\u6839\u8282\u70B9\u9009\u4E2D\u6837\u5F0F
    if (rootNode && selected) {
      keyShapeAttrs.fill = '#e8f7ff';
      keyShapeAttrs.stroke = '#e8f7ff';
    }
    const keyShape = group.addShape('rect', {
      attrs: keyShapeAttrs,
      name: 'root-key-shape-rect-shape',
    });

    if (!rootNode) {
      // \u5E95\u90E8\u6A2A\u7EBF
      group.addShape('path', {
        attrs: {
          path: [
            ['M', x - 1, 0],
            ['L', width, 0],
          ],
          stroke: '#AAB7C4',
          lineWidth: 1,
        },
        name: 'node-path-shape',
      });
    }

    const mainX = x - 10;
    const mainY = -height + 15;

    if (rootNode) {
      group.addShape('rect', {
        attrs: {
          x: mainX,
          y: mainY,
          width: width + 12,
          height,
          radius: 14,
          fill: '#e8f7ff',
          cursor: 'pointer',
        },
        name: 'main-shape',
      });
    }

    let nameColor = 'rgba(0, 0, 0, .65)';
    if (selected) {
      nameColor = '#40A8FF';
    }

    // \u540D\u79F0
    if (rootNode) {
      group.addShape('text', {
        attrs: {
          text: label,
          x: mainX + rootPadding,
          y: 1,
          textAlign: 'left',
          textBaseline: 'middle',
          fill: nameColor,
          fontSize: 12,
          fontFamily: 'PingFangSC-Regular',
          cursor: 'pointer',
        },
        name: 'root-text-shape',
      });
    } else {
      group.addShape('text', {
        attrs: {
          text: label,
          x: selected ? mainX + 6 + nameMarginLeft : mainX + 6,
          y: y - 5,
          textAlign: 'start',
          textBaseline: 'top',
          fill: nameColor,
          fontSize: 12,
          fontFamily: 'PingFangSC-Regular',
          cursor: 'pointer',
        },
        name: 'not-root-text-shape',
      });
    }

    // \u5B50\u7C7B\u6570\u91CF
    if (hasChildren && !rootNode) {
      const childCountHeight = 12;
      const childCountX = width - childCountWidth;
      const childCountY = -childCountHeight / 2;

      group.addShape('rect', {
        attrs: {
          width: childCountWidth,
          height: 12,
          stroke: collapsed ? '#1890ff' : '#5CDBD3',
          fill: collapsed ? '#fff' : '#E6FFFB',
          x: childCountX,
          y: childCountY,
          radius: 6,
          cursor: 'pointer',
        },
        name: 'child-count-rect-shape',
      });
      group.addShape('text', {
        attrs: {
          text: \`\${children?.length}\`,
          fill: 'rgba(0, 0, 0, .65)',
          x: childCountX + childCountWidth / 2,
          y: childCountY + 12,
          fontSize: 10,
          width: childCountWidth,
          textAlign: 'center',
          cursor: 'pointer',
        },
        name: 'child-count-text-shape',
      });
    }

    return keyShape;
  },
});

G6.registerEdge('smooth', {
  draw(cfg, group) {
    const { startPoint, endPoint } = cfg;
    const hgap = Math.abs(endPoint.x - startPoint.x);

    const path = [
      ['M', startPoint.x, startPoint.y],
      [
        'C',
        startPoint.x + hgap / 4,
        startPoint.y,
        endPoint.x - hgap / 2,
        endPoint.y,
        endPoint.x,
        endPoint.y,
      ],
    ];

    const shape = group.addShape('path', {
      attrs: {
        stroke: '#AAB7C4',
        path,
      },
      name: 'smooth-path-shape',
    });
    return shape;
  },
});

const data = {
  id: '200000004',
  tooltip: 'Thing',
  label: '\u4E8B\u7269',
  description: null,
  descriptionZh: null,
  depth: 3,
  subTypeCount: 9,
  status: 0,
  children: [
    {
      id: '500000061',
      tooltip: 'Person',
      label: '\u81EA\u7136\u4EBA',
      description: null,
      descriptionZh: null,
      depth: 1,
      subTypeCount: 1,
      status: 0,
      children: [
        {
          id: '707000085',
          tooltip: 'FilmPerson',
          label: '\u7535\u5F71\u4EBA',
          description: null,
          descriptionZh: null,
          depth: 5,
          subTypeCount: 3,
          status: 1,
          children: [
            {
              id: '707000090',
              tooltip: 'FilmDirector',
              label: '\u7535\u5F71\u5BFC\u6F14',
              description: null,
              descriptionZh: null,
              depth: 0,
              subTypeCount: 0,
              status: 1,
              children: [],
            },
            {
              id: '707000091',
              tooltip: 'FilmWriter',
              label: '\u7535\u5F71\u7F16\u5267',
              description: null,
              descriptionZh: null,
              depth: 4,
              subTypeCount: 0,
              status: 1,
              children: [],
            },
            {
              id: '707000092',
              tooltip: 'FilmStar',
              label: '\u7535\u5F71\u4E3B\u6F14',
              description: null,
              descriptionZh: null,
              depth: 4,
              subTypeCount: 0,
              status: 1,
              children: [],
            },
          ],
        },
        {
          id: '707000086',
          tooltip: 'MusicPerson',
          label: '\u97F3\u4E50\u4EBA',
          description: null,
          descriptionZh: null,
          depth: 17,
          subTypeCount: 2,
          status: 1,
          children: [],
        },
      ],
    },
    {
      id: '200000005',
      tooltip: 'Music',
      label: '\u97F3\u4E50',
      description: null,
      descriptionZh: null,
      depth: 3,
      subTypeCount: 2,
      status: 1,
      children: [],
    },
    {
      id: '707000128',
      tooltip: 'Film',
      label: '\u7535\u5F71',
      description: null,
      descriptionZh: null,
      depth: 4,
      subTypeCount: 0,
      status: 1,
      children: [
        {
          id: '7070032328',
          tooltip: 'Comedy',
          label: '\u559C\u5267',
          description: null,
          descriptionZh: null,
          depth: 4,
          operation: 'C',
          subTypeCount: 0,
          status: 1,
          children: [],
        },
      ],
    },
    {
      id: '707000095',
      tooltip: 'FilmGenre',
      label: '\u7535\u5F71\u7C7B\u522B',
      description: null,
      descriptionZh: null,
      depth: 4,
      subTypeCount: 0,
      status: 1,
      children: [],
    },
    {
      id: '702000021',
      tooltip: 'Organization',
      label: '\u673A\u6784',
      description: null,
      descriptionZh: null,
      depth: 47,
      subTypeCount: 1,
      status: 0,
      children: [
        {
          id: '500000063',
          tooltip: 'Company',
          label: '\u516C\u53F8',
          description: null,
          descriptionZh: null,
          depth: 4,
          subTypeCount: 2,
          status: 1,
          children: [
            {
              id: '707000093',
              tooltip: 'FilmCompany',
              label: '\u7535\u5F71\u516C\u53F8',
              description: null,
              descriptionZh: null,
              depth: 4,
              subTypeCount: 0,
              status: 1,
              children: [],
            },
            {
              id: '707000094',
              tooltip: 'MusicCompany',
              label: '\u97F3\u4E50\u516C\u53F8',
              description: null,
              descriptionZh: null,
              depth: 2,
              subTypeCount: 0,
              status: 1,
              children: [],
            },
          ],
        },
      ],
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.TreeGraph({
  container: 'container',
  width,
  height,
  modes: {
    default: [
      {
        type: 'collapse-expand',
      },
      'drag-canvas',
      'zoom-canvas',
    ],
  },
  defaultNode: {
    type: 'treeNode',
    anchorPoints: [
      [0, 0.5],
      [1, 0.5],
    ],
  },
  defaultEdge: {
    type: 'smooth',
  },
  layout: {
    type: 'compactBox',
    direction: 'LR',
    getId: function getId(d) {
      return d.id;
    },
    getHeight: function getHeight() {
      return 16;
    },
    getWidth: function getWidth(d) {
      const labelWidth = G6.Util.getTextSize(d.label, BaseConfig.nameFontSize)[0];
      const width =
        BaseConfig.itemPadding +
        BaseConfig.nameMarginLeft +
        labelWidth +
        BaseConfig.rootPadding +
        BaseConfig.childCountWidth;
      return width;
    },
    getVGap: function getVGap() {
      return 15;
    },
    getHGap: function getHGap() {
      return 30;
    },
  },
});

graph.data(data);
graph.render();
graph.fitView();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u77E5\u8BC6\u56FE\u8C31\u6811",en:"Knowledge Tree Graph"},filename:"knowledgeTreeGraph.js",isNew:!1},{id:"decisionTree",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*HS5gQ6yCiL4AAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

// \u6211\u4EEC\u7528 insert-css \u6F14\u793A\u5F15\u5165\u81EA\u5B9A\u4E49\u6837\u5F0F
// \u63A8\u8350\u5C06\u6837\u5F0F\u6DFB\u52A0\u5230\u81EA\u5DF1\u7684\u6837\u5F0F\u6587\u4EF6\u4E2D
// \u82E5\u62F7\u8D1D\u5B98\u65B9\u4EE3\u7801\uFF0C\u522B\u5FD8\u4E86 npm install insert-css
insertCss(\`
  .g6-component-tooltip {
    background-color: rgba(0,0,0, 0.65);
    padding: 10px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
    width: fit-content;
    color: #fff;
    border-radius = 4px;
  }
\`);

// mocked data
const mockData = {
  id: 'g1',
  name: 'Name1',
  count: 123456,
  label: '538.90',
  currency: 'Yuan',
  rate: 1.0,
  status: 'B',
  variableName: 'V1',
  variableValue: 0.341,
  variableUp: false,
  children: [
    {
      id: 'g12',
      name: 'Deal with LONG label LONG label LONG label LONG label',
      count: 123456,
      label: '338.00',
      rate: 0.627,
      status: 'R',
      currency: 'Yuan',
      variableName: 'V2',
      variableValue: 0.179,
      variableUp: true,
      children: [
        {
          id: 'g121',
          name: 'Name3',
          collapsed: true,
          count: 123456,
          label: '138.00',
          rate: 0.123,
          status: 'B',
          currency: 'Yuan',
          variableName: 'V2',
          variableValue: 0.27,
          variableUp: true,
          children: [
            {
              id: 'g1211',
              name: 'Name4',
              count: 123456,
              label: '138.00',
              rate: 1.0,
              status: 'B',
              currency: 'Yuan',
              variableName: 'V1',
              variableValue: 0.164,
              variableUp: false,
              children: [],
            },
          ],
        },
        {
          id: 'g122',
          name: 'Name5',
          collapsed: true,
          count: 123456,
          label: '100.00',
          rate: 0.296,
          status: 'G',
          currency: 'Yuan',
          variableName: 'V1',
          variableValue: 0.259,
          variableUp: true,
          children: [
            {
              id: 'g1221',
              name: 'Name6',
              count: 123456,
              label: '40.00',
              rate: 0.4,
              status: 'G',
              currency: 'Yuan',
              variableName: 'V1',
              variableValue: 0.135,
              variableUp: true,
              children: [
                {
                  id: 'g12211',
                  name: 'Name6-1',
                  count: 123456,
                  label: '40.00',
                  rate: 1.0,
                  status: 'R',
                  currency: 'Yuan',
                  variableName: 'V1',
                  variableValue: 0.181,
                  variableUp: true,
                  children: [],
                },
              ],
            },
            {
              id: 'g1222',
              name: 'Name7',
              count: 123456,
              label: '60.00',
              rate: 0.6,
              status: 'G',
              currency: 'Yuan',
              variableName: 'V1',
              variableValue: 0.239,
              variableUp: false,
              children: [],
            },
          ],
        },
        {
          id: 'g123',
          name: 'Name8',
          collapsed: true,
          count: 123456,
          label: '100.00',
          rate: 0.296,
          status: 'DI',
          currency: 'Yuan',
          variableName: 'V2',
          variableValue: 0.131,
          variableUp: false,
          children: [
            {
              id: 'g1231',
              name: 'Name8-1',
              count: 123456,
              label: '100.00',
              rate: 1.0,
              status: 'DI',
              currency: 'Yuan',
              variableName: 'V2',
              variableValue: 0.131,
              variableUp: false,
              children: [],
            },
          ],
        },
      ],
    },
    {
      id: 'g13',
      name: 'Name9',
      count: 123456,
      label: '100.90',
      rate: 0.187,
      status: 'B',
      currency: 'Yuan',
      variableName: 'V2',
      variableValue: 0.221,
      variableUp: true,
      children: [
        {
          id: 'g131',
          name: 'Name10',
          count: 123456,
          label: '33.90',
          rate: 0.336,
          status: 'R',
          currency: 'Yuan',
          variableName: 'V1',
          variableValue: 0.12,
          variableUp: true,
          children: [],
        },
        {
          id: 'g132',
          name: 'Name11',
          count: 123456,
          label: '67.00',
          rate: 0.664,
          status: 'G',
          currency: 'Yuan',
          variableName: 'V1',
          variableValue: 0.241,
          variableUp: false,
          children: [],
        },
      ],
    },
    {
      id: 'g14',
      name: 'Name12',
      count: 123456,
      label: '100.00',
      rate: 0.186,
      status: 'G',
      currency: 'Yuan',
      variableName: 'V2',
      variableValue: 0.531,
      variableUp: true,
      children: [],
    },
  ],
};

const colors = {
  B: '#5B8FF9',
  R: '#F46649',
  Y: '#EEBC20',
  G: '#5BD8A6',
  DI: '#A7A7A7',
};

//  \u7EC4\u4EF6props
const props = {
  data: mockData,
  config: {
    padding: [20, 50],
    defaultLevel: 3,
    defaultZoom: 0.8,
    modes: { default: ['zoom-canvas', 'drag-canvas'] },
  },
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;

// \u9ED8\u8BA4\u914D\u7F6E
const defaultConfig = {
  width,
  height,
  modes: {
    default: ['zoom-canvas', 'drag-canvas'],
  },
  fitView: true,
  animate: true,
  defaultNode: {
    type: 'flow-rect',
  },
  defaultEdge: {
    type: 'cubic-horizontal',
    style: {
      stroke: '#CED4D9',
    },
  },
  layout: {
    type: 'indented',
    direction: 'LR',
    dropCap: false,
    indent: 300,
    getHeight: () => {
      return 60;
    },
  },
};

// \u81EA\u5B9A\u4E49\u8282\u70B9\u3001\u8FB9
const registerFn = () => {
  /**
   * \u81EA\u5B9A\u4E49\u8282\u70B9
   */
  G6.registerNode(
    'flow-rect',
    {
      shapeType: 'flow-rect',
      draw(cfg, group) {
        const {
          name = '',
          variableName,
          variableValue,
          variableUp,
          label,
          collapsed,
          currency,
          status,
          rate
        } = cfg;

        const grey = '#CED4D9';
        const rectConfig = {
          width: 202,
          height: 60,
          lineWidth: 1,
          fontSize: 12,
          fill: '#fff',
          radius: 4,
          stroke: grey,
          opacity: 1,
        };

        const nodeOrigin = {
          x: -rectConfig.width / 2,
          y: -rectConfig.height / 2,
        };

        const textConfig = {
          textAlign: 'left',
          textBaseline: 'bottom',
        };

        const rect = group.addShape('rect', {
          attrs: {
            x: nodeOrigin.x,
            y: nodeOrigin.y,
            ...rectConfig,
          },
        });

        const rectBBox = rect.getBBox();

        // label title
        group.addShape('text', {
          attrs: {
            ...textConfig,
            x: 12 + nodeOrigin.x,
            y: 20 + nodeOrigin.y,
            text: name.length > 28 ? name.substr(0, 28) + '...' : name,
            fontSize: 12,
            opacity: 0.85,
            fill: '#000',
            cursor: 'pointer',
          },
          name: 'name-shape',
        });

        // price
        const price = group.addShape('text', {
          attrs: {
            ...textConfig,
            x: 12 + nodeOrigin.x,
            y: rectBBox.maxY - 12,
            text: label,
            fontSize: 16,
            fill: '#000',
            opacity: 0.85,
          },
        });

        // label currency
        group.addShape('text', {
          attrs: {
            ...textConfig,
            x: price.getBBox().maxX + 5,
            y: rectBBox.maxY - 12,
            text: currency,
            fontSize: 12,
            fill: '#000',
            opacity: 0.75,
          },
        });

        // percentage
        const percentText = group.addShape('text', {
          attrs: {
            ...textConfig,
            x: rectBBox.maxX - 8,
            y: rectBBox.maxY - 12,
            text: \`\${((variableValue || 0) * 100).toFixed(2)}%\`,
            fontSize: 12,
            textAlign: 'right',
            fill: colors[status],
          },
        });

        // percentage triangle
        const symbol = variableUp ? 'triangle' : 'triangle-down';
        const triangle = group.addShape('marker', {
          attrs: {
            ...textConfig,
            x: percentText.getBBox().minX - 10,
            y: rectBBox.maxY - 12 - 6,
            symbol,
            r: 6,
            fill: colors[status],
          },
        });

        // variable name
        group.addShape('text', {
          attrs: {
            ...textConfig,
            x: triangle.getBBox().minX - 4,
            y: rectBBox.maxY - 12,
            text: variableName,
            fontSize: 12,
            textAlign: 'right',
            fill: '#000',
            opacity: 0.45,
          },
        });

        // bottom line background
        const bottomBackRect = group.addShape('rect', {
          attrs: {
            x: nodeOrigin.x,
            y: rectBBox.maxY - 4,
            width: rectConfig.width,
            height: 4,
            radius: [0, 0, rectConfig.radius, rectConfig.radius],
            fill: '#E0DFE3',
          },
        });

        // bottom percent
        const bottomRect = group.addShape('rect', {
          attrs: {
            x: nodeOrigin.x,
            y: rectBBox.maxY - 4,
            width: rate * rectBBox.width,
            height: 4,
            radius: [0, 0, 0, rectConfig.radius],
            fill: colors[status],
          },
        });

        // collapse rect
        if (cfg.children && cfg.children.length) {
          group.addShape('rect', {
            attrs: {
              x: rectConfig.width / 2 - 8,
              y: -8,
              width: 16,
              height: 16,
              stroke: 'rgba(0, 0, 0, 0.25)',
              cursor: 'pointer',
              fill: '#fff',
            },
            name: 'collapse-back',
            modelId: cfg.id,
          });

          // collpase text
          group.addShape('text', {
            attrs: {
              x: rectConfig.width / 2,
              y: -1,
              textAlign: 'center',
              textBaseline: 'middle',
              text: collapsed ? '+' : '-',
              fontSize: 16,
              cursor: 'pointer',
              fill: 'rgba(0, 0, 0, 0.25)',
            },
            name: 'collapse-text',
            modelId: cfg.id,
          });
        }

        this.drawLinkPoints(cfg, group);
        return rect;
      },
      update(cfg, item) {
        const { level, status, name } = cfg;
        const group = item.getContainer();
        let mask = group.find(ele => ele.get('name') === 'mask-shape');
        let maskLabel = group.find(ele => ele.get('name') === 'mask-label-shape');
        if (level === 0) {
          group.get('children').forEach(child => {
            if (child.get('name')?.includes('collapse')) return;
            child.hide();
          })
          if (!mask) {
            mask = group.addShape('rect', {
              attrs: {
                x: -101,
                y: -30,
                width: 202,
                height: 60,
                opacity: 0,
                fill: colors[status]
              },
              name: 'mask-shape',
            });
            maskLabel = group.addShape('text', {
              attrs: {
                fill: '#fff',
                fontSize: 20,
                x: 0,
                y: 10,
                text: name.length > 28 ? name.substr(0, 16) + '...' : name,
                textAlign: 'center',
                opacity: 0,
              },
              name: 'mask-label-shape',
            });
            const collapseRect = group.find(ele => ele.get('name') === 'collapse-back');
            const collapseText = group.find(ele => ele.get('name') === 'collapse-text');
            collapseRect?.toFront();
            collapseText?.toFront();
          } else {
            mask.show();
            maskLabel.show();
          }
          mask.animate({ opacity: 1 }, 200);
          maskLabel.animate({ opacity: 1 }, 200);
          return mask;
        } else {
          group.get('children').forEach(child => {
            if (child.get('name')?.includes('collapse')) return;
            child.show();
          })
          mask?.animate({ opacity: 0 }, {
            duration: 200,
            callback: () => mask.hide()
          });
          maskLabel?.animate({ opacity: 0 }, {
            duration: 200,
            callback: () => maskLabel.hide()
          });
        }
        this.updateLinkPoints(cfg, group);
      },
      setState(name, value, item) {
        if (name === 'collapse') {
          const group = item.getContainer();
          const collapseText = group.find((e) => e.get('name') === 'collapse-text');
          if (collapseText) {
            if (!value) {
              collapseText.attr({
                text: '-',
              });
            } else {
              collapseText.attr({
                text: '+',
              });
            }
          }
        }
      },
      getAnchorPoints() {
        return [
          [0, 0.5],
          [1, 0.5],
        ];
      },
    },
    'rect',
  );

  G6.registerEdge(
    'flow-cubic',
    {
      getControlPoints(cfg) {
        let controlPoints = cfg.controlPoints; // \u6307\u5B9AcontrolPoints
        if (!controlPoints || !controlPoints.length) {
          const { startPoint, endPoint, sourceNode, targetNode } = cfg;
          const { x: startX, y: startY, coefficientX, coefficientY } = sourceNode
            ? sourceNode.getModel()
            : startPoint;
          const { x: endX, y: endY } = targetNode ? targetNode.getModel() : endPoint;
          let curveStart = (endX - startX) * coefficientX;
          let curveEnd = (endY - startY) * coefficientY;
          curveStart = curveStart > 40 ? 40 : curveStart;
          curveEnd = curveEnd < -30 ? curveEnd : -30;
          controlPoints = [
            { x: startPoint.x + curveStart, y: startPoint.y },
            { x: endPoint.x + curveEnd, y: endPoint.y },
          ];
        }
        return controlPoints;
      },
      getPath(points) {
        const path = [];
        path.push(['M', points[0].x, points[0].y]);
        path.push([
          'C',
          points[1].x,
          points[1].y,
          points[2].x,
          points[2].y,
          points[3].x,
          points[3].y,
        ]);
        return path;
      },
    },
    'single-line',
  );
};

registerFn();

const { data } = props;
let graph = null;

const initGraph = (data) => {
  if (!data) {
    return;
  }
  const { onInit, config } = props;
  const tooltip = new G6.Tooltip({
    // offsetX and offsetY include the padding of the parent container
    offsetX: 20,
    offsetY: 30,
    // the types of items that allow the tooltip show up
    // \u5141\u8BB8\u51FA\u73B0 tooltip \u7684 item \u7C7B\u578B
    itemTypes: ['node'],
    // custom the tooltip's content
    // \u81EA\u5B9A\u4E49 tooltip \u5185\u5BB9
    getContent: (e) => {
      const outDiv = document.createElement('div');
      //outDiv.style.padding = '0px 0px 20px 0px';
      const nodeName = e.item.getModel().name;
      let formatedNodeName = '';
      for (let i = 0; i < nodeName.length; i++) {
        formatedNodeName = \`\${formatedNodeName}\${nodeName[i]}\`;
        if (i !== 0 && i % 20 === 0) formatedNodeName = \`\${formatedNodeName}<br/>\`;
      }
      outDiv.innerHTML = \`\${formatedNodeName}\`;
      return outDiv;
    },
    shouldBegin: (e) => {
      if (e.target.get('name') === 'name-shape' || e.target.get('name') === 'mask-label-shape') return true;
      return false;
    },
  });
  graph = new G6.TreeGraph({
    container: 'container',
    ...defaultConfig,
    ...config,
    plugins: [tooltip],
  });
  if (typeof onInit === 'function') {
    onInit(graph);
  }
  graph.data(data);
  graph.render();

  const handleCollapse = (e) => {
    const target = e.target;
    const id = target.get('modelId');
    const item = graph.findById(id);
    const nodeModel = item.getModel();
    nodeModel.collapsed = !nodeModel.collapsed;
    graph.layout();
    graph.setItemState(item, 'collapse', nodeModel.collapsed);
  };
  graph.on('collapse-text:click', (e) => {
    handleCollapse(e);
  });
  graph.on('collapse-back:click', (e) => {
    handleCollapse(e);
  });

  // \u76D1\u542C\u753B\u5E03\u7F29\u653E\uFF0C\u7F29\u5C0F\u5230\u4E00\u5B9A\u7A0B\u5EA6\uFF0C\u8282\u70B9\u663E\u793A\u7F29\u7565\u6837\u5F0F
  let currentLevel = 1;
  const briefZoomThreshold = Math.max(graph.getZoom(), 0.5);
  graph.on('viewportchange', e => {
    if (e.action !== 'zoom') return;
    const currentZoom = graph.getZoom();
    let toLevel = currentLevel;
    if (currentZoom < briefZoomThreshold) {
      toLevel = 0;
    } else {
      toLevel = 1;
    }
    if (toLevel !== currentLevel) {
      currentLevel = toLevel;
      graph.getNodes().forEach(node => {
        graph.updateItem(node, {
          level: toLevel
        })
      })
    }
  });
};

initGraph(data);

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u51B3\u7B56\u6811",en:"Decision Tree"},filename:"decisionTree.js",isNew:!1}],icon:"",id:"treeDemos",title:{en:"Tree Graph Demos",zh:"\u6811\u56FE\u573A\u666F\u6848\u4F8B"},childrenKey:"demos",order:1},{demos:[{id:"metroLines",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1MS4TbqujQAAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
/**
 * \u8BE5\u793A\u4F8B\u6F14\u793A\u81EA\u5B9A\u4E49\u8282\u70B9\u548C\u8FB9\u5B9E\u73B0\u52A8\u6001\u5730\u94C1\u56FE\u6548\u679C
 * by \u5341\u543E
 */
const colors = [
  'rgb(64, 174, 247)',
  'rgb(108, 207, 169)',
  'rgb(157, 223, 125)',
  'rgb(240, 198, 74)',
  'rgb(221, 158, 97)',
  'rgb(141, 163, 112)',
  'rgb(115, 136, 220)',
  'rgb(133, 88, 219)',
  'rgb(203, 135, 226)',
  'rgb(227, 137, 163)',
];
// custom the node
G6.registerNode(
  'breath-node',
  {
    afterDraw(cfg, group) {
      const r = cfg.size / 2;
      const back1 = group.addShape('circle', {
        zIndex: -3,
        attrs: {
          x: 0,
          y: 0,
          r,
          fill: cfg.color || (cfg.style && cfg.style.fill),
          opacity: 0.6,
        },
        name: 'back1-shape',
      });
      const back2 = group.addShape('circle', {
        zIndex: -2,
        attrs: {
          x: 0,
          y: 0,
          r,
          fill: cfg.color,
          // \u4E3A\u4E86\u663E\u793A\u6E05\u6670\uFF0C\u968F\u610F\u8BBE\u7F6E\u4E86\u989C\u8272
          opacity: 0.6,
        },
        name: 'back2-shape',
      });
      const back3 = group.addShape('circle', {
        zIndex: -1,
        attrs: {
          x: 0,
          y: 0,
          r,
          fill: cfg.color,
          opacity: 0.6,
        },
        name: 'back3-shape',
      });
      group.sort(); // \u6392\u5E8F\uFF0C\u6839\u636EzIndex \u6392\u5E8F
      const delayBase = Math.random() * 2000;
      back1.animate(
        {
          // \u9010\u6E10\u653E\u5927\uFF0C\u5E76\u6D88\u5931
          r: r + 10,
          opacity: 0.0,
        },
        {
          repeat: true, // \u5FAA\u73AF
          duration: 3000,
          easing: 'easeCubic',
          delay: delayBase, // \u65E0\u5EF6\u8FDF
        },
      );
      back2.animate(
        {
          // \u9010\u6E10\u653E\u5927\uFF0C\u5E76\u6D88\u5931
          r: r + 10,
          opacity: 0.0,
        },
        {
          repeat: true, // \u5FAA\u73AF
          duration: 3000,
          easing: 'easeCubic',
          delay: delayBase + 1000, // 1 \u79D2\u5EF6\u8FDF
        },
      );
      back3.animate(
        {
          // \u9010\u6E10\u653E\u5927\uFF0C\u5E76\u6D88\u5931
          r: r + 10,
          opacity: 0.0,
        },
        {
          repeat: true, // \u5FAA\u73AF
          duration: 3000,
          easing: 'easeCubic',
          delay: delayBase + 2000, // 2 \u79D2\u5EF6\u8FDF
        },
      );
    },
  },
  'circle',
);

// custom the edge
G6.registerEdge(
  'running-polyline',
  {
    afterDraw(cfg, group) {
      const shape = group.get('children')[0];
      const length = shape.getTotalLength();
      let circleCount = Math.ceil(length / 20);
      circleCount = circleCount === 0 ? 1 : circleCount;

      const _loop = function _loop(i) {
        const delay = Math.random() * 1000;
        const start = shape.getPoint(i / circleCount);
        const circle = group.addShape('circle', {
          attrs: {
            x: start.x,
            y: start.y,
            r: 0.8,
            fill: '#A0F3AF',
            shadowColor: '#fff',
            shadowBlur: 30,
          },
          name: 'circle-shape',
        });
        circle.animate(
          (ratio) => {
            ratio += i / circleCount;
            if (ratio > 1) {
              ratio %= 1;
            }
            const tmpPoint = shape.getPoint(ratio);
            return {
              x: tmpPoint.x,
              y: tmpPoint.y,
            };
          },
          {
            repeat: true,
            duration: 10 * length,
            easing: 'easeCubic',
            delay,
          },
        );
      };

      for (let i = 0; i < circleCount; i++) {
        _loop(i);
      }
    },
  },
  'polyline',
);

const graph = new G6.Graph({
  container: 'container',
  width: 500,
  height: 500,
  modes: {
    default: [
      {
        type: 'edge-tooltip',
        formatText: function formatText(model) {
          const text = model.class;
          return text;
        },
      },
    ],
  },
  defaultNode: {
    type: 'breath-node',
    size: 3,
    style: {
      lineWidth: 0,
      fill: 'rgb(240, 223, 83)',
    },
  },
  defaultEdge: {
    type: 'running-polyline',
    size: 1,
    color: 'rgb(14,142,63)',
    style: {
      opacity: 0.4,
      lineAppendWidth: 3,
    },
  },
});

const graphSize = [500, 500];
fetch('https://gw.alipayobjects.com/os/basement_prod/8c2353b0-99a9-4a93-a5e1-3e7df1eac64f.json')
  .then((res) => res.json())
  .then((data) => {
    const nodes = data.nodes;
    const edges = data.edges;
    const classMap = new Map();
    let classId = 0;
    nodes.forEach(function (node) {
      node.y = -node.y;
    });
    edges.forEach(function (edge) {
      edge.id = \`edge-\${edge.id}\`;
      // edge cluster
      if (edge.class && classMap.get(edge.class) === undefined) {
        classMap.set(edge.class, classId);
        classId++;
      }
      const cid = classMap.get(edge.class);
      edge.color = colors[cid % colors.length];
      const controlPoints = edge.controlPoints;

      controlPoints.forEach(function (cp) {
        cp.y = -cp.y;
      });
    });
    scaleNodesPoints(nodes, edges, graphSize);
    graph.data(data);
    graph.render();
  });

graph.get('container').style.background = '#000';
graph.get('container').style.backgroundImage =
  'url("https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*G23iRqkiibIAAAAAAAAAAABkARQnAQ")';
graph.get('container').style.backgroundSize = '500px 500px';
graph.get('container').style.backgroundRepeat = 'no-repeat';

function scaleNodesPoints(nodes, edges, graphSize) {
  const size = graphSize[0] < graphSize[1] ? graphSize[0] : graphSize[1];
  let minX = 99999999999999999;
  let maxX = -99999999999999999;
  let minY = 99999999999999999;
  let maxY = -99999999999999999;
  nodes.forEach(function (node) {
    if (node.x > maxX) maxX = node.x;
    if (node.x < minX) minX = node.x;
    if (node.y > maxY) maxY = node.y;
    if (node.y < minY) minY = node.y;
  });

  edges.forEach(function (edge) {
    const controlPoints = edge.controlPoints;
    controlPoints.forEach(function (cp) {
      if (cp.x > maxX) maxX = cp.x;
      if (cp.x < minX) minX = cp.x;
      if (cp.y > maxY) maxY = cp.y;
      if (cp.y < minY) minY = cp.y;
    });
  });

  const xScale = maxX - minX;
  const yScale = maxY - minY;
  nodes.forEach(function (node) {
    node.orix = node.x;
    node.oriy = node.y;
    node.x = ((node.x - minX) / xScale) * size;
    node.y = ((node.y - minY) / yScale) * size;
  });
  edges.forEach(function (edge) {
    const controlPoints = edge.controlPoints;
    controlPoints.forEach(function (cp) {
      cp.x = ((cp.x - minX) / xScale) * size;
      cp.y = ((cp.y - minY) / yScale) * size;
    });
  });
}
`,title:{zh:"\u5730\u94C1\u7EBF\u8DEF\u56FE",en:"Animated Metro Map"},filename:"metroLines.js",isNew:!1}],icon:"",id:"others",title:{en:"Others",zh:"\u5176\u5B83"},childrenKey:"demos",order:3}],childrenKey:"examples"},{id:"net",title:{zh:"\u5E03\u5C40\uFF1A\u4E00\u822C\u56FE",en:"Layout\uFF1AGeneral Graph"},icon:"net",examples:[{demos:[{id:"basicForce2",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Ce2WSIlo_fcAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
      cluster: 'a',
    },
    {
      id: '1',
      label: '1',
      cluster: 'a',
    },
    {
      id: '2',
      label: '2',
      cluster: 'a',
    },
    {
      id: '3',
      label: '3',
      cluster: 'a',
    },
    {
      id: '4',
      label: '4',
      cluster: 'a',
    },
    {
      id: '5',
      label: '5',
      cluster: 'a',
    },
    {
      id: '6',
      label: '6',
      cluster: 'a',
    },
    {
      id: '7',
      label: '7',
      cluster: 'a',
    },
    {
      id: '8',
      label: '8',
      cluster: 'a',
    },
    {
      id: '9',
      label: '9',
      cluster: 'a',
    },
    {
      id: '10',
      label: '10',
      cluster: 'a',
    },
    {
      id: '11',
      label: '11',
      cluster: 'a',
    },
    {
      id: '12',
      label: '12',
      cluster: 'a',
    },
    {
      id: '13',
      label: '13',
      cluster: 'b',
    },
    {
      id: '14',
      label: '14',
      cluster: 'b',
    },
    {
      id: '15',
      label: '15',
      cluster: 'b',
    },
    {
      id: '16',
      label: '16',
      cluster: 'b',
    },
    {
      id: '17',
      label: '17',
      cluster: 'b',
    },
    {
      id: '18',
      label: '18',
      cluster: 'c',
    },
    {
      id: '19',
      label: '19',
      cluster: 'c',
    },
    {
      id: '20',
      label: '20',
      cluster: 'c',
    },
    {
      id: '21',
      label: '21',
      cluster: 'c',
    },
    {
      id: '22',
      label: '22',
      cluster: 'c',
    },
    {
      id: '23',
      label: '23',
      cluster: 'c',
    },
    {
      id: '24',
      label: '24',
      cluster: 'c',
    },
    {
      id: '25',
      label: '25',
      cluster: 'c',
    },
    {
      id: '26',
      label: '26',
      cluster: 'c',
    },
    {
      id: '27',
      label: '27',
      cluster: 'c',
    },
    {
      id: '28',
      label: '28',
      cluster: 'c',
    },
    {
      id: '29',
      label: '29',
      cluster: 'c',
    },
    {
      id: '30',
      label: '30',
      cluster: 'c',
    },
    {
      id: '31',
      label: '31',
      cluster: 'd',
    },
    {
      id: '32',
      label: '32',
      cluster: 'd',
    },
    {
      id: '33',
      label: '33',
      cluster: 'd',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const colors = [
  '#BDD2FD',
  '#BDEFDB',
  '#C2C8D5',
  '#FBE5A2',
  '#F6C3B7',
  '#B6E3F5',
  '#D3C6EA',
  '#FFD8B8',
  '#AAD8D8',
  '#FFD6E7',
];
const strokes = [
  '#5B8FF9',
  '#5AD8A6',
  '#5D7092',
  '#F6BD16',
  '#E8684A',
  '#6DC8EC',
  '#9270CA',
  '#FF9D4D',
  '#269A99',
  '#FF99C3',
];
const nodes = data.nodes;
const clusterMap = new Map();
let clusterId = 0;
nodes.forEach(function (node) {
  // cluster
  if (node.cluster && clusterMap.get(node.cluster) === undefined) {
    clusterMap.set(node.cluster, clusterId);
    clusterId++;
  }
  const cid = clusterMap.get(node.cluster);
  if (!node.style) {
    node.style = {};
  }
  node.style.fill = colors[cid % colors.length];
  node.style.stroke = strokes[cid % strokes.length];
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'force2',
    animate: true, // \u8BBE\u7F6E\u4E3A false \u53EF\u5173\u95ED\u5E03\u5C40\u52A8\u753B
    maxSpeed: 100,
    linkDistance: 50,
    clustering: true,
    nodeClusterBy: 'cluster',
    clusterNodeStrength: 300,
  },
});

graph.data(data);
graph.render();

/******** \u62D6\u62FD\u56FA\u5B9A\u8282\u70B9\u7684\u903B\u8F91 *********/
graph.on('node:dragstart', function (e) {
  const forceLayout = graph.get('layoutController').layoutMethods[0];
  forceLayout.stop()
});
graph.on('node:drag', function (e) {
  refreshDragedNodePosition(e);
  graph.layout()
});
function refreshDragedNodePosition(e) {
  const model = e.item.get('model');
  model.fx = e.x;
  model.fy = e.y;
  model.x = e.x;
  model.y = e.y;
}
/*********************************/

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };`,title:{zh:"Force2 \u805A\u7C7B\u53CA\u56FA\u5B9A\u62D6\u62FD\u8282\u70B9",en:"Basic Force2 Layout with dragging"},filename:"basicForce2.js",isNew:!1},{id:"basicForceDirected",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Ce2WSIlo_fcAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'force',
  },
  defaultNode: {
    size: 15,
  },
});

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data({
      nodes: data.nodes,
      edges: data.edges.map(function (edge, i) {
        edge.id = 'edge' + i;
        return Object.assign({}, edge);
      }),
    });
    graph.render();

    graph.on('node:dragstart', function (e) {
      graph.layout();
      refreshDragedNodePosition(e);
    });
    graph.on('node:drag', function (e) {
      const forceLayout = graph.get('layoutController').layoutMethods[0];
      forceLayout.execute();
      refreshDragedNodePosition(e);
    });
    graph.on('node:dragend', function (e) {
      e.item.get('model').fx = null;
      e.item.get('model').fy = null;
    });

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });

function refreshDragedNodePosition(e) {
  const model = e.item.get('model');
  model.fx = e.x;
  model.fy = e.y;
}
`,title:{zh:"\u57FA\u672C\u529B\u5BFC\u5411\u5E03\u5C40\u53CA\u8282\u70B9\u62D6\u62FD",en:"Basic Force-directed Layout with dragging"},filename:"basicForceDirected.js",isNew:!1},{id:"basicFA2",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*MqwAQZLIVPwAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['zoom-canvas', 'drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'forceAtlas2',
    preventOverlap: true,
    kr: 10,
    center: [250, 250],
  },
  defaultNode: {
    size: 20,
  },
});

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')
  .then((res) => res.json())
  .then((data) => {
    data.nodes.forEach(node => {
      node.x = Math.random() * 1;
    });
    graph.on('afterlayout', e => {
      graph.fitView()
    })
    graph.data(data);
    graph.render();
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u57FA\u672C Force Atlas 2",en:"Basic Force-Atlas 2 Layout"},filename:"basicFA2.js",isNew:!1},{id:"forceDirectedPreventOverlap",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*9VXcQLLyzHgAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'force',
    preventOverlap: true,
  },
  modes: {
    default: ['drag-canvas'],
  },
});

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')
  .then((res) => res.json())
  .then((data) => {
    const nodes = data.nodes;
    // randomize the node size
    nodes.forEach((node) => {
      node.size = Math.random() * 30 + 5;
    });
    graph.data({
      nodes,
      edges: data.edges.map(function (edge, i) {
        edge.id = 'edge' + i;
        return Object.assign({}, edge);
      }),
    });
    graph.render();

    graph.on('node:dragstart', function (e) {
      graph.layout();
      refreshDragedNodePosition(e);
    });
    graph.on('node:drag', function (e) {
      const forceLayout = graph.get('layoutController').layoutMethods[0];
      forceLayout.execute();
      refreshDragedNodePosition(e);
    });
    graph.on('node:dragend', function (e) {
      e.item.get('model').fx = null;
      e.item.get('model').fy = null;
    });
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };

function refreshDragedNodePosition(e) {
  const model = e.item.get('model');
  model.fx = e.x;
  model.fy = e.y;
}
`,title:{zh:"\u529B\u5BFC\u5411\u5E03\u5C40\u9632\u6B62\u8282\u70B9\u91CD\u53E0",en:"Prevent Node Overlappings"},filename:"forceDirectedPreventOverlap.js",isNew:!1},{id:"forceClustering",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*xonLSopPjKUAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'force',
    clustering: true,
    clusterNodeStrength: -5,
    clusterEdgeDistance: 200,
    clusterNodeSize: 20,
    clusterFociStrength: 1.2,
    nodeSpacing: 5,
    preventOverlap: true,
  },
  defaultNode: {
    size: 15,
  },
  modes: {
    default: ['zoom-canvas', 'drag-canvas', 'drag-node'],
  },
});

let colorMap = {
  2012: '#BDD2FD',
  2013: '#BDEFDB',
  2014: '#F6C3B7',
  2015: '#FFD8B8',
  2016: '#D3C6EA',
};

fetch('https://gw.alipayobjects.com/os/basement_prod/7bacd7d1-4119-4ac1-8be3-4c4b9bcbc25f.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data(data);
    data.nodes.forEach((i) => {
      i.cluster = i.year;
      i.style = Object.assign(i.style || {}, {
        fill: colorMap[i.year],
      });
    });
    graph.render();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });
`,title:{zh:"\u529B\u5BFC\u5411\u5E03\u5C40\u805A\u7C7B",en:"Force Layout with Clustering"},filename:"forceClustering.js",isNew:!1},{id:"forceDirectedFunctionalParams",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*SnVUQbXv7JAAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'force',
    preventOverlap: true,
    linkDistance: (d) => {
      if (d.source.id === 'node0') {
        return 100;
      }
      return 30;
    },
    nodeStrength: (d) => {
      if (d.isLeaf) {
        return -50;
      }
      return -10;
    },
    edgeStrength: (d) => {
      if (d.source.id === 'node1' || d.source.id === 'node2' || d.source.id === 'node3') {
        return 0.7;
      }
      return 0.1;
    },
  },
  defaultNode: {
    color: '#5B8FF9',
  },
  modes: {
    default: ['drag-canvas'],
  },
});

const data = {
  nodes: [
    { id: 'node0', size: 50 },
    { id: 'node1', size: 30 },
    { id: 'node2', size: 30 },
    { id: 'node3', size: 30 },
    { id: 'node4', size: 30, isLeaf: true },
    { id: 'node5', size: 30, isLeaf: true },
    { id: 'node6', size: 15, isLeaf: true },
    { id: 'node7', size: 15, isLeaf: true },
    { id: 'node8', size: 15, isLeaf: true },
    { id: 'node9', size: 15, isLeaf: true },
    { id: 'node10', size: 15, isLeaf: true },
    { id: 'node11', size: 15, isLeaf: true },
    { id: 'node12', size: 15, isLeaf: true },
    { id: 'node13', size: 15, isLeaf: true },
    { id: 'node14', size: 15, isLeaf: true },
    { id: 'node15', size: 15, isLeaf: true },
    { id: 'node16', size: 15, isLeaf: true },
  ],
  edges: [
    { source: 'node0', target: 'node1' },
    { source: 'node0', target: 'node2' },
    { source: 'node0', target: 'node3' },
    { source: 'node0', target: 'node4' },
    { source: 'node0', target: 'node5' },
    { source: 'node1', target: 'node6' },
    { source: 'node1', target: 'node7' },
    { source: 'node2', target: 'node8' },
    { source: 'node2', target: 'node9' },
    { source: 'node2', target: 'node10' },
    { source: 'node2', target: 'node11' },
    { source: 'node2', target: 'node12' },
    { source: 'node2', target: 'node13' },
    { source: 'node3', target: 'node14' },
    { source: 'node3', target: 'node15' },
    { source: 'node3', target: 'node16' },
  ],
};
const nodes = data.nodes;
graph.data({
  nodes,
  edges: data.edges.map(function (edge, i) {
    edge.id = 'edge' + i;
    return Object.assign({}, edge);
  }),
});
graph.render();

graph.on('node:dragstart', function (e) {
  graph.layout();
  refreshDragedNodePosition(e);
});
graph.on('node:drag', function (e) {
  refreshDragedNodePosition(e);
});
graph.on('node:dragend', function (e) {
  e.item.get('model').fx = null;
  e.item.get('model').fy = null;
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };

function refreshDragedNodePosition(e) {
  const model = e.item.get('model');
  model.fx = e.x;
  model.fy = e.y;
}
`,title:{zh:"\u5B9A\u5236\u4E0D\u540C\u8282\u70B9\u7684\u53C2\u6570",en:"Different Configurations for Nodes"},filename:"forceDirectedFunctionalParams.js",isNew:!1},{id:"basicForceDirectedDragFix",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*0qLJQaRFg90AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
  ],
};
const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'force',
    preventOverlap: true,
    nodeSize: 20,
  },
  modes: {
    default: ['drag-node'],
  },
  defaultNode: {
    size: 20,
  },
});
graph.data(data);
graph.render();

function refreshDragedNodePosition(e) {
  const model = e.item.get('model');
  model.fx = e.x;
  model.fy = e.y;
}
graph.on('node:dragstart', (e) => {
  graph.layout();
  refreshDragedNodePosition(e);
});
graph.on('node:drag', (e) => {
  refreshDragedNodePosition(e);
});
if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u56FA\u5B9A\u88AB\u62D6\u62FD\u8282\u70B9",en:"Fix the Dragged Node"},filename:"basicForceDirectedDragFix.js",isNew:!1},{id:"forceDirectedConfigurationTranslate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IyK7T5MkVqUAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const container = document.getElementById('container');
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = 'Force layout, linkDistance = 50, preventOverlap: false';
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 30;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'force',
    linkDistance: 50,
    center: [width / 2, height / 2],
  },
  animate: true,
  defaultNode: {
    size: 20,
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);
  };

layoutConfigTranslation();

setInterval(() => {
  layoutConfigTranslation();
}, 5000);

function layoutConfigTranslation() {
  setTimeout(() => {
    descriptionDiv.innerHTML = 'Force layout, linkDistance = 100, preventOverlap: true';
    graph.updateLayout({
      linkDistance: 100,
      preventOverlap: true,
      nodeSize: 20,
    });
  }, 2500);
  setTimeout(() => {
    descriptionDiv.innerHTML = 'Force layout, linkDistance = 50, preventOverlap: false';
    graph.updateLayout({
      linkDistance: 50,
      preventOverlap: false,
    });
  }, 5000);
}
`,title:{zh:"\u529B\u5BFC\u5411\u5E03\u5C40\u53C2\u6570\u52A8\u6001\u53D8\u5316",en:"Update Configurations for Force-directed Layout"},filename:"forceDirectedConfigurationTranslate.js",isNew:!1},{id:"forceBubbles",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*prZhSI341hUAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value,
      enumerable: true,
      configurable: true,
      writable: true,
    });
  } else {
    obj[key] = value;
  }
  return obj;
}

const colors = [
  '#BDD2FD',
  '#BDEFDB',
  '#C2C8D5',
  '#FBE5A2',
  '#F6C3B7',
  '#B6E3F5',
  '#D3C6EA',
  '#FFD8B8',
  '#AAD8D8',
  '#FFD6E7',
];
const strokes = [
  '#5B8FF9',
  '#5AD8A6',
  '#5D7092',
  '#F6BD16',
  '#E8684A',
  '#6DC8EC',
  '#9270CA',
  '#FF9D4D',
  '#269A99',
  '#FF99C3',
];

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
      value: 10,
      cluster: 'a',
      description: 'this is node 0, \\nand the value of it is 10',
    },
    {
      id: '1',
      label: '1',
      value: 20,
      cluster: 'b',
      description: 'this is node 1, \\nand the value of it is 20',
    },
    {
      id: '2',
      label: '2',
      value: 5,
      cluster: 'a',
      description: 'this is node 2, \\nand the value of it is 5',
    },
    {
      id: '3',
      label: '3',
      value: 10,
      cluster: 'a',
      description: 'this is node 3, \\nand the value of it is 10',
    },
    {
      id: '4',
      label: '4',
      value: 12,
      cluster: 'c',
      subCluster: 'sb',
      description: 'this is node 4, \\nand the value of it is 12',
    },
    {
      id: '5',
      label: '5',
      value: 18,
      cluster: 'c',
      subCluster: 'sa',
      description: 'this is node 5, \\nand the value of it is 18',
    },
    {
      id: '6',
      label: '6',
      value: 3,
      cluster: 'c',
      subCluster: 'sa',
      description: 'this is node 6, \\nand the value of it is 3',
    },
    {
      id: '7',
      label: '7',
      value: 7,
      cluster: 'b',
      subCluster: 'sa',
      description: 'this is node 7, \\nand the value of it is 7',
    },
    {
      id: '8',
      label: '8',
      value: 21,
      cluster: 'd',
      subCluster: 'sb',
      description: 'this is node 8, \\nand the value of it is 21',
    },
    {
      id: '9',
      label: '9',
      value: 9,
      cluster: 'd',
      subCluster: 'sb',
      description: 'this is node 9, \\nand the value of it is 9',
    },
  ],
  edges: [],
};

const tipDiv = document.createElement('div');
tipDiv.innerHTML = 'Try to click or drag a bubble!';
const graphDiv = document.getElementById('container');
graphDiv.appendChild(tipDiv);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'force',
    nodeStrength: 30,
    collideStrength: 0.7,
    alphaDecay: 0.01,
    preventOverlap: true,
  },
  modes: {
    default: ['drag-node'],
  },
  defaultNode: {
    size: [10, 10],
  },
});

// mapping
const nodes = data.nodes;
const nodeMap = new Map();
const clusterMap = new Map();
let clusterId = 0;
nodes.forEach((node) => {
  nodeMap.set(node.id, node);
  // cluster
  if (node.cluster && clusterMap.get(node.cluster) === undefined) {
    clusterMap.set(node.cluster, clusterId);
    clusterId++;
  }
  const cid = clusterMap.get(node.cluster);
  if (!node.style) node.style = {};
  node.style.fill = colors[cid % colors.length];
  node.style.stroke = strokes[cid % strokes.length];
  node.x = width / 2 + 200 * (Math.random() - 0.5);
  node.y = height / 2 + 200 * (Math.random() - 0.5);
});

// map the value to node size
let maxNodeValue = -9999,
  minNodeValue = 9999;
nodes.forEach(function (n) {
  if (maxNodeValue < n.value) maxNodeValue = n.value;
  if (minNodeValue > n.value) minNodeValue = n.value;
});
const nodeSizeRange = [10, 30];
const nodeSizeDataRange = [minNodeValue, maxNodeValue];
scaleNodeProp(nodes, 'size', 'value', nodeSizeDataRange, nodeSizeRange);

nodes.forEach(function (node) {
  node.oriSize = node.size;
  node.oriLabel = node.label;
});

function refreshDragedNodePosition(e) {
  const model = e.item.get('model');
  model.fx = e.x;
  model.fy = e.y;
}
graph.on('node:dragstart', function (e) {
  graph.layout();
  refreshDragedNodePosition(e);
});
graph.on('node:drag', function (e) {
  refreshDragedNodePosition(e);
});
graph.on('node:dragend', function (e) {
  e.item.get('model').fx = null;
  e.item.get('model').fy = null;
});
graph.on('node:click', function (e) {
  const node = e.item;
  const states = node.getStates();
  let clicked = false;
  const model = node.getModel();
  let size = 200;
  let labelText = 'NODE: ' + model.id + '\\n' + model.description;
  states.forEach(function (state) {
    if (state === 'click') {
      clicked = true;
      size = model.oriSize;
      labelText = model.oriLabel;
    }
  });
  graph.setItemState(node, 'click', !clicked);
  graph.updateItem(node, {
    size,
    label: labelText,
  });
  graph.layout();
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };

function scaleNodeProp(elements, propName, refPropName, dataRange, outRange) {
  const outLength = outRange[1] - outRange[0];
  const dataLength = dataRange[1] - dataRange[0];
  elements.forEach(function (n) {
    if (propName.split('.')[0] === 'style') {
      if (n.style) {
        n.style[propName.split('.')[1]] =
          ((n[refPropName] - dataRange[0]) * outLength) / dataLength + outRange[0];
      } else {
        n.style = _defineProperty(
          {},
          propName.split('.')[1],
          ((n[refPropName] - dataRange[0]) * outLength) / dataLength + outRange[0],
        );
      }
    } else {
      n[propName] = ((n[refPropName] - dataRange[0]) * outLength) / dataLength + outRange[0];
    }
  });
}
`,title:{zh:"\u529B\u5BFC\u5411\u6C14\u6CE1\u56FE",en:"Force-directed Bubbles"},filename:"forceBubbles.js",isNew:!1},{id:"forceConstrainedInRect",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*-4H8SaV8QKwAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const graphDiv = document.getElementById('container');
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML =
  'Constrians the nodes to be layed in the gray area with force-directed layout';
graphDiv.appendChild(descriptionDiv);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')
  .then((res) => res.json())
  .then((data) => {
    const nodes = data.nodes;

    // \u7070\u8272\u533A\u57DF
    const constrainBox = { x: 60, y: 50, width: 500, height: 150 };

    const backrect = document.createElement('div');
    backrect.style.backgroundColor = '#666';
    backrect.style.opacity = 0.1;
    backrect.style.marginLeft = \`\${constrainBox.x}px\`;
    backrect.style.marginTop = \`\${constrainBox.y}px\`;
    backrect.style.width = \`\${constrainBox.width}px\`;
    backrect.style.height = \`\${constrainBox.height}px\`;
    backrect.style.position = 'absolute';
    graphDiv.appendChild(backrect);

    const onTick = () => {
      let minx = 99999999;
      let maxx = -99999999;
      let miny = 99999999;
      let maxy = -99999999;
      let maxsize = -9999999;
      nodes.forEach((node) => {
        if (minx > node.x) {
          minx = node.x;
        }
        if (maxx < node.x) {
          maxx = node.x;
        }
        if (miny > node.y) {
          miny = node.y;
        }
        if (maxy < node.y) {
          maxy = node.y;
        }
        if (maxsize < node.size) {
          maxsize = node.size;
        }
      });
      const scalex = (constrainBox.width - maxsize) / (maxx - minx);
      const scaley = (constrainBox.height - maxsize) / (maxy - miny);
      nodes.forEach((node) => {
        node.x = (node.x - minx) * scalex + constrainBox.x;
        node.y = (node.y - miny) * scaley + constrainBox.y;
      });
    };

    const graph = new G6.Graph({
      container: 'container',
      width,
      height,
      layout: {
        type: 'force',
        onTick,
      },
      defaultNode: {
        size: 15,
      },
    });

    graph.data({
      nodes: data.nodes,
      edges: data.edges.map(function (edge, i) {
        edge.id = 'edge' + i;
        return Object.assign({}, edge);
      }),
    });
    graph.render();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });
`,title:{zh:"\u7EA6\u675F\u5728\u8303\u56F4\u5185\u5E03\u5C40",en:"Constrain the Nodes in a region"},filename:"forceConstrainedInRect.js",isNew:!1},{id:"gForceFix",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*YMwnTbT9NnQAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'gForce',
    gravity: 10,
    edgeStrength: 100,
    nodeStrength: 100,
  },
  defaultNode: {
    size: 15,
  },
  fitView: true,
  modes: {
    default: ['drag-canvas', 'zoom-canvas']
  }
});

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data({
      nodes: data.nodes,
      edges: data.edges.map(function (edge, i) {
        edge.id = 'edge' + i;
        return Object.assign({}, edge);
      }),
    });
    graph.render();

    graph.on('node:dragstart', function (e) {
      const forceLayout = graph.get('layoutController').layoutMethods[0];
      forceLayout.stop()
    });

    graph.on('node:drag', function (e) {
      refreshDragedNodePosition(e);
      graph.layout()
    });

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });

function refreshDragedNodePosition(e) {
  const model = e.item.get('model');
  model.fx = e.x;
  model.fy = e.y;
  model.x = e.x;
  model.y = e.y;
}
`,title:{zh:"GForce \u56FA\u5B9A\u88AB\u62D6\u62FD\u7684\u8282\u70B9",en:"GForce with Fixing Dragged Nodes"},filename:"gForceFix.js",isNew:!1}],icon:"",id:"forceDirected",title:{en:"Force-directed Layout",zh:"\u529B\u5BFC\u5411\u56FE\u5E03\u5C40"},childrenKey:"demos",order:0},{demos:[{id:"basicDagre",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*2uMmRo5wYPUAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

insertCss(\`
  .g6-tooltip {
    border-radius: 6px;
    font-size: 12px;
    color: #fff;
    background-color: #000;
    padding: 2px 8px;
    text-align: center;
  }
\`);

const data = {
  nodes: [
    {
      id: '1',
      dataType: 'alps',
      name: 'alps_file1',
      conf: [
        {
          label: 'conf',
          value: 'pai_graph.conf',
        },
        {
          label: 'dot',
          value: 'pai_graph.dot',
        },
        {
          label: 'init',
          value: 'init.rc',
        },
      ],
    },
    {
      id: '2',
      dataType: 'alps',
      name: 'alps_file2',
      conf: [
        {
          label: 'conf',
          value: 'pai_graph.conf',
        },
        {
          label: 'dot',
          value: 'pai_graph.dot',
        },
        {
          label: 'init',
          value: 'init.rc',
        },
      ],
    },
    {
      id: '3',
      dataType: 'alps',
      name: 'alps_file3',
      conf: [
        {
          label: 'conf',
          value: 'pai_graph.conf',
        },
        {
          label: 'dot',
          value: 'pai_graph.dot',
        },
        {
          label: 'init',
          value: 'init.rc',
        },
      ],
    },
    {
      id: '4',
      dataType: 'sql',
      name: 'sql_file1',
      conf: [
        {
          label: 'conf',
          value: 'pai_graph.conf',
        },
        {
          label: 'dot',
          value: 'pai_graph.dot',
        },
        {
          label: 'init',
          value: 'init.rc',
        },
      ],
    },
    {
      id: '5',
      dataType: 'sql',
      name: 'sql_file2',
      conf: [
        {
          label: 'conf',
          value: 'pai_graph.conf',
        },
        {
          label: 'dot',
          value: 'pai_graph.dot',
        },
        {
          label: 'init',
          value: 'init.rc',
        },
      ],
    },
    {
      id: '6',
      dataType: 'feature_etl',
      name: 'feature_etl_1',
      conf: [
        {
          label: 'conf',
          value: 'pai_graph.conf',
        },
        {
          label: 'dot',
          value: 'pai_graph.dot',
        },
        {
          label: 'init',
          value: 'init.rc',
        },
      ],
    },
    {
      id: '7',
      dataType: 'feature_etl',
      name: 'feature_etl_1',
      conf: [
        {
          label: 'conf',
          value: 'pai_graph.conf',
        },
        {
          label: 'dot',
          value: 'pai_graph.dot',
        },
        {
          label: 'init',
          value: 'init.rc',
        },
      ],
    },
    {
      id: '8',
      dataType: 'feature_extractor',
      name: 'feature_extractor',
      conf: [
        {
          label: 'conf',
          value: 'pai_graph.conf',
        },
        {
          label: 'dot',
          value: 'pai_graph.dot',
        },
        {
          label: 'init',
          value: 'init.rc',
        },
      ],
    },
  ],
  edges: [
    {
      source: '1',
      target: '2',
    },
    {
      source: '1',
      target: '3',
    },
    {
      source: '2',
      target: '4',
    },
    {
      source: '3',
      target: '4',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '6',
      target: '7',
    },
    {
      source: '6',
      target: '8',
    },
  ],
};

G6.registerNode(
  'sql',
  {
    drawShape(cfg, group) {
      const rect = group.addShape('rect', {
        attrs: {
          x: -75,
          y: -25,
          width: 150,
          height: 50,
          radius: 10,
          stroke: '#5B8FF9',
          fill: '#C6E5FF',
          lineWidth: 3,
        },
        name: 'rect-shape',
      });
      if (cfg.name) {
        group.addShape('text', {
          attrs: {
            text: cfg.name,
            x: 0,
            y: 0,
            fill: '#00287E',
            fontSize: 14,
            textAlign: 'center',
            textBaseline: 'middle',
            fontWeight: 'bold',
          },
          name: 'text-shape',
        });
      }
      return rect;
    },
  },
  'single-node',
);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'dagre',
    nodesepFunc: (d) => {
      if (d.id === '3') {
        return 500;
      }
      return 50;
    },
    ranksep: 70,
    controlPoints: true,
  },
  defaultNode: {
    type: 'sql',
  },
  defaultEdge: {
    type: 'polyline',
    style: {
      radius: 20,
      offset: 45,
      endArrow: true,
      lineWidth: 2,
      stroke: '#C2C8D5',
    },
  },
  nodeStateStyles: {
    selected: {
      stroke: '#d9d9d9',
      fill: '#5394ef',
    },
  },
  modes: {
    default: [
      'drag-canvas',
      'zoom-canvas',
      'click-select',
      {
        type: 'tooltip',
        formatText(model) {
          const cfg = model.conf;
          const text = [];
          cfg.forEach((row) => {
            text.push(row.label + ':' + row.value + '<br>');
          });
          return text.join('\\n');
        },
        offset: 30,
      },
    ],
  },
  fitView: true,
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"Dagre \u6D41\u7A0B\u56FE",en:"Basic Dagre Layout"},filename:"basicDagre.js",isNew:!1},{id:"dagreCombo",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*94EUTJ8l2QAAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
      comboId: 'A',
    },
    {
      id: '5',
      label: '5',
      comboId: 'B',
    },
    {
      id: '6',
      label: '6',
      comboId: 'A',
    },
    {
      id: '7',
      label: '7',
      comboId: 'C',
    },
    {
      id: '8',
      label: '8',
      comboId: 'C',
    },
    {
      id: '9',
      label: '9',
      comboId: 'A',
    },
    {
      id: '10',
      label: '10',
      comboId: 'B',
    },
    {
      id: '11',
      label: '11',
      comboId: 'B',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '1',
      target: '4',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '3',
      target: '4',
    },
    {
      source: '2',
      target: '5',
    },
    {
      source: '1',
      target: '6',
    },
    {
      source: '1',
      target: '7',
    },
    {
      source: '3',
      target: '8',
    },
    {
      source: '3',
      target: '9',
    },
    {
      source: '5',
      target: '10',
    },
    {
      source: '5',
      target: '11',
    },
  ],
  combos: [
    {
      id: 'A',
      label: 'combo A',
      style: {
        fill: '#C4E3B2',
        stroke: '#C4E3B2',
      },
    },
    {
      id: 'B',
      label: 'combo B',
      style: {
        stroke: '#99C0ED',
        fill: '#99C0ED',
      },
    },
    {
      id: 'C',
      label: 'combo C',
      style: {
        stroke: '#eee',
        fill: '#eee',
      },
    },
  ],
};

data.nodes.forEach((node) => {
  switch (node.ComboId) {
    case 'A':
      node.style = {
        fill: '#C4E3B2',
        stroke: '#aaa',
      };
      break;
    case 'B':
      node.style = {
        fill: '#99C0ED',
        stroke: '#aaa',
      };
      break;
    case 'C':
      node.style = {
        fill: '#eee',
        stroke: '#aaa',
      };
      break;
    default:
      node.style = {
        fill: '#FDE1CE',
        stroke: '#aaa',
      };
      break;
  }
});

let sortByCombo = false;
const descriptionDiv = document.createElement('button');
descriptionDiv.innerHTML = 'Enable sortByCombo';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

descriptionDiv.addEventListener('click', (e) => {
  sortByCombo = !sortByCombo;
  descriptionDiv.innerHTML = sortByCombo ? 'Disable sortByCombo' : 'Enable sortByCombo';
  graph.updateLayout({
    sortByCombo,
  });
});
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 30;
const graph = new G6.Graph({
  container: 'container',
  width,
  height: height - 50,
  fitView: true,
  fitViewPadding: 30,
  animate: true,
  groupByTypes: false,
  modes: {
    default: [
      'drag-combo',
      'drag-node',
      'drag-canvas',
      {
        type: 'collapse-expand-combo',
        relayout: false,
      },
    ],
  },
  layout: {
    type: 'dagre',
    sortByCombo: false,
    ranksep: 10,
    nodesep: 10,
  },
  defaultNode: {
    size: [60, 30],
    type: 'rect',
    anchorPoints: [[0.5, 0], [0.5, 1]]
  },
  defaultEdge: {
    type: 'line',
  },
  defaultCombo: {
    type: 'rect',
    style: {
      fillOpacity: 0.1,
    },
  },
});
graph.data(data);
graph.render();

console.log('comboTrees', graph.get('comboTrees'))

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);
  };
`,title:{zh:"\u5E26\u6709 Combo \u7684\u6D41\u7A0B\u56FE",en:"Dagre with Combos"},filename:"dagreCombo.js",isNew:!1},{id:"lrDagreUL",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*LJpmR4G7J3YAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '1',
      target: '4',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '3',
      target: '4',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '7',
    },
    {
      source: '5',
      target: '8',
    },
    {
      source: '8',
      target: '9',
    },
    {
      source: '2',
      target: '9',
    },
    {
      source: '3',
      target: '9',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitView: true,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'dagre',
    rankdir: 'LR',
    align: 'UL',
    controlPoints: true,
    nodesepFunc: () => 1,
    ranksepFunc: () => 1,
  },
  defaultNode: {
    size: [30, 20],
    type: 'rect',
    style: {
      lineWidth: 2,
      stroke: '#5B8FF9',
      fill: '#C6E5FF',
    },
  },
  defaultEdge: {
    type: 'polyline',
    size: 1,
    color: '#e2e2e2',
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
      radius: 20,
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u81EA\u5DE6\u5411\u53F3\u7684 Dagre \u4E0A\u5BF9\u9F50",en:"Dagre from Left to Right"},filename:"lrDagreUL.js",isNew:!1},{id:"lrDagre",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*pdaxTpV1R0EAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitView: true,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'dagre',
    rankdir: 'LR',
    align: 'DL',
    nodesepFunc: () => 1,
    ranksepFunc: () => 1,
  },
  defaultNode: {
    size: [30, 20],
    type: 'rect',
    style: {
      lineWidth: 2,
      stroke: '#5B8FF9',
      fill: '#C6E5FF',
    },
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u81EA\u5DE6\u5411\u53F3\u7684 Dagre",en:"Dagre from Left to Right"},filename:"lrDagre.js",isNew:!1},{id:"dagreConfigurationTranslate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*VkwOTL2UyN0AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
  ],
};
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML =
  'Dagre layout, rank seperation: 1, node seperation in same level: 1, layout direction: Top->Bottom, alignment of nodes: DL';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 30;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  controlPoints: false,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'dagre',
    nodeSize: [40, 20],
    nodesep: 1,
    ranksep: 1,
  },
  animate: true,
  defaultNode: {
    size: [40, 20],
    type: 'rect',
    style: {
      lineWidth: 2,
      stroke: '#5B8FF9',
      fill: '#C6E5FF',
    },
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);
  };

layoutConfigTranslation();

function layoutConfigTranslation() {
  setTimeout(function () {
    descriptionDiv.innerHTML =
      'Dagre layout, rank seperation: 10, node seperation in same level: 1, layout direction: Top->Bottom, alignment of nodes: DL';
    graph.updateLayout({
      ranksep: 10,
    });
  }, 1000);

  setTimeout(function () {
    descriptionDiv.innerHTML =
      'Dagre layout, rank seperation: 10, node seperation in same level: 5, layout direction: Left->Right, alignment of nodes: DL';
    graph.updateLayout({
      nodesep: 5,
    });
  }, 2500);

  setTimeout(function () {
    descriptionDiv.innerHTML =
      'Dagre layout, rank seperation: 10, node seperation in same level: 5, layout direction: Left->Right, alignment of nodes: UL';
    graph.updateLayout({
      align: 'UL',
    });
  }, 4000);

  setTimeout(function () {
    descriptionDiv.innerHTML =
      'Dagre layout, rank seperation: 10, node seperation in same level: 5, layout direction: Left->Right, alignment of nodes: UR';
    graph.updateLayout({
      align: 'UR',
    });
  }, 5500);

  setTimeout(function () {
    descriptionDiv.innerHTML =
      'Dagre layout, rank seperation: 10, node seperation in same level: 5, layout direction: Left->Right, alignment of nodes: Down Right, alignment of nodes: DL';
    graph.updateLayout({
      rankdir: 'LR',
      align: 'DL',
    });
  }, 7000);

  setTimeout(function () {
    descriptionDiv.innerHTML =
      'Dagre layout, rank seperation: 30, node seperation in same level: 5, layout direction: Left->Right, alignment of nodes: Down Right, alignment of nodes: DL';
    graph.updateLayout({
      ranksep: 30,
    });
  }, 8500);
}
`,title:{zh:"Dagre \u5E03\u5C40\u53C2\u6570\u52A8\u6001\u53D8\u5316",en:"Update Configurations for Dagre Layout"},filename:"dagreConfigurationTranslate.js",isNew:!1}],icon:"",id:"dagreFlow",title:{en:"Dagre Layout",zh:"Dagre \u6D41\u7A0B\u56FE\u5E03\u5C40"},childrenKey:"demos",order:1},{demos:[{id:"basicFruchterman",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1KY7SLEXxqMAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
      cluster: 'a',
    },
    {
      id: '1',
      label: '1',
      cluster: 'a',
    },
    {
      id: '2',
      label: '2',
      cluster: 'a',
    },
    {
      id: '3',
      label: '3',
      cluster: 'a',
    },
    {
      id: '4',
      label: '4',
      cluster: 'a',
    },
    {
      id: '5',
      label: '5',
      cluster: 'a',
    },
    {
      id: '6',
      label: '6',
      cluster: 'a',
    },
    {
      id: '7',
      label: '7',
      cluster: 'a',
    },
    {
      id: '8',
      label: '8',
      cluster: 'a',
    },
    {
      id: '9',
      label: '9',
      cluster: 'a',
    },
    {
      id: '10',
      label: '10',
      cluster: 'a',
    },
    {
      id: '11',
      label: '11',
      cluster: 'a',
    },
    {
      id: '12',
      label: '12',
      cluster: 'a',
    },
    {
      id: '13',
      label: '13',
      cluster: 'b',
    },
    {
      id: '14',
      label: '14',
      cluster: 'b',
    },
    {
      id: '15',
      label: '15',
      cluster: 'b',
    },
    {
      id: '16',
      label: '16',
      cluster: 'b',
    },
    {
      id: '17',
      label: '17',
      cluster: 'b',
    },
    {
      id: '18',
      label: '18',
      cluster: 'c',
    },
    {
      id: '19',
      label: '19',
      cluster: 'c',
    },
    {
      id: '20',
      label: '20',
      cluster: 'c',
    },
    {
      id: '21',
      label: '21',
      cluster: 'c',
    },
    {
      id: '22',
      label: '22',
      cluster: 'c',
    },
    {
      id: '23',
      label: '23',
      cluster: 'c',
    },
    {
      id: '24',
      label: '24',
      cluster: 'c',
    },
    {
      id: '25',
      label: '25',
      cluster: 'c',
    },
    {
      id: '26',
      label: '26',
      cluster: 'c',
    },
    {
      id: '27',
      label: '27',
      cluster: 'c',
    },
    {
      id: '28',
      label: '28',
      cluster: 'c',
    },
    {
      id: '29',
      label: '29',
      cluster: 'c',
    },
    {
      id: '30',
      label: '30',
      cluster: 'c',
    },
    {
      id: '31',
      label: '31',
      cluster: 'd',
    },
    {
      id: '32',
      label: '32',
      cluster: 'd',
    },
    {
      id: '33',
      label: '33',
      cluster: 'd',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'fruchterman',
    gravity: 5,
    speed: 5,
    // for rendering after each iteration
    tick: () => {
      graph.refreshPositions()
    }
  },
  animate: true,
  defaultNode: {
    size: 30,
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u57FA\u672C Fruchterman \u5E03\u5C40",en:"Basic Fruchterman Layout"},filename:"basicFruchterman.js",isNew:!1},{id:"fruchtermanClustering",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*WO1OTbNE_ugAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
      cluster: 'a',
    },
    {
      id: '1',
      label: '1',
      cluster: 'a',
    },
    {
      id: '2',
      label: '2',
      cluster: 'a',
    },
    {
      id: '3',
      label: '3',
      cluster: 'a',
    },
    {
      id: '4',
      label: '4',
      cluster: 'a',
    },
    {
      id: '5',
      label: '5',
      cluster: 'a',
    },
    {
      id: '6',
      label: '6',
      cluster: 'a',
    },
    {
      id: '7',
      label: '7',
      cluster: 'a',
    },
    {
      id: '8',
      label: '8',
      cluster: 'a',
    },
    {
      id: '9',
      label: '9',
      cluster: 'a',
    },
    {
      id: '10',
      label: '10',
      cluster: 'a',
    },
    {
      id: '11',
      label: '11',
      cluster: 'a',
    },
    {
      id: '12',
      label: '12',
      cluster: 'a',
    },
    {
      id: '13',
      label: '13',
      cluster: 'b',
    },
    {
      id: '14',
      label: '14',
      cluster: 'b',
    },
    {
      id: '15',
      label: '15',
      cluster: 'b',
    },
    {
      id: '16',
      label: '16',
      cluster: 'b',
    },
    {
      id: '17',
      label: '17',
      cluster: 'b',
    },
    {
      id: '18',
      label: '18',
      cluster: 'c',
    },
    {
      id: '19',
      label: '19',
      cluster: 'c',
    },
    {
      id: '20',
      label: '20',
      cluster: 'c',
    },
    {
      id: '21',
      label: '21',
      cluster: 'c',
    },
    {
      id: '22',
      label: '22',
      cluster: 'c',
    },
    {
      id: '23',
      label: '23',
      cluster: 'c',
    },
    {
      id: '24',
      label: '24',
      cluster: 'c',
    },
    {
      id: '25',
      label: '25',
      cluster: 'c',
    },
    {
      id: '26',
      label: '26',
      cluster: 'c',
    },
    {
      id: '27',
      label: '27',
      cluster: 'c',
    },
    {
      id: '28',
      label: '28',
      cluster: 'c',
    },
    {
      id: '29',
      label: '29',
      cluster: 'c',
    },
    {
      id: '30',
      label: '30',
      cluster: 'c',
    },
    {
      id: '31',
      label: '31',
      cluster: 'd',
    },
    {
      id: '32',
      label: '32',
      cluster: 'd',
    },
    {
      id: '33',
      label: '33',
      cluster: 'd',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const colors = [
  '#BDD2FD',
  '#BDEFDB',
  '#C2C8D5',
  '#FBE5A2',
  '#F6C3B7',
  '#B6E3F5',
  '#D3C6EA',
  '#FFD8B8',
  '#AAD8D8',
  '#FFD6E7',
];
const strokes = [
  '#5B8FF9',
  '#5AD8A6',
  '#5D7092',
  '#F6BD16',
  '#E8684A',
  '#6DC8EC',
  '#9270CA',
  '#FF9D4D',
  '#269A99',
  '#FF99C3',
];

const nodes = data.nodes;
const clusterMap = new Map();
let clusterId = 0;
nodes.forEach(function (node) {
  // cluster
  if (node.cluster && clusterMap.get(node.cluster) === undefined) {
    clusterMap.set(node.cluster, clusterId);
    clusterId++;
  }
  const cid = clusterMap.get(node.cluster);
  if (!node.style) {
    node.style = {};
  }
  node.style.fill = colors[cid % colors.length];
  node.style.stroke = strokes[cid % strokes.length];
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'fruchterman',
    gravity: 10,
    speed: 5,
    clustering: true,
  },
  animate: true,
  defaultNode: {
    size: 20,
  },
  defaultEdge: {
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"Fruchterman \u805A\u7C7B\u5E03\u5C40",en:"Fruchterman with Clustering"},filename:"fruchtermanClustering.js",isNew:!1},{id:"fruchtermanConfigurationTranslate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*W9MoQoKaQbYAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
      cluster: 'a',
    },
    {
      id: '1',
      label: '1',
      cluster: 'a',
    },
    {
      id: '2',
      label: '2',
      cluster: 'a',
    },
    {
      id: '3',
      label: '3',
      cluster: 'a',
    },
    {
      id: '4',
      label: '4',
      cluster: 'a',
    },
    {
      id: '5',
      label: '5',
      cluster: 'a',
    },
    {
      id: '6',
      label: '6',
      cluster: 'a',
    },
    {
      id: '7',
      label: '7',
      cluster: 'a',
    },
    {
      id: '8',
      label: '8',
      cluster: 'a',
    },
    {
      id: '9',
      label: '9',
      cluster: 'a',
    },
    {
      id: '10',
      label: '10',
      cluster: 'a',
    },
    {
      id: '11',
      label: '11',
      cluster: 'a',
    },
    {
      id: '12',
      label: '12',
      cluster: 'a',
    },
    {
      id: '13',
      label: '13',
      cluster: 'b',
    },
    {
      id: '14',
      label: '14',
      cluster: 'b',
    },
    {
      id: '15',
      label: '15',
      cluster: 'b',
    },
    {
      id: '16',
      label: '16',
      cluster: 'b',
    },
    {
      id: '17',
      label: '17',
      cluster: 'b',
    },
    {
      id: '18',
      label: '18',
      cluster: 'c',
    },
    {
      id: '19',
      label: '19',
      cluster: 'c',
    },
    {
      id: '20',
      label: '20',
      cluster: 'c',
    },
    {
      id: '21',
      label: '21',
      cluster: 'c',
    },
    {
      id: '22',
      label: '22',
      cluster: 'c',
    },
    {
      id: '23',
      label: '23',
      cluster: 'c',
    },
    {
      id: '24',
      label: '24',
      cluster: 'c',
    },
    {
      id: '25',
      label: '25',
      cluster: 'c',
    },
    {
      id: '26',
      label: '26',
      cluster: 'c',
    },
    {
      id: '27',
      label: '27',
      cluster: 'c',
    },
    {
      id: '28',
      label: '28',
      cluster: 'c',
    },
    {
      id: '29',
      label: '29',
      cluster: 'c',
    },
    {
      id: '30',
      label: '30',
      cluster: 'c',
    },
    {
      id: '31',
      label: '31',
      cluster: 'd',
    },
    {
      id: '32',
      label: '32',
      cluster: 'd',
    },
    {
      id: '33',
      label: '33',
      cluster: 'd',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const colors = [
  '#BDD2FD',
  '#BDEFDB',
  '#C2C8D5',
  '#FBE5A2',
  '#F6C3B7',
  '#B6E3F5',
  '#D3C6EA',
  '#FFD8B8',
  '#AAD8D8',
  '#FFD6E7',
];
const strokes = [
  '#5B8FF9',
  '#5AD8A6',
  '#5D7092',
  '#F6BD16',
  '#E8684A',
  '#6DC8EC',
  '#9270CA',
  '#FF9D4D',
  '#269A99',
  '#FF99C3',
];

const nodes = data.nodes;
const clusterMap = new Map();
let clusterId = 0;
nodes.forEach(function (node) {
  // cluster
  if (node.cluster && clusterMap.get(node.cluster) === undefined) {
    clusterMap.set(node.cluster, clusterId);
    clusterId++;
  }
  const cid = clusterMap.get(node.cluster);
  if (!node.style) {
    node.style = {};
  }
  node.style.fill = colors[cid % colors.length];
  node.style.stroke = strokes[cid % strokes.length];
});
const container = document.getElementById('container');
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = 'Fruchterman layout, gravity = 1';
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 30;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'fruchterman',
    gravity: 1,
    speed: 5,
  },
  animate: true,
  defaultNode: {
    size: 20,
  },
  defaultEdge: {
    size: 1,
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);
  };

layoutConfigTranslation();

function layoutConfigTranslation() {
  setTimeout(function () {
    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 5';
    graph.updateLayout({
      gravity: 5,
    });
  }, 1000);

  setTimeout(function () {
    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 10, layout by cluster';
    graph.updateLayout({
      gravity: 10,
      clustering: true,
    });
  }, 2500);

  setTimeout(function () {
    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 20, layout by cluster';
    graph.updateLayout({
      gravity: 20,
    });
  }, 4000);

  setTimeout(function () {
    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 50, layout by cluster';
    graph.updateLayout({
      gravity: 50,
    });
  }, 5500);

  setTimeout(function () {
    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 80, layout by cluster';
    graph.updateLayout({
      gravity: 80,
    });
  }, 7000);
}
`,title:{zh:"Fruchterman \u5E03\u5C40\u53C2\u6570\u52A8\u6001\u53D8\u5316",en:"Update the Configurations for Fruchterman"},filename:"fruchtermanConfigurationTranslate.js",isNew:!1},{id:"fruchtermanWebWorker",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*0sl9RZ7Cp28AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;

const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML =
  'Doing layout... web-worker is enabled in this demo, so the layout will not block the page.';
container.appendChild(descriptionDiv);

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'fruchterman',
    maxIteration: 8000,
    gravity: 1,
    workerEnabled: true,
  },
  animate: true,
  defaultNode: {
    size: 10,
  },
  defaultEdge: {
    size: 1,
  },
});

graph.on('afterlayout', () => {
  descriptionDiv.innerHTML = 'Done!';
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };

fetch('https://gw.alipayobjects.com/os/basement_prod/7bacd7d1-4119-4ac1-8be3-4c4b9bcbc25f.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data(data);
    graph.render();
  });
`,title:{zh:"Fruchterman \u4F7F\u7528 Web-worker",en:"Fruchterman with Web-worker"},filename:"fruchtermanWebWorker.js",isNew:!1},{id:"fruchtermanFix",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*fQNPRKHPJRMAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'fruchterman',
    speed: 10,
    maxIteration: 500,
    // for rendering after each iteration
    tick: () => {
      graph.refreshPositions()
    }
  },
  defaultNode: {
    size: 15,
  },
  fitView: true
});

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data({
      nodes: data.nodes,
      edges: data.edges.map(function (edge, i) {
        edge.id = 'edge' + i;
        return Object.assign({}, edge);
      }),
    });
    graph.render();

    graph.on('node:dragstart', function (e) {
      const forceLayout = graph.get('layoutController').layoutMethods[0];
      forceLayout.stop()
    });

    graph.on('node:drag', function (e) {
      refreshDragedNodePosition(e);
      graph.layout()
    });

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });

function refreshDragedNodePosition(e) {
  const model = e.item.get('model');
  model.fx = e.x;
  model.fy = e.y;
  model.x = e.x;
  model.y = e.y;
}
`,title:{zh:"Fruchterman \u56FA\u5B9A\u88AB\u62D6\u62FD\u7684\u8282\u70B9",en:"Fruchterman with Fixing Dragged Nodes"},filename:"fruchtermanFix.js",isNew:!1}],icon:"",id:"furchtermanLayout",title:{en:"Fruchterman Layout",zh:"Fruchterman \u56FE\u5E03\u5C40"},childrenKey:"demos",order:2},{demos:[{id:"basicRadial",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Ec_WQ5hqVsgAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'radial',
    unitRadius: 50,
  },
  animate: true,
  defaultNode: {
    size: 20,
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u57FA\u672C Radial \u8F90\u5C04\u5E03\u5C40",en:"Basic Radial Layout"},filename:"basicRadial.js",isNew:!1},{id:"preventOverlapRadial",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*GAFjRJeAoAsAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'radial',
    unitRadius: 50,
    preventOverlap: true,
    maxPreventOverlapIteration: 100,
  },
  animate: true,
  defaultEdge: {
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
});

const nodes = data.nodes;
nodes.forEach((node) => {
  node.size = Math.random() * 20 + 10;
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u9632\u6B62\u8282\u70B9\u91CD\u53E0\u7684\u4E25\u683C\u8F90\u5C04\u5E03\u5C40",en:"Prevent Node Overlappings and Restrict Radial"},filename:"preventOverlapRadial.js",isNew:!1},{id:"preventOverlapUnstrictRadial",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*X8rzTZyWwUcAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'radial',
    unitRadius: 70,
    preventOverlap: true,
    strictRadial: false,
  },
  animate: true,
  defaultNode: {
    size: 20,
  },
  defaultEdge: {
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u9632\u6B62\u8282\u70B9\u91CD\u53E0\u7684\u975E\u4E25\u683C\u8F90\u5C04\u5E03\u5C40",en:"Prevent Node Overlappings and Unrestrict Radial"},filename:"preventOverlapUnstrictRadial.js",isNew:!1},{id:"interactRadial",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*F4OQQKc8l2IAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const data2_m = {
  nodes: [
    {
      id: '2',
      label: '2',
    },
    {
      id: '1001',
      label: '1001',
    },
    {
      id: '1002',
      label: '1002',
    },
    {
      id: '1003',
      label: '1003',
    },
    {
      id: '1004',
      label: '1004',
    },
    {
      id: '1005',
      label: '1005',
    },
    {
      id: '1006',
      label: '1006',
    },
    {
      id: '1007',
      label: '1007',
    },
    {
      id: '1008',
      label: '1008',
    },
    {
      id: '1009',
      label: '1009',
    },
    {
      id: '1010',
      label: '1010',
    },
    {
      id: '1011',
      label: '1011',
    },
    {
      id: '1012',
      label: '1012',
    },
    {
      id: '1013',
      label: '1013',
    },
    {
      id: '1014',
      label: '1014',
    },
    {
      id: '1015',
      label: '1015',
    },
    {
      id: '1016',
      label: '1016',
    },
    {
      id: '1017',
      label: '1017',
    },
    {
      id: '1018',
      label: '1018',
    },
    {
      id: '1019',
      label: '1019',
    },
    {
      id: '1020',
      label: '1020',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '41',
      label: '41',
    },
  ],
  edges: [
    {
      source: '2',
      target: '1001',
    },
    {
      source: '2',
      target: '1002',
    },
    {
      source: '2',
      target: '1003',
    },
    {
      source: '2',
      target: '1004',
    },
    {
      source: '2',
      target: '1005',
    },
    {
      source: '1001',
      target: '1006',
    },
    {
      source: '1001',
      target: '1007',
    },
    {
      source: '1001',
      target: '1008',
    },
    {
      source: '1001',
      target: '1009',
    },
    {
      source: '1001',
      target: '1010',
    },
    {
      source: '1002',
      target: '1006',
    },
    {
      source: '1002',
      target: '1007',
    },
    {
      source: '1002',
      target: '1008',
    },
    {
      source: '1002',
      target: '1009',
    },
    {
      source: '1002',
      target: '1010',
    },
    {
      source: '1003',
      target: '1006',
    },
    {
      source: '1003',
      target: '1007',
    },
    {
      source: '1003',
      target: '1008',
    },
    {
      source: '1003',
      target: '1009',
    },
    {
      source: '1003',
      target: '1010',
    },
    {
      source: '1010',
      target: '1011',
    },
    {
      source: '1010',
      target: '1012',
    },
    {
      source: '1010',
      target: '1013',
    },
    {
      source: '1010',
      target: '1014',
    },
    {
      source: '1010',
      target: '1015',
    },
    {
      source: '1010',
      target: '1016',
    },
    {
      source: '1010',
      target: '1017',
    },
    {
      source: '1008',
      target: '1014',
    },
    {
      source: '1008',
      target: '1015',
    },
    {
      source: '1008',
      target: '1016',
    },
    {
      source: '1008',
      target: '1017',
    },
    {
      source: '1017',
      target: '1018',
    },
    {
      source: '1017',
      target: '1019',
    },
    {
      source: '1016',
      target: '1020',
    },
    {
      source: '1016',
      target: '1020',
    },
    {
      source: '5',
      target: '1020',
    },
    {
      source: '41',
      target: '1020',
    },
    {
      source: '5',
      target: '1009',
    },
    {
      source: '41',
      target: '1009',
    },
  ],
};

const container = document.getElementById('container');
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = 'Try to click node 2!';
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 30;
const mainUnitRadius = 80;
const focusNode = data.nodes[22];
focusNode.style = {
  stroke: '#00419F',
  fill: '#729FFC',
  lineWidth: 2,
};
data.nodes[2].style = {
  stroke: '#00419F',
  fill: '#729FFC',
  lineWidth: 2,
};

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'radial',
    maxIteration: 200,
    focusNode,
    unitRadius: mainUnitRadius,
    linkDistance: 100,
    preventOverlap: true,
    nodeSize: 20,
  },
  animate: true,
  modes: {
    default: ['drag-node', 'click-select', 'click-add-node', 'drag-canvas'],
  },
  defaultNode: {
    size: 20,
  },
});

graph.data({
  nodes: data.nodes,
  edges: data.edges.map((edge, i) => {
    edge.id = \`edge\${i}\`;
    return Object.assign({}, edge);
  }),
});
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);
  };

graph.on('node:click', (ev) => {
  const itemModel = ev.item.getModel();
  const nodes = graph.getNodes();
  const edges = graph.getEdges();
  let newData;
  if (itemModel.id === '2') newData = data2_m;
  else return;
  const newNodeModels = newData.nodes;
  const newEdgeModels = [];
  // deduplication the items in newEdgeModels
  newData.edges.forEach(function (e) {
    let exist = false;
    newEdgeModels.forEach(function (ne) {
      if (ne.source === e.source && ne.target === e.target) exist = true;
    });
    if (!exist) {
      newEdgeModels.push(e);
    }
  });

  // for graph.changeData()
  const allNodeModels = [],
    allEdgeModels = [];

  // add new nodes to graph
  const nodeMap = new Map();
  nodes.forEach((n) => {
    const nModel = n.getModel();
    nodeMap.set(nModel.id, n);
  });
  newNodeModels.forEach((nodeModel) => {
    if (nodeMap.get(nodeModel.id) === undefined) {
      // set the initial positions of the new nodes to the focus(clicked) node
      nodeModel.x = itemModel.x;
      nodeModel.y = itemModel.y;
      graph.addItem('node', nodeModel);
    }
  });

  // add new edges to graph
  const edgeMap = new Map();
  edges.forEach(function (e, i) {
    const eModel = e.getModel();
    edgeMap.set(eModel.source + ',' + eModel.target, i);
  });
  const oldEdgeNum = edges.length;
  newEdgeModels.forEach(function (em, i) {
    const exist = edgeMap.get(em.source + ',' + em.target);
    if (exist === undefined) {
      graph.addItem('edge', em);
      edgeMap.set(em.source + ',' + em.target, oldEdgeNum + i);
    }
  });

  edges.forEach((e) => {
    allEdgeModels.push(e.getModel());
  });
  nodes.forEach((n) => {
    allNodeModels.push(n.getModel());
  });
  // the max degree about foces(clicked) node in the newly added data
  const maxDegree = 4;
  // the max degree about foces(clicked) node in the original data
  const oMaxDegree = 3;
  const unitRadius = 40;
  // re-place the clicked node far away the exisiting items
  // along the radius from center node to it
  const vx = itemModel.x - focusNode.x;
  const vy = itemModel.y - focusNode.y;
  const vlength = Math.sqrt(vx * vx + vy * vy);
  const ideallength = unitRadius * maxDegree + mainUnitRadius * oMaxDegree;
  itemModel.x = (ideallength * vx) / vlength + focusNode.x;
  itemModel.y = (ideallength * vy) / vlength + focusNode.y;

  const subRadialLayout = new G6.Layout.radial({
    center: [itemModel.x, itemModel.y],
    maxIteration: 200,
    focusNode: '2',
    unitRadius,
    linkDistance: 180,
    preventOverlap: true,
  });
  subRadialLayout.init({
    nodes: newNodeModels,
    edges: newEdgeModels,
  });
  subRadialLayout.execute();
  graph.positionsAnimate();
  graph.data({
    nodes: allNodeModels,
    edges: allEdgeModels,
  });
});
`,title:{zh:"\u4EA4\u4E92\u6269\u5C55\u8282\u70B9\u7684\u8F90\u5C04\u5E03\u5C40",en:"Interactively Expand a Node"},filename:"interactRadial.js",isNew:!1},{id:"radialConfigurationTranslate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ikctQb9KECAAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML =
  'Radial layout, focusNode =  = 0, unitRadius = 50, preventOverlap: false';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'radial',
    unitRadius: 50,
  },
  animate: true,
  defaultNode: {
    size: 20,
  },
  defaultEdge: {
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };

layoutConfigTranslation();

setInterval(function () {
  layoutConfigTranslation();
}, 7000);

function layoutConfigTranslation() {
  setTimeout(function () {
    descriptionDiv.innerHTML =
      'Radial layout, focusNode =  = 0, unitRadius = 50, preventOverlap: true';
    graph.updateLayout({
      preventOverlap: true,
      nodeSize: 20,
    });
  }, 1000);

  setTimeout(function () {
    descriptionDiv.innerHTML =
      'Radial layout, focusNode =  = 0, unitRadius = 80, preventOverlap: true';
    graph.updateLayout({
      unitRadius: 80,
    });
  }, 2500);

  setTimeout(function () {
    descriptionDiv.innerHTML =
      'Radial layout, focusNode =  = 10, unitRadius = 80, preventOverlap: true';
    graph.updateLayout({
      focusNode: '10',
    });
  }, 4000);

  setTimeout(function () {
    descriptionDiv.innerHTML =
      'Radial layout, focusNode =  = 20, unitRadius = 80, preventOverlap: true';
    graph.updateLayout({
      focusNode: '20',
    });
  }, 5500);

  setTimeout(function () {
    descriptionDiv.innerHTML =
      'Radial layout, focusNode =  = 0, unitRadius = 50, preventOverlap: false';
    graph.updateLayout({
      focusNode: '0',
      preventOverlap: false,
      unitRadius: 50,
    });
  }, 5500);
}
`,title:{zh:"Radial \u5E03\u5C40\u53C2\u6570\u52A8\u6001\u53D8\u5316",en:"Update Configurations for Radial"},filename:"radialConfigurationTranslate.js",isNew:!1},{id:"sortRadial",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*gzfTQKBB62IAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      sortAttr: 0,
      sortAttr2: 'a',
    },
    {
      id: '1',
      sortAttr: 0,
      sortAttr2: 'a',
    },
    {
      id: '2',
      sortAttr: 0,
      sortAttr2: 'a',
    },
    {
      id: '3',
      sortAttr: 0,
      sortAttr2: 'a',
    },
    {
      id: '4',
      sortAttr: 2,
      sortAttr2: 'c',
    },
    {
      id: '5',
      sortAttr: 0,
      sortAttr2: 'a',
    },
    {
      id: '6',
      sortAttr: 1,
      sortAttr2: 'b',
    },
    {
      id: '7',
      sortAttr: 1,
      sortAttr2: 'b',
    },
    {
      id: '8',
      sortAttr: 2,
      sortAttr2: 'c',
    },
    {
      id: '9',
      sortAttr: 3,
      sortAttr2: 'd',
    },
    {
      id: '10',
      sortAttr: 3,
      sortAttr2: 'd',
    },
    {
      id: '11',
      sortAttr: 1,
      sortAttr2: 'b',
    },
    {
      id: '12',
      sortAttr: 2,
      sortAttr2: 'c',
    },
    {
      id: '13',
      sortAttr: 1,
      sortAttr2: 'b',
    },
    {
      id: '14',
      sortAttr: 3,
      sortAttr2: 'd',
    },
    {
      id: '15',
      sortAttr: 3,
      sortAttr2: 'd',
    },
    {
      id: '16',
      sortAttr: 1,
      sortAttr2: 'b',
    },
    {
      id: '17',
      sortAttr: 2,
      sortAttr2: 'c',
    },
    {
      id: '18',
      sortAttr: 2,
      sortAttr2: 'c',
    },
    {
      id: '19',
      sortAttr: 1,
      sortAttr2: 'b',
    },
    {
      id: '20',
      sortAttr: 1,
      sortAttr2: 'b',
    },
    {
      id: '21',
      sortAttr: 3,
      sortAttr2: 'd',
    },
    {
      id: '22',
      sortAttr: 3,
      sortAttr2: 'd',
    },
    {
      id: '23',
      sortAttr: 3,
      sortAttr2: 'd',
    },
    {
      id: '24',
      sortAttr: 0,
      sortAttr2: 'a',
    },
    {
      id: '25',
      sortAttr: 0,
      sortAttr2: 'a',
    },
    {
      id: '26',
      sortAttr: 1,
      sortAttr2: 'b',
    },
    {
      id: '27',
      sortAttr: 1,
      sortAttr2: 'b',
    },
    {
      id: '28',
      sortAttr: 3,
      sortAttr2: 'd',
    },
    {
      id: '29',
      sortAttr: 2,
      sortAttr2: 'c',
    },
    {
      id: '30',
      sortAttr: 2,
      sortAttr2: 'c',
    },
    {
      id: '31',
      sortAttr: 1,
      sortAttr2: 'b',
    },
    {
      id: '32',
      sortAttr: 1,
      sortAttr2: 'b',
    },
    {
      id: '33',
      sortAttr: 0,
      sortAttr2: 'a',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'radial',
    unitRadius: 70,
    maxIteration: 1000,
    linkDistance: 10,
    preventOverlap: true,
    nodeSize: 30,
    sortBy: 'sortAttr2',
    sortStrength: 50,
  },
  animate: true,
  defaultEdge: {
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
});

const colors = ['steelblue', 'green', 'pink', 'grey'];
const colorsObj = { a: 'steelblue', b: 'green', c: 'pink', d: 'grey' };
data.nodes.forEach((node) => {
  node.size = 20;
  node.style = {
    lineWidth: 4,
    fill: '#fff',
    stroke: colors[node.sortAttr2] || colorsObj[node.sortAttr2],
  };
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u540C\u5C42\u8282\u70B9\u6309\u7167\u6307\u5B9A\u5B57\u6BB5\u805A\u7C7B",en:"Order the Level Nodes"},filename:"sortRadial.js",isNew:!1}],icon:"",id:"radialLayout",title:{en:"Radial Layout",zh:"Radial \u8F90\u5C04\u5E03\u5C40"},childrenKey:"demos",order:3},{demos:[{id:"basicCircular",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ZSuXQ4PS2F8AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'circular',
  },
  animate: true,
  defaultNode: {
    size: 20,
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u57FA\u672C Circular \u5E03\u5C40",en:"Basic Circular Layout"},filename:"basicCircular.js",isNew:!1},{id:"degreeCircular",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*MOEeS6ooB7AAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'circular',
    ordering: 'degree',
  },
  animate: true,
  defaultNode: {
    size: 20,
  },
  defaultEdge: {
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u6309\u7167\u8282\u70B9\u5EA6\u6570\u6392\u5E8F\u7684 Circular \u5E03\u5C40",en:"Degree Ordered Circular"},filename:"degreeCircular.js",isNew:!1},{id:"spiralCircular",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*bY0iSqTc3z4AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'circular',
    startRadius: 10,
    endRadius: 300,
  },
  animate: true,
  defaultNode: {
    size: 20,
  },
  defaultEdge: {
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u87BA\u65CB\u7EBF\u5E03\u5C40",en:"Spiral Layout"},filename:"spiralCircular.js",isNew:!1},{id:"divisionCircular",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*u30nQahg6q0AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'circular',
    divisions: 5,
    radius: 200,
    startAngle: Math.PI / 4,
    endAngle: Math.PI,
  },
  animate: true,
  defaultNode: {
    size: 20,
  },
  defaultEdge: {
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u5206\u5272\u73AF\u5F62\u5E03\u5C40",en:"Divided Circular Layout"},filename:"divisionCircular.js",isNew:!1},{id:"circularConfigurationTranslate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*D85cS7-yqNEAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML =
  'Circular layout with radius: take full use of the canvas, ordering: topology';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 30;

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'circular',
  },
  animate: true,
  defaultNode: {
    size: 20,
  },
  defaultEdge: {
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);
  };

layoutConfigTranslation();

setInterval(function () {
  layoutConfigTranslation();
}, 11500);

function layoutConfigTranslation() {
  setTimeout(function () {
    descriptionDiv.innerHTML = 'Circular layout, radius = 200, divisions = 5, ordering: degree';
    graph.updateLayout({
      radius: 200,
      startAngle: Math.PI / 4,
      endAngle: Math.PI,
      divisions: 5,
      ordering: 'degree',
    });
  }, 1000);

  setTimeout(function () {
    descriptionDiv.innerHTML = 'Circular layout, radius = 200, divisions = 3, ordering: degree';
    graph.updateLayout({
      startAngle: Math.PI / 4,
      endAngle: Math.PI,
      divisions: 3,
    });
  }, 2500);

  setTimeout(function () {
    descriptionDiv.innerHTML = 'Circular layout, radius = 200, divisions = 8, ordering: degree';
    graph.updateLayout({
      radius: 200,
      startAngle: 0,
      endAngle: Math.PI / 2,
      divisions: 8,
    });
  }, 4000);

  setTimeout(function () {
    descriptionDiv.innerHTML =
      'Circular layout, radius = 10\uFF5E300(spiral), endAngle: PI, divisions = 1, ordering: degree';
    graph.updateLayout({
      radius: null,
      startRadius: 10,
      endRadius: 300,
      divisions: 1,
      startAngle: 0,
      endAngle: Math.PI,
    });
  }, 5500);

  setTimeout(function () {
    descriptionDiv.innerHTML =
      'Circular layout, radius = 10\uFF5E300(spiral),endAngle: 2 * PI, divisions= 1, ordering: degree';
    graph.updateLayout({
      endAngle: 2 * Math.PI,
    });
  }, 7000);

  setTimeout(function () {
    descriptionDiv.innerHTML = 'Circular layout, radius = 200, ordering: degree';
    graph.updateLayout({
      radius: 200,
    });
  }, 8500);

  setTimeout(function () {
    descriptionDiv.innerHTML = 'Circular layout, radius = 200, ordering: topology';
    graph.updateLayout({
      radius: 200,
      ordering: 'topology',
    });
  }, 10000);
}
`,title:{zh:"Circular \u5E03\u5C40\u53C2\u6570\u52A8\u6001\u53D8\u5316",en:"Update Configurations for Circular Layout"},filename:"circularConfigurationTranslate.js",isNew:!1}],icon:"",id:"circular",title:{en:"Circular Layout",zh:"Circular \u73AF\u5F62\u5E03\u5C40"},childrenKey:"demos",order:4},{demos:[{id:"basicGrid",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Oh6mRLVEBBIAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['zoom-canvas', 'drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'grid',
    begin: [20, 20],
    width: width - 20,
    height: height - 20,
  },
  animate: true,
  defaultNode: {
    size: 20,
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u57FA\u672C Grid \u7F51\u683C\u5E03\u5C40",en:"Basic Grid Layout"},filename:"basicGrid.js",isNew:!1},{id:"clusterGrid",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*_ABKTptHoKoAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
      cluster: '0',
    },
    {
      id: '1',
      label: '1',
      cluster: '0',
    },
    {
      id: '2',
      label: '2',
      cluster: '0',
    },
    {
      id: '3',
      label: '3',
      cluster: '0',
    },
    {
      id: '4',
      label: '4',
      cluster: '0',
    },
    {
      id: '5',
      label: '5',
      cluster: '3',
    },
    {
      id: '6',
      label: '6',
      cluster: '0',
    },
    {
      id: '7',
      label: '7',
      cluster: '0',
    },
    {
      id: '8',
      label: '8',
      cluster: '0',
    },
    {
      id: '9',
      label: '9',
      cluster: '3',
    },
    {
      id: '10',
      label: '10',
      cluster: '3',
    },
    {
      id: '11',
      label: '11',
      cluster: '2',
    },
    {
      id: '12',
      label: '12',
      cluster: '2',
    },
    {
      id: '13',
      label: '13',
      cluster: '4',
    },
    {
      id: '14',
      label: '14',
      cluster: '2',
    },
    {
      id: '15',
      label: '15',
      cluster: '2',
    },
    {
      id: '16',
      label: '16',
      cluster: '2',
    },
    {
      id: '17',
      label: '17',
      cluster: '1',
    },
    {
      id: '18',
      label: '18',
      cluster: '4',
    },
    {
      id: '19',
      label: '19',
      cluster: '4',
    },
    {
      id: '20',
      label: '20',
      cluster: '4',
    },
    {
      id: '21',
      label: '21',
      cluster: '0',
    },
    {
      id: '22',
      label: '22',
      cluster: '2',
    },
    {
      id: '23',
      label: '23',
      cluster: '2',
    },
    {
      id: '24',
      label: '24',
      cluster: '2',
    },
    {
      id: '25',
      label: '25',
      cluster: '3',
    },
    {
      id: '26',
      label: '26',
      cluster: '4',
    },
    {
      id: '27',
      label: '27',
      cluster: '4',
    },
    {
      id: '28',
      label: '28',
      cluster: '1',
    },
    {
      id: '29',
      label: '29',
      cluster: '1',
    },
    {
      id: '30',
      label: '30',
      cluster: '4',
    },
    {
      id: '31',
      label: '31',
      cluster: '4',
    },
    {
      id: '32',
      label: '32',
      cluster: '1',
    },
    {
      id: '33',
      label: '33',
      cluster: '2',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const colors = [
  '#BDD2FD',
  '#BDEFDB',
  '#C2C8D5',
  '#FBE5A2',
  '#F6C3B7',
  '#B6E3F5',
  '#D3C6EA',
  '#FFD8B8',
  '#AAD8D8',
  '#FFD6E7',
];
const strokes = [
  '#5B8FF9',
  '#5AD8A6',
  '#5D7092',
  '#F6BD16',
  '#E8684A',
  '#6DC8EC',
  '#9270CA',
  '#FF9D4D',
  '#269A99',
  '#FF99C3',
];

const nodes = data.nodes;
const clusterMap = new Map();
let clusterId = 0;
nodes.forEach(function (node) {
  // cluster
  if (node.cluster && clusterMap.get(node.cluster) === undefined) {
    clusterMap.set(node.cluster, clusterId);
    clusterId++;
  }
  const cid = clusterMap.get(node.cluster);
  if (!node.style) node.style = {};
  node.style.fill = colors[cid % colors.length];
  node.style.stroke = strokes[cid % strokes.length];
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['zoom-canvas', 'drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'grid',
    begin: [20, 20],
    width: width - 20,
    height: height - 20,
    sortBy: 'cluster',
  },
  animate: true,
  defaultNode: {
    size: 20,
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u6307\u5B9A\u6392\u5E8F\u65B9\u5F0F\u7684\u7F51\u683C\u5E03\u5C40",en:"Ordered Grid Layout"},filename:"clusterGrid.js",isNew:!1}],icon:"",id:"gridLayout",title:{en:"Grid",zh:"Grid \u7F51\u683C\u5E03\u5C40"},childrenKey:"demos",order:5},{demos:[{id:"basicConcentric",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*QpyPTbBpO2AAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['zoom-canvas', 'drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'concentric',
    maxLevelDiff: 0.5,
    sortBy: 'degree',
  },
  animate: true,
  defaultNode: {
    size: 5,
  },
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };

fetch('https://gw.alipayobjects.com/os/basement_prod/8dacf27e-e1bc-4522-b6d3-4b6d9b9ed7df.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data(data);
    graph.render();
  });
`,title:{zh:"\u57FA\u672C Concentric \u540C\u5FC3\u5706\u5E03\u5C40",en:"Basic Concentric Layout"},filename:"basicConcentric.js",isNew:!1}],icon:"",id:"concentricLayout",title:{en:"Concentric Layout",zh:"Concentric \u540C\u5FC3\u5706\u5E03\u5C40"},childrenKey:"demos",order:6},{demos:[{id:"basicMDS",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*aUS7TJR2NHcAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitView: true,
  layout: {
    type: 'mds',
    linkDistance: 100,
  },
  modes: {
    default: ['drag-node'],
  },
  defaultNode: {
    size: 20,
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u57FA\u672C MDS \u5E03\u5C40",en:"Basic MDS Layout"},filename:"basicMDS.js",isNew:!1}],icon:"",id:"mdsLayout",title:{en:"MDS Layout",zh:"MDS \u5E03\u5C40"},childrenKey:"demos",order:7},{demos:[{id:"basicArcDiagram",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*_eivQrJXt8sAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const colors = [
  'rgb(91, 143, 249)',
  'rgb(90, 216, 166)',
  'rgb(93, 112, 146)',
  'rgb(246, 189, 22)',
  'rgb(232, 104, 74)',
  'rgb(109, 200, 236)',
  'rgb(146, 112, 202)',
  'rgb(255, 157, 77)',
  'rgb(38, 154, 153)',
  'rgb(227, 137, 163)',
];

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  modes: {
    default: [
      {
        type: 'edge-tooltip',
        formatText: function formatText(model) {
          const text = 'source: ' + model.sourceName + '<br/> target: ' + model.targetName;
          return text;
        },
      },
    ],
  },
  defaultNode: {
    style: {
      opacity: 0.8,
      lineWidth: 1,
      stroke: '#999',
    },
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
    style: {
      opacity: 0.6,
      lineAppendWidth: 3,
    },
  },
});
graph.on('edge:mouseenter', function (e) {
  const edge = e.item;
  graph.setItemState(edge, 'hover', true);
});
graph.on('edge:mouseleave', function (e) {
  const edge = e.item;
  graph.setItemState(edge, 'hover', false);
});

fetch('https://gw.alipayobjects.com/os/basement_prod/70cde3be-22e8-4291-98f1-4d5a5b75b62f.json')
  .then((res) => res.json())
  .then((data) => {
    const edges = data.edges;
    const nodes = data.nodes;
    const nodeMap = new Map();
    const clusterMap = new Map();
    let clusterId = 0;
    const n = nodes.length;
    const horiPadding = 10;
    const begin = [horiPadding, height * 0.7];
    const end = [width - horiPadding, height * 0.7];
    const xLength = end[0] - begin[0];
    const yLength = end[1] - begin[1];
    const xSep = xLength / n;
    const ySep = yLength / n;
    nodes.forEach(function (node, i) {
      node.x = begin[0] + i * xSep;
      node.y = begin[1] + i * ySep;
      nodeMap.set(node.id, node);
      // cluster
      if (node.cluster && clusterMap.get(node.cluster) === undefined) {
        clusterMap.set(node.cluster, clusterId);
        clusterId++;
      }
      const id = clusterMap.get(node.cluster);
      if (node.style) {
        node.style.fill = colors[id % colors.length];
      } else {
        node.style = {
          fill: colors[id % colors.length],
        };
      }
      // label
      node.label = node.name;
      node.labelCfg = {
        position: 'bottom',
        offset: 5,
        style: {
          rotate: Math.PI / 2,
          textAlign: 'start',
        },
      };
    });
    edges.forEach((edge) => {
      edge.type = 'arc';
      const source = nodeMap.get(edge.source);
      const target = nodeMap.get(edge.target);
      const endsSepStep = (target.x - source.x) / xSep;
      const sign = endsSepStep < 0 ? -1 : 1;
      const curveOffset = sign * 10 * Math.ceil(Math.abs(endsSepStep));
      edge.curveOffset = curveOffset;
      edge.color = source.style.fill;
      edge.sourceName = source.name;
      edge.targetName = target.name;
    });

    // map the value to node size
    let maxValue = -9999,
      minValue = 9999;
    nodes.forEach(function (n) {
      if (maxValue < n.value) maxValue = n.value;
      if (minValue > n.value) minValue = n.value;
    });
    const sizeRange = [3, 25];
    const sizeDataRange = [minValue, maxValue];
    scaleNodeProp(nodes, 'size', 'value', sizeDataRange, sizeRange);

    graph.data(data);
    graph.render();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };

    //   const tooltip = document.getElementsByClassName('g6-tooltip')[0];
    //   if (tooltip) {
    //     tooltip.style.border = '1px solid #e2e2e2';
    //     tooltip.style.borderRadius = '4px';
    //     tooltip.style.fontSize = '12px';
    //     tooltip.style.color = '#545454';
    //     tooltip.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
    //     tooltip.style.padding = '10px 8px';
    //     tooltip.style.boxShadow = 'rgb(174, 174, 174) 0px 0px 10px';
    //   }
  });

function scaleNodeProp(nodes, propName, refPropName, dataRange, outRange) {
  const outLength = outRange[1] - outRange[0];
  const dataLength = dataRange[1] - dataRange[0];
  nodes.forEach(function (n) {
    n[propName] = ((n[refPropName] - dataRange[0]) * outLength) / dataLength + outRange[0];
  });
}
`,title:{zh:"\u57FA\u672C\u5F27\u7EBF\u56FE",en:"Basic Arc Diagram"},filename:"basicArcDiagram.js",isNew:!1},{id:"circularArcDiagram",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*o-tESYnAAJYAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const colors = [
  'rgb(91, 143, 249)',
  'rgb(90, 216, 166)',
  'rgb(93, 112, 146)',
  'rgb(246, 189, 22)',
  'rgb(232, 104, 74)',
  'rgb(109, 200, 236)',
  'rgb(146, 112, 202)',
  'rgb(255, 157, 77)',
  'rgb(38, 154, 153)',
  'rgb(227, 137, 163)',
];

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  modes: {
    default: [
      {
        type: 'edge-tooltip',
        formatText: function formatText(model) {
          const text = 'source: ' + model.sourceName + '<br/> target: ' + model.targetName;
          return text;
        },
      },
    ],
  },
  defaultNode: {
    style: {
      opacity: 0.8,
      lineWidth: 1,
      stroke: '#999',
    },
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
    style: {
      opacity: 0.6,
      lineAppendWidth: 3,
    },
  },
});
graph.on('edge:mouseenter', function (e) {
  const edge = e.item;
  graph.setItemState(edge, 'hover', true);
});
graph.on('edge:mouseleave', function (e) {
  const edge = e.item;
  graph.setItemState(edge, 'hover', false);
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };

fetch('https://gw.alipayobjects.com/os/basement_prod/70cde3be-22e8-4291-98f1-4d5a5b75b62f.json')
  .then((res) => res.json())
  .then((data) => {
    const origin = [width / 2, height / 2];
    const radius = width < height ? width / 3 : height / 3;
    const edges = data.edges;
    const nodes = data.nodes;
    const nodeMap = new Map();
    const clusterMap = new Map();
    let clusterId = 0;
    const n = nodes.length;
    const angleSep = (Math.PI * 2) / n;
    nodes.forEach(function (node, i) {
      const angle = i * angleSep;
      node.x = radius * Math.cos(angle) + origin[0];
      node.y = radius * Math.sin(angle) + origin[1];
      node.angle = angle;
      nodeMap.set(node.id, node);
      // cluster
      if (node.cluster && clusterMap.get(node.cluster) === undefined) {
        clusterMap.set(node.cluster, clusterId);
        clusterId++;
      }
      const id = clusterMap.get(node.cluster);
      if (node.style) {
        node.style.fill = colors[id % colors.length];
      } else {
        node.style = {
          fill: colors[id % colors.length],
        };
      }
      // label
      node.label = node.name;
      node.labelCfg = {
        position: 'center',
        style: {
          rotate: angle,
          rotateCenter: 'lefttop',
          textAlign: 'start',
        },
      };
    });
    edges.forEach((edge) => {
      edge.type = 'quadratic';
      const source = nodeMap.get(edge.source);
      const target = nodeMap.get(edge.target);
      edge.controlPoints = [
        {
          x: origin[0],
          y: origin[1],
        },
      ];
      edge.color = source.style.fill;
      edge.sourceName = source.name;
      edge.targetName = target.name;
    });

    // map the value to node size
    let maxValue = -9999,
      minValue = 9999;
    nodes.forEach(function (n) {
      if (maxValue < n.value) maxValue = n.value;
      if (minValue > n.value) minValue = n.value;
    });
    const sizeRange = [3, 30];
    const sizeDataRange = [minValue, maxValue];
    scaleNodeProp(nodes, 'size', 'value', sizeDataRange, sizeRange);

    graph.data(data);
    graph.render();
  });

function scaleNodeProp(nodes, propName, refPropName, dataRange, outRange) {
  const outLength = outRange[1] - outRange[0];
  const dataLength = dataRange[1] - dataRange[0];
  nodes.forEach(function (n) {
    n[propName] = ((n[refPropName] - dataRange[0]) * outLength) / dataLength + outRange[0];
  });
}
`,title:{zh:"\u73AF\u5F62\u5F27\u7EBF\u56FE",en:"Circular Arc Diagram"},filename:"circularArcDiagram.js",isNew:!1}],icon:"",id:"arcDiagram",title:{en:"Arc Diagram",zh:"Arc Diagram \u5F27\u7EBF\u56FE"},childrenKey:"demos",order:8},{demos:[{id:"comboCombined",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*odTCQLZkqxIAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

// define the CSS with the id of your menu
insertCss(\`
  .g6-component-contextmenu {
    position: absolute;
    list-style-type: none;
    padding: 10px 8px;
    left: -150px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
  }
  .g6-component-contextmenu span {
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-contextmenu span:hover {
    color: #5B8FF9;
  }
\`);

const tipDiv = document.createElement('div');
tipDiv.innerHTML = \`Double click to collapse/expand a combo; Context menu with right click to uncombo/re-combo. \u53CC\u51FB Combo \u8FDB\u884C\u5C55\u5F00/\u6536\u8D77\uFF1B\u53F3\u952E\u83DC\u5355\u9009\u62E9\u89E3\u6563/\u91CD\u7EC4\`;
document.getElementById('container').appendChild(tipDiv);

const data = {
  nodes: [
    {
      id: '0',
      comboId: 'a',
    },
    {
      id: '1',
      comboId: 'a',
    },
    {
      id: '2',
      comboId: 'a',
    },
    {
      id: '3',
      comboId: 'a',
    },
    {
      id: '4',
      comboId: 'a',
    },
    {
      id: '5',
      comboId: 'a',
    },
    {
      id: '6',
      comboId: 'a',
    },
    {
      id: '7',
      comboId: 'a',
    },
    {
      id: '8',
      comboId: 'a',
    },
    {
      id: '9',
      comboId: 'a',
    },
    {
      id: '10',
      comboId: 'a',
    },
    {
      id: '11',
      comboId: 'a',
    },
    {
      id: '12',
      comboId: 'a',
    },
    {
      id: '13',
      comboId: 'a',
    },
    {
      id: '14',
      comboId: 'a',
    },
    {
      id: '15',
      comboId: 'a',
    },
    {
      id: '16',
      comboId: 'b',
    },
    {
      id: '17',
      comboId: 'b',
    },
    {
      id: '18',
      comboId: 'b',
    },
    {
      id: '19',
      comboId: 'b',
    },
    {
      id: '20',
    },
    {
      id: '21',
    },
    {
      id: '22',
    },
    {
      id: '23',
      comboId: 'c',
    },
    {
      id: '24',
      comboId: 'a',
    },
    {
      id: '25',
    },
    {
      id: '26',
    },
    {
      id: '27',
      comboId: 'c',
    },
    {
      id: '28',
      comboId: 'c',
    },
    {
      id: '29',
      comboId: 'c',
    },
    {
      id: '30',
      comboId: 'c',
    },
    {
      id: '31',
      comboId: 'c',
    },
    {
      id: '32',
      comboId: 'd',
    },
    {
      id: '33',
      comboId: 'd',
    },
  ],
  edges: [
    {
      source: 'a',
      target: 'b',
      label: 'Combo A - Combo B',
      size: 3,
      labelCfg: {
        autoRotate: true,
        style: {
          stroke: '#fff',
          lineWidth: 5,
          fontSize: 20,
        },
      },
      style: {
        stroke: 'red',
      },
    },
    {
      source: 'a',
      target: '33',
      label: 'Combo-Node',
      size: 3,
      labelCfg: {
        autoRotate: true,
        style: {
          stroke: '#fff',
          lineWidth: 5,
          fontSize: 20,
        },
      },
      style: {
        stroke: 'blue',
      },
    },
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
  combos: [
    {
      id: 'a',
      label: 'Combo A',
    },
    {
      id: 'b',
      label: 'Combo B',
    },
    {
      id: 'c',
      label: 'Combo C',
    },
    {
      id: 'd',
      label: 'Combo D',
      parentId: 'b',
    },
  ],
};

// cache the initial combo children infomation
const comboChildrenCache = {};
// cache the initial parent infomation
const itemComboMap = {};
// cache the initial node and combo info
const itemMap = {};
// cache the combo related edges
const comboEdges = {};
(data.nodes.concat(data.combos)).forEach(item => {
  const { id, comboId, parentId } = item;
  const parentComboId = comboId || parentId;
  if (parentComboId) {
    if (!comboChildrenCache[parentComboId]) comboChildrenCache[parentComboId] = [];
    comboChildrenCache[parentComboId].push(id);
    itemComboMap[id] = parentComboId;
  }
  itemMap[id] = { ...item };
});
const comboIds = data.combos.map(combo => combo.id);
data.edges.forEach(edge => {
  const { source, target } = edge;
  [source, target].forEach(endId => {
    if (comboIds.includes(endId)) {
      if (!comboEdges[endId]) comboEdges[endId] = [];
      comboEdges[endId].push(edge);
    }
  })
});

// colorize the nodes and combos
const subjectColors = [
  '#5F95FF', // blue
  '#61DDAA',
  '#65789B',
  '#F6BD16',
  '#7262FD',
  '#78D3F8',
  '#9661BC',
  '#F6903D',
  '#008685',
  '#F08BB4',
];
const backColor = '#fff';
const theme = 'default';
const disableColor = '#777';
const colorSets = G6.Util.getColorSetsBySubjectColors(
  subjectColors,
  backColor,
  theme,
  disableColor,
);
data.combos.forEach((combo, i) => {
  const color = colorSets[i % colorSets.length];
  combo.style = {
    stroke: color.mainStroke,
    fill: color.mainFill,
    opacity: 0.8
  }
  itemMap[combo.id].style = { ...combo.style }
})
data.nodes.forEach(node => {
  const comboId = itemComboMap[node.id];
  const parentCombo = itemMap[comboId];
  if (parentCombo) {
    node.style = {
      stroke: parentCombo.style.stroke,
      fill: parentCombo.style.fill
    }
  }
})

const contextMenu = new G6.Menu({
  itemTypes: ['combo', 'node'],
  shouldBegin: (evt) => {
    // avoid showing up context menu in some situations
    const type = evt.item.getType();
    const { id, comboId, collapsed } = evt.item.getModel();
    if (collapsed) return false;

    const hasOriComboId = Object.values(comboChildrenCache).find(childrenIds => childrenIds.includes(id));
    if (type === 'node' && (comboId || !hasOriComboId)) return false;
    return true;
  },
  getContent: (evt) => {
    const type = evt.item.getType();
    const { id, comboId, parentId, collapsed } = evt.item.getModel();
    const hasOriComboId = Object.values(comboChildrenCache).find(childrenIds => childrenIds.includes(id));

    if (type === 'combo') {
      // no context menu for collapsed combo
      if (collapsed) return ''
      // does not have parent currently but had parent at initial
      if (hasOriComboId && !parentId) return \`<span id="uncombo">uncombo</span><br/><span id="re-combo">re-combo</span>\`;
      // did not have parent at initail
      return \`<span id="uncombo">uncombo</span>\`;
    }

    // has combo currently
    if (comboId) return '';
    // does not have combo but had combo at initial
    if (hasOriComboId) return \`<span id="recombo">re-combo</span>\`;
    return '';
  },
  handleMenuClick: (target, item) => {
    if (target.innerHTML === 'uncombo') {
      graph.uncombo(item);
      graph.layout();
    } else {
      const id = item.getID();
      const comboId = itemComboMap[id];
      if (comboId) {
        const childrenIds = comboChildrenCache[comboId].filter(cid => !!graph.findById(cid));
        graph.createCombo({
          ...itemMap[comboId]
        }, childrenIds);
        // add the related edges back
        comboEdges[comboId]?.forEach(edge => {
          const { source, target } = edge;
          const otherEnd = source === comboId ? target : source;
          // add it back only when the other end of the edge exist currently
          if (graph.findById(otherEnd)) {
            graph.addItem('edge', edge);
          }
        });
        graph.layout();
      }
    }
  },
})

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 160;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitView: true,
  fitViewPadding: 50,
  animate: true,
  minZoom: 0.00000001,
  plugins: [contextMenu],
  layout: {
    type: 'comboCombined',
    spacing: 5,
    outerLayout: new G6.Layout['forceAtlas2']({
      kr: 10
    })
  },
  defaultNode: {
    size: 15,
    style: {
      lineWidth: 2,
      fill: '#C6E5FF',
    },
  },
  defaultEdge: {
    size: 2,
    color: '#e2e2e2',
  },
  defaultCombo: {
    collapsedSubstituteIcon: {
      show: true,
      img: 'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IEQFS5VtXX8AAAAAAAAAAABkARQnAQ',
      width: 68,
      height: 68
    }
  },
  modes: {
    default: ['drag-combo', 'drag-node', 'drag-canvas', 'zoom-canvas', 'collapse-expand-combo'],
  },
});
graph.data(data);
graph.render();
if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"ComboCombined \u7EC4\u5408\u5E03\u5C40",en:"Combo Combined Layout"},filename:"comboCombined.js",isNew:!1},{id:"basicComboForce",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*GK34T7F1_CYAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      comboId: 'a',
    },
    {
      id: '1',
      comboId: 'a',
    },
    {
      id: '2',
      comboId: 'a',
    },
    {
      id: '3',
      comboId: 'a',
    },
    {
      id: '4',
      comboId: 'a',
    },
    {
      id: '5',
      comboId: 'a',
    },
    {
      id: '6',
      comboId: 'a',
    },
    {
      id: '7',
      comboId: 'a',
    },
    {
      id: '8',
      comboId: 'a',
    },
    {
      id: '9',
      comboId: 'a',
    },
    {
      id: '10',
      comboId: 'a',
    },
    {
      id: '11',
      comboId: 'a',
    },
    {
      id: '12',
      comboId: 'a',
    },
    {
      id: '13',
      comboId: 'a',
    },
    {
      id: '14',
      comboId: 'a',
    },
    {
      id: '15',
      comboId: 'a',
    },
    {
      id: '16',
      comboId: 'b',
    },
    {
      id: '17',
      comboId: 'b',
    },
    {
      id: '18',
      comboId: 'b',
    },
    {
      id: '19',
      comboId: 'b',
    },
    {
      id: '20',
    },
    {
      id: '21',
    },
    {
      id: '22',
    },
    {
      id: '23',
      comboId: 'c',
    },
    {
      id: '24',
      comboId: 'a',
    },
    {
      id: '25',
    },
    {
      id: '26',
    },
    {
      id: '27',
      comboId: 'c',
    },
    {
      id: '28',
      comboId: 'c',
    },
    {
      id: '29',
      comboId: 'c',
    },
    {
      id: '30',
      comboId: 'c',
    },
    {
      id: '31',
      comboId: 'c',
    },
    {
      id: '32',
      comboId: 'd',
    },
    {
      id: '33',
      comboId: 'd',
    },
  ],
  edges: [
    {
      source: 'a',
      target: 'b',
      label: 'Combo A - Combo B',
      size: 3,
      labelCfg: {
        autoRotate: true,
        style: {
          stroke: '#fff',
          lineWidth: 5,
          fontSize: 20,
        },
      },
      style: {
        stroke: 'red',
      },
    },
    {
      source: 'a',
      target: '33',
      label: 'Combo-Node',
      size: 3,
      labelCfg: {
        autoRotate: true,
        style: {
          stroke: '#fff',
          lineWidth: 5,
          fontSize: 20,
        },
      },
      style: {
        stroke: 'blue',
      },
    },
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
  combos: [
    {
      id: 'a',
      label: 'Combo A',
    },
    {
      id: 'b',
      label: 'Combo B',
    },
    {
      id: 'c',
      label: 'Combo D',
    },
    {
      id: 'd',
      label: 'Combo D',
      parentId: 'b',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitView: true,
  fitViewPadding: 50,
  minZoom: 0.00000001,
  layout: {
    type: 'comboForce',
    nodeSpacing: (d) => 8,
  },
  defaultNode: {
    size: 15,
    color: '#5B8FF9',
    style: {
      lineWidth: 2,
      fill: '#C6E5FF',
    },
  },
  defaultEdge: {
    size: 2,
    color: '#e2e2e2',
  },
  modes: {
    default: ['drag-combo', 'drag-node', 'drag-canvas', 'zoom-canvas'],
  },
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u57FA\u672C Combo \u529B\u5BFC\u5411\u5E03\u5C40",en:"Basic Combo Force Layout"},filename:"basicComboForce.js",isNew:!1}],icon:"",id:"comboLayout",title:{en:"Combo Related Layout",zh:"Combo \u76F8\u5173\u5E03\u5C40"},childrenKey:"demos",order:10},{demos:[{id:"basicFruchterman",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1KY7SLEXxqMAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
      cluster: 'a',
    },
    {
      id: '1',
      label: '1',
      cluster: 'a',
    },
    {
      id: '2',
      label: '2',
      cluster: 'a',
    },
    {
      id: '3',
      label: '3',
      cluster: 'a',
    },
    {
      id: '4',
      label: '4',
      cluster: 'a',
    },
    {
      id: '5',
      label: '5',
      cluster: 'a',
    },
    {
      id: '6',
      label: '6',
      cluster: 'a',
    },
    {
      id: '7',
      label: '7',
      cluster: 'a',
    },
    {
      id: '8',
      label: '8',
      cluster: 'a',
    },
    {
      id: '9',
      label: '9',
      cluster: 'a',
    },
    {
      id: '10',
      label: '10',
      cluster: 'a',
    },
    {
      id: '11',
      label: '11',
      cluster: 'a',
    },
    {
      id: '12',
      label: '12',
      cluster: 'a',
    },
    {
      id: '13',
      label: '13',
      cluster: 'b',
    },
    {
      id: '14',
      label: '14',
      cluster: 'b',
    },
    {
      id: '15',
      label: '15',
      cluster: 'b',
    },
    {
      id: '16',
      label: '16',
      cluster: 'b',
    },
    {
      id: '17',
      label: '17',
      cluster: 'b',
    },
    {
      id: '18',
      label: '18',
      cluster: 'c',
    },
    {
      id: '19',
      label: '19',
      cluster: 'c',
    },
    {
      id: '20',
      label: '20',
      cluster: 'c',
    },
    {
      id: '21',
      label: '21',
      cluster: 'c',
    },
    {
      id: '22',
      label: '22',
      cluster: 'c',
    },
    {
      id: '23',
      label: '23',
      cluster: 'c',
    },
    {
      id: '24',
      label: '24',
      cluster: 'c',
    },
    {
      id: '25',
      label: '25',
      cluster: 'c',
    },
    {
      id: '26',
      label: '26',
      cluster: 'c',
    },
    {
      id: '27',
      label: '27',
      cluster: 'c',
    },
    {
      id: '28',
      label: '28',
      cluster: 'c',
    },
    {
      id: '29',
      label: '29',
      cluster: 'c',
    },
    {
      id: '30',
      label: '30',
      cluster: 'c',
    },
    {
      id: '31',
      label: '31',
      cluster: 'd',
    },
    {
      id: '32',
      label: '32',
      cluster: 'd',
    },
    {
      id: '33',
      label: '33',
      cluster: 'd',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  animate: true,
  defaultNode: {
    size: 30,
    style: {
      lineWidth: 2,
      stroke: '#5B8FF9',
      fill: '#C6E5FF',
    },
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
  layout: {
    type: 'fruchterman',
    gpuEnabled: true,
    maxIteration: 300,
  },
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"GPU Fruchterman \u5C0F\u6570\u636E",en:"GPU Fruchterman Small Data"},filename:"basicFruchterman.js",isNew:!1},{id:"fruchtermanComplexData",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*0sl9RZ7Cp28AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  animate: true,
  defaultNode: {
    size: 10,
    style: {
      lineWidth: 2,
      stroke: '#5B8FF9',
      fill: '#C6E5FF',
    },
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
  layout: {
    type: 'fruchterman',
    gpuEnabled: true,
  },
});

fetch('https://gw.alipayobjects.com/os/basement_prod/7bacd7d1-4119-4ac1-8be3-4c4b9bcbc25f.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data(data);
    graph.render();
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"GPU Fruchterman \u590D\u6742\u6570\u636E",en:"GPU Fruchterman with Complex Data"},filename:"fruchtermanComplexData.js",isNew:!1},{id:"frComplexDataWorker",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*0sl9RZ7Cp28AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML =
  'Doing layout... web-worker is enabled in this demo, so the layout will not block the page.';
container.appendChild(descriptionDiv);

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  animate: true,
  defaultNode: {
    size: 10,
    style: {
      lineWidth: 2,
      stroke: '#5B8FF9',
      fill: '#C6E5FF',
    },
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
  layout: {
    type: 'fruchterman',
    gpuEnabled: true,
    workerEnabled: true,
    maxIteration: 2000,
  },
});

graph.on('afterlayout', () => {
  descriptionDiv.innerHTML = 'Done!';
});

fetch('https://gw.alipayobjects.com/os/basement_prod/7bacd7d1-4119-4ac1-8be3-4c4b9bcbc25f.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data(data);
    graph.render();
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"GPU Fruchterman \u590D\u6742\u6570\u636E + WebWorker",en:"Fruchterman Layout with GPU and WebWorker"},filename:"frComplexDataWorker.js",isNew:!1},{id:"fruchtermanClustering",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*WO1OTbNE_ugAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
      cluster: 'a',
    },
    {
      id: '1',
      label: '1',
      cluster: 'a',
    },
    {
      id: '2',
      label: '2',
      cluster: 'a',
    },
    {
      id: '3',
      label: '3',
      cluster: 'a',
    },
    {
      id: '4',
      label: '4',
      cluster: 'a',
    },
    {
      id: '5',
      label: '5',
      cluster: 'a',
    },
    {
      id: '6',
      label: '6',
      cluster: 'a',
    },
    {
      id: '7',
      label: '7',
      cluster: 'a',
    },
    {
      id: '8',
      label: '8',
      cluster: 'a',
    },
    {
      id: '9',
      label: '9',
      cluster: 'a',
    },
    {
      id: '10',
      label: '10',
      cluster: 'a',
    },
    {
      id: '11',
      label: '11',
      cluster: 'a',
    },
    {
      id: '12',
      label: '12',
      cluster: 'a',
    },
    {
      id: '13',
      label: '13',
      cluster: 'b',
    },
    {
      id: '14',
      label: '14',
      cluster: 'b',
    },
    {
      id: '15',
      label: '15',
      cluster: 'b',
    },
    {
      id: '16',
      label: '16',
      cluster: 'b',
    },
    {
      id: '17',
      label: '17',
      cluster: 'b',
    },
    {
      id: '18',
      label: '18',
      cluster: 'c',
    },
    {
      id: '19',
      label: '19',
      cluster: 'c',
    },
    {
      id: '20',
      label: '20',
      cluster: 'c',
    },
    {
      id: '21',
      label: '21',
      cluster: 'c',
    },
    {
      id: '22',
      label: '22',
      cluster: 'c',
    },
    {
      id: '23',
      label: '23',
      cluster: 'c',
    },
    {
      id: '24',
      label: '24',
      cluster: 'c',
    },
    {
      id: '25',
      label: '25',
      cluster: 'c',
    },
    {
      id: '26',
      label: '26',
      cluster: 'c',
    },
    {
      id: '27',
      label: '27',
      cluster: 'c',
    },
    {
      id: '28',
      label: '28',
      cluster: 'c',
    },
    {
      id: '29',
      label: '29',
      cluster: 'c',
    },
    {
      id: '30',
      label: '30',
      cluster: 'c',
    },
    {
      id: '31',
      label: '31',
      cluster: 'd',
    },
    {
      id: '32',
      label: '32',
      cluster: 'd',
    },
    {
      id: '33',
      label: '33',
      cluster: 'd',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const colors = [
  '#BDD2FD',
  '#BDEFDB',
  '#C2C8D5',
  '#FBE5A2',
  '#F6C3B7',
  '#B6E3F5',
  '#D3C6EA',
  '#FFD8B8',
  '#AAD8D8',
  '#FFD6E7',
];
const strokes = [
  '#5B8FF9',
  '#5AD8A6',
  '#5D7092',
  '#F6BD16',
  '#E8684A',
  '#6DC8EC',
  '#9270CA',
  '#FF9D4D',
  '#269A99',
  '#FF99C3',
];

const nodes = data.nodes;
const clusterMap = new Map();
let clusterId = 0;
nodes.forEach(function (node) {
  // cluster
  if (node.cluster && clusterMap.get(node.cluster) === undefined) {
    clusterMap.set(node.cluster, clusterId);
    clusterId++;
  }
  const cid = clusterMap.get(node.cluster);
  if (!node.style) {
    node.style = {};
  }
  node.style.fill = colors[cid % colors.length];
  node.style.stroke = strokes[cid % strokes.length];
});
const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  animate: true,
  defaultNode: {
    size: 20,
    style: {
      lineWidth: 2,
    },
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
  layout: {
    type: 'fruchterman',
    gpuEnabled: true,
    clustering: true,
    maxIteration: 300,
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"GPU Fruchterman \u805A\u7C7B\u5E03\u5C40",en:"GPU Fruchterman with Clustering"},filename:"fruchtermanClustering.js",isNew:!1},{id:"fruchtermanConfigurationTranslate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*W9MoQoKaQbYAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
      cluster: 'a',
    },
    {
      id: '1',
      label: '1',
      cluster: 'a',
    },
    {
      id: '2',
      label: '2',
      cluster: 'a',
    },
    {
      id: '3',
      label: '3',
      cluster: 'a',
    },
    {
      id: '4',
      label: '4',
      cluster: 'a',
    },
    {
      id: '5',
      label: '5',
      cluster: 'a',
    },
    {
      id: '6',
      label: '6',
      cluster: 'a',
    },
    {
      id: '7',
      label: '7',
      cluster: 'a',
    },
    {
      id: '8',
      label: '8',
      cluster: 'a',
    },
    {
      id: '9',
      label: '9',
      cluster: 'a',
    },
    {
      id: '10',
      label: '10',
      cluster: 'a',
    },
    {
      id: '11',
      label: '11',
      cluster: 'a',
    },
    {
      id: '12',
      label: '12',
      cluster: 'a',
    },
    {
      id: '13',
      label: '13',
      cluster: 'b',
    },
    {
      id: '14',
      label: '14',
      cluster: 'b',
    },
    {
      id: '15',
      label: '15',
      cluster: 'b',
    },
    {
      id: '16',
      label: '16',
      cluster: 'b',
    },
    {
      id: '17',
      label: '17',
      cluster: 'b',
    },
    {
      id: '18',
      label: '18',
      cluster: 'c',
    },
    {
      id: '19',
      label: '19',
      cluster: 'c',
    },
    {
      id: '20',
      label: '20',
      cluster: 'c',
    },
    {
      id: '21',
      label: '21',
      cluster: 'c',
    },
    {
      id: '22',
      label: '22',
      cluster: 'c',
    },
    {
      id: '23',
      label: '23',
      cluster: 'c',
    },
    {
      id: '24',
      label: '24',
      cluster: 'c',
    },
    {
      id: '25',
      label: '25',
      cluster: 'c',
    },
    {
      id: '26',
      label: '26',
      cluster: 'c',
    },
    {
      id: '27',
      label: '27',
      cluster: 'c',
    },
    {
      id: '28',
      label: '28',
      cluster: 'c',
    },
    {
      id: '29',
      label: '29',
      cluster: 'c',
    },
    {
      id: '30',
      label: '30',
      cluster: 'c',
    },
    {
      id: '31',
      label: '31',
      cluster: 'd',
    },
    {
      id: '32',
      label: '32',
      cluster: 'd',
    },
    {
      id: '33',
      label: '33',
      cluster: 'd',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const colors = [
  '#BDD2FD',
  '#BDEFDB',
  '#C2C8D5',
  '#FBE5A2',
  '#F6C3B7',
  '#B6E3F5',
  '#D3C6EA',
  '#FFD8B8',
  '#AAD8D8',
  '#FFD6E7',
];
const strokes = [
  '#5B8FF9',
  '#5AD8A6',
  '#5D7092',
  '#F6BD16',
  '#E8684A',
  '#6DC8EC',
  '#9270CA',
  '#FF9D4D',
  '#269A99',
  '#FF99C3',
];

const nodes = data.nodes;
const clusterMap = new Map();
let clusterId = 0;
nodes.forEach(function (node) {
  // cluster
  if (node.cluster && clusterMap.get(node.cluster) === undefined) {
    clusterMap.set(node.cluster, clusterId);
    clusterId++;
  }
  const cid = clusterMap.get(node.cluster);
  if (!node.style) {
    node.style = {};
  }
  node.style.fill = colors[cid % colors.length];
  node.style.stroke = strokes[cid % strokes.length];
});
const graphDiv = document.getElementById('container');
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = 'Fruchterman layout, gravity = 1';
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 30;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'fruchterman',
    gravity: 1,
    speed: 5,
    enableGPU: true,
  },
  animate: true,
  defaultNode: {
    size: 20,
    style: {
      lineWidth: 2,
    },
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
});
graph.data(data);
graph.render();

window.onresize = () => {
  if (!graph || graph.get('destroyed')) return;
  if (!container || !container.scrollWidth || !container.scrollHeight) return;
  graph.changeSize(container.scrollWidth, container.scrollHeight - 30);
};

layoutConfigTranslation();

function layoutConfigTranslation() {
  setTimeout(function () {
    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 5';
    graph.updateLayout({
      gravity: 5,
    });
  }, 1000);

  setTimeout(function () {
    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 10, layout by cluster';
    graph.updateLayout({
      gravity: 10,
      clustering: true,
    });
  }, 2500);

  setTimeout(function () {
    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 20, layout by cluster';
    graph.updateLayout({
      gravity: 20,
    });
  }, 4000);

  setTimeout(function () {
    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 50, layout by cluster';
    graph.updateLayout({
      gravity: 50,
    });
  }, 5500);

  setTimeout(function () {
    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 80, layout by cluster';
    graph.updateLayout({
      gravity: 80,
    });
  }, 7000);
}
`,title:{zh:"GPU Fruchterman \u5E03\u5C40\u53C2\u6570\u52A8\u6001\u53D8\u5316",en:"GPU Update the Configurations for Fruchterman"},filename:"fruchtermanConfigurationTranslate.js",isNew:!1},{id:"basicGForce",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*W9MoQoKaQbYAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    { x: 72.4593956315343, y: 62.500580986434755, id: '0', label: '0', cluster: 'a' },
    { x: 175.1600873958553, y: 86.05370537028077, id: '1', label: '1', cluster: 'a' },
    { x: 344.9769062055303, y: 346.0034481446168, id: '2', label: '2', cluster: 'a' },
    { x: 81.6566555038367, y: 449.54521190792946, id: '3', label: '3', cluster: 'a' },
    { x: 216.88282150662286, y: 154.6366915677718, id: '4', label: '4', cluster: 'a' },
    { x: 607.4192016090308, y: 29.68981871724924, id: '5', label: '5', cluster: 'a' },
    { x: 608.1952294163268, y: 346.0504788285849, id: '6', label: '6', cluster: 'a' },
    { x: 452.20735149164864, y: 44.41509530420839, id: '7', label: '7', cluster: 'a' },
    { x: 385.8029314535722, y: 345.77605366469146, id: '8', label: '8', cluster: 'a' },
    { x: 221.9577525643851, y: 314.49923076828685, id: '9', label: '9', cluster: 'a' },
    { x: 476.3993667720199, y: 324.90015915221954, id: '10', label: '10', cluster: 'a' },
    { x: 285.856260625802, y: 478.7175936401358, id: '11', label: '11', cluster: 'a' },
    { x: 454.0091937006662, y: 244.40185112543793, id: '12', label: '12', cluster: 'a' },
    { x: 85.85356888467777, y: 202.4891680926948, id: '13', label: '13', cluster: 'b' },
    { x: 178.43553862412497, y: 248.0194739727555, id: '14', label: '14', cluster: 'b' },
    { x: 83.56438018013918, y: 354.8762429461217, id: '15', label: '15', cluster: 'b' },
    { x: 282.627196085794, y: 455.5720951259284, id: '16', label: '16', cluster: 'b' },
    { x: 242.3547537166361, y: 98.66129908712844, id: '17', label: '17', cluster: 'b' },
    { x: 602.1167288184395, y: 269.168861245467, id: '18', label: '18', cluster: 'c' },
    { x: 483.79272921167114, y: 450.6376205219211, id: '19', label: '19', cluster: 'c' },
    { x: 297.187609794337, y: 457.588179255913, id: '20', label: '20', cluster: 'c' },
    { x: 460.9705509891003, y: 40.428685184792954, id: '21', label: '21', cluster: 'c' },
    { x: 160.6332922414413, y: 120.21023271187795, id: '22', label: '22', cluster: 'c' },
    { x: 512.008587934917, y: 418.6500912111135, id: '23', label: '23', cluster: 'c' },
    { x: 520.0165179629071, y: 27.93522012918939, id: '24', label: '24', cluster: 'c' },
    { x: 86.3930775510143, y: 151.71498826445242, id: '25', label: '25', cluster: 'c' },
    { x: 69.5835581684608, y: 51.79679194816802, id: '26', label: '26', cluster: 'c' },
    { x: 290.3934620883672, y: 33.385661601435174, id: '27', label: '27', cluster: 'c' },
    { x: 162.64554141115855, y: 210.26903302812224, id: '28', label: '28', cluster: 'c' },
    { x: 360.8317809241701, y: 91.48175269950366, id: '29', label: '29', cluster: 'c' },
    { x: 47.240097508368194, y: 145.50344892493422, id: '30', label: '30', cluster: 'c' },
    { x: 327.2099811985623, y: 92.12781674932864, id: '31', label: '31', cluster: 'd' },
    { x: 241.12704982623336, y: 337.86999370236475, id: '32', label: '32', cluster: 'd' },
    { x: 205.79508596449074, y: 102.31474420745676, id: '33', label: '33', cluster: 'd' },
  ],
  edges: [
    { source: '0', target: '1' },
    { source: '0', target: '2' },
    { source: '0', target: '3' },
    { source: '0', target: '4' },
    { source: '0', target: '5' },
    { source: '0', target: '7' },
    { source: '0', target: '8' },
    { source: '0', target: '9' },
    { source: '0', target: '10' },
    { source: '0', target: '11' },
    { source: '0', target: '13' },
    { source: '0', target: '14' },
    { source: '0', target: '15' },
    { source: '0', target: '16' },
    { source: '2', target: '3' },
    { source: '4', target: '5' },
    { source: '4', target: '6' },
    { source: '5', target: '6' },
    { source: '7', target: '13' },
    { source: '8', target: '14' },
    { source: '9', target: '10' },
    { source: '10', target: '22' },
    { source: '10', target: '14' },
    { source: '10', target: '12' },
    { source: '10', target: '24' },
    { source: '10', target: '21' },
    { source: '10', target: '20' },
    { source: '11', target: '24' },
    { source: '11', target: '22' },
    { source: '11', target: '14' },
    { source: '12', target: '13' },
    { source: '16', target: '17' },
    { source: '16', target: '18' },
    { source: '16', target: '21' },
    { source: '16', target: '22' },
    { source: '17', target: '18' },
    { source: '17', target: '20' },
    { source: '18', target: '19' },
    { source: '19', target: '20' },
    { source: '19', target: '33' },
    { source: '19', target: '22' },
    { source: '19', target: '23' },
    { source: '20', target: '21' },
    { source: '21', target: '22' },
    { source: '22', target: '24' },
    { source: '22', target: '25' },
    { source: '22', target: '26' },
    { source: '22', target: '23' },
    { source: '22', target: '28' },
    { source: '22', target: '30' },
    { source: '22', target: '31' },
    { source: '22', target: '32' },
    { source: '22', target: '33' },
    { source: '23', target: '28' },
    { source: '23', target: '27' },
    { source: '23', target: '29' },
    { source: '23', target: '30' },
    { source: '23', target: '31' },
    { source: '23', target: '33' },
    { source: '32', target: '33' },
  ],
};

const data2 = {
  nodes: [
    { x: 72.4593956315343, y: 62.500580986434755, id: '0', label: '0', cluster: 'a' },
    { x: 175.1600873958553, y: 86.05370537028077, id: '1', label: '1', cluster: 'a' },
    { x: 344.9769062055303, y: 346.0034481446168, id: '2', label: '2', cluster: 'a' },
    { x: 81.6566555038367, y: 449.54521190792946, id: '3', label: '3', cluster: 'a' },
    { x: 216.88282150662286, y: 154.6366915677718, id: '4', label: '4', cluster: 'a' },
    { x: 607.4192016090308, y: 29.68981871724924, id: '5', label: '5', cluster: 'a' },
  ],
  edges: [
    { source: '0', target: '1' },
    { source: '0', target: '2' },
    { source: '0', target: '3' },
    { source: '4', target: '3' },
    { source: '4', target: '5' },
  ],
};
const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node', 'zoom-canvas'],
  },
  animate: true,
  defaultNode: {
    size: 30,
    style: {
      lineWidth: 2,
      stroke: '#5B8FF9',
      fill: '#C6E5FF',
    },
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
  layout: {
    type: 'gForce',
    gpuEnabled: true,
    maxIteration: 500,
    linkDistance: (e) => {
      if (e.source === '0') return 100;
      return 1;
    },
  },
});

graph.data(data);
graph.render();

graph.on('canvas:click', (e) => {
  setTimeout(() => {
    // graph.updateLayout({
    //   gravity: 100,
    //   maxIteration: 1
    // });
    graph.changeData(data2);
  }, 1000);
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"GPU gForce \u5C0F\u6570\u636E",en:"GPU gForce"},filename:"basicGForce.js",isNew:!1},{id:"gForceComplexData",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*2lg0SYvEiusAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  animate: true,
  defaultNode: {
    size: 10,
    style: {
      lineWidth: 2,
      stroke: '#5B8FF9',
      fill: '#C6E5FF',
    },
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
  layout: {
    type: 'gForce',
    gpuEnabled: true,
    maxIteration: 1000,
  },
});

fetch('https://gw.alipayobjects.com/os/basement_prod/7bacd7d1-4119-4ac1-8be3-4c4b9bcbc25f.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data(data);
    graph.render();
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"GPU gForce \u590D\u6742\u6570\u636E",en:"GPU gForce with Complex Data"},filename:"gForceComplexData.js",isNew:!1},{id:"gForceCPU",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*lX-qSqDECrIAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    { id: 'des1' },
    { id: 'des2' },
    { id: 'des3' },
    { id: 'des4' },
    { x: 72.4593956315343, y: 62.500580986434755, id: '0', label: '0', cluster: 'a' },
    { x: 175.1600873958553, y: 86.05370537028077, id: '1', label: '1', cluster: 'a' },
    { x: 344.9769062055303, y: 346.0034481446168, id: '2', label: '2', cluster: 'a' },
    { x: 81.6566555038367, y: 449.54521190792946, id: '3', label: '3', cluster: 'a' },
    { x: 216.88282150662286, y: 154.6366915677718, id: '4', label: '4', cluster: 'a' },
    { x: 607.4192016090308, y: 29.68981871724924, id: '5', label: '5', cluster: 'a' },
    { x: 608.1952294163268, y: 346.0504788285849, id: '6', label: '6', cluster: 'a' },
    { x: 452.20735149164864, y: 44.41509530420839, id: '7', label: '7', cluster: 'a' },
    { x: 385.8029314535722, y: 345.77605366469146, id: '8', label: '8', cluster: 'a' },
    { x: 221.9577525643851, y: 314.49923076828685, id: '9', label: '9', cluster: 'a' },
    { x: 476.3993667720199, y: 324.90015915221954, id: '10', label: '10', cluster: 'a' },
    { x: 285.856260625802, y: 478.7175936401358, id: '11', label: '11', cluster: 'a' },
    { x: 454.0091937006662, y: 244.40185112543793, id: '12', label: '12', cluster: 'a' },
    { x: 85.85356888467777, y: 202.4891680926948, id: '13', label: '13', cluster: 'b' },
    { x: 178.43553862412497, y: 248.0194739727555, id: '14', label: '14', cluster: 'b' },
    { x: 83.56438018013918, y: 354.8762429461217, id: '15', label: '15', cluster: 'b' },
    { x: 282.627196085794, y: 455.5720951259284, id: '16', label: '16', cluster: 'b' },
    { x: 242.3547537166361, y: 98.66129908712844, id: '17', label: '17', cluster: 'b' },
    { x: 602.1167288184395, y: 269.168861245467, id: '18', label: '18', cluster: 'c' },
    { x: 483.79272921167114, y: 450.6376205219211, id: '19', label: '19', cluster: 'c' },
    { x: 297.187609794337, y: 457.588179255913, id: '20', label: '20', cluster: 'c' },
    { x: 460.9705509891003, y: 40.428685184792954, id: '21', label: '21', cluster: 'c' },
    { x: 160.6332922414413, y: 120.21023271187795, id: '22', label: '22', cluster: 'c' },
    { x: 512.008587934917, y: 418.6500912111135, id: '23', label: '23', cluster: 'c' },
    { x: 520.0165179629071, y: 27.93522012918939, id: '24', label: '24', cluster: 'c' },
    { x: 86.3930775510143, y: 151.71498826445242, id: '25', label: '25', cluster: 'c' },
    { x: 69.5835581684608, y: 51.79679194816802, id: '26', label: '26', cluster: 'c' },
    { x: 290.3934620883672, y: 33.385661601435174, id: '27', label: '27', cluster: 'c' },
    { x: 162.64554141115855, y: 210.26903302812224, id: '28', label: '28', cluster: 'c' },
    { x: 360.8317809241701, y: 91.48175269950366, id: '29', label: '29', cluster: 'c' },
    { x: 47.240097508368194, y: 145.50344892493422, id: '30', label: '30', cluster: 'c' },
    { x: 327.2099811985623, y: 92.12781674932864, id: '31', label: '31', cluster: 'd' },
    { x: 241.12704982623336, y: 337.86999370236475, id: '32', label: '32', cluster: 'd' },
    { x: 205.79508596449074, y: 102.31474420745676, id: '33', label: '33', cluster: 'd' },
  ],
  edges: [
    { source: '0', target: '1' },
    { source: '0', target: '2' },
    { source: '0', target: '3' },
    { source: '0', target: '4' },
    { source: '0', target: '5' },
    { source: '0', target: '7' },
    { source: '0', target: '8' },
    { source: '0', target: '9' },
    { source: '0', target: '10' },
    { source: '0', target: '11' },
    { source: '0', target: '13' },
    { source: '0', target: '14' },
    { source: '0', target: '15' },
    { source: '0', target: '16' },
    { source: '2', target: '3' },
    { source: '4', target: '5' },
    { source: '4', target: '6' },
    { source: '5', target: '6' },
    { source: '7', target: '13' },
    { source: '8', target: '14' },
    { source: '9', target: '10' },
    { source: '10', target: '22' },
    { source: '10', target: '14' },
    { source: '10', target: '12' },
    { source: '10', target: '24' },
    { source: '10', target: '21' },
    { source: '10', target: '20' },
    { source: '11', target: '24' },
    { source: '11', target: '22' },
    { source: '11', target: '14' },
    { source: '12', target: '13' },
    { source: '16', target: '17' },
    { source: '16', target: '18' },
    { source: '16', target: '21' },
    { source: '16', target: '22' },
    { source: '17', target: '18' },
    { source: '17', target: '20' },
    { source: '18', target: '19' },
    { source: '19', target: '20' },
    { source: '19', target: '33' },
    { source: '19', target: '22' },
    { source: '19', target: '23' },
    { source: '20', target: '21' },
    { source: '21', target: '22' },
    { source: '22', target: '24' },
    { source: '22', target: '25' },
    { source: '22', target: '26' },
    { source: '22', target: '23' },
    { source: '22', target: '28' },
    { source: '22', target: '30' },
    { source: '22', target: '31' },
    { source: '22', target: '32' },
    { source: '22', target: '33' },
    { source: '23', target: '28' },
    { source: '23', target: '27' },
    { source: '23', target: '29' },
    { source: '23', target: '30' },
    { source: '23', target: '31' },
    { source: '23', target: '33' },
    { source: '32', target: '33' },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node', 'zoom-canvas'],
  },
  animate: true,
  defaultNode: {
    size: 30,
    style: {
      lineWidth: 2,
      stroke: '#5B8FF9',
      fill: '#C6E5FF',
    },
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
  layout: {
    type: 'gForce',
    // gravity: 500,
    //preventOverlap: true,
    maxIteration: 500,
    gatherDiscrete: true,
    //nodeSize: 100,
    //nodeSpacing: 100,
    //gatherDiscreteCenter: [500, 100],
    descreteGravity: 200,
    linkDistanceFunc: (e) => {
      if (e.source === '0') return 10;
      return 1;
    },
    getMass: (d) => {
      if (d.id === '0') return 100;
      return 1;
    },
  },
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"CPU gForce \u5C0F\u6570\u636E",en:"CPU gForce Small Data"},filename:"gForceCPU.js",isNew:!1}],icon:"",id:"gpuLayout",title:{en:"GPU Layout",zh:"GPU \u56FE\u5E03\u5C40"},childrenKey:"demos",order:12},{demos:[{id:"layoutTranslate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eZRNQ4tpkecAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const tipDiv = document.createElement('div');
tipDiv.innerHTML = 'Random Layout';
const container = document.getElementById('container');
container.appendChild(tipDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'random',
  },
  modes: {
    default: ['drag-node'],
  },
  animate: true,
});

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data(data);
    graph.render();
    setTimeout(() => {
      tipDiv.innerHTML = 'Circular Layout';
      graph.updateLayout({
        type: 'circular',
        radius: 200,
      });
    }, 3000);
    setTimeout(() => {
      tipDiv.innerHTML = 'Grid Layout';
      graph.updateLayout({
        type: 'grid',
      });
    }, 6000);
    setTimeout(() => {
      tipDiv.innerHTML = 'Force Layout';
      graph.updateLayout({
        type: 'force',
        preventOverlap: true,
        nodeSize: 20,
      });
    }, 9000);
    setTimeout(() => {
      tipDiv.innerHTML = 'Radial Layout';
      graph.updateLayout({
        type: 'radial',
        preventOverlap: true,
        nodeSize: 15,
      });
    }, 12000);
    setTimeout(() => {
      tipDiv.innerHTML = 'Concentric Layout';
      graph.updateLayout({
        type: 'concentric',
        minNodeSpacing: 30,
      });
    }, 15000);
    setTimeout(() => {
      tipDiv.innerHTML = 'MDS Layout';
      graph.updateLayout({
        type: 'mds',
        linkDistance: 100,
      });
    }, 18000);
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:{zh:"\u5E03\u5C40\u5207\u6362",en:"Layout Translate"},filename:"layoutTranslate.js",isNew:!1},{id:"subgraphLayout",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*dsOISrH6tREAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const nodes = data.nodes;

nodes.forEach(function (node, i) {
  if (i <= 16 && i !== 12) {
    if (!node.style) {
      node.style = {
        fill: '#F6C3B7',
        stroke: '#E8684A',
      };
    } else {
      node.style.fill = 'lightsteelblue';
    }
  }
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitView: true,
  fitViewPadding: 40,
  modes: {
    default: ['drag-node'],
  },
  defaultNode: {
    size: 20,
    style: {
      fill: '#C6E5FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };

setTimeout(function () {
  const nodes = data.nodes;
  const edges = data.edges;
  const newNodes = [];
  const newEdges = [];
  const newNodeMap = new Map();
  // fix the nodes[0]
  nodes[0].fx = nodes[0].x;
  nodes[0].fy = nodes[0].y;
  // add the nodes which should be re-layout
  nodes.forEach(function (node, i) {
    if (i <= 16 && i !== 12) {
      newNodes.push(node);
      newNodeMap.set(node.id, i);
    }
  });
  // add related edges
  edges.forEach(function (edge) {
    const sourceId = edge.source;
    const targetId = edge.target;
    if (newNodeMap.get(sourceId) !== undefined && newNodeMap.get(targetId) !== undefined) {
      newEdges.push(edge);
    }
  });

  const subForceLayout = new G6.Layout.force({
    center: [nodes[0].x, nodes[0].y],
    linkDistance: 70,
    preventOverlap: true,
    nodeSize: 20,
    tick: function tick() {
      // the tick function to show the animation of layout process
      graph.refreshPositions();
    },
  });
  subForceLayout.init({
    nodes: newNodes,
    edges: newEdges,
  });
  subForceLayout.execute();
}, 1000);
`,title:{zh:"\u5B50\u56FE\u5E03\u5C40",en:"Subgraph Layout"},filename:"subgraphLayout.js",isNew:!1},{id:"sublayoutPipes",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*SQijSogATDAAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = { nodes: [], edges: [] };
for (let i = 0; i < 32; i++) {
  data.nodes.push({
    id: \`\${i}\`,
    label: i < 17 ? \`employee-\${i}\` : \`company-\${i - 17}\`,
    dataType: i < 17 ? 'employee' : 'company',
    style: i < 17 ?
      { stroke: '#5D7092', fill: '#5D7092', fillOpacity: 0.5 } :
      { stroke: '#5B8FF9', fill: '#5B8FF9', fillOpacity: 0.5 }
  });
}
data.edges = [
  { source: '0', target: '1' },
  { source: '0', target: '2' },
  { source: '0', target: '3' },
  { source: '0', target: '4' },
  { source: '0', target: '5' },
  { source: '0', target: '6' },
  { source: '1', target: '2' },
  { source: '1', target: '3' },
  { source: '1', target: '4' },
  { source: '1', target: '5' },
  { source: '1', target: '6' },
  { source: '2', target: '3' },
  { source: '2', target: '4' },
  { source: '2', target: '5' },
  { source: '2', target: '6' },

  { source: '7', target: '8' },
  { source: '8', target: '9' },
  { source: '9', target: '10' },

  { source: '11', target: '12' },
  { source: '12', target: '13' },
  { source: '13', target: '14' },
  { source: '14', target: '15' },
  { source: '15', target: '16' },
  { source: '11', target: '14' },

  { source: '31', target: '11' },
  { source: '24', target: '4' },
  { source: '23', target: '7' },
];

const legendData = {
  nodes: [
    { id: 'employee', label: 'employee', style: { stroke: '#5D7092', fill: '#5D7092' } },
    { id: 'company', label: 'company', style: { stroke: '#5B8FF9', fill: '#5B8FF9' } },
  ],
  edges: []
}

const legend = new G6.Legend({
  data: legendData,
  align: 'center',
  layout: 'horizontal', // vertical
  position: 'bottom-left',
  vertiSep: 12,
  horiSep: 24,
  offsetY: -24,
  padding: [4, 16, 8, 16],
  containerStyle: {
    fill: '#ccc',
    lineWidth: 1
  },
  title: 'Legend',
  titleConfig: {
    position: 'left',
    offsetX: 0,
    offsetY: 12,
  },
  filter: {
    enable: true,
    multiple: true,
    trigger: 'click',
    graphActiveState: 'activeByLegend',
    graphInactiveState: 'inactiveByLegend',
    filterFunctions: {
      'a': (d) => {
        if (d.cluster === 'a') return true;
        return false
      },
      'b': (d) => {
        if (d.cluster === 'b') return true;
        return false
      },
      'c': (d) => {
        if (d.cluster === 'c') return true;
        return false
      },
      'd': (d) => {
        if (d.cluster === 'd') return true;
        return false
      },
    }
  }
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  plugins: [legend],
  animate: true,
  nodeStateStyles: {
    activeByLegend: {
      lineWidth: 5,
      strokeOpacity: 0.5,
      stroke: '#f00'
    },
    inactiveByLegend: {
      opacity: 0.5
    }
  },
  layout: {
    pipes: [
      {
        type: 'circular',
        nodesFilter: (node) => (+node.id) <= 6,
        center: [width / 5 * 4 - 30, height / 2],
        radius: width / 10
      },
      {
        type: 'circular',
        nodesFilter: (node) => ((+node.id) >= 7 && (+node.id) <= 10),
        center: [width / 20 + 30, height / 3 * 2],
        radius: width / 20
      },
      {
        type: 'circular',
        nodesFilter: (node) => ((+node.id) >= 11 && (+node.id) <= 16),
        center: [width / 20 + 30, height / 3],
        radius: width / 20
      },
      {
        type: 'grid',
        nodesFilter: (node) => (+node.id) > 16,
        begin: [width / 10 + 50, 20],
        width: width / 5 * 3 - 100,
        height: height - 40,
      }
    ],
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u6D41\u6C34\u7EBF\u5B50\u56FE\u5E03\u5C40",en:"Sublayout Pipeline"},filename:"sublayoutPipes.js",isNew:!1},{id:"dataChange",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*VIXvQagCETkAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const data2 = {
  nodes: [
    {
      id: 'b0',
      label: '0',
    },
    {
      id: 'b1',
      label: '1',
    },
    {
      id: 'b2',
      label: '2',
    },
    {
      id: 'b3',
      label: '3',
    },
    {
      id: 'b4',
      label: '4',
    },
    {
      id: 'b5',
      label: '5',
    },
  ],
  edges: [
    {
      id: 'be1',
      source: 'b0',
      target: 'b1',
    },
    {
      id: 'be2',
      source: 'b0',
      target: 'b2',
    },
    {
      id: 'be3',
      source: 'b0',
      target: 'b3',
    },
    {
      id: 'be4',
      source: 'b0',
      target: 'b4',
    },
    {
      id: 'be5',
      source: 'b0',
      target: 'b5',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'force',
  },
  animate: true,
  defaultNode: {
    size: 20,
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };

setTimeout(() => {
  graph.changeData(data2);
}, 2500);
`,title:{zh:"\u6570\u636E\u52A8\u6001\u5207\u6362",en:"Change Data"},filename:"dataChange.js",isNew:!1},{id:"customBigraph",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Vod0Q6u5dSoAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: 'A',
      cluster: 'part1',
    },
    {
      id: '1',
      label: 'B',
      cluster: 'part1',
    },
    {
      id: '2',
      label: 'C',
      cluster: 'part1',
    },
    {
      id: '3',
      label: 'D',
      cluster: 'part1',
    },
    {
      id: '4',
      label: 'E',
      cluster: 'part1',
    },
    {
      id: '5',
      label: 'F',
      cluster: 'part1',
    },
    {
      id: '6',
      label: 'a',
      cluster: 'part2',
    },
    {
      id: '7',
      label: 'b',
      cluster: 'part2',
    },
    {
      id: '8',
      label: 'c',
      cluster: 'part2',
    },
    {
      id: '9',
      label: 'd',
      cluster: 'part2',
    },
  ],
  edges: [
    {
      source: '0',
      target: '6',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '1',
      target: '6',
    },
    {
      source: '1',
      target: '9',
    },
    {
      source: '1',
      target: '7',
    },
    {
      source: '2',
      target: '8',
    },
    {
      source: '2',
      target: '9',
    },
    {
      source: '2',
      target: '6',
    },
    {
      source: '3',
      target: '8',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '4',
      target: '7',
    },
    {
      source: '5',
      target: '9',
    },
  ],
};

G6.registerLayout('bigraph-layout', {
  execute() {
    const self = this;
    const center = self.center || [0, 0];
    const biSep = self.biSep || 100;
    const nodeSep = self.nodeSep || 20;
    const nodeSize = self.nodeSize || 20;
    const direction = self.direction || 'horizontal';
    let part1Pos = 0;
    let part2Pos = 0;
    if (direction === 'horizontal') {
      part1Pos = center[0] - biSep / 2;
      part2Pos = center[0] + biSep / 2;
    }
    const { nodes, edges } = self;
    const part1Nodes = [];
    const part2Nodes = [];
    const part1NodeMap = new Map();
    const part2NodeMap = new Map();
    // separate the nodes and init the positions
    nodes.forEach(function (node, i) {
      if (node.cluster === 'part1') {
        part1Nodes.push(node);
        part1NodeMap.set(node.id, i);
      } else {
        part2Nodes.push(node);
        part2NodeMap.set(node.id, i);
      }
    });

    // order the part1 node
    part1Nodes.forEach(function (p1n) {
      let index = 0;
      let adjCount = 0;
      edges.forEach(function (edge) {
        const sourceId = edge.source;
        const targetId = edge.target;
        if (sourceId === p1n.id) {
          index += part2NodeMap.get(targetId);
          adjCount += 1;
        } else if (targetId === p1n.id) {
          index += part2NodeMap.get(sourceId);
          adjCount += 1;
        }
      });
      index /= adjCount;
      p1n.index = index;
    });
    part1Nodes.sort(function (a, b) {
      return a.index - b.index;
    });
    part2Nodes.forEach(function (p2n) {
      let index = 0;
      let adjCount = 0;
      edges.forEach(function (edge) {
        const sourceId = edge.source;
        const targetId = edge.target;
        if (sourceId === p2n.id) {
          index += part1NodeMap.get(targetId);
          adjCount += 1;
        } else if (targetId === p2n.id) {
          index += part1NodeMap.get(sourceId);
          adjCount += 1;
        }
      });
      index /= adjCount;
      p2n.index = index;
    });
    part2Nodes.sort(function (a, b) {
      return a.index - b.index;
    });

    // place the nodes
    const hLength = part1Nodes.length > part2Nodes.length ? part1Nodes.length : part2Nodes.length;
    const height = hLength * (nodeSep + nodeSize);
    let begin = center[1] - height / 2;
    if (direction === 'vertical') {
      begin = center[0] - height / 2;
    }
    part1Nodes.forEach(function (p1n, i) {
      if (direction === 'horizontal') {
        p1n.x = part1Pos;
        p1n.y = begin + i * (nodeSep + nodeSize);
      } else {
        p1n.x = begin + i * (nodeSep + nodeSize);
        p1n.y = part1Pos;
      }
    });
    part2Nodes.forEach(function (p2n, i) {
      if (direction === 'horizontal') {
        p2n.x = part2Pos;
        p2n.y = begin + i * (nodeSep + nodeSize);
      } else {
        p2n.x = begin + i * (nodeSep + nodeSize);
        p2n.y = part2Pos;
      }
    });
  },
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'bigraph-layout',
    biSep: 300,
    nodeSep: 20,
    nodeSize: 20,
  },
  animate: true,
  defaultNode: {
    size: 20,
    style: {
      fill: '#C6E5FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
  },
  modes: {
    default: ['drag-canvas'],
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u81EA\u5B9A\u4E49\u4E8C\u5206\u56FE\u5E03\u5C40",en:"Custom Bigraph Layout"},filename:"customBigraph.js",isNew:!1},{id:"layoutTiming",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*tdRuSbgJAZ8AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
  ],
};

const tipDiv = document.createElement('div');
const container = document.getElementById('container');
container.appendChild(tipDiv);
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'force',
    preventOverlap: true,
    nodeSize: 20,
  },
  modes: {
    default: ['drag-node'],
  },
});

graph.on('beforelayout', function () {
  tipDiv.innerHTML =
    'Doing force-directed layout... the text will be changed after the layout being done.';
});
graph.on('afterlayout', function () {
  tipDiv.innerHTML = 'Done!';
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u5E03\u5C40\u65F6\u673A\u76D1\u542C",en:"Layout Listener"},filename:"layoutTiming.js",isNew:!1}],icon:"",id:"layoutMechanism",title:{en:"Layout Mechanism",zh:"\u5E03\u5C40\u673A\u5236"},childrenKey:"demos",order:19},{demos:[{id:"layoutPrediction",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eZRNQ4tpkecAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';
// import by this way in your project. \u5728\u60A8\u7684\u9879\u76EE\u4E2D\u8BF7\u8FD9\u6837\u5F15\u5165
// import { GraphLayoutPredict } from '@antv/vis-predict-engine';

const { GraphLayoutPredict } = window.GraphLayoutPredict

const data = {
  nodes: [
    {
      id: 'node-0',
      label: '0',
    },
    {
      id: 'node-1',
      label: '1',
    },
    {
      id: 'node-2',
      label: '2',
    },
    {
      id: 'node-3',
      label: '3',
    },
    {
      id: 'node-4',
      label: '4',
    },
    {
      id: 'node-5',
      label: '5',
    },
    {
      id: 'node-6',
      label: '6',
    },
    {
      id: 'node-7',
      label: '7',
    },
    {
      id: 'node-8',
      label: '8',
    },
    {
      id: 'node-9',
      label: '9',
    },
  ],
  edges: [
    {
      id: 'edge-0',
      source: 'node-0',
      target: 'node-1',
    },
    {
      id: 'edge-1',
      source: 'node-0',
      target: 'node-2',
    },
    {
      id: 'edge-2',
      source: 'node-0',
      target: 'node-3',
    },
    {
      id: 'edge-4',
      source: 'node-0',
      target: 'node-4',
    },
    {
      id: 'edge-5',
      source: 'node-0',
      target: 'node-5',
    },
    {
      id: 'edge-6',
      source: 'node-1',
      target: 'node-6',
    },
    {
      id: 'edge-7',
      source: 'node-6',
      target: 'node-7',
    },
    {
      id: 'edge-8',
      source: 'node-5',
      target: 'node-7',
    },
    {
      id: 'edge-9',
      source: 'node-1',
      target: 'node-4',
    },
    {
      id: 'edge-10',
      source: 'node-4',
      target: 'node-5',
    },
    {
      id: 'edge-11',
      source: 'node-3',
      target: 'node-7',
    },
    {
      id: 'edge-12',
      source: 'node-2',
      target: 'node-5',
    },
    {
      id: 'edge-13',
      source: 'node-2',
      target: 'node-1',
    },
  ],
};


async function layoutPredict() {
  return await GraphLayoutPredict.predict(data);
}

(async function () {
  // predictLayout \u8868\u793A\u9884\u6D4B\u7684\u5E03\u5C40
  // confidence \u8868\u793A\u9884\u6D4B\u7684\u53EF\u4FE1\u5EA6
  const { predictLayout, confidence } = await layoutPredict();
  console.log("----predictLayout---", predictLayout);
  console.log("----confidence---", confidence);
  const container = document.getElementById("container");
  const graph = new G6.Graph({
    container,
    width: container.scrollWidth,
    height: container.scrollHeight || 500,
    layout: {
      type: predictLayout,
      nodeSize: 50,
      preventOverlap: true
    },
    modes: {
      default: ["drag-canvas", "zoom-canvas", "drag-node"]
    }
  });

  graph.data(data);
  graph.render();
  graph.on("afterlayout", () => {
    graph.fitView();
  });

  if (typeof window !== "undefined") {
    window.onresize = () => {
      if (!graph || graph.get("destroyed")) return;
      if (!container || !container.scrollWidth || !container.scrollHeight)
        return;
      graph.changeSize(container.scrollWidth, container.scrollHeight);
    };
  }
})();
`,title:{zh:"\u81EA\u52A8\u5E03\u5C40\u63A8\u8350",en:"Layout Prediction"},filename:"layoutPrediction.js",isNew:!1}],icon:"",id:"aiLayout",title:{en:"AI Layout Prediction",zh:"AI \u667A\u80FD\u5E03\u5C40\u63A8\u8350"},childrenKey:"demos",order:20}],childrenKey:"examples"},{id:"tree",title:{zh:"\u5E03\u5C40\uFF1A\u6811\u56FE",en:"Layout\uFF1ATree Graph"},icon:"tree",examples:[{demos:[{id:"basicCompactBox",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*XlXOR5pmM3oAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')
  .then((res) => res.json())
  .then((data) => {
    const container = document.getElementById('container');
    const width = container.scrollWidth;
    const height = container.scrollHeight || 500;
    const graph = new G6.TreeGraph({
      container: 'container',
      width,
      height,
      modes: {
        default: [
          {
            type: 'collapse-expand',
            onChange: function onChange(item, collapsed) {
              const data = item.getModel();
              data.collapsed = collapsed;
              return true;
            },
          },
          'drag-canvas',
          'zoom-canvas',
        ],
      },
      defaultNode: {
        size: 26,
        anchorPoints: [
          [0, 0.5],
          [1, 0.5],
        ],
      },
      defaultEdge: {
        type: 'cubic-horizontal',
      },
      layout: {
        type: 'compactBox',
        direction: 'LR',
        getId: function getId(d) {
          return d.id;
        },
        getHeight: function getHeight() {
          return 16;
        },
        getWidth: function getWidth() {
          return 16;
        },
        getVGap: function getVGap() {
          return 10;
        },
        getHGap: function getHGap() {
          return 100;
        },
      },
    });

    graph.node(function (node) {
      return {
        label: node.id,
        labelCfg: {
          offset: 10,
          position: node.children && node.children.length > 0 ? 'left' : 'right',
        },
      };
    });

    graph.data(data);
    graph.render();
    graph.fitView();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });
`,title:{zh:"\u7D27\u51D1\u6811",en:"CompactBox Layout"},filename:"basicCompactBox.js",isNew:!1},{id:"tbCompactBox",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*KrAqTrFbNjMAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')
  .then((res) => res.json())
  .then((data) => {
    const container = document.getElementById('container');
    const width = container.scrollWidth;
    const height = container.scrollHeight || 500;
    const graph = new G6.TreeGraph({
      container: 'container',
      width,
      height,
      linkCenter: true,
      modes: {
        default: [
          {
            type: 'collapse-expand',
            onChange: function onChange(item, collapsed) {
              const data = item.getModel();
              data.collapsed = collapsed;
              return true;
            },
          },
          'drag-canvas',
          'zoom-canvas',
        ],
      },
      defaultNode: {
        size: 26,
        anchorPoints: [
          [0, 0.5],
          [1, 0.5],
        ],
      },
      defaultEdge: {
        type: 'cubic-vertical',
      },
      layout: {
        type: 'compactBox',
        direction: 'TB',
        getId: function getId(d) {
          return d.id;
        },
        getHeight: function getHeight() {
          return 16;
        },
        getWidth: function getWidth() {
          return 16;
        },
        getVGap: function getVGap() {
          return 80;
        },
        getHGap: function getHGap() {
          return 20;
        },
      },
    });

    graph.node(function (node) {
      let position = 'right';
      let rotate = 0;
      if (!node.children) {
        position = 'bottom';
        rotate = Math.PI / 2;
      }
      return {
        label: node.id,
        labelCfg: {
          position,
          offset: 5,
          style: {
            rotate,
            textAlign: 'start',
          },
        },
      };
    });

    graph.data(data);
    graph.render();
    graph.fitView();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });
`,title:{zh:"\u81F3\u4E0A\u800C\u4E0B\u7684\u7D27\u51D1\u6811",en:"Top to Bottom CompactBox"},filename:"tbCompactBox.js",isNew:!1},{id:"compactBoxLeftAlign",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*b3G-QZZekE8AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const fontSize = 15;

G6.registerNode('crect', {
  draw: (cfg, group) => {
    const width = cfg.id.length * 10;
    const rect = group.addShape('rect', {
      attrs: {
        x: 0,
        y: -10,
        ...cfg.style,
        width,
        height: 20,
        lineWidth: 0,
        opacity: 0,
      },
      name: 'rect-shape',
      draggable: true,
    });
    const label = group.addShape('text', {
      attrs: {
        text: cfg.id,
        fill: '#ccc',
        fontSize,
        x: 0,
        y: 0,
      },
      name: 'label-shape',
      draggable: true,
    });
    const labelBBox = label.getBBox();
    const icon = group.addShape('circle', {
      attrs: {
        x: labelBBox.maxX + 10,
        y: (labelBBox.minY + labelBBox.maxY) / 2,
        r: 5,
        stroke: '#000',
      },
      name: 'circle-shape',
      draggable: true,
    });
    const bboxWidth = label.getBBox().width + 20;
    rect.attr({ width: bboxWidth });

    group.addShape('path', {
      attrs: {
        lineWidth: 1,
        fill: '#ccc',
        stroke: '#ccc',
        path: [
          ['M', 0, 0],
          ['L', bboxWidth, 0],
        ],
      },
      name: 'path-shape',
      draggable: true,
    });

    return rect;
  },
  getAnchorPoints: (type, cfg) => {
    return [
      [0, 0.5],
      [1, 0.5],
    ];
  },
});

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')
  .then((res) => res.json())
  .then((data) => {
    const container = document.getElementById('container');
    const descriptionDiv = document.createElement('div');
    descriptionDiv.innerHTML = 'The nodes of a subtree is aligned to the left.';
    container.appendChild(descriptionDiv);

    const width = container.scrollWidth;
    const height = container.scrollHeight || 500;
    const graph = new G6.TreeGraph({
      container: 'container',
      width,
      height,
      modes: {
        default: ['collapse-expand', 'drag-canvas', 'zoom-canvas'],
      },
      defaultNode: {
        type: 'crect',
      },
      defaultEdge: {
        type: 'cubic-horizontal',
        style: {
          stroke: '#A3B1BF',
        },
      },
      layout: {
        type: 'compactBox',
        direction: 'LR',
        getId: function getId(d) {
          return d.id;
        },
        getHeight: function getHeight() {
          return 16;
        },
        getVGap: function getVGap() {
          return 10;
        },
        getHGap: function getHGap() {
          return 100;
        },
        getWidth: function getWidth(d) {
          return G6.Util.getTextSize(d.id, fontSize)[0] + 20;
        },
      },
      fitView: true,
    });
    graph.data(data);
    graph.render();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });
`,title:{zh:"\u8282\u70B9\u5DE6\u5BF9\u9F50\u7684\u7D27\u51D1\u6811",en:"CompactBox with Left Align Nodes"},filename:"compactBoxLeftAlign.js",isNew:!1}],icon:"",id:"compactBox",title:{en:"CompactBox",zh:"\u7D27\u51D1\u6811"},childrenKey:"demos",order:0},{demos:[{id:"basicDendrogram",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ffD6S74MXw4AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')
  .then((res) => res.json())
  .then((data) => {
    const container = document.getElementById('container');
    const width = container.scrollWidth;
    const height = container.scrollHeight || 500;
    const graph = new G6.TreeGraph({
      container: 'container',
      width,
      height,
      modes: {
        default: [
          {
            type: 'collapse-expand',
            onChange: function onChange(item, collapsed) {
              const data = item.get('model');
              data.collapsed = collapsed;
              return true;
            },
          },
          'drag-canvas',
          'zoom-canvas',
        ],
      },
      defaultNode: {
        size: 26,
        anchorPoints: [
          [0, 0.5],
          [1, 0.5],
        ],
      },
      defaultEdge: {
        type: 'cubic-horizontal',
      },
      layout: {
        type: 'dendrogram',
        direction: 'LR', // H / V / LR / RL / TB / BT
        nodeSep: 30,
        rankSep: 100,
      },
    });

    graph.node(function (node) {
      return {
        label: node.id,
        labelCfg: {
          position: node.children && node.children.length > 0 ? 'left' : 'right',
          offset: 5,
        },
      };
    });

    graph.data(data);
    graph.render();
    graph.fitView();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });
`,title:{zh:"\u751F\u6001\u6811",en:"Basic Dendrogram Layout"},filename:"basicDendrogram.js",isNew:!1},{id:"tbDendrogram",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*nTKmRKkyUVUAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')
  .then((res) => res.json())
  .then((data) => {
    const container = document.getElementById('container');
    const width = container.scrollWidth;
    const height = container.scrollHeight || 500;
    const graph = new G6.TreeGraph({
      container: 'container',
      width,
      height,
      linkCenter: true,
      modes: {
        default: [
          {
            type: 'collapse-expand',
            onChange: function onChange(item, collapsed) {
              const data = item.get('model');
              data.collapsed = collapsed;
              return true;
            },
          },
          'drag-canvas',
          'zoom-canvas',
        ],
      },
      defaultNode: {
        size: 26,
        anchorPoints: [
          [0, 0.5],
          [1, 0.5],
        ],
      },
      defaultEdge: {
        type: 'cubic-vertical',
      },
      layout: {
        type: 'dendrogram',
        direction: 'TB', // H / V / LR / RL / TB / BT
        nodeSep: 40,
        rankSep: 100,
      },
    });

    graph.node(function (node) {
      let position = 'right';
      let rotate = 0;
      if (!node.children) {
        position = 'bottom';
        rotate = Math.PI / 2;
      }
      return {
        label: node.id,
        labelCfg: {
          position,
          offset: 5,
          style: {
            rotate,
            textAlign: 'start',
          },
        },
      };
    });

    graph.data(data);
    graph.render();
    graph.fitView();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });
`,title:{zh:"\u81F3\u4E0A\u800C\u4E0B\u7684\u751F\u6001\u6811",en:"Top to Bottom Dendrogram"},filename:"tbDendrogram.js",isNew:!1}],icon:"",id:"dendrogram",title:{en:"Dendrogram",zh:"\u751F\u6001\u6811"},childrenKey:"demos",order:1},{demos:[{id:"hMindmap",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*wRZjTL3fCbEAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')
  .then((res) => res.json())
  .then((data) => {
    const container = document.getElementById('container');
    const width = container.scrollWidth;
    const height = container.scrollHeight || 500;
    const graph = new G6.TreeGraph({
      container: 'container',
      width,
      height,
      modes: {
        default: [
          {
            type: 'collapse-expand',
            onChange: function onChange(item, collapsed) {
              const data = item.get('model');
              data.collapsed = collapsed;
              return true;
            },
          },
          'drag-canvas',
          'zoom-canvas',
        ],
      },
      defaultNode: {
        size: 26,
        anchorPoints: [
          [0, 0.5],
          [1, 0.5],
        ],
      },
      defaultEdge: {
        type: 'cubic-horizontal',
      },
      layout: {
        type: 'mindmap',
        direction: 'H',
        getHeight: () => {
          return 16;
        },
        getWidth: () => {
          return 16;
        },
        getVGap: () => {
          return 10;
        },
        getHGap: () => {
          return 50;
        },
      },
    });

    let centerX = 0;
    graph.node(function (node) {
      if (node.id === 'Modeling Methods') {
        centerX = node.x;
      }

      return {
        label: node.id,
        labelCfg: {
          position:
            node.children && node.children.length > 0
              ? 'left'
              : node.x > centerX
              ? 'right'
              : 'left',
          offset: 5,
        },
      };
    });

    graph.data(data);
    graph.render();
    graph.fitView();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });
`,title:{zh:"\u8111\u56FE\u6811-\u5B50\u8282\u70B9\u81EA\u52A8\u4E24\u4FA7\u5206\u5E03",en:"Two Side Mindmap Layout"},filename:"hMindmap.js",isNew:!1},{id:"hRightMindmap",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*W6OGRLg2UJcAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')
  .then((res) => res.json())
  .then((data) => {
    const container = document.getElementById('container');
    const width = container.scrollWidth;
    const height = container.scrollHeight || 500;
    const graph = new G6.TreeGraph({
      container: 'container',
      width,
      height,
      modes: {
        default: [
          {
            type: 'collapse-expand',
            onChange: function onChange(item, collapsed) {
              const data = item.get('model');
              data.collapsed = collapsed;
              return true;
            },
          },
          'drag-canvas',
          'zoom-canvas',
        ],
      },
      defaultNode: {
        size: 26,
        anchorPoints: [
          [0, 0.5],
          [1, 0.5],
        ],
      },
      defaultEdge: {
        type: 'cubic-horizontal',
      },
      layout: {
        type: 'mindmap',
        direction: 'H',
        getHeight: () => {
          return 16;
        },
        getWidth: () => {
          return 16;
        },
        getVGap: () => {
          return 10;
        },
        getHGap: () => {
          return 100;
        },
        getSide: () => {
          return 'right';
        },
      },
    });

    let centerX = 0;
    graph.node(function (node) {
      if (node.id === 'Modeling Methods') {
        centerX = node.x;
      }

      return {
        label: node.id,
        labelCfg: {
          position:
            node.children && node.children.length > 0
              ? 'right'
              : node.x > centerX
              ? 'right'
              : 'left',
          offset: 5,
        },
      };
    });

    graph.data(data);
    graph.render();
    graph.fitView();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });
`,title:{zh:"\u8111\u56FE\u6811-\u5B50\u8282\u70B9\u53F3\u4FA7\u5206\u5E03",en:"Right Side Mindmap Layout"},filename:"hRightMindmap.js",isNew:!1},{id:"hLeftMindmap",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*NNUaTaN9yIgAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')
  .then((res) => res.json())
  .then((data) => {
    const container = document.getElementById('container');
    const width = container.scrollWidth;
    const height = container.scrollHeight || 500;
    const graph = new G6.TreeGraph({
      container: 'container',
      width,
      height,
      modes: {
        default: [
          {
            type: 'collapse-expand',
            onChange: function onChange(item, collapsed) {
              const data = item.get('model');
              data.collapsed = collapsed;
              return true;
            },
          },
          'drag-canvas',
          'zoom-canvas',
        ],
      },
      defaultNode: {
        size: 26,
        anchorPoints: [
          [0, 0.5],
          [1, 0.5],
        ],
      },
      defaultEdge: {
        type: 'cubic-horizontal',
      },
      layout: {
        type: 'mindmap',
        direction: 'H',
        getHeight: () => {
          return 16;
        },
        getWidth: () => {
          return 16;
        },
        getVGap: () => {
          return 10;
        },
        getHGap: () => {
          return 100;
        },
        getSide: () => {
          return 'left';
        },
      },
    });

    let centerX = 0;
    graph.node(function (node) {
      if (node.id === 'Modeling Methods') {
        centerX = node.x;
      }

      return {
        label: node.id,
        labelCfg: {
          position:
            node.children && node.children.length > 0
              ? 'right'
              : node.x > centerX
              ? 'right'
              : 'left',
          offset: 5,
        },
      };
    });

    graph.data(data);
    graph.render();
    graph.fitView();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });
`,title:{zh:"\u8111\u56FE\u6811-\u5B50\u8282\u70B9\u5DE6\u4FA7\u5206\u5E03",en:"Left Side Mindmap Layout"},filename:"hLeftMindmap.js",isNew:!1},{id:"hCustomSideMindmap",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Su39QqQr9PYAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')
  .then((res) => res.json())
  .then((data) => {
    const container = document.getElementById('container');
    const width = container.scrollWidth;
    const height = container.scrollHeight || 500;
    const graph = new G6.TreeGraph({
      container: 'container',
      width,
      height,
      modes: {
        default: [
          {
            type: 'collapse-expand',
            onChange: function onChange(item, collapsed) {
              const data = item.get('model');
              data.collapsed = collapsed;
              return true;
            },
          },
          'drag-canvas',
          'zoom-canvas',
        ],
      },
      defaultNode: {
        size: 26,
        anchorPoints: [
          [0, 0.5],
          [1, 0.5],
        ],
      },
      defaultEdge: {
        type: 'cubic-horizontal',
      },
      layout: {
        type: 'mindmap',
        direction: 'H',
        getHeight: () => {
          return 16;
        },
        getWidth: () => {
          return 16;
        },
        getVGap: () => {
          return 10;
        },
        getHGap: () => {
          return 50;
        },
        getSide: (d) => {
          if (d.id === 'Classification') {
            return 'left';
          }
          return 'right';
        },
      },
    });

    let centerX = 0;
    graph.node(function (node) {
      if (node.id === 'Modeling Methods') {
        centerX = node.x;
      }

      return {
        label: node.id,
        labelCfg: {
          position:
            node.children && node.children.length > 0
              ? 'left'
              : node.x > centerX
              ? 'right'
              : 'left',
          offset: 5,
        },
      };
    });

    graph.data(data);
    graph.render();
    graph.fitView();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });
`,title:{zh:"\u8111\u56FE\u6811-\u81EA\u5B9A\u4E49\u5B50\u8282\u70B9\u5206\u5E03",en:"Custom Mindmap Layout"},filename:"hCustomSideMindmap.js",isNew:!1}],icon:"",id:"mindmap",title:{en:"Mindmap",zh:"\u8111\u56FE\u6811"},childrenKey:"demos",order:2},{demos:[{id:"filesystem",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*PJnfTKFRaCAAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

G6.registerNode('file-node', {
  draw: function draw(cfg, group) {
    const keyShape = group.addShape('rect', {
      attrs: {
        x: 10,
        y: -12,
        fill: '#fff',
        stroke: null,
      },
    });
    let isLeaf = false;
    if (cfg.collapsed) {
      group.addShape('marker', {
        attrs: {
          symbol: 'triangle',
          x: 4,
          y: -2,
          r: 4,
          fill: '#666',
        },
        name: 'marker-shape',
      });
    } else if (cfg.children && cfg.children.length > 0) {
      group.addShape('marker', {
        attrs: {
          symbol: 'triangle-down',
          x: 4,
          y: -2,
          r: 4,
          fill: '#666',
        },
        name: 'marker-shape',
      });
    } else {
      isLeaf = true;
    }
    const shape = group.addShape('text', {
      attrs: {
        x: 15,
        y: 4,
        text: cfg.name,
        fill: '#666',
        fontSize: 16,
        textAlign: 'left',
        fontFamily:
          typeof window !== 'undefined'
            ? window.getComputedStyle(document.body, null).getPropertyValue('font-family') ||
              'Arial, sans-serif'
            : 'Arial, sans-serif',
      },
      name: 'text-shape',
    });
    const bbox = shape.getBBox();
    let backRectW = bbox.width;
    let backRectX = keyShape.attr('x');
    if (!isLeaf) {
      backRectW += 8;
      backRectX -= 15;
    }
    keyShape.attr({
      width: backRectW,
      height: bbox.height + 4,
      x: backRectX,
    });
    return keyShape;
  },
});
G6.registerEdge(
  'step-line',
  {
    getControlPoints: function getControlPoints(cfg) {
      const startPoint = cfg.startPoint;
      const endPoint = cfg.endPoint;
      return [
        startPoint,
        {
          x: startPoint.x,
          y: endPoint.y,
        },
        endPoint,
      ];
    },
  },
  'polyline',
);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.TreeGraph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  modes: {
    default: [
      {
        type: 'collapse-expand',
        animate: false,
        onChange: function onChange(item, collapsed) {
          const data = item.get('model');
          data.collapsed = collapsed;
          return true;
        },
      },
      'drag-canvas',
      'zoom-canvas',
    ],
  },
  defaultEdge: {
    style: {
      stroke: '#A3B1BF',
    },
  },
  layout: {
    type: 'indented',
    isHorizontal: true,
    direction: 'LR',
    indent: 30,
    getHeight: function getHeight() {
      return 16;
    },
    getWidth: function getWidth() {
      return 16;
    },
  },
});
const data = {
  id: '1',
  name: 'src',
  children: [
    {
      id: '1-1',
      name: 'behavior',
      children: [],
    },
    {
      id: '1-3',
      name: 'graph',
      children: [
        {
          id: '1-3-1',
          name: 'controller',
          children: [],
        },
      ],
    },
    {
      id: '1-5',
      name: 'item',
      children: [],
    },
    {
      id: '1-6',
      name: 'shape',
      children: [
        {
          id: '1-6-2',
          name: 'extend',
          children: [],
        },
      ],
    },
    {
      id: '1-7',
      name: 'util',
      children: [],
    },
  ],
};

graph.node((node) => {
  return {
    type: 'file-node',
    label: node.name,
  };
});
graph.edge(() => {
  return {
    type: 'step-line',
  };
});

graph.data(data);
graph.render();
graph.fitView();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u7F29\u8FDB\u6811-\u6587\u4EF6\u7CFB\u7EDF",en:"FileSystem-Indented Layout"},filename:"filesystem.js",isNew:!1},{id:"intendAlignTop",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kbzRRZk2t2cAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

G6.registerNode('card-node', {
  draw: function drawShape(cfg, group) {
    const r = 2;
    const color = '#5B8FF9';
    const w = cfg.size[0];
    const h = cfg.size[1];
    const shape = group.addShape('rect', {
      attrs: {
        x: -w / 2,
        y: -h / 2,
        width: w, //200,
        height: h, // 60
        stroke: color,
        radius: r,
        fill: '#fff',
      },
      name: 'main-box',
      draggable: true,
    });

    group.addShape('rect', {
      attrs: {
        x: -w / 2,
        y: -h / 2,
        width: w, //200,
        height: h / 2, // 60
        fill: color,
        radius: [r, r, 0, 0],
      },
      name: 'title-box',
      draggable: true,
    });

    // title text
    group.addShape('text', {
      attrs: {
        textBaseline: 'top',
        x: -w / 2 + 8,
        y: -h / 2 + 2,
        lineHeight: 20,
        text: cfg.id,
        fill: '#fff',
      },
      name: 'title',
    });
    cfg.children &&
      group.addShape('marker', {
        attrs: {
          x: w / 2,
          y: 0,
          r: 6,
          cursor: 'pointer',
          symbol: cfg.collapsed ? G6.Marker.expand : G6.Marker.collapse,
          stroke: '#666',
          lineWidth: 1,
          fill: '#fff',
        },
        name: 'collapse-icon',
      });
    group.addShape('text', {
      attrs: {
        textBaseline: 'top',
        x: -w / 2 + 8,
        y: -h / 2 + 24,
        lineHeight: 20,
        text: 'description',
        fill: 'rgba(0,0,0, 1)',
      },
      name: \`description\`,
    });
    return shape;
  },
  setState(name, value, item) {
    if (name === 'collapsed') {
      const marker = item.get('group').find((ele) => ele.get('name') === 'collapse-icon');
      const icon = value ? G6.Marker.expand : G6.Marker.collapse;
      marker.attr('symbol', icon);
    }
  },
});

const data = {
  id: 'A',
  children: [
    {
      id: 'A1',
      children: [{ id: 'A11' }, { id: 'A12' }, { id: 'A13' }, { id: 'A14' }],
    },
    {
      id: 'A2',
      children: [
        {
          id: 'A21',
          children: [{ id: 'A211' }, { id: 'A212' }],
        },
        {
          id: 'A22',
        },
      ],
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;

const graph = new G6.TreeGraph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas'],
  },
  defaultNode: {
    type: 'card-node',
    size: [100, 40],
  },
  defaultEdge: {
    type: 'cubic-horizontal',
    style: {
      endArrow: true,
    },
  },
  layout: {
    type: 'indented',
    direction: 'LR',
    dropCap: false,
    indent: 200,
    getHeight: () => {
      return 60;
    },
  },
});

graph.data(data);
graph.render();
graph.fitView();
graph.on('node:click', (e) => {
  if (e.target.get('name') === 'collapse-icon') {
    e.item.getModel().collapsed = !e.item.getModel().collapsed;
    graph.setItemState(e.item, 'collapsed', e.item.getModel().collapsed);
    graph.layout();
  }
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u7F29\u8FDB\u6811-\u9876\u90E8\u5BF9\u9F50",en:"FileSystem-Align Top"},filename:"intendAlignTop.js",isNew:!1},{id:"hIntended",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*42EXSYyBcTYAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')
  .then((res) => res.json())
  .then((data) => {
    const container = document.getElementById('container');
    const width = container.scrollWidth;
    const height = container.scrollHeight || 500;
    const graph = new G6.TreeGraph({
      container: 'container',
      width,
      height,
      modes: {
        default: ['drag-canvas'],
      },
      defaultNode: {
        size: 26,
        anchorPoints: [
          [0, 0.5],
          [1, 0.5],
        ],
      },
      defaultEdge: {
        type: 'cubic-horizontal',
      },
      layout: {
        type: 'indented',
        direction: 'H',
        indent: 80,
        getHeight: () => {
          return 10;
        },
        getWidth: () => {
          return 10;
        },
        getSide: (d) => {
          if (d.id === 'Regression' || d.id === 'Classification') return 'left';
          return 'right';
        },
      },
    });

    let centerX = 0;
    graph.node(function (node) {
      if (node.id === 'Modeling Methods') {
        centerX = node.x;
      }
      return {
        label: node.id,
        labelCfg: {
          position:
            node.children && node.children.length > 0
              ? 'left'
              : node.x > centerX
              ? 'right'
              : 'left',
          offset: 5,
        },
      };
    });

    graph.data(data);
    graph.render();
    graph.fitView();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });
`,title:{zh:"\u7F29\u8FDB\u6811-\u5B50\u8282\u70B9\u4E24\u4FA7\u5206\u5E03",en:"Two Side Indented Layout"},filename:"hIntended.js",isNew:!1}],icon:"",id:"indented",title:{en:"Indented",zh:"\u7F29\u8FDB\u6811"},childrenKey:"demos",order:3},{demos:[{id:"radialDendrogram",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*mS3_Rb4VuPoAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')
  .then((res) => res.json())
  .then((data) => {
    const container = document.getElementById('container');
    const width = container.scrollWidth;
    const height = container.scrollHeight || 500;
    const graph = new G6.TreeGraph({
      container: 'container',
      width,
      height,
      linkCenter: true,
      modes: {
        default: [
          {
            type: 'collapse-expand',
            onChange: function onChange(item, collapsed) {
              const data = item.get('model');
              data.collapsed = collapsed;
              return true;
            },
          },
          'drag-canvas',
          'zoom-canvas',
        ],
      },
      defaultNode: {
        size: 26,
      },
      layout: {
        type: 'dendrogram',
        direction: 'LR',
        nodeSep: 20,
        rankSep: 100,
        radial: true,
      },
    });

    graph.node(function (node) {
      return {
        label: node.id,
      };
    });

    graph.data(data);
    graph.render();
    graph.fitView();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });
`,title:{zh:"\u751F\u6001\u8F90\u5C04\u6811",en:"Radial Dendrograme Layout"},filename:"radialDendrogram.js",isNew:!1},{id:"radialCompactBox",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*xENwSLuyTZ4AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')
  .then((res) => res.json())
  .then((data) => {
    const container = document.getElementById('container');
    const width = container.scrollWidth;
    const height = container.scrollHeight || 500;
    const graph = new G6.TreeGraph({
      container: 'container',
      width,
      height,
      linkCenter: true,
      modes: {
        default: [
          {
            type: 'collapse-expand',
            onChange: function onChange(item, collapsed) {
              const data = item.get('model');
              data.collapsed = collapsed;
              return true;
            },
          },
          'drag-canvas',
          'zoom-canvas',
        ],
      },
      defaultNode: {
        size: 26,
      },
      layout: {
        type: 'compactBox',
        direction: 'RL',
        getId: function getId(d) {
          return d.id;
        },
        getHeight: () => {
          return 26;
        },
        getWidth: () => {
          return 26;
        },
        getVGap: () => {
          return 20;
        },
        getHGap: () => {
          return 30;
        },
        radial: true,
      },
    });

    graph.node(function (node) {
      return {
        label: node.id,
      };
    });

    graph.data(data);
    graph.render();
    graph.fitView();

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight);
      };
  });
`,title:{zh:"\u7D27\u51D1\u8F90\u5C04\u6811",en:"Radial CompactBox Layout"},filename:"radialCompactBox.js",isNew:!1}],icon:"",id:"radialtree",title:{en:"Radial Tree",zh:"\u8F90\u5C04\u6811"},childrenKey:"demos",order:4},{demos:[{id:"customEdgeTree",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*AncCQ5e7XncAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const COLLAPSE_ICON = function COLLAPSE_ICON(x, y, r) {
  return [
    ['M', x - r, y - r],
    ['a', r, r, 0, 1, 0, r * 2, 0],
    ['a', r, r, 0, 1, 0, -r * 2, 0],
    ['M', x + 2 - r, y - r],
    ['L', x + r - 2, y - r],
  ];
};
const EXPAND_ICON = function EXPAND_ICON(x, y, r) {
  return [
    ['M', x - r, y - r],
    ['a', r, r, 0, 1, 0, r * 2, 0],
    ['a', r, r, 0, 1, 0, -r * 2, 0],
    ['M', x + 2 - r, y - r],
    ['L', x + r - 2, y - r],
    ['M', x, y - 2 * r + 2],
    ['L', x, y - 2],
  ];
};

const data = {
  id: 'root',
  label: 'root',
  children: [
    {
      id: 'c1',
      label: 'c1',
      children: [
        {
          id: 'c1-1',
          label: 'c1-1',
        },
        {
          id: 'c1-2',
          label: 'c1-2',
          children: [
            {
              id: 'c1-2-1',
              label: 'c1-2-1',
            },
            {
              id: 'c1-2-2',
              label: 'c1-2-2',
            },
          ],
        },
      ],
    },
    {
      id: 'c2',
      label: 'c2',
    },
    {
      id: 'c3',
      label: 'c3',
      children: [
        {
          id: 'c3-1',
          label: 'c3-1',
        },
        {
          id: 'c3-2',
          label: 'c3-2',
          children: [
            {
              id: 'c3-2-1',
              label: 'c3-2-1',
            },
            {
              id: 'c3-2-2',
              label: 'c3-2-2',
            },
            {
              id: 'c3-2-3',
              label: 'c3-2-3',
            },
          ],
        },
        {
          id: 'c3-3',
          label: 'c3-3',
        },
      ],
    },
  ],
};

G6.Util.traverseTree(data, (d) => {
  d.leftIcon = {
    style: {
      fill: '#e6fffb',
      stroke: '#e6fffb',
    },
    img: 'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Q_FQT6nwEC8AAAAAAAAAAABkARQnAQ',
  };
  return true;
});

G6.registerNode(
  'icon-node',
  {
    options: {
      size: [60, 20],
      stroke: '#91d5ff',
      fill: '#91d5ff',
    },
    draw(cfg, group) {
      const styles = this.getShapeStyle(cfg);
      const { labelCfg = {} } = cfg;

      const w = styles.width;
      const h = styles.height;

      const keyShape = group.addShape('rect', {
        attrs: {
          ...styles,
          x: -w / 2,
          y: -h / 2,
        },
      });

      /**
       * leftIcon \u683C\u5F0F\u5982\u4E0B\uFF1A
       *  {
       *    style: ShapeStyle;
       *    img: ''
       *  }
       */
      console.log('cfg.leftIcon', cfg.leftIcon);
      if (cfg.leftIcon) {
        const { style, img } = cfg.leftIcon;
        group.addShape('rect', {
          attrs: {
            x: 1 - w / 2,
            y: 1 - h / 2,
            width: 38,
            height: styles.height - 2,
            fill: '#8c8c8c',
            ...style,
          },
        });

        group.addShape('image', {
          attrs: {
            x: 8 - w / 2,
            y: 8 - h / 2,
            width: 24,
            height: 24,
            img:
              img ||
              'https://g.alicdn.com/cm-design/arms-trace/1.0.155/styles/armsTrace/images/TAIR.png',
          },
          name: 'image-shape',
        });
      }

      // \u5982\u679C\u4E0D\u9700\u8981\u52A8\u6001\u589E\u52A0\u6216\u5220\u9664\u5143\u7D20\uFF0C\u5219\u4E0D\u9700\u8981 add \u8FD9\u4E24\u4E2A marker
      group.addShape('marker', {
        attrs: {
          x: 40 - w / 2,
          y: 52 - h / 2,
          r: 6,
          stroke: '#73d13d',
          cursor: 'pointer',
          symbol: EXPAND_ICON,
        },
        name: 'add-item',
      });

      group.addShape('marker', {
        attrs: {
          x: 80 - w / 2,
          y: 52 - h / 2,
          r: 6,
          stroke: '#ff4d4f',
          cursor: 'pointer',
          symbol: COLLAPSE_ICON,
        },
        name: 'remove-item',
      });

      if (cfg.label) {
        group.addShape('text', {
          attrs: {
            ...labelCfg.style,
            text: cfg.label,
            x: 50 - w / 2,
            y: 25 - h / 2,
          },
        });
      }

      return keyShape;
    },
    update: undefined,
  },
  'rect',
);

G6.registerEdge('flow-line', {
  draw(cfg, group) {
    const startPoint = cfg.startPoint;
    const endPoint = cfg.endPoint;

    const { style } = cfg;
    const shape = group.addShape('path', {
      attrs: {
        stroke: style.stroke,
        endArrow: style.endArrow,
        path: [
          ['M', startPoint.x, startPoint.y],
          ['L', startPoint.x, (startPoint.y + endPoint.y) / 2],
          ['L', endPoint.x, (startPoint.y + endPoint.y) / 2],
          ['L', endPoint.x, endPoint.y],
        ],
      },
    });

    return shape;
  },
});

const defaultStateStyles = {
  hover: {
    stroke: '#1890ff',
    lineWidth: 2,
  },
};

const defaultNodeStyle = {
  fill: '#91d5ff',
  stroke: '#40a9ff',
  radius: 5,
};

const defaultEdgeStyle = {
  stroke: '#91d5ff',
  endArrow: {
    path: 'M 0,0 L 12, 6 L 9,0 L 12, -6 Z',
    fill: '#91d5ff',
    d: -20,
  },
};

const defaultLayout = {
  type: 'compactBox',
  direction: 'TB',
  getId: function getId(d) {
    return d.id;
  },
  getHeight: function getHeight() {
    return 16;
  },
  getWidth: function getWidth() {
    return 16;
  },
  getVGap: function getVGap() {
    return 40;
  },
  getHGap: function getHGap() {
    return 70;
  },
};

const defaultLabelCfg = {
  style: {
    fill: '#000',
    fontSize: 12,
  },
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;

const minimap = new G6.Minimap({
  size: [150, 100],
});
const graph = new G6.TreeGraph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  plugins: [minimap],
  modes: {
    default: ['drag-canvas', 'zoom-canvas'],
  },
  defaultNode: {
    type: 'icon-node',
    size: [120, 40],
    style: defaultNodeStyle,
    labelCfg: defaultLabelCfg,
  },
  defaultEdge: {
    type: 'flow-line',
    style: defaultEdgeStyle,
  },
  nodeStateStyles: defaultStateStyles,
  edgeStateStyles: defaultStateStyles,
  layout: defaultLayout,
});

graph.data(data);
graph.render();
graph.fitView();

graph.on('node:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'hover', true);
});

graph.on('node:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'hover', false);
});

graph.on('node:click', (evt) => {
  const { item, target } = evt;
  const targetType = target.get('type');
  const name = target.get('name');

  // \u589E\u52A0\u5143\u7D20
  if (targetType === 'marker') {
    const model = item.getModel();
    if (name === 'add-item') {
      if (!model.children) {
        model.children = [];
      }
      const id = \`n-\${Math.random()}\`;
      model.children.push({
        id,
        label: id.substr(0, 8),
        leftIcon: {
          style: {
            fill: '#e6fffb',
            stroke: '#e6fffb',
          },
          img:
            'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Q_FQT6nwEC8AAAAAAAAAAABkARQnAQ',
        },
      });
      graph.updateChild(model, model.id);
    } else if (name === 'remove-item') {
      graph.removeChild(model.id);
    }
  }
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u81EA\u5B9A\u4E49\u6811\u56FE\u4E2D\u7684\u8FB9",en:"Edges on Tree"},filename:"customEdgeTree.js",isNew:!1},{id:"treeEdgeLabel",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*LtTbS4D59H4AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  isRoot: true,
  id: 'Root',
  style: {
    fill: 'red',
  },
  children: [
    {
      id: 'SubTreeNode1',
      raw: {},
      children: [
        {
          id: 'SubTreeNode1.1',
        },
        {
          id: 'SubTreeNode1.2',
          children: [
            {
              id: 'SubTreeNode1.2.1',
            },
            {
              id: 'SubTreeNode1.2.2',
            },
            {
              id: 'SubTreeNode1.2.3',
            },
          ],
        },
      ],
    },
    {
      id: 'SubTreeNode2',
      children: [
        {
          id: 'SubTreeNode2.1',
        },
      ],
    },
    {
      id: 'SubTreeNode3',
      children: [
        {
          id: 'SubTreeNode3.1',
        },
        {
          id: 'SubTreeNode3.2',
        },
        {
          id: 'SubTreeNode3.3',
        },
      ],
    },
    {
      id: 'SubTreeNode4',
    },
    {
      id: 'SubTreeNode5',
    },
    {
      id: 'SubTreeNode6',
    },
    {
      id: 'SubTreeNode7',
    },
    {
      id: 'SubTreeNode8',
    },
    {
      id: 'SubTreeNode9',
    },
    {
      id: 'SubTreeNode10',
    },
    {
      id: 'SubTreeNode11',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.TreeGraph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  modes: {
    default: [
      {
        type: 'collapse-expand',
        onChange: function onChange(item, collapsed) {
          const data = item.get('model');
          data.collapsed = collapsed;
          return true;
        },
      },
      'drag-canvas',
      'zoom-canvas',
    ],
  },
  defaultNode: {
    size: 30,
  },
  layout: {
    type: 'compactBox',
    direction: 'LR',
    getId: function getId(d) {
      return d.id;
    },
    getHeight: function getHeight() {
      return 16;
    },
    getWidth: function getWidth() {
      return 16;
    },
    getVGap: function getVGap() {
      return 10;
    },
    getHGap: function getHGap() {
      return 100;
    },
  },
});

graph.node(function (node) {
  return {
    size: 16,
    anchorPoints: [
      [0, 0.5],
      [1, 0.5],
    ],
    style: {
      fill: '#C6E5FF',
      stroke: '#5B8FF9',
    },
    label: node.id,
    labelCfg: {
      position: node.children && node.children.length > 0 ? 'left' : 'right',
      offset: 5,
    },
  };
});
let i = 0;
graph.edge(function () {
  i++;
  return {
    type: 'cubic-horizontal',
    color: '#A3B1BF',
    label: i,
  };
});

graph.data(data);
graph.render();
graph.fitView();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u6811\u56FE\u8FB9\u4E0A\u7684\u6807\u7B7E",en:"Labels on Tree Edge"},filename:"treeEdgeLabel.js",isNew:!1},{id:"customTree",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*D8kzQYHaUiIAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

G6.registerNode(
  'tree-node',
  {
    drawShape: function drawShape(cfg, group) {
      const rect = group.addShape('rect', {
        attrs: {
          fill: '#fff',
          stroke: '#666',
          x: 0,
          y: 0,
          width:1,
          height: 1
        },
        name: 'rect-shape',
      });
      const content = cfg.name.replace(/(.{19})/g, '$1\\n');
      const text = group.addShape('text', {
        attrs: {
          text: content,
          x: 0,
          y: 0,
          textAlign: 'left',
          textBaseline: 'middle',
          fill: '#666',
        },
        name: 'text-shape',
      });
      const bbox = text.getBBox();
      const hasChildren = cfg.children && cfg.children.length > 0;
      rect.attr({
        x: -bbox.width / 2 - 4,
        y: -bbox.height / 2 - 6,
        width: bbox.width + (hasChildren ? 26 : 12),
        height: bbox.height + 12,
      });
      text.attr({
        x: -bbox.width / 2,
        y: 0
      })
      if (hasChildren) {
        group.addShape('marker', {
          attrs: {
            x: bbox.width / 2 + 12,
            y: 0,
            r: 6,
            symbol: cfg.collapsed ? G6.Marker.expand : G6.Marker.collapse,
            stroke: '#666',
            lineWidth: 2,
          },
          name: 'collapse-icon',
        });
      }
      return rect;
    },
    update: (cfg, item) => {
      const group = item.getContainer();
      const icon = group.find((e) => e.get('name') === 'collapse-icon');
      icon.attr('symbol', cfg.collapsed ? G6.Marker.expand : G6.Marker.collapse);
    },
  },
  'single-node',
);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.TreeGraph({
  container: 'container',
  width,
  height,
  modes: {
    default: [
      {
        type: 'collapse-expand',
        onChange: function onChange(item, collapsed) {
          const data = item.get('model');
          graph.updateItem(item, {
            collapsed,
          });
          data.collapsed = collapsed;
          return true;
        },
      },
      'drag-canvas',
      'zoom-canvas',
    ],
  },
  defaultNode: {
    type: 'tree-node',
    anchorPoints: [
      [0, 0.5],
      [1, 0.5],
    ],
  },
  defaultEdge: {
    type: 'cubic-horizontal',
    style: {
      stroke: '#A3B1BF',
    },
  },
  layout: {
    type: 'compactBox',
    direction: 'LR',
    getId: function getId(d) {
      return d.id;
    },
    getHeight: function getHeight() {
      return 16;
    },
    getWidth: function getWidth() {
      return 16;
    },
    getVGap: function getVGap() {
      return 20;
    },
    getHGap: function getHGap() {
      return 80;
    },
  },
});
fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/modeling-methods.json')
  .then((res) => res.json())
  .then((data) => {
    G6.Util.traverseTree(data, function (item) {
      item.id = item.name;
    });
    graph.data(data);
    graph.render();
    graph.fitView();
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u81EA\u5B9A\u4E49\u590D\u6742\u6811\u56FE\u6837\u5F0F",en:"Custom Tree Node 1"},filename:"customTree.js",isNew:!1}],icon:"",id:"customItemTree",title:{en:"Custom Tree Items",zh:"\u5B9A\u5236\u6811\u56FE\u5143\u7D20\u6837\u5F0F"},childrenKey:"demos",order:5}],childrenKey:"examples"},{id:"item",title:{zh:"\u5143\u7D20",en:"Item"},icon:"shape",examples:[{demos:[{id:"circle",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*8QIsS5rud6oAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: 'circle',
      label: 'Circle',
      x: 250,
      y: 150,
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  defaultNode: {
    /* node type */
    type: 'circle',
    /* node size */
    size: [60],
    /* style for the keyShape */
    // style: {
    //   fill: '#9EC9FF',
    //   stroke: '#5B8FF9',
    //   lineWidth: 3,
    // },
    labelCfg: {
      /* label's position, options: center, top, bottom, left, right */
      position: 'bottom',
      /* label's offset to the keyShape, 4 by default */
      //   offset: 12,
      /* label's style */
      //   style: {
      //     fontSize: 20,
      //     fill: '#ccc',
      //     fontWeight: 500
      //   }
    },
    /* configurations for four linkpoints */
    linkPoints: {
      top: true,
      right: true,
      bottom: true,
      left: true,
      /* linkPoints' size, 8 by default */
      //   size: 5,
      /* linkPoints' style */
      //   fill: '#ccc',
      //   stroke: '#333',
      //   lineWidth: 2,
    },
    /* icon configuration */
    icon: {
      /* whether show the icon, false by default */
      show: true,
      /* icon's img address, string type */
      // img: 'https://gw.alipayobjects.com/zos/basement_prod/012bcf4f-423b-4922-8c24-32a89f8c41ce.svg',
      /* icon's size, 20 * 20 by default: */
      //   width: 40,
      //   height: 40
    },
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
  // nodeStateStyles: {
  //   // node style of active state
  //   active: {
  //     fillOpacity: 0.8,
  //   },
  //   // node style of selected state
  //   selected: {
  //     lineWidth: 5,
  //   },
  // },
});

graph.data(data);
graph.render();

graph.on('node:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('node:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

graph.on('node:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});
graph.on('canvas:click', (evt) => {
  graph.getNodes().forEach((node) => {
    graph.clearItemStates(node);
  });
});
`,title:{zh:"\u5706\u5F62",en:"Circle"},filename:"circle.js",isNew:!1},{id:"donut",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*NRJ7RpkMPNsAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: 'donut',
      label: 'Donut',
      x: 250,
      y: 150,
      // the attributes for drawing donut
      donutAttrs: {
        prop1: 10,
        prop2: 20,
        prop3: 25
      },
      // the color map for drawing donut
      donutColorMap: {
        prop1: '#8eaade',
        prop2: '#5c7cb8',
        prop3: '#1e3f7d'
      },
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  defaultNode: {
    /* node type, the priority is lower than the type in the node data */
    type: 'donut',
    /* node size */
    size: 60,
    /* style for the keyShape */
    // style: {
    //   fill: '#9EC9FF',
    //   stroke: '#5B8FF9',
    //   lineWidth: 3,
    // },
    labelCfg: {
      /* label's position, options: center, top, bottom, left, right */
      position: 'bottom',
      /* label's offset to the keyShape, 4 by default */
      //   offset: 12,
      /* label's style */
      //   style: {
      //     fontSize: 20,
      //     fill: '#ccc',
      //     fontWeight: 500
      //   }
    },
    /* configurations for four linkpoints */
    // linkPoints: {
    //   top: true,
    //   right: true,
    //   bottom: true,
    //   left: true,
    //   /* linkPoints' size, 8 by default */
    //   //   size: 5,
    //   /* linkPoints' style */
    //   //   fill: '#ccc',
    //   //   stroke: '#333',
    //   //   lineWidth: 2,
    // },
    /* icon configuration */
    icon: {
      /* whether show the icon, false by default */
      show: true,
      /* icon's img address, string type */
      // img: 'https://gw.alipayobjects.com/zos/basement_prod/012bcf4f-423b-4922-8c24-32a89f8c41ce.svg',
      /* icon's size, 20 * 20 by default: */
      //   width: 40,
      //   height: 40
    },
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
  // nodeStateStyles: {
  //   // node style of active state
  //   active: {
  //     fillOpacity: 0.8,
  //   },
  //   // node style of selected state
  //   selected: {
  //     lineWidth: 5,
  //   },
  // },
});

graph.data(data);
graph.render();

graph.on('node:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('node:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

graph.on('node:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});
graph.on('canvas:click', (evt) => {
  graph.getNodes().forEach((node) => {
    graph.clearItemStates(node);
  });
});
`,title:{zh:"\u751C\u751C\u5708",en:"Donut"},filename:"donut.js",isNew:!1},{id:"ellipse",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*tWyKToNjzWMAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: 'ellipse',
      label: 'Ellipse',
      x: 250,
      y: 150,
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  defaultNode: {
    type: 'ellipse',
    size: [80, 50],
    /* style for the keyShape */
    // style: {
    //   fill: '#9EC9FF',
    //   stroke: '#5B8FF9',
    //   lineWidth: 3,
    // },
    labelCfg: {
      /* label's position, options: center, top, bottom, left, right */
      position: 'bottom',
      /* label's offset to the keyShape, 4 by default */
      //   offset: 12,
      /* label's style */
      //   style: {
      //     fontSize: 20,
      //     fill: '#ccc',
      //     fontWeight: 500
      //   }
    },
    /* configurations for four linkpoints */
    linkPoints: {
      top: true,
      right: true,
      bottom: true,
      left: true,
      /* linkPoints' size, 8 by default */
      //   size: 5,
      /* linkPoints' style */
      //   fill: '#ccc',
      //   stroke: '#333',
      //   lineWidth: 2,
    },
    /* icon configuration */
    icon: {
      /* whether show the icon, false by default */
      show: true,
      /* icon's img address, string type */
      // img: 'https://gw.alipayobjects.com/zos/basement_prod/012bcf4f-423b-4922-8c24-32a89f8c41ce.svg',
      /* icon's size, 20 * 20 by default: */
      //   width: 40,
      //   height: 40
    },
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
  // nodeStateStyles: {
  //   // node style of active state
  //   active: {
  //     fillOpacity: 0.8,
  //   },
  //   // node style of selected state
  //   selected: {
  //     lineWidth: 5,
  //   },
  // },
});

graph.data(data);
graph.render();

graph.on('node:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('node:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

graph.on('node:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});

graph.on('canvas:click', (evt) => {
  graph.getNodes().forEach((node) => {
    graph.clearItemStates(node);
  });
});
`,title:{zh:"\u692D\u5706",en:"Ellipse"},filename:"ellipse.js",isNew:!1},{id:"rect",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*pnaTQYJ3kaQAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: 'rect',
      label: 'rect',
      x: 250,
      y: 150,
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  defaultNode: {
    /* node type */
    type: 'rect',
    /* node size */
    size: [80, 40],
    /* style for the keyShape */
    // style: {
    //   fill: '#9EC9FF',
    //   stroke: '#5B8FF9',
    //   lineWidth: 3,
    //   radius: 10
    // },
    labelCfg: {
      /* label's position, options: center, top, bottom, left, right */
      position: 'center',
      /* label's offset to the keyShape, 4 by default */
      //   offset: 12,
      /* label's style */
      //   style: {
      //     fontSize: 20,
      //     fill: '#ccc',
      //     fontWeight: 500
      //   }
    },
    /* configurations for four linkpoints */
    linkPoints: {
      top: true,
      right: true,
      bottom: true,
      left: true,
      /* linkPoints' size, 8 by default */
      //   size: 5,
      /* linkPoints' style */
      //   fill: '#ccc',
      //   stroke: '#333',
      //   lineWidth: 2,
    },
    /* icon configuration */
    icon: {
      /* whether show the icon, false by default */
      show: true,
      /* icon's img address, string type */
      // img: 'https://gw.alipayobjects.com/zos/basement_prod/012bcf4f-423b-4922-8c24-32a89f8c41ce.svg',
      /* icon's size, 20 * 20 by default: */
      //   width: 40,
      //   height: 40
    },
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
  // nodeStateStyles: {
  //   // node style of active state
  //   active: {
  //     fillOpacity: 0.8,
  //   },
  //   // node style of selected state
  //   selected: {
  //     lineWidth: 5,
  //   },
  // },
});

graph.data(data);
graph.render();

graph.on('node:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('node:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

graph.on('node:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});

graph.on('canvas:click', (evt) => {
  graph.getNodes().forEach((node) => {
    graph.clearItemStates(node);
  });
});
`,title:{zh:"\u77E9\u5F62",en:"Rect"},filename:"rect.js",isNew:!1},{id:"modelRect",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*w4kQSYQ9djQAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: 'rect1',
      label: 'rect1',
      description: 'description, hidden when undefined',
      x: 250,
      y: 150,
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  defaultNode: {
    type: 'modelRect',
    size: [270, 80],
    style: {
      radius: 5,
      stroke: '#69c0ff',
      fill: '#ffffff',
      lineWidth: 1,
      fillOpacity: 1,
    },
    // label configurations
    labelCfg: {
      style: {
        fill: '#595959',
        fontSize: 14,
      },
      offset: 30,
    },
    // left rect
    preRect: {
      show: true,
      width: 4,
      fill: '#40a9ff',
      radius: 2,
    },
    // configurations for the four linkpoints
    linkPoints: {
      top: false,
      right: false,
      bottom: false,
      left: false,
      // the size of the linkpoints' circle
      size: 10,
      lineWidth: 1,
      fill: '#72CC4A',
      stroke: '#72CC4A',
    },
    // configurations for the icon
    logoIcon: {
      // whether to show the icon
      show: true,
      x: 0,
      y: 0,
      // the image url for the icon, string type
      img:
        'https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg',
      width: 16,
      height: 16,
      // adjust the offset along x-axis for the icon
      offset: 0,
    },
    // configurations for state icon
    stateIcon: {
      // whether to show the icon
      show: true,
      x: 0,
      y: 0,
      // the image url for the icon, string type
      img:
        'https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg',
      width: 16,
      height: 16,
      // adjust hte offset along x-axis for the icon
      offset: -5,
    },
  },
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  nodeStateStyles: {
    hover: {
      lineWidth: 2,
      stroke: '#1890ff',
      fill: '#e6f7ff',
    },
  },
});

graph.data(data);
graph.render();

graph.on('node:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'hover', true);
});

graph.on('node:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'hover', false);
});
`,title:{zh:"\u6A21\u6001\u77E9\u5F62",en:"ModelRect"},filename:"modelRect.js",isNew:!1},{id:"diamond",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*6XXCTZxhib0AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: 'diamond',
      label: 'Diamond',
      x: 250,
      y: 150,
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  defaultNode: {
    type: 'diamond',
    /* node size */
    size: [80, 60],
    /* style for the keyShape */
    // style: {
    //   fill: '#9EC9FF',
    //   stroke: '#5B8FF9',
    //   lineWidth: 3,
    // },
    labelCfg: {
      /* label's position, options: center, top, bottom, left, right */
      position: 'bottom',
      /* label's offset to the keyShape, 4 by default */
      //   offset: 12,
      /* label's style */
      //   style: {
      //     fontSize: 20,
      //     fill: '#ccc',
      //     fontWeight: 500
      //   }
    },
    /* configurations for four linkpoints */
    linkPoints: {
      top: true,
      right: true,
      bottom: true,
      left: true,
      /* linkPoints' size, 8 by default */
      //   size: 5,
      /* linkPoints' style */
      //   fill: '#ccc',
      //   stroke: '#333',
      //   lineWidth: 2,
    },
    /* icon configuration */
    icon: {
      /* whether show the icon, false by default */
      show: true,
      /* icon's img address, string type */
      // img: 'https://gw.alipayobjects.com/zos/basement_prod/012bcf4f-423b-4922-8c24-32a89f8c41ce.svg',
      /* icon's size, 20 * 20 by default: */
      //   width: 40,
      //   height: 40
    },
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
  // nodeStateStyles: {
  //   // node style of active state
  //   active: {
  //     fillOpacity: 0.8,
  //   },
  //   // node style of selected state
  //   selected: {
  //     lineWidth: 5,
  //   },
  // },
});

graph.data(data);
graph.render();

graph.on('node:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('node:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

graph.on('node:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});

graph.on('canvas:click', (evt) => {
  graph.getNodes().forEach((node) => {
    graph.clearItemStates(node);
  });
});
`,title:{zh:"\u6A21\u6001\u83F1\u5F62\u77E9\u5F62",en:"Diamond"},filename:"diamond.js",isNew:!1},{id:"star",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*-unkSZtlDeAAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: 'star',
      label: 'Star',
      x: 250,
      y: 200,
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  defaultNode: {
    /* node type */
    type: 'star',
    /* node size */
    size: [60, 30],
    /* style for the keyShape */
    // style: {
    //   fill: '#9EC9FF',
    //   stroke: '#5B8FF9',
    //   lineWidth: 3,
    // },
    labelCfg: {
      /* label's position, options: center, top, bottom, left, right */
      position: 'bottom',
      /* label's offset to the keyShape, 4 by default */
      offset: 20,
      /* label's style */
      //   style: {
      //     fontSize: 20,
      //     fill: '#ccc',
      //     fontWeight: 500
      //   }
    },
    /* configurations for four linkpoints */
    linkPoints: {
      top: true,
      right: true,
      bottom: true,
      left: true,
      /* linkPoints' size, 8 by default */
      //   size: 5,
      /* linkPoints' style */
      //   fill: '#ccc',
      //   stroke: '#333',
      //   lineWidth: 2,
    },
    /* icon configuration */
    icon: {
      /* whether show the icon, false by default */
      show: true,
      /* icon's img address, string type */
      // img: 'https://gw.alipayobjects.com/zos/basement_prod/012bcf4f-423b-4922-8c24-32a89f8c41ce.svg',
      /* icon's size, 20 * 20 by default: */
      //   width: 40,
      //   height: 40
    },
    /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
    // nodeStateStyles: {
    //   // node style of active state
    //   active: {
    //     fillOpacity: 0.8,
    //   },
    //   // node style of selected state
    //   selected: {
    //     lineWidth: 5,
    //   },
    // },
  },
});

graph.data(data);
graph.render();

graph.on('node:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('node:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

graph.on('node:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});
graph.on('canvas:click', (evt) => {
  graph.getNodes().forEach((node) => {
    graph.clearItemStates(node);
  });
});
`,title:{zh:"\u4E94\u89D2\u661F",en:"Star"},filename:"star.js",isNew:!1},{id:"triangle",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*i2tETYnJ0dIAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: 'circle',
      label: 'Triangle',
      x: 250,
      y: 200,
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  defaultNode: {
    type: 'triangle',
    size: [40],
    // options: down, up
    direction: 'up',
    /* style for the keyShape */
    // style: {
    //   fill: '#9EC9FF',
    //   stroke: '#5B8FF9',
    //   lineWidth: 3,
    // },
    labelCfg: {
      /* label's position, options: center, top, bottom, left, right */
      position: 'bottom',
      /* label's offset to the keyShape, 4 by default */
      offset: 20,
      /* label's style */
      //   style: {
      //     fontSize: 20,
      //     fill: '#ccc',
      //     fontWeight: 500
      //   }
    },
    /* configurations for four linkpoints */
    linkPoints: {
      top: true,
      right: true,
      bottom: true,
      left: true,
      /* linkPoints' size, 8 by default */
      //   size: 5,
      /* linkPoints' style */
      //   fill: '#ccc',
      //   stroke: '#333',
      //   lineWidth: 2,
    },
    /* icon configuration */
    icon: {
      /* whether show the icon, false by default */
      show: true,
      /* icon's img address, string type */
      // img: 'https://gw.alipayobjects.com/zos/basement_prod/012bcf4f-423b-4922-8c24-32a89f8c41ce.svg',
      /* icon's size, 20 * 20 by default: */
      //   width: 40,
      //   height: 40
    },
    /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
    // nodeStateStyles: {
    //   // node style of active state
    //   active: {
    //     fillOpacity: 0.8,
    //   },
    //   // node style of selected state
    //   selected: {
    //     lineWidth: 5,
    //   },
    // },
  },
});

graph.data(data);
graph.render();

graph.on('node:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('node:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

graph.on('node:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});
graph.on('canvas:click', (evt) => {
  graph.getNodes().forEach((node) => {
    graph.clearItemStates(node);
  });
});
`,title:{zh:"\u4E09\u89D2\u5F62",en:"Triangle"},filename:"triangle.js",isNew:!1},{id:"image",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*o-MuTpQaj7EAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: 'image',
      img: 'https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg',
      x: 250,
      y: 150,
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  defaultNode: {
    type: 'image',
    size: [260, 80],
    clipCfg: {
      show: false,
      // Clip type options: circle, ellipse, rect, path
      type: 'circle',
      // circle
      r: 30,
      // clip style
      style: {
        lineWidth: 1,
      },
    },
  },
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
});

graph.data(data);
graph.render();
`,title:{zh:"\u56FE\u7247",en:"Image"},filename:"image.js",isNew:!1}],icon:"",id:"defaultNodes",title:{en:"Built-in Nodes",zh:"\u5185\u7F6E\u8282\u70B9"},childrenKey:"demos",order:0},{demos:[{id:"polyline1",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*tGX6S5r94wkAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * The usage of built-in polyline
 * by Shiwu
 */

const data = {
  nodes: [
    {
      id: '0',
      x: 150,
      y: 100,
    },
    {
      id: '1',
      x: 350,
      y: 300,
    },
  ],
  edges: [
    // Built-in polyline
    {
      source: '0',
      target: '1',
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  // make the edge link to the centers of the end nodes
  linkCenter: true,
  modes: {
    // behavior
    default: ['drag-node'],
  },
  defaultEdge: {
    type: 'polyline',
    /* you can configure the global edge style as following lines */
    // style: {
    //   stroke: '#F6BD16',
    // },
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
  // edgeStateStyles: {
  //   // edge style of active state
  //   active: {
  //     opacity: 0.5,
  //     stroke: '#f00'
  //   },
  //   // edge style of selected state
  //   selected: {
  //     stroke: '#ff0'
  //     lineWidth: 3,
  //   },
  // },
});

graph.data(data);
graph.render();

graph.on('edge:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('edge:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

graph.on('edge:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});
graph.on('canvas:click', (evt) => {
  graph.getEdges().forEach((edge) => {
    graph.clearItemStates(edge);
  });
});
`,title:{zh:"\u6298\u7EBF 1",en:"Polyline 1"},filename:"polyline1.js",isNew:!1},{id:"polyline2",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*CA7oQJIkIl8AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * Built-in polyline edge with configurations
 * by \u5341\u543E
 */

const data = {
  nodes: [
    {
      id: '2',
      x: 150,
      y: 150,
    },
    {
      id: '3',
      x: 350,
      y: 250,
    },
  ],
  edges: [
    {
      source: '2',
      target: '3',
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  /* translate the graph to align the canvas's center, support by v3.5.1 */
  fitCenter: true,
  modes: {
    /* behavior */
    default: ['drag-node'],
  },
  defaultEdge: {
    type: 'polyline',
    /* configure the bending radius and min distance to the end nodes */
    style: {
      radius: 10,
      offset: 30,
      endArrow: true,
      /* and other styles */
      // stroke: '#F6BD16',
    },
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
  // edgeStateStyles: {
  //   // edge style of active state
  //   active: {
  //     opacity: 0.5,
  //     stroke: '#f00'
  //   },
  //   // edge style of selected state
  //   selected: {
  //     stroke: '#ff0'
  //     lineWidth: 3,
  //   },
  // },
});

graph.data(data);
graph.render();

graph.on('edge:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('edge:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

graph.on('edge:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});
graph.on('canvas:click', (evt) => {
  graph.getEdges().forEach((edge) => {
    graph.clearItemStates(edge);
  });
});
`,title:{zh:"\u6298\u7EBF 2",en:"Polyline 2"},filename:"polyline2.js",isNew:!1},{id:"polyline3",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*E-MJQqf9mSUAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * Usage of built-in polyline edge with controlPoints
 * by \u5341\u543E
 */

const data = {
  nodes: [
    {
      id: '4',
      x: 150,
      y: 100,
    },
    {
      id: '5',
      x: 350,
      y: 250,
    },
  ],
  edges: [
    {
      source: '4',
      target: '5',
      // assign the control points to control the bending positions
      controlPoints: [
        {
          x: 260,
          y: 80,
        },
        {
          x: 320,
          y: 50,
        },
        {
          x: 390,
          y: 110,
        },
        {
          x: 420,
          y: 110,
        },
        {
          x: 420,
          y: 140,
        },
      ],
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  // make the edge link to the centers of the end nodes
  linkCenter: true,
  modes: {
    // behavior
    default: ['drag-node'],
  },
  defaultEdge: {
    type: 'polyline',
    /* you can configure the global edge style as following lines */
    // style: {
    //   stroke: '#F6BD16',
    // },
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
  // edgeStateStyles: {
  //   // edge style of active state
  //   active: {
  //     opacity: 0.5,
  //     stroke: '#f00'
  //   },
  //   // edge style of selected state
  //   selected: {
  //     stroke: '#ff0'
  //     lineWidth: 3,
  //   },
  // },
});

graph.data(data);
graph.render();

graph.on('edge:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('edge:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

graph.on('edge:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});
graph.on('canvas:click', (evt) => {
  graph.getEdges().forEach((edge) => {
    graph.clearItemStates(edge);
  });
});
`,title:{zh:"\u6298\u7EBF 3",en:"Polyline 3"},filename:"polyline3.js",isNew:!1},{id:"cubic1",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*UO_sQp0XftMAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * The usage of cubic edge
 *  **/

G6.registerNode(
  'my-rect',
  {
    getAnchorPoints: function getAnchorPoints() {
      return [
        [0.5, 0],
        [0.5, 1],
      ];
    },
  },
  'rect',
);

const data = {
  nodes: [
    {
      id: 'node0',
      x: 200,
      y: 10,
      size: 20,
    },
    {
      id: 'node1',
      x: 200,
      y: 50,
      label: '1222',
      type: 'my-rect',
    },
    {
      id: 'node2',
      x: 150,
      y: 150,
      type: 'my-rect',
    },
    {
      id: 'node3',
      x: 250,
      y: 150,
      type: 'my-rect',
    },
    {
      id: 'node4',
      x: 200,
      y: 250,
      type: 'my-rect',
    },
  ],
  edges: [
    {
      source: 'node0',
      target: 'node1',
    },
    {
      source: 'node1',
      target: 'node2',
    },
    {
      source: 'node1',
      target: 'node3',
    },
    {
      source: 'node2',
      target: 'node4',
    },
    {
      source: 'node3',
      target: 'node4',
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    default: ['drag-canvas'],
  },
  defaultEdge: {
    type: 'cubic-vertical',
    /* you can configure the global edge style as following lines */
    // style: {
    //   stroke: '#F6BD16',
    // },
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
  // edgeStateStyles: {
  //   // edge style of active state
  //   active: {
  //     opacity: 0.5,
  //     stroke: '#f00'
  //   },
  //   // edge style of selected state
  //   selected: {
  //     stroke: '#ff0'
  //     lineWidth: 3,
  //   },
  // },
});
graph.data(data);
graph.render();

graph.on('edge:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('edge:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

graph.on('edge:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});
graph.on('canvas:click', (evt) => {
  graph.getEdges().forEach((edge) => {
    graph.clearItemStates(edge);
  });
});
`,title:{zh:"\u4E09\u6B21\u8D1D\u585E\u5C14\u66F2\u7EBF-\u5782\u76F4",en:"Vertical Cubic"},filename:"cubic1.js",isNew:!1},{id:"cubic2",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*LxFySJ-uvhMAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * The usage of cubic edge
 *
 *  **/
const data = {
  nodes: [
    {
      id: 'node5',
      x: 150,
      y: 200,
      label: '5',
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
    },
    {
      id: 'node6',
      x: 300,
      y: 150,
      label: '6',
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
    },
    {
      id: 'node7',
      x: 300,
      y: 250,
      label: '7',
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
    },
  ],
  edges: [
    {
      source: 'node5',
      target: 'node6',
      type: 'cubic-horizontal',
    },
    {
      source: 'node5',
      target: 'node7',
      type: 'cubic-horizontal',
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    default: ['drag-canvas'],
  },
  defaultEdge: {
    type: 'cubic-horizontal',
    /* you can configure the global edge style as following lines */
    // style: {
    //   stroke: '#F6BD16',
    // },
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
  // edgeStateStyles: {
  //   // edge style of active state
  //   active: {
  //     opacity: 0.5,
  //     stroke: '#f00'
  //   },
  //   // edge style of selected state
  //   selected: {
  //     stroke: '#ff0'
  //     lineWidth: 3,
  //   },
  // },
});
graph.data(data);
graph.render();

graph.on('edge:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('edge:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

graph.on('edge:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});
graph.on('canvas:click', (evt) => {
  graph.getEdges().forEach((edge) => {
    graph.clearItemStates(edge);
  });
});
`,title:{zh:"\u4E09\u6B21\u8D1D\u585E\u5C14\u66F2\u7EBF-\u6C34\u5E73",en:"Horizontal Cubic"},filename:"cubic2.js",isNew:!1},{id:"arc",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*xkK6QoNUszgAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * The usage of arc edge
 * by Shiwu
 */

const data = {
  nodes: [
    {
      id: '0',
      x: 150,
      y: 50,
    },
    {
      id: '1',
      x: 350,
      y: 250,
    },
  ],
  edges: [
    // Built-in arc edges
    {
      id: 'edge0',
      source: '0',
      target: '1',
      label: 'curveOffset = 20',
      curveOffset: 20,
    },
    {
      id: 'edge1',
      source: '0',
      target: '1',
      label: 'curveOffset = 50', // the bending degree
      curveOffset: 50,
    },
    {
      id: 'edge2',
      source: '0',
      target: '1',
      label: 'curveOffset = -50', // the bending degree
      curveOffset: -50,
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    // \u652F\u6301\u7684 behavior
    default: ['drag-node'],
  },
  defaultEdge: {
    type: 'arc',
    /* you can configure the global edge style as following lines */
    // style: {
    //   stroke: '#F6BD16',
    // },
    labelCfg: {
      autoRotate: true,
      refY: -10,
    },
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
  // edgeStateStyles: {
  //   // edge style of active state
  //   active: {
  //     opacity: 0.5,
  //     stroke: '#f00'
  //   },
  //   // edge style of selected state
  //   selected: {
  //     stroke: '#ff0'
  //     lineWidth: 3,
  //   },
  // },
});

graph.data(data);
graph.render();

graph.on('edge:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('edge:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

graph.on('edge:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});
graph.on('canvas:click', (evt) => {
  graph.getEdges().forEach((edge) => {
    graph.clearItemStates(edge);
  });
});
`,title:{zh:"\u5F27\u7EBF",en:"Arc"},filename:"arc.js",isNew:!1},{id:"loop",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*W8wxRJk_q8wAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      x: 150,
      y: 150,
    },
    {
      id: '1',
      x: 350,
      y: 150,
    },
  ],
  edges: [
    // \u5185\u7F6E loop
    {
      source: '0',
      target: '0',
    },
    {
      source: '1',
      target: '1',
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center
  fitCenter: true,
  modes: {
    // \u652F\u6301\u7684 behavior
    default: ['drag-node'],
  },
  defaultEdge: {
    type: 'loop',
    /* you can configure the global edge style as following lines */
    style: {
      // stroke: '#F6BD16',
      endArrow: {
        path: 'M 0,0 L 20,10 L 20,-10 Z',
        fill: '#eee',
      },
    },
    // \u66F4\u591A\u5173\u4E8E loop \u7684\u914D\u7F6E\u8BF7\u53C2\u8003http://antv.alipay.com/zh/docs/manual/middle/elements/edges/loop/#%E8%87%AA%E7%8E%AF%E7%89%B9%E6%AE%8A%E9%85%8D%E7%BD%AE-loopcfg
    loopCfg: {
      position: 'top',
    },
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
  // edgeStateStyles: {
  //   // edge style of active state
  //   active: {
  //     opacity: 0.5,
  //     stroke: '#f00'
  //   },
  //   // edge style of selected state
  //   selected: {
  //     stroke: '#ff0'
  //     lineWidth: 3,
  //   },
  // },
});

// \u9700\u8981\u7B49 G 4.0 \u5C40\u90E8\u6E32\u67D3\u5B8C\u5584\u540E\uFF0C\u5C31\u4E0D\u7528\u4E34\u65F6\u5173\u95ED\u4E86
const canvas = graph.get('canvas');
canvas.set('localRefresh', false);

graph.data(data);
graph.render();

graph.on('edge:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('edge:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

graph.on('edge:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});
graph.on('canvas:click', (evt) => {
  graph.getEdges().forEach((edge) => {
    graph.clearItemStates(edge);
  });
});
`,title:{zh:"\u81EA\u73AF\u8FB9",en:"Loop"},filename:"loop.js",isNew:!1}],icon:"",id:"defaultEdges",title:{en:"Built-in Edges",zh:"\u5185\u7F6E\u8FB9"},childrenKey:"demos",order:1},{demos:[{id:"circle",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Rvx9SYSHGsIAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: 'node1',
      x: 250,
      y: 150,
      comboId: 'combo',
    },
    {
      id: 'node2',
      x: 350,
      y: 150,
      comboId: 'combo',
    },
    {
      id: 'node3',
      x: 250,
      y: 300,
      comboId: 'combo2',
    },
    {
      id: 'node4',
      x: 450,
      y: 300,
      comboId: 'combo2',
    },
  ],
  combos: [
    {
      id: 'combo',
      label: 'Combo',
    },
    {
      id: 'combo2',
      label: 'with substitute icon while collapsed',
      collapsed: true,
      collapsedSubstituteIcon: {
        show: true,
        img: 'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IEQFS5VtXX8AAAAAAAAAAABkARQnAQ',
        width: 72,
        height: 72
      }
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos
  groupByTypes: false,
  modes: {
    default: ['drag-canvas', 'drag-node', 'drag-combo', 'collapse-expand-combo'],
  },
  defaultCombo: {
    type: 'circle',
    /* style for the keyShape */
    // style: {
    //   lineWidth: 1,
    // },
    labelCfg: {
      /* label's offset to the keyShape */
      // refY: 10,
      /* label's position, options: center, top, bottom, left, right */
      position: 'top',
      /* label's style */
      // style: {
      //   fontSize: 18,
      // },
    },
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
  /* you can extend it or override it as you want */
  // comboStateStyles: {
  //   active: {
  //     fill: '#f00',
  //     opacity: 0.5
  //   },
  // },
});

graph.data(data);
graph.render();

graph.on('combo:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('combo:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});
graph.on('combo:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});
graph.on('canvas:click', (evt) => {
  graph.getCombos().forEach((combo) => {
    graph.clearItemStates(combo);
  });
});
`,title:"\u5706\u5F62",filename:"circle.js",isNew:!1},{id:"rect",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*qvmVTZc-iNcAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: 'node1',
      x: 250,
      y: 150,
      comboId: 'combo',
    },
    {
      id: 'node2',
      x: 350,
      y: 150,
      comboId: 'combo',
    },
    {
      id: 'node3',
      x: 250,
      y: 300,
      comboId: 'combo2',
    },
    {
      id: 'node4',
      x: 450,
      y: 300,
      comboId: 'combo2',
    },
  ],
  combos: [
    {
      id: 'combo',
      label: 'Combo',
    },
    {
      id: 'combo2',
      label: 'with substitute icon while collapsed',
      collapsed: true,
      collapsedSubstituteIcon: {
        show: true,
        img: 'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IEQFS5VtXX8AAAAAAAAAAABkARQnAQ',
        width: 72,
        height: 72
      }
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos
  groupByTypes: false,
  modes: {
    default: ['drag-canvas', 'drag-node', 'drag-combo', 'collapse-expand-combo'],
  },
  defaultCombo: {
    type: 'rect',
    /* The minimum size of the combo. combo \u6700\u5C0F\u5927\u5C0F */
    size: [50, 50],
    /* style for the keyShape */
    // style: {
    //   lineWidth: 1,
    // },
    labelCfg: {
      /* label's offset to the keyShape */
      // refY: 10,
      /* label's position, options: center, top, bottom, left, right */
      position: 'top',
      /* label's style */
      // style: {
      //   fontSize: 18,
      // },
    },
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
  /* you can extend it or override it as you want */
  // comboStateStyles: {
  //   active: {
  //     fill: '#f00',
  //     opacity: 0.5
  //   },
  // },
});

graph.data(data);
graph.render();

graph.on('combo:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('combo:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});
graph.on('combo:click', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'selected', true);
});
graph.on('canvas:click', (evt) => {
  graph.getCombos().forEach((combo) => {
    graph.clearItemStates(combo);
  });
});
`,title:"\u77E9\u5F62",filename:"rect.js",isNew:!1}],icon:"",id:"defaultCombos",title:{en:"Built-in Combos",zh:"\u5185\u7F6E Combo"},childrenKey:"demos",order:2},{demos:[{id:"built-in-arrows",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*mGusTo9FcCYAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * The usage of arrows
 * by Shiwu
 */

const data = {
  nodes: [
    {
      id: '0',
      x: 150,
      y: 50,
    },
    {
      id: '1',
      x: 350,
      y: 50,
    },
    {
      id: '2',
      x: 150,
      y: 100,
    },
    {
      id: '3',
      x: 350,
      y: 100,
    },
    {
      id: '4',
      x: 150,
      y: 150,
    },
    {
      id: '5',
      x: 350,
      y: 150,
    },
    {
      id: '6',
      x: 150,
      y: 200,
    },
    {
      id: '7',
      x: 350,
      y: 200,
    },
    {
      id: '8',
      x: 150,
      y: 250,
    },
    {
      id: '9',
      x: 350,
      y: 250,
    },
    {
      id: '10',
      x: 150,
      y: 300,
    },
    {
      id: '11',
      x: 350,
      y: 300,
    },
    {
      id: '12',
      x: 150,
      y: 350,
    },
    {
      id: '13',
      x: 350,
      y: 350,
    },
    {
      id: '14',
      x: 150,
      y: 400,
    },
    {
      id: '15',
      x: 350,
      y: 400,
    },
  ],
  edges: [
    {
      id: 'edge0',
      source: '0',
      target: '1',
      label: 'default arrow',
      style: {
        endArrow: true,
      },
    },
    {
      id: 'edge1',
      source: '2',
      target: '3',
      label: 'triangle arrow',
      style: {
        endArrow: {
          path: G6.Arrow.triangle(),
        },
      },
    },
    {
      id: 'edge2',
      source: '4',
      target: '5',
      label: 'vee arrow',
      style: {
        endArrow: {
          path: G6.Arrow.vee(),
        },
      },
    },
    {
      id: 'edge3',
      source: '6',
      target: '7',
      label: 'circle arrow',
      style: {
        endArrow: {
          path: G6.Arrow.circle(5, 3),
          d: 3,
        },
      },
    },
    {
      id: 'edge4',
      source: '8',
      target: '9',
      label: 'diamond arrow',
      style: {
        endArrow: {
          path: G6.Arrow.diamond(10, 10, 3),
          d: 3,
        },
      },
    },
    {
      id: 'edge5',
      source: '10',
      target: '11',
      label: 'rect arrow',
      style: {
        endArrow: {
          path: G6.Arrow.rect(10, 10, 3),
          d: 3,
        },
      },
    },
    {
      id: 'edge6',
      source: '12',
      target: '13',
      label: 'rect arrow 2',
      style: {
        endArrow: {
          path: G6.Arrow.rect(10, 2, 5),
          d: 5,
        },
      },
    },
    {
      id: 'edge7',
      source: '14',
      target: '15',
      label: 'triangleRect arrow',
      style: {
        endArrow: {
          path: G6.Arrow.triangleRect(10, 10, 10, 2, 4),
        },
      },
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
data.edges.forEach((edge) => {
  edge.style.stroke = '#F6BD16';
  console.log(edge.style.endArrow);
  if (edge.id !== 'edge0') edge.style.endArrow.fill = '#F6BD16';
});
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  defaultNode: {
    size: 15,
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  modes: {
    // behaviors
    default: ['drag-node'],
  },
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u9ED8\u8BA4\u548C\u5185\u7F6E\u7BAD\u5934",en:"Default and Built-in Arrows"},filename:"built-in-arrows.js",isNew:!1},{id:"custom-arrows",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*C2ODRb7E9mwAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * The usage of arrows
 * by Shiwu
 */

const data = {
  nodes: [
    {
      id: '0',
      x: 150,
      y: 50,
    },
    {
      id: '1',
      x: 350,
      y: 50,
    },
    {
      id: '2',
      x: 150,
      y: 100,
    },
    {
      id: '3',
      x: 350,
      y: 100,
    },
  ],
  edges: [
    {
      id: 'edge0',
      source: '0',
      target: '1',
      label: 'custom arrow 1',
      style: {
        endArrow: {
          path: 'M 3,-5 L 3,5 L 15,10 L 15,-10 Z',
        },
      },
    },
    {
      id: 'edge1',
      source: '2',
      target: '3',
      label: 'custom arrow 2',
      style: {
        endArrow: {
          path: 'M0,0 L10,4 L14,14 L18,4 L28,0 L18,-4 L14,-14 L10,-4 Z',
        },
      },
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
data.edges.forEach((edge) => {
  edge.style.stroke = '#F6BD16';
  console.log(edge.style.endArrow);
  edge.style.endArrow.fill = '#F6BD16';
});
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  defaultNode: {
    size: 15,
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  modes: {
    // behaviors
    default: ['drag-node'],
  },
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u81EA\u5B9A\u4E49\u7BAD\u5934",en:"Custom Arrows"},filename:"custom-arrows.js",isNew:!1}],icon:"",id:"arrows",title:{en:"Arrow of Edge",zh:"\u8FB9\u7684\u7BAD\u5934"},childrenKey:"demos",order:3},{demos:[{id:"card",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*3cRGRb5nB_UAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

let graph;

const ERROR_COLOR = '#F5222D';
const getNodeConfig = (node) => {
  if (node.nodeError) {
    return {
      basicColor: ERROR_COLOR,
      fontColor: '#FFF',
      borderColor: ERROR_COLOR,
      bgColor: '#E66A6C',
    };
  }
  let config = {
    basicColor: '#5B8FF9',
    fontColor: '#5B8FF9',
    borderColor: '#5B8FF9',
    bgColor: '#C6E5FF',
  };
  switch (node.type) {
    case 'root': {
      config = {
        basicColor: '#E3E6E8',
        fontColor: 'rgba(0,0,0,0.85)',
        borderColor: '#E3E6E8',
        bgColor: '#5b8ff9',
      };
      break;
    }
    default:
      break;
  }
  return config;
};

const COLLAPSE_ICON = function COLLAPSE_ICON(x, y, r) {
  return [
    ['M', x - r, y],
    ['a', r, r, 0, 1, 0, r * 2, 0],
    ['a', r, r, 0, 1, 0, -r * 2, 0],
    ['M', x - r + 4, y],
    ['L', x - r + 2 * r - 4, y],
  ];
};
const EXPAND_ICON = function EXPAND_ICON(x, y, r) {
  return [
    ['M', x - r, y],
    ['a', r, r, 0, 1, 0, r * 2, 0],
    ['a', r, r, 0, 1, 0, -r * 2, 0],
    ['M', x - r + 4, y],
    ['L', x - r + 2 * r - 4, y],
    ['M', x - r + r, y - r + 4],
    ['L', x, y + r - 4],
  ];
};
const nodeBasicMethod = {
  createNodeBox: (group, config, w, h, isRoot) => {
    /* \u6700\u5916\u9762\u7684\u5927\u77E9\u5F62 */
    const container = group.addShape('rect', {
      attrs: {
        x: 0,
        y: 0,
        width: w,
        height: h,
      },
      name: 'big-rect-shape',
    });
    if (!isRoot) {
      /* \u5DE6\u8FB9\u7684\u5C0F\u5706\u70B9 */
      group.addShape('circle', {
        attrs: {
          x: 3,
          y: h / 2,
          r: 6,
          fill: config.basicColor,
        },
        name: 'left-dot-shape',
      });
    }
    /* \u77E9\u5F62 */
    group.addShape('rect', {
      attrs: {
        x: 3,
        y: 0,
        width: w - 19,
        height: h,
        fill: config.bgColor,
        stroke: config.borderColor,
        radius: 2,
        cursor: 'pointer',
      },
      name: 'rect-shape',
    });

    /* \u5DE6\u8FB9\u7684\u7C97\u7EBF */
    group.addShape('rect', {
      attrs: {
        x: 3,
        y: 0,
        width: 3,
        height: h,
        fill: config.basicColor,
        radius: 1.5,
      },
      name: 'left-border-shape',
    });
    return container;
  },
  /* \u751F\u6210\u6811\u4E0A\u7684 marker */
  createNodeMarker: (group, collapsed, x, y) => {
    group.addShape('circle', {
      attrs: {
        x,
        y,
        r: 13,
        fill: 'rgba(47, 84, 235, 0.05)',
        opacity: 0,
        zIndex: -2,
      },
      name: 'collapse-icon-bg',
    });
    group.addShape('marker', {
      attrs: {
        x,
        y,
        r: 7,
        symbol: collapsed ? EXPAND_ICON : COLLAPSE_ICON,
        stroke: 'rgba(0,0,0,0.25)',
        fill: 'rgba(0,0,0,0)',
        lineWidth: 1,
        cursor: 'pointer',
      },
      name: 'collapse-icon',
    });
  },
  afterDraw: (cfg, group) => {
    /* \u64CD\u4F5C marker \u7684\u80CC\u666F\u8272\u663E\u793A\u9690\u85CF */
    const icon = group.find((element) => element.get('name') === 'collapse-icon');
    if (icon) {
      const bg = group.find((element) => element.get('name') === 'collapse-icon-bg');
      icon.on('mouseenter', () => {
        bg.attr('opacity', 1);
        graph.get('canvas').draw();
      });
      icon.on('mouseleave', () => {
        bg.attr('opacity', 0);
        graph.get('canvas').draw();
      });
    }
    /* ip \u663E\u793A */
    const ipBox = group.find((element) => element.get('name') === 'ip-box');
    if (ipBox) {
      /* ip \u590D\u5236\u7684\u51E0\u4E2A\u5143\u7D20 */
      const ipLine = group.find((element) => element.get('name') === 'ip-cp-line');
      const ipBG = group.find((element) => element.get('name') === 'ip-cp-bg');
      const ipIcon = group.find((element) => element.get('name') === 'ip-cp-icon');
      const ipCPBox = group.find((element) => element.get('name') === 'ip-cp-box');

      const onMouseEnter = () => {
        ipLine.attr('opacity', 1);
        ipBG.attr('opacity', 1);
        ipIcon.attr('opacity', 1);
        graph.get('canvas').draw();
      };
      const onMouseLeave = () => {
        ipLine.attr('opacity', 0);
        ipBG.attr('opacity', 0);
        ipIcon.attr('opacity', 0);
        graph.get('canvas').draw();
      };
      ipBox.on('mouseenter', () => {
        onMouseEnter();
      });
      ipBox.on('mouseleave', () => {
        onMouseLeave();
      });
      ipCPBox.on('mouseenter', () => {
        onMouseEnter();
      });
      ipCPBox.on('mouseleave', () => {
        onMouseLeave();
      });
      ipCPBox.on('click', () => { });
    }
  },
  setState: (name, value, item) => {
    const hasOpacityClass = [
      'ip-cp-line',
      'ip-cp-bg',
      'ip-cp-icon',
      'ip-cp-box',
      'ip-box',
      'collapse-icon-bg',
    ];
    const group = item.getContainer();
    const childrens = group.get('children');
    graph.setAutoPaint(false);
    if (name === 'emptiness') {
      if (value) {
        childrens.forEach((shape) => {
          if (hasOpacityClass.indexOf(shape.get('name')) > -1) {
            return;
          }
          shape.attr('opacity', 0.4);
        });
      } else {
        childrens.forEach((shape) => {
          if (hasOpacityClass.indexOf(shape.get('name')) > -1) {
            return;
          }
          shape.attr('opacity', 1);
        });
      }
    }
    graph.setAutoPaint(true);
  },
};

G6.registerNode('card-node', {
  draw: (cfg, group) => {
    const config = getNodeConfig(cfg);
    const isRoot = cfg.dataType === 'root';
    const nodeError = cfg.nodeError;
    /* the biggest rect */
    const container = nodeBasicMethod.createNodeBox(group, config, 243, 64, isRoot);

    if (cfg.dataType !== 'root') {
      /* the type text */
      group.addShape('text', {
        attrs: {
          text: cfg.dataType,
          x: 3,
          y: -10,
          fontSize: 12,
          textAlign: 'left',
          textBaseline: 'middle',
          fill: 'rgba(0,0,0,0.65)',
        },
        name: 'type-text-shape',
      });
    }

    if (cfg.ip) {
      /* ip start */
      /* ipBox */
      const ipRect = group.addShape('rect', {
        attrs: {
          fill: nodeError ? null : '#FFF',
          stroke: nodeError ? 'rgba(255,255,255,0.65)' : null,
          radius: 2,
          cursor: 'pointer',
        },
        name: 'ip-container-shape',
      });

      /* ip */
      const ipText = group.addShape('text', {
        attrs: {
          text: cfg.ip,
          x: 0,
          y: 19,
          fontSize: 12,
          textAlign: 'left',
          textBaseline: 'middle',
          fill: nodeError ? 'rgba(255,255,255,0.85)' : 'rgba(0,0,0,0.65)',
          cursor: 'pointer',
        },
        name: 'ip-text-shape',
      });

      const ipBBox = ipText.getBBox();
      /* the distance from the IP to the right is 12px */
      ipText.attr({
        x: 224 - 12 - ipBBox.width,
      });
      /* ipBox */
      ipRect.attr({
        x: 224 - 12 - ipBBox.width - 4,
        y: ipBBox.minY - 5,
        width: ipBBox.width + 8,
        height: ipBBox.height + 10,
      });

      /* a transparent shape on the IP for click listener */
      group.addShape('rect', {
        attrs: {
          stroke: '',
          cursor: 'pointer',
          x: 224 - 12 - ipBBox.width - 4,
          y: ipBBox.minY - 5,
          width: ipBBox.width + 8,
          height: ipBBox.height + 10,
          fill: '#fff',
          opacity: 0,
        },
        name: 'ip-box',
      });

      /* copyIpLine */
      group.addShape('rect', {
        attrs: {
          x: 194,
          y: 7,
          width: 1,
          height: 24,
          fill: '#E3E6E8',
          opacity: 0,
        },
        name: 'ip-cp-line',
      });
      /* copyIpBG */
      group.addShape('rect', {
        attrs: {
          x: 195,
          y: 8,
          width: 22,
          height: 22,
          fill: '#FFF',
          cursor: 'pointer',
          opacity: 0,
        },
        name: 'ip-cp-bg',
      });
      /* copyIpIcon */
      group.addShape('image', {
        attrs: {
          x: 200,
          y: 13,
          height: 12,
          width: 10,
          img: 'https://os.alipayobjects.com/rmsportal/DFhnQEhHyPjSGYW.png',
          cursor: 'pointer',
          opacity: 0,
        },
        name: 'ip-cp-icon',
      });
      /* a transparent rect on the icon area for click listener */
      group.addShape('rect', {
        attrs: {
          x: 195,
          y: 8,
          width: 22,
          height: 22,
          fill: '#FFF',
          cursor: 'pointer',
          opacity: 0,
        },
        name: 'ip-cp-box',
        tooltip: 'Copy the IP',
      });

      /* ip end */
    }

    /* name */
    group.addShape('text', {
      attrs: {
        text: cfg.name,
        x: 19,
        y: 19,
        fontSize: 14,
        fontWeight: 700,
        textAlign: 'left',
        textBaseline: 'middle',
        fill: config.fontColor,
        cursor: 'pointer',
      },
      name: 'name-text-shape',
    });

    /* the description text */
    group.addShape('text', {
      attrs: {
        text: cfg.keyInfo,
        x: 19,
        y: 45,
        fontSize: 14,
        textAlign: 'left',
        textBaseline: 'middle',
        fill: config.fontColor,
        cursor: 'pointer',
      },
      name: 'bottom-text-shape',
    });

    if (nodeError) {
      group.addShape('text', {
        attrs: {
          x: 191,
          y: 62,
          text: '\u26A0\uFE0F',
          fill: '#000',
          fontSize: 18,
        },
        name: 'error-text-shape',
      });
    }

    const hasChildren = cfg.children && cfg.children.length > 0;
    if (hasChildren) {
      nodeBasicMethod.createNodeMarker(group, cfg.collapsed, 236, 32);
    }
    return container;
  },
  afterDraw: nodeBasicMethod.afterDraw,
  setState: nodeBasicMethod.setState,
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    default: ['drag-node'],
  },
  defaultNode: {
    type: 'card-node',
  },
});

const data = {
  nodes: [
    {
      name: 'cardNodeApp',
      ip: '127.0.0.1',
      nodeError: true,
      dataType: 'root',
      keyInfo: 'this is a card node info',
      x: 100,
      y: 50,
    },
    {
      name: 'cardNodeApp',
      ip: '127.0.0.1',
      nodeError: false,
      dataType: 'subRoot',
      keyInfo: 'this is sub root',
      x: 100,
      y: 150,
    },
    {
      name: 'cardNodeApp',
      ip: '127.0.0.1',
      nodeError: false,
      dataType: 'subRoot',
      keyInfo: 'this is sub root',
      x: 100,
      y: 250,
      children: [
        {
          name: 'sub',
        },
      ],
    },
  ],
  edges: [],
};

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u5361\u7247",en:"Card"},filename:"card.js",isNew:!1},{id:"cardNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*b-g0RoOpI3sAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const ICON_MAP = {
  a: 'https://gw.alipayobjects.com/mdn/rms_8fd2eb/afts/img/A*0HC-SawWYUoAAAAAAAAAAABkARQnAQ',
  b: 'https://gw.alipayobjects.com/mdn/rms_8fd2eb/afts/img/A*sxK0RJ1UhNkAAAAAAAAAAABkARQnAQ',
};

G6.registerNode(
  'card-node',
  {
    drawShape: function drawShape(cfg, group) {
      const color = cfg.error ? '#F4664A' : '#30BF78';
      const r = 2;
      const shape = group.addShape('rect', {
        attrs: {
          x: 0,
          y: 0,
          width: 200,
          height: 60,
          stroke: color,
          radius: r,
        },
        name: 'main-box',
        draggable: true,
      });

      group.addShape('rect', {
        attrs: {
          x: 0,
          y: 0,
          width: 200,
          height: 20,
          fill: color,
          radius: [r, r, 0, 0],
        },
        name: 'title-box',
        draggable: true,
      });

      // left icon
      group.addShape('image', {
        attrs: {
          x: 4,
          y: 2,
          height: 16,
          width: 16,
          cursor: 'pointer',
          img: ICON_MAP[cfg.nodeType || 'app'],
        },
        name: 'node-icon',
      });

      // title text
      group.addShape('text', {
        attrs: {
          textBaseline: 'top',
          y: 2,
          x: 24,
          lineHeight: 20,
          text: cfg.title,
          fill: '#fff',
        },
        name: 'title',
      });

      if (cfg.nodeLevel > 0) {
        group.addShape('marker', {
          attrs: {
            x: 184,
            y: 30,
            r: 6,
            cursor: 'pointer',
            symbol: cfg.collapse ? G6.Marker.expand : G6.Marker.collapse,
            stroke: '#666',
            lineWidth: 1,
          },
          name: 'collapse-icon',
        });
      }

      // The content list
      cfg.panels.forEach((item, index) => {
        // name text
        group.addShape('text', {
          attrs: {
            textBaseline: 'top',
            y: 25,
            x: 24 + index * 60,
            lineHeight: 20,
            text: item.title,
            fill: 'rgba(0,0,0, 0.4)',
          },
          name: \`index-title-\${index}\`,
        });

        // value text
        group.addShape('text', {
          attrs: {
            textBaseline: 'top',
            y: 42,
            x: 24 + index * 60,
            lineHeight: 20,
            text: item.value,
            fill: '#595959',
          },
          name: \`index-title-\${index}\`,
        });
      });
      return shape;
    },
  },
  'single-node',
);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  defaultNode: {
    type: 'card-node',
  },
  fitView: true,
});

const data = {
  nodes: [
    {
      title: 'node1',
      error: true,
      nodeType: 'a',
      id: 'node1',
      nodeLevel: 2,
      panels: [
        { title: '\u6210\u529F\u7387', value: '11%' },
        { title: '\u8017\u65F6', value: '111' },
        { title: '\u9519\u8BEF\u6570', value: '111' },
      ],
      x: 100,
      y: 100,
    },
    {
      title: 'node2',
      error: false,
      nodeType: 'b',
      id: 'node2',
      nodeLevel: 0,
      panels: [
        { title: '\u6210\u529F\u7387', value: '11%' },
        { title: '\u8017\u65F6', value: '111' },
        { title: '\u9519\u8BEF\u6570', value: '111' },
      ],
      x: 100,
      y: 200,
    },
    {
      title: 'node3',
      error: false,
      nodeType: 'a',
      id: 'node3',
      nodeLevel: 3,
      panels: [
        { title: '\u6210\u529F\u7387', value: '11%' },
        { title: '\u8017\u65F6', value: '111' },
        { title: '\u9519\u8BEF\u6570', value: '111' },
      ],
      collapse: true,
      x: 100,
      y: 300,
    },
  ],
};

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u5361\u7247 2",en:"Card 2"},filename:"cardNode.js",isNew:!1},{id:"jsxNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*NcHWTKo3sEoAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

/**
 *  Custom a JSX node
 *  by Dominic Ming
 *
 */

G6.registerNode(
  'rect-jsx',
  (cfg) => \`
    <group>
      <rect>
        <rect style={{
          width: 150,
          height: 20,
          fill: \${cfg.color},
          radius: [6, 6, 0, 0],
          cursor: 'move'\uFF0C
          stroke: \${cfg.color}
        }} draggable="true">
          <text style={{
            marginTop: 2,
            marginLeft: 75,
            textAlign: 'center',
            fontWeight: 'bold',
            fill: '#fff' }}>{{label}}</text>
        </rect>
        <rect style={{
          width: 150,
          height: 55,
          stroke: \${cfg.color},
          fill: #ffffff,
          radius: [0, 0, 6, 6],
        }}>
          <text style={{ marginTop: 5, marginLeft: 3, fill: '#333', marginLeft: 4 }}>\u63CF\u8FF0: {{description}}</text>
          <text style={{ marginTop: 10, marginLeft: 3, fill: '#333', marginLeft: 4 }}>\u521B\u5EFA\u8005: {{meta.creatorName}}</text>
        </rect>
      </rect>
      <circle style={{
        stroke: \${cfg.color},
        r: 10,
        fill: '#fff',
        marginLeft: 75,
        cursor: 'pointer'
      }} name="circle">
        <image style={{ img: 'https://gw.alipayobjects.com/zos/antfincdn/FLrTNDvlna/antv.png', width: 12, height: 12,  marginLeft: 70,  marginTop: -5 }} />
      </circle>
    </group>\`,
);

const data = {
  nodes: [
    {
      x: 150,
      y: 150,
      description: 'ant_type_name_...',
      label: 'Type / ReferType',
      color: '#2196f3',
      meta: {
        creatorName: 'a_creator',
      },
      id: 'node1',
      type: 'rect-jsx',
    },
    {
      x: 350,
      y: 150,
      description: 'node2_name...',
      label: 'JSX Node',
      color: '#2196f3',
      meta: {
        creatorName: 'a_creator',
      },
      id: 'node2',
      type: 'rect-jsx',
    },
  ],
  edges: [{ source: 'node1', target: 'node2' }],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    default: ['drag-node', 'zoom-canvas'],
  },
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u4F7F\u7528 JSX \u81EA\u5B9A\u4E49\u8282\u70B9",en:"Custom Node with JSX"},filename:"jsxNode.js",isNew:!1},{id:"jsxNodeWithAnimate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*XfMbSZSrlREAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

/**
 *  Custom a xml node
 *  by Dominic Ming
 *
 */

G6.registerNode('rect-xml', {
  jsx: (cfg) => \`
    <group>
      <rect style={{
        width: 200,
        height: 75,
      }}>
        <rect style={{
          width: 150,
          height: 20,
          fill: \${cfg.color},
          radius: [6, 6, 0, 0],
          cursor: 'move'\uFF0C
          stroke: \${cfg.color}
        }} draggable="true">
          <text style={{
            marginTop: 2,
            marginLeft: 75,
            textAlign: 'center',
            fontWeight: 'bold',
            fill: '#fff' }}>{{label}}</text>
        </rect>
        <rect style={{
          width: 150,
          height: 55,
          stroke: \${cfg.color},
          fill: #ffffff,
          radius: [0, 0, 6, 6],
        }}>
          <text style={{ marginTop: 5, marginLeft: 3, fill: '#333', marginLeft: 4 }}>\u63CF\u8FF0: {{description}}</text>
          <text style={{ marginTop: 10, marginLeft: 3, fill: '#333', marginLeft: 4 }}>\u521B\u5EFA\u8005: {{meta.creatorName}}</text>
        </rect>
      </rect>
      <circle style={{
        stroke: \${cfg.color},
        r: 10,
        fill: '#fff',
        marginLeft: 75,
        cursor: 'pointer'
      }} name="circle">
        <image name="img" style={{ img: 'https://gw.alipayobjects.com/zos/antfincdn/FLrTNDvlna/antv.png', width: 12, height: 12,  marginLeft: 69,  marginTop: -5 }} />
      </circle>
    </group>
  \`,
  afterDraw: (cfg, group) => {
    console.log(group);
    const img = group.findAllByName('img');
    if (img[0]) {
      img[0].animate(
        (ratio) => {
          return {
            opacity: Math.abs(0.5 - ratio),
          };
        },
        {
          duration: 3000,
          repeat: true,
        },
      );
    }
  },
});

const data = {
  nodes: [
    {
      x: 150,
      y: 150,
      description: 'ant_type_name_...',
      label: 'Type / ReferType',
      color: '#2196f3',
      meta: {
        creatorName: 'a_creator',
      },
      id: 'test',
      type: 'rect-xml',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u4F7F\u7528 JSX \u81EA\u5B9A\u4E49\u8282\u70B9(\u5E26\u52A8\u753B)",en:"Custom Node with JSX and animation"},filename:"jsxNodeWithAnimate.js",isNew:!1},{id:"lineChartNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ZmavSL0dRJIAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';
import Chart from '@antv/chart-node-g6';

G6.registerNode(
  'node-with-line',
  {
    draw(cfg, group) {
      const keyShape = group.addShape('rect', {
        attrs: {
          x: 0,
          y: 0,
          width: 400,
          height: 200,
          fill: cfg.style.fill,
        },
      });

      group.addShape('rect', {
        attrs: {
          x: 0,
          y: 0,
          width: 400,
          height: 40,
          fill: '#69c0ff',
        },
      });

      group.addShape('text', {
        attrs: {
          text: '\u6D4F\u89C8\u7533\u8BF7\u5B8C\u6210\u7387',
          x: 10,
          y: 25,
          fontSize: 14,
          fill: '#fff',
        },
      });

      group.addShape('text', {
        attrs: {
          text: '2020-06-07 ~ 2020-06-14 | \u5747\u503C',
          x: 20,
          y: 70,
          fontSize: 13,
          fill: '#8c8c8c',
        },
      });

      group.addShape('text', {
        attrs: {
          text: '8.8%',
          x: 20,
          y: 110,
          fontSize: 30,
          fill: '#000',
        },
      });

      // \u5B9E\u9645\u5F00\u53D1\u4E2D\u628A (Chart || window.Chart) \u6362\u6210 Chart
      // Replace (Chart || window.Chart) by Chart in your project
      const view = new (Chart || window.Chart)({
        group,
        padding: 5,
        width: 360,
        height: 70,
        x: 20,
        y: 100,
      });

      view.data(cfg.trendData);

      view.line().position('genre*sold').color('#9AD681').shape('dash');

      view.legend('genre', false);

      view.axis('sold', false);

      view.render();

      return keyShape;
    },
    update: null,
  },
  'single-node',
);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;

const trendData = [
  { genre: 'Sports', sold: 275 },
  { genre: 'Strategy', sold: 115 },
  { genre: 'Action', sold: 120 },
  { genre: 'Shooter', sold: 350 },
  { genre: 'Other', sold: 150 },
];

const data = {
  nodes: [
    {
      id: 'node0',
      trendData,
      x: 10,
      y: 100,
    },
    {
      id: 'node1',
      trendData,
      x: 550,
      y: 100,
    },
  ],
  edges: [{ source: 'node0', target: 'node1' }],
};

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitView: true,
  linkCenter: true,
  modes: {
    default: ['zoom-canvas', 'drag-canvas', 'drag-node'],
  },
  defaultNode: {
    type: 'node-with-line',
    style: {
      fill: '#e6f7ff',
    },
  },
  nodeStateStyles: {
    hover: {
      stroke: '#b37feb',
    },
  },
  defaultEdge: {
    style: {
      lineWidth: 5,
      stroke: '#666',
    },
  },
});

graph.data(data);
graph.render();

graph.on('node:mouseenter', (evt) => {
  graph.setItemState(evt.item, 'hover', true);
});

graph.on('node:mouseleave', (evt) => {
  graph.setItemState(evt.item, 'hover', false);
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u8282\u70B9\u4E2D\u5D4C\u5165 G2 \u7684\u6298\u7EBF\u56FE",en:"G2 Line Node"},filename:"lineChartNode.js",isNew:!1},{id:"intervalChartNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*D00uR5wb__kAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import Chart from '@antv/chart-node-g6';

G6.registerNode(
  'node-with-interval',
  {
    draw(cfg, group) {
      const keyShape = group.addShape('rect', {
        attrs: {
          x: 0,
          y: 0,
          width: 400,
          height: 200,
          fill: cfg.style.fill,
        },
      });

      group.addShape('rect', {
        attrs: {
          x: 0,
          y: 0,
          width: 400,
          height: 40,
          fill: '#69c0ff',
        },
      });

      group.addShape('text', {
        attrs: {
          text: '\u6D4F\u89C8\u7533\u8BF7\u5B8C\u6210\u7387',
          x: 10,
          y: 25,
          fontSize: 14,
          fill: '#fff',
        },
      });

      group.addShape('text', {
        attrs: {
          text: '2020-06-07 ~ 2020-06-14 | \u5747\u503C',
          x: 20,
          y: 70,
          fontSize: 13,
          fill: '#8c8c8c',
        },
      });

      group.addShape('text', {
        attrs: {
          text: '8.8%',
          x: 20,
          y: 110,
          fontSize: 30,
          fill: '#000',
        },
      });

      // \u5B9E\u9645\u5F00\u53D1\u4E2D\u628A (Chart || window.Chart) \u6362\u6210 Chart
      // Replace (Chart || window.Chart) by Chart in your project
      const view = new (Chart || window.Chart)({
        group,
        padding: 1,
        width: 360,
        height: 70,
        x: 20,
        y: 100,
      });

      view.data(cfg.trendData);

      view.interval().position('genre*sold').color('genre');

      view.legend('genre', false);

      view.scale({
        genre: {
          alias: '\u6E38\u620F\u79CD\u7C7B', // \u5217\u5B9A\u4E49\uFF0C\u5B9A\u4E49\u8BE5\u5C5E\u6027\u663E\u793A\u7684\u522B\u540D
        },
        sold: {
          alias: '\u9500\u552E\u91CF',
        },
      });

      view.axis('sold', false);

      // \u6781\u5750\u6807\u4E0B\u7684\u67F1\u72B6\u56FE
      // view.coordinate('polar');

      view.render();

      keyShape.set('intervalView', view);

      return keyShape;
    },
    update(cfg, item) {
      const keyShape = item.getKeyShape();
      const view = keyShape.get('intervalView');
      view.changeData(cfg.trendData);
    },
  },
  'single-node',
);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;

const trendData = [
  { genre: 'Sports', sold: 275 },
  { genre: 'Strategy', sold: 115 },
  { genre: 'Action', sold: 120 },
  { genre: 'Shooter', sold: 350 },
  { genre: 'Other', sold: 150 },
];

const data = {
  nodes: [
    {
      id: 'node0',
      trendData,
      x: 10,
      y: 100,
    },
    {
      id: 'node1',
      trendData,
      x: 550,
      y: 100,
    },
  ],
  edges: [{ source: 'node0', target: 'node1' }],
};

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitView: true,
  linkCenter: true,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  defaultNode: {
    type: 'node-with-interval',
    style: {
      fill: '#e6f7ff',
    },
  },
  nodeStateStyles: {
    hover: {
      stroke: '#b37feb',
    },
  },
  defaultEdge: {
    style: {
      lineWidth: 5,
      stroke: '#666',
    },
  },
});

graph.data(data);
graph.render();

// \u70B9\u51FB\u8282\u70B9\uFF0C\u66F4\u65B0\u67F1\u72B6\u56FE\u6570\u636E
graph.on('node:click', (evt) => {
  const newTrendData = [
    { genre: 'Sports', sold: 75 },
    { genre: 'Strategy', sold: 115 },
    { genre: 'Action', sold: 320 },
    { genre: 'Shooter', sold: 150 },
    { genre: 'Other', sold: 250 },
  ];

  graph.updateItem(evt.item, {
    trendData: newTrendData,
  });
});

graph.on('node:mouseenter', (evt) => {
  graph.setItemState(evt.item, 'hover', true);
});

graph.on('node:mouseleave', (evt) => {
  graph.setItemState(evt.item, 'hover', false);
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u8282\u70B9\u4E2D\u5D4C\u5165 G2 \u7684\u67F1\u72B6\u56FE\uFF0C\u70B9\u51FB\u8282\u70B9\u53EF\u5207\u6362\u6570\u636E",en:"G2 Interval Node"},filename:"intervalChartNode.js",isNew:!1},{id:"pointChartNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*K7r7S7x-YhcAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';
import Chart from '@antv/chart-node-g6';

G6.registerNode(
  'node-with-point',
  {
    draw(cfg, group) {
      const keyShape = group.addShape('rect', {
        attrs: {
          x: 0,
          y: 0,
          width: 400,
          height: 200,
          fill: cfg.style.fill,
        },
      });

      group.addShape('rect', {
        attrs: {
          x: 0,
          y: 0,
          width: 400,
          height: 40,
          fill: '#69c0ff',
        },
      });

      group.addShape('text', {
        attrs: {
          text: '\u6D4F\u89C8\u7533\u8BF7\u5B8C\u6210\u7387',
          x: 10,
          y: 25,
          fontSize: 14,
          fill: '#fff',
        },
      });

      group.addShape('text', {
        attrs: {
          text: '2020-06-07 ~ 2020-06-14 | \u5747\u503C',
          x: 20,
          y: 70,
          fontSize: 13,
          fill: '#8c8c8c',
        },
      });

      group.addShape('text', {
        attrs: {
          text: '8.8%',
          x: 20,
          y: 110,
          fontSize: 30,
          fill: '#000',
        },
      });

      const colorMap = {
        Asia: '#1890FF',
        Americas: '#2FC25B',
        Europe: '#FACC14',
        Oceania: '#223273',
      };

      // \u5B9E\u9645\u5F00\u53D1\u4E2D\u628A (Chart || window.Chart) \u6362\u6210 Chart
      // Replace (Chart || window.Chart) by Chart in your project
      const chart = new (Chart || window.Chart)({
        group,
        width: 360,
        height: 70,
        x: 20,
        y: 100,
      });

      chart.data(cfg.trendData);

      chart
        .point()
        .position('GDP*LifeExpectancy')
        .size('Population', [1, 15])
        .color('continent', (val) => {
          return colorMap[val];
        })
        .shape('circle')
        .tooltip('Country*Population*GDP*LifeExpectancy')
        .style('continent', (val) => {
          return {
            lineWidth: 1,
            strokeOpacity: 1,
            fillOpacity: 0.3,
            opacity: 0.65,
            stroke: colorMap[val],
          };
        });

      chart.legend('Population', false);
      chart.axis(false);

      chart.render();

      return keyShape;
    },
    update: null,
  },
  'single-node',
);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;

const trendData = [
  {
    continent: 'Americas',
    Country: 'Argentina',
    LifeExpectancy: 75.32,
    GDP: 12779.37964,
    Population: 40301927,
  },
  {
    continent: 'Americas',
    Country: 'Brazil',
    LifeExpectancy: 72.39,
    GDP: 9065.800825,
    Population: 190010647,
  },
  {
    continent: 'Americas',
    Country: 'Canada',
    LifeExpectancy: 80.653,
    GDP: 36319.23501,
    Population: 33390141,
  },
  {
    continent: 'Americas',
    Country: 'Chile',
    LifeExpectancy: 78.553,
    GDP: 13171.63885,
    Population: 16284741,
  },
  {
    continent: 'Americas',
    Country: 'Colombia',
    LifeExpectancy: 72.889,
    GDP: 7006.580419,
    Population: 44227550,
  },
  {
    continent: 'Americas',
    Country: 'Costa Rica',
    LifeExpectancy: 78.782,
    GDP: 9645.06142,
    Population: 4133884,
  },
  {
    continent: 'Americas',
    Country: 'Cuba',
    LifeExpectancy: 78.273,
    GDP: 8948.102923,
    Population: 11416987,
  },
  {
    continent: 'Americas',
    Country: 'Dominican Republic',
    LifeExpectancy: 72.235,
    GDP: 6025.374752,
    Population: 9319622,
  },
  {
    continent: 'Americas',
    Country: 'Ecuador',
    LifeExpectancy: 74.994,
    GDP: 6873.262326,
    Population: 13755680,
  },
  {
    continent: 'Americas',
    Country: 'El Salvador',
    LifeExpectancy: 71.878,
    GDP: 5728.353514,
    Population: 6939688,
  },
  {
    continent: 'Americas',
    Country: 'Guatemala',
    LifeExpectancy: 70.259,
    GDP: 5186.050003,
    Population: 12572928,
  },
  {
    continent: 'Americas',
    Country: 'Honduras',
    LifeExpectancy: 70.198,
    GDP: 3548.330846,
    Population: 7483763,
  },
  {
    continent: 'Americas',
    Country: 'Jamaica',
    LifeExpectancy: 72.567,
    GDP: 7320.880262,
    Population: 2780132,
  },
  {
    continent: 'Americas',
    Country: 'Mexico',
    LifeExpectancy: 76.195,
    GDP: 11977.57496,
    Population: 108700891,
  },
  {
    continent: 'Americas',
    Country: 'Nicaragua',
    LifeExpectancy: 72.899,
    GDP: 2749.320965,
    Population: 5675356,
  },
  {
    continent: 'Americas',
    Country: 'Panama',
    LifeExpectancy: 75.537,
    GDP: 9809.185636,
    Population: 3242173,
  },
  {
    continent: 'Americas',
    Country: 'Paraguay',
    LifeExpectancy: 71.752,
    GDP: 4172.838464,
    Population: 6667147,
  },
  {
    continent: 'Americas',
    Country: 'Peru',
    LifeExpectancy: 71.421,
    GDP: 7408.905561,
    Population: 28674757,
  },
  {
    continent: 'Americas',
    Country: 'Puerto Rico',
    LifeExpectancy: 78.746,
    GDP: 19328.70901,
    Population: 3942491,
  },
  {
    continent: 'Americas',
    Country: 'Trinidad and Tobago',
    LifeExpectancy: 69.819,
    GDP: 18008.50924,
    Population: 1056608,
  },
  {
    continent: 'Americas',
    Country: 'United States',
    LifeExpectancy: 78.242,
    GDP: 42951.65309,
    Population: 301139947,
  },
  {
    continent: 'Americas',
    Country: 'Uruguay',
    LifeExpectancy: 76.384,
    GDP: 10611.46299,
    Population: 3447496,
  },
  {
    continent: 'Americas',
    Country: 'Venezuela',
    LifeExpectancy: 73.747,
    GDP: 11415.80569,
    Population: 26084662,
  },
  {
    continent: 'Asia',
    Country: 'China',
    LifeExpectancy: 72.961,
    GDP: 4959.114854,
    Population: 1318683096,
  },
  {
    continent: 'Asia',
    Country: 'Hong Kong, China',
    LifeExpectancy: 82.208,
    GDP: 39724.97867,
    Population: 6980412,
  },
  {
    continent: 'Asia',
    Country: 'Japan',
    LifeExpectancy: 82.603,
    GDP: 31656.06806,
    Population: 127467972,
  },
  {
    continent: 'Asia',
    Country: 'Korea, Dem. Rep.',
    LifeExpectancy: 67.297,
    GDP: 1593.06548,
    Population: 23301725,
  },
  {
    continent: 'Asia',
    Country: 'Korea, Rep.',
    LifeExpectancy: 78.623,
    GDP: 23348.13973,
    Population: 49044790,
  },
  {
    continent: 'Europe',
    Country: 'Albania',
    LifeExpectancy: 76.423,
    GDP: 5937.029526,
    Population: 3600523,
  },
  {
    continent: 'Europe',
    Country: 'Austria',
    LifeExpectancy: 79.829,
    GDP: 36126.4927,
    Population: 8199783,
  },
  {
    continent: 'Europe',
    Country: 'Belgium',
    LifeExpectancy: 79.441,
    GDP: 33692.60508,
    Population: 10392226,
  },
  {
    continent: 'Europe',
    Country: 'Bosnia and Herzegovina',
    LifeExpectancy: 74.852,
    GDP: 7446.298803,
    Population: 4552198,
  },
  {
    continent: 'Europe',
    Country: 'Bulgaria',
    LifeExpectancy: 73.005,
    GDP: 10680.79282,
    Population: 7322858,
  },
  {
    continent: 'Europe',
    Country: 'Croatia',
    LifeExpectancy: 75.748,
    GDP: 14619.22272,
    Population: 4493312,
  },
  {
    continent: 'Europe',
    Country: 'Czech Republic',
    LifeExpectancy: 76.486,
    GDP: 22833.30851,
    Population: 10228744,
  },
  {
    continent: 'Europe',
    Country: 'Denmark',
    LifeExpectancy: 78.332,
    GDP: 35278.41874,
    Population: 5468120,
  },
  {
    continent: 'Europe',
    Country: 'Finland',
    LifeExpectancy: 79.313,
    GDP: 33207.0844,
    Population: 5238460,
  },
  {
    continent: 'Europe',
    Country: 'France',
    LifeExpectancy: 80.657,
    GDP: 30470.0167,
    Population: 61083916,
  },
  {
    continent: 'Europe',
    Country: 'Germany',
    LifeExpectancy: 79.406,
    GDP: 32170.37442,
    Population: 82400996,
  },
  {
    continent: 'Europe',
    Country: 'Greece',
    LifeExpectancy: 79.483,
    GDP: 27538.41188,
    Population: 10706290,
  },
  {
    continent: 'Europe',
    Country: 'Hungary',
    LifeExpectancy: 73.338,
    GDP: 18008.94444,
    Population: 9956108,
  },
  {
    continent: 'Europe',
    Country: 'Iceland',
    LifeExpectancy: 81.757,
    GDP: 36180.78919,
    Population: 301931,
  },
  {
    continent: 'Europe',
    Country: 'Ireland',
    LifeExpectancy: 78.885,
    GDP: 40675.99635,
    Population: 4109086,
  },
  {
    continent: 'Europe',
    Country: 'Italy',
    LifeExpectancy: 80.546,
    GDP: 28569.7197,
    Population: 58147733,
  },
  {
    continent: 'Europe',
    Country: 'Montenegro',
    LifeExpectancy: 74.543,
    GDP: 9253.896111,
    Population: 684736,
  },
  {
    continent: 'Europe',
    Country: 'Netherlands',
    LifeExpectancy: 79.762,
    GDP: 36797.93332,
    Population: 16570613,
  },
  {
    continent: 'Europe',
    Country: 'Norway',
    LifeExpectancy: 80.196,
    GDP: 49357.19017,
    Population: 4627926,
  },
  {
    continent: 'Europe',
    Country: 'Poland',
    LifeExpectancy: 75.563,
    GDP: 15389.92468,
    Population: 38518241,
  },
  {
    continent: 'Europe',
    Country: 'Portugal',
    LifeExpectancy: 78.098,
    GDP: 20509.64777,
    Population: 10642836,
  },
  {
    continent: 'Europe',
    Country: 'Romania',
    LifeExpectancy: 72.476,
    GDP: 10808.47561,
    Population: 22276056,
  },
  {
    continent: 'Europe',
    Country: 'Serbia',
    LifeExpectancy: 74.002,
    GDP: 9786.534714,
    Population: 10150265,
  },
  {
    continent: 'Europe',
    Country: 'Slovak Republic',
    LifeExpectancy: 74.663,
    GDP: 18678.31435,
    Population: 5447502,
  },
  {
    continent: 'Europe',
    Country: 'Slovenia',
    LifeExpectancy: 77.926,
    GDP: 25768.25759,
    Population: 2009245,
  },
  {
    continent: 'Europe',
    Country: 'Spain',
    LifeExpectancy: 80.941,
    GDP: 28821.0637,
    Population: 40448191,
  },
  {
    continent: 'Europe',
    Country: 'Sweden',
    LifeExpectancy: 80.884,
    GDP: 33859.74835,
    Population: 9031088,
  },
  {
    continent: 'Europe',
    Country: 'Switzerland',
    LifeExpectancy: 81.701,
    GDP: 37506.41907,
    Population: 7554661,
  },
  {
    continent: 'Europe',
    Country: 'Turkey',
    LifeExpectancy: 71.777,
    GDP: 8458.276384,
    Population: 71158647,
  },
  {
    continent: 'Europe',
    Country: 'United Kingdom',
    LifeExpectancy: 79.425,
    GDP: 33203.26128,
    Population: 60776238,
  },
  {
    continent: 'Oceania',
    Country: 'Australia',
    LifeExpectancy: 81.235,
    GDP: 34435.36744,
    Population: 20434176,
  },
  {
    continent: 'Oceania',
    Country: 'New Zealand',
    LifeExpectancy: 80.204,
    GDP: 25185.00911,
    Population: 4115771,
  },
];

const data = {
  nodes: [
    {
      id: 'node0',
      trendData,
      x: 10,
      y: 100,
    },
    {
      id: 'node1',
      trendData,
      x: 550,
      y: 100,
    },
  ],
  edges: [{ source: 'node0', target: 'node1' }],
};

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitView: true,
  linkCenter: true,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  defaultNode: {
    type: 'node-with-point',
    style: {
      fill: '#e6f7ff',
    },
  },
  defaultEdge: {
    style: {
      stroke: '#666',
      lineWidth: 5,
    },
  },
  defaultEdge: {
    style: {
      lineWidth: 5,
      stroke: '#666',
    },
  },
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u8282\u70B9\u4E2D\u5D4C\u5165 G2 \u7684\u6563\u70B9\u56FE",en:"G2 Point Node"},filename:"pointChartNode.js",isNew:!1},{id:"pieChartNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*wCxXSK4eWPoAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';
import Chart from '@antv/chart-node-g6';

G6.registerNode(
  'node-with-pie',
  {
    draw(cfg, group) {
      const keyShape = group.addShape('circle', {
        attrs: {
          x: 0,
          y: 0,
          r: 100,
          fill: cfg.style.fill,
          stroke: cfg.style.stroke,
          fillOpacity: 0,
        },
      });

      // \u5B9E\u9645\u5F00\u53D1\u4E2D\u628A (Chart || window.Chart) \u6362\u6210 Chart
      // Replace (Chart || window.Chart) by Chart in your project
      const view = new (Chart || window.Chart)({
        group,
        width: 400,
        height: 200,
        x: -200,
        y: -100,
      });

      view.data(cfg.trendData);

      view
        .interval()
        .position('year*population')
        .label('year', {
          offset: -15,
        })
        .color('year')
        .style({
          lineWidth: 1,
          stroke: '#95de64',
          fontSize: 8,
        });

      view.axis(false);

      view.legend(false);

      // \u6781\u5750\u6807\u4E0B\u7684\u67F1\u72B6\u56FE
      view.coordinate('polar');

      view.render();

      keyShape.set('intervalView', view);

      return keyShape;
    },
    update(cfg, item) {
      const keyShape = item.getKeyShape();
      const view = keyShape.get('intervalView');
      view.changeData(cfg.trendData);
    },
  },
  'single-node',
);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;

const trendData1 = [
  { year: '2001', population: 41.8 },
  { year: '2002', population: 38 },
  { year: '2003', population: 33.7 },
  { year: '2004', population: 30.7 },
  { year: '2005', population: 25.8 },
  { year: '2006', population: 31.7 },
  { year: '2007', population: 33 },
  { year: '2008', population: 46 },
  { year: '2009', population: 38.3 },
  { year: '2010', population: 28 },
  { year: '2011', population: 42.5 },
  { year: '2012', population: 30.3 },
];

const trendData2 = [
  { year: '2001', population: 11.8 },
  { year: '2002', population: 28 },
  { year: '2003', population: 43.7 },
  { year: '2004', population: 50.7 },
  { year: '2005', population: 15.8 },
  { year: '2006', population: 21.7 },
  { year: '2007', population: 13 },
  { year: '2008', population: 26 },
  { year: '2009', population: 18.3 },
  { year: '2010', population: 58 },
  { year: '2011', population: 62.5 },
  { year: '2012', population: 10.3 },
];

const data = {
  nodes: [
    {
      id: 'node0',
      trendData: trendData1,
      x: 10,
      y: 100,
    },
    {
      id: 'node1',
      trendData: trendData2,
      x: 550,
      y: 100,
    },
  ],
  edges: [{ source: 'node0', target: 'node1' }],
};

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitView: true,
  linkCenter: true,
  modes: {
    default: ['zoom-canvas', 'drag-canvas', 'drag-node'],
  },
  defaultNode: {
    type: 'node-with-pie',
    style: {
      fill: '#e6f7ff',
    },
  },
  nodeStateStyles: {
    hover: {
      stroke: '#b37feb',
    },
  },
  defaultEdge: {
    style: {
      lineWidth: 5,
      stroke: '#666',
    },
  },
});

graph.data(data);
graph.render();

graph.on('node:mouseenter', (evt) => {
  graph.setItemState(evt.item, 'hover', true);
});

graph.on('node:mouseleave', (evt) => {
  graph.setItemState(evt.item, 'hover', false);
});

window.onresize = () => {
  if (!graph || graph.get('destroyed')) return;
  if (!container || !container.scrollWidth || !container.scrollHeight) return;
  graph.changeSize(container.scrollWidth, container.scrollHeight);
};
`,title:{zh:"\u8282\u70B9\u4E2D\u5D4C\u5165 G2 \u7684\u997C\u56FE",en:"G2 Pie Node"},filename:"pieChartNode.js",isNew:!1},{id:"svgDom",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*VgQlQK1MdbIAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import { useEffect } from 'react';

/**
 *  This demo shows how to register a custom node with SVG DOM shape
 *  by Shiwu
 *
 */

/**
 * Register a node type with DOM
 */
G6.registerNode('dom-node', {
  draw: (cfg, group) => {
    const stroke = cfg.style ? cfg.style.stroke || '#5B8FF9' : '#5B8FF9';
    const shape = group.addShape('dom', {
      attrs: {
        width: cfg.size[0],
        height: cfg.size[1],
        html: \`
        <div id=\${
          cfg.id
        } class='dom-node' style="background-color: #fff; border: 2px solid \${stroke}; border-radius: 5px; width: \${
          cfg.size[0] - 5
        }px; height: \${cfg.size[1] - 5}px; display: flex;">
          <div style="height: 100%; width: 33%; background-color: #CDDDFD">
            <img alt="" style="line-height: 100%; margin-left: 7px;" src="https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Q_FQT6nwEC8AAAAAAAAAAABkARQnAQ" width="20" height="20" />  
          </div>
          <span style="margin:auto; padding:auto; color: #5B8FF9">\${cfg.label}</span>
        </div>
          \`,
      },
      draggable: true,
    });
    return shape;
  },
});

/** \u6570\u636E */
const data = {
  nodes: [
    {
      id: 'node1',
      x: 10,
      y: 100,
      label: 'Homepage',
    },
    {
      id: 'node2',
      x: 200,
      y: 100,
      label: 'Subpage',
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 100;

const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = \`\u7531\u4E8E\u6253\u5305\u95EE\u9898\uFF0C\u672C demo \u7684 111-113 \u884C\u88AB\u6682\u65F6\u6CE8\u91CA\u3002\u9700\u8981\u60A8\u5728\u4EE3\u7801\u680F\u4E2D\u6253\u5F00 111-113 \u884C\u7684\u6CE8\u91CA\u4EE5\u5F97\u5230\u81EA\u5B9A\u4E49 DOM \u8282\u70B9\u6B63\u786E\u7684\u4EA4\u4E92\u3002<br /> Due to the packing problem of the site, we have to note the line 111-113 of this demo temporary. Unnote them to see the result of custom DOM node with interactions please.\`;
container.appendChild(descriptionDiv);

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  renderer: 'svg',
  linkCenter: true,
  defaultNode: {
    type: 'dom-node',
    size: [120, 40],
  },
});

graph.data(data);
graph.render();

// click listener for dom nodes to response the click by changing stroke color
const listener = (dom) => {
  const nodeId = dom.id;
  if (!nodeId) return;
  const node = graph.findById(nodeId);
  let stroke = '';
  if (!node.hasState('selected')) {
    stroke = '#f00';
    graph.setItemState(node, 'selected', true);
  } else {
    stroke = '#5B8FF9';
    graph.setItemState(node, 'selected', false);
  }
  graph.updateItem(nodeId, {
    style: {
      stroke,
    },
  });
};

const bindClickListener = () => {
  const domNodes = document.getElementsByClassName('dom-node');
  for (let i = 0; i < domNodes.length; i++) {
    const dom = domNodes[i];
    // open the following lines pls!
    // dom.addEventListener('click', (e) => {
    //   listener(dom);
    // });
  }
};

bindClickListener();

// after update the item, all the DOMs will be re-rendered
// so the listeners should be rebinded to the new DOMs
graph.on('afterupdateitem', (e) => {
  bindClickListener();
});
graph.on('afterrender', (e) => {
  bindClickListener();
});
// if it is TreeGraph and with default animate:true, you should bind the litsener after animation
// graph.on('afteranimate', (e) => {
//   bindClickListener();
// });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 100);
  };
`,title:{zh:"DOM \u8282\u70B9",en:"Dom Node"},filename:"svgDom.js",isNew:!1},{id:"areaChart",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*YWuhR5ZjZfkAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 *  Custom a area chart node
 *  by Jingxi
 *
 */

/**
 * Register a area chart node
 */
G6.registerNode('area', {
  draw(cfg, group) {
    const baseR = 30;

    // Ref line
    let refR = baseR;
    const refInc = 10;
    for (let i = 0; i < 6; i++) {
      group.addShape('circle', {
        attrs: {
          x: 0,
          y: 0,
          r: (refR += refInc),
          stroke: '#bae7ff',
          lineDash: [4, 4],
        },
        name: 'circle-shape',
      });
    }
    const everyIncAngle = (2 * Math.PI * (360 / 5)) / 360;
    const tempIncValues = [baseR, baseR, baseR, baseR, baseR];
    const allRs = [];
    cfg.details.forEach((cat) => {
      const oneRs = [];
      cat.values.forEach((v, i) => {
        const R = tempIncValues[i] + v * 0.4;
        oneRs.push(R);
        tempIncValues[i] = R;
      });
      allRs.push(oneRs);
    });
    const strokeColors = [
      'rgba(91, 143, 249,1)',
      'rgba(90, 216, 166,1)',
      'rgba(246, 189, 22,1)',
      'rgba(232, 104, 74,1)',
      'rgba(255, 157, 77,1)',
    ];
    const fillColors = [
      'rgba(91, 143, 249,0.5)',
      'rgba(90, 216, 166,0.5)',
      'rgba(246, 189, 22,0.5)',
      'rgba(232, 104, 74,0.5)',
      'rgba(255, 157, 77,0.5)',
    ];

    allRs.reverse().forEach((Rs, index) => {
      let curAngle = 0;
      const poss = [];
      Rs.forEach((r) => {
        const xPos = r * Math.cos(curAngle);
        const yPos = r * Math.sin(curAngle);
        curAngle += everyIncAngle;
        poss.push([xPos, yPos]);
      });
      const Ls = poss.map((p, i) => {
        if (i === 0) {
          return ['M', ...p];
        }
        return ['L', ...p];
      });

      group.addShape('path', {
        attrs: {
          path: [
            ...Ls,
            ['Z'], // close the path
          ],
          stroke: strokeColors[index],
          fill: fillColors[index],
        },
        name: 'path-shape1',
      });
    });
    let nowAngle2 = 0;
    const everyIncAngleCat = (2 * Math.PI * (360 / 5)) / 360;
    for (let i = 0; i < 5; i++) {
      const r = 30 + 60;
      const xPos = r * Math.cos(nowAngle2);
      const yPos = r * Math.sin(nowAngle2);

      group.addShape('path', {
        attrs: {
          path: [
            ['M', 0, 0],
            ['L', xPos, yPos],
          ],
          lineDash: [4, 4],
          stroke: 'darkgray',
        },
        name: 'path-shape2',
      });
      nowAngle2 += everyIncAngleCat;
    }

    // add a circle with the same filling color with background
    group.addShape('circle', {
      // attrs: style
      attrs: {
        x: 0, // \u5C45\u4E2D
        y: 0,
        r: baseR,
        fill: cfg.centerColor,
        stroke: 'darkgray',
      },
      name: 'circle-shape',
    });

    if (cfg.label) {
      group.addShape('text', {
        // attrs: style
        attrs: {
          x: 0,
          y: 0,
          textAlign: 'center',
          textBaseline: 'middle',
          text: cfg.label,
          fill: 'white',
          fontStyle: 'bold',
        },
        name: 'text-shape',
      });
    }
    return group;
  },
});

/** data */
const data = {
  nodes: [
    {
      id: 'nodeD',
      x: 150,
      y: 150,
      label: 'Area1',
      type: 'area',
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
      details: [
        { cat: 'pv', values: [20, 30, 40, 30, 30], color: '#5ad8a6' },
        { cat: 'dal', values: [40, 30, 20, 30, 50], color: '#ff99c3' },
        { cat: 'uv', values: [40, 30, 30, 40, 40], color: '#6dc8ec' },
        { cat: 'sal', values: [20, 30, 50, 20, 20], color: '#269a99' },
        { cat: 'cal', values: [10, 10, 20, 20, 20], color: '#9270CA' },
      ],
      centerColor: '#5b8ff9',
    },
    {
      id: 'nodeD2',
      x: 500,
      y: 150,
      label: 'Area2',
      type: 'area',
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
      details: [
        { cat: 'pv', values: [10, 10, 80, 20, 10], color: '#5ad8a6' },
        { cat: 'dal', values: [20, 30, 10, 50, 40], color: '#ff99c3' },
        { cat: 'uv', values: [10, 50, 30, 20, 30], color: '#6dc8ec' },
        { cat: 'sal', values: [70, 30, 20, 20, 20], color: '#269a99' },
        { cat: 'cal', values: [50, 10, 20, 70, 30], color: '#9270CA' },
      ],
      centerColor: '#5b8ff9',
    },
  ],
  edges: [
    {
      source: 'nodeD',
      target: 'nodeD2',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u4F7F\u7528 G \u81EA\u5B9A\u4E49\u7684\u9762\u79EF\u56FE\u8282\u70B9",en:"Area Chart Node"},filename:"areaChart.js",isNew:!1},{id:"stackChart",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*giZSRafSctgAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * Custom stacked bar chart node
 * by Jingxi
 *
 */

const getPath = (cx, cy, rs, re, startAngle, endAngle, clockwise) => {
  const flag1 = clockwise ? 1 : 0;
  const flag2 = clockwise ? 0 : 1;
  return [
    ['M', Math.cos(startAngle) * rs + cx, Math.sin(startAngle) * rs + cy],
    ['L', Math.cos(startAngle) * re + cx, Math.sin(startAngle) * re + cy],
    ['A', re, re, 0, 0, flag1, Math.cos(endAngle) * re + cx, Math.sin(endAngle) * re + cy],
    ['L', Math.cos(endAngle) * rs + cx, Math.sin(endAngle) * rs + cy],
    ['A', rs, rs, 0, 0, flag2, Math.cos(startAngle) * rs + cx, Math.sin(startAngle) * rs + cy],
    ['Z'],
  ];
};

// Custom stacked bar chart node
G6.registerNode('stacked-bar-node', {
  draw(cfg, group) {
    /*
      G:
      Fan
      x: the circle center of the fan
      y: the circle center of the fan
      rs: inner radius
      re: outer radius
      startAngle: start angle
      endAngle: end angle
      clockwise: render clockwisely if it is true
    */
    const baseR = 30;
    let nowAngle = 0;
    const everyIncAngle = (2 * Math.PI * (360 / 5 / 5)) / 360;
    cfg.details.forEach((cat) => {
      cat.values.forEach((item) => {
        const baseNbr = Math.ceil(item / 10);
        const baseIncR = 7;
        let nowStartR = baseR;
        const last = item % 10;
        const endAngle = nowAngle + everyIncAngle;
        for (let i = 0; i < baseNbr; i++) {
          const path0 = getPath(0, 0, nowStartR, nowStartR + baseIncR, nowAngle, endAngle, false);
          group.addShape('path', {
            attrs: {
              path: path0,
              stroke: 'darkgray',
              fill: cat.color,
            },
            name: 'path-shape1',
          });
          nowStartR = nowStartR + baseIncR + 2;
          if (i === baseNbr - 1 && last !== 0) {
            const path1 = getPath(
              0,
              0,
              nowStartR,
              nowStartR + (baseIncR * last) / 10,
              nowAngle,
              endAngle,
              false,
            );
            group.addShape('path', {
              attrs: {
                path: path1,
                stroke: 'darkgray',
                fill: cat.color,
              },
              name: 'path-shape2',
            });
          }
        }
        nowAngle = endAngle;
      });
    });

    group.addShape('circle', {
      attrs: {
        x: 0,
        y: 0,
        r: baseR,
        fill: cfg.centerColor,
        stroke: 'darkgray',
      },
      name: 'circle-shape',
    });
    if (cfg.label) {
      group.addShape('text', {
        attrs: {
          x: 0,
          y: 0,
          textAlign: 'center',
          textBaseline: 'middle',
          text: cfg.label,
          fill: 'white',
          fontStyle: 'bold',
        },
        name: 'text-shape',
      });
    }
    return group;
  },
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
});

const data = {
  nodes: [
    {
      id: 'nodeF',
      x: 150,
      y: 150,
      label: 'StackedBar1',
      type: 'stacked-bar-node',
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
      details: [
        { cat: 'pv', values: [20, 30, 40, 30, 30], color: '#5B8FF9' },
        { cat: 'dal', values: [40, 30, 20, 30, 50], color: '#5AD8A6' },
        { cat: 'uv', values: [40, 30, 30, 40, 40], color: '#5D7092' },
        { cat: 'sal', values: [20, 30, 50, 20, 20], color: '#F6BD16' },
        { cat: 'cal', values: [10, 10, 20, 20, 20], color: '#E8684A' },
      ],
      centerColor: '#5b8ff9',
    },
    {
      id: 'nodeF2',
      x: 500,
      y: 150,
      label: 'StackedBar2',
      type: 'stacked-bar-node',
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
      details: [
        { cat: 'pv', values: [10, 10, 80, 20, 10], color: '#5ad8a6' },
        { cat: 'dal', values: [20, 30, 10, 50, 40], color: '#ff99c3' },
        { cat: 'uv', values: [10, 50, 30, 20, 30], color: '#6dc8ec' },
        { cat: 'sal', values: [70, 30, 20, 20, 20], color: '#269a99' },
        { cat: 'cal', values: [50, 10, 20, 70, 30], color: '#9270CA' },
      ],
      centerColor: '#5b8ff9',
    },
  ],
  edges: [
    {
      source: 'nodeF',
      target: 'nodeF2',
    },
  ],
};

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u4F7F\u7528 G \u81EA\u5B9A\u4E49\u7684\u5806\u53E0\u56FE\u8282\u70B9",en:"Stacked Chart Node"},filename:"stackChart.js",isNew:!1},{id:"lineChart",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*mKmaTIBtVAUAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * Custom a line chart node
 * by Jingxi
 *
 */

// Custom a line chart node
G6.registerNode('circleLine', {
  draw(cfg, group) {
    const baseR = 30;
    let nowAngle = 0;

    // Ref line
    let refR = baseR;
    const refInc = 10;
    for (let i = 0; i < 5; i++) {
      group.addShape('circle', {
        attrs: {
          x: 0,
          y: 0,
          r: (refR += refInc),
          stroke: '#bae7ff',
          lineDash: [4, 4],
        },
        name: 'circle-shape',
      });
    }

    const everyIncAngle = (2 * Math.PI * (360 / 5 / 5)) / 360;
    cfg.details.forEach((cat) => {
      // \u8BA1\u7B97\u4E00\u7CFB\u5217\u70B9\u7684\u4F4D\u7F6E
      const postions = [];
      cat.values.forEach((item, index) => {
        const r = baseR + item;
        const xPos = r * Math.cos(nowAngle);
        const yPos = r * Math.sin(nowAngle);
        nowAngle += everyIncAngle;
        postions.push([xPos, yPos]);
        if (index === 4) {
          const r = baseR + item;
          const xPos = r * Math.cos(nowAngle);
          const yPos = r * Math.sin(nowAngle);
          postions.push([xPos, yPos]);
        }
      });
      const pathArrayL = postions.map((item) => ['L', ...item]);
      // add the connecting line
      group.addShape('path', {
        attrs: {
          path: [
            ['M', 0, 0], // the top vertex
            ...pathArrayL,
            ['Z'], // close the path
          ],
          stroke: cat.color,
        },
        name: 'path-shape',
      });

      postions.forEach((pos, index) => {
        if (index !== 5) {
          const littleCircle = group.addShape('circle', {
            // attrs: style
            attrs: {
              x: pos[0],
              y: pos[1],
              r: 2,
              fill: 'black',
              stroke: cat.color,
              cursor: 'pointer',
            },
            name: 'circle-shape',
          });
          // \u52A0\u4E0A\u4EA4\u4E92\u52A8\u753B
          littleCircle.on('mouseenter', function () {
            littleCircle.animate(
              {
                r: 5,
              },
              {
                repeat: false,
                duration: 200,
              },
            );
          });
          littleCircle.on('mouseleave', function () {
            littleCircle.animate(
              {
                r: 2,
              },
              {
                repeat: false,
                duration: 200,
              },
            );
          });
          // set the name
          littleCircle.set('name', 'littleCircle');
        }
      });
    });

    // add a circle with the same color with the background color
    group.addShape('circle', {
      attrs: {
        x: 0,
        y: 0,
        r: baseR,
        fill: cfg.centerColor,
        stroke: 'darkgray',
      },
      name: 'circle-shape',
    });
    if (cfg.label) {
      group.addShape('text', {
        attrs: {
          x: 0, // \u5C45\u4E2D
          y: 0,
          textAlign: 'center',
          textBaseline: 'middle',
          text: cfg.label,
          fill: 'white',
          fontStyle: 'bold',
        },
        name: 'text-shape',
      });
    }
    return group;
  },
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
});

const data = {
  nodes: [
    {
      id: 'nodeB',
      x: 150,
      y: 150,
      label: 'Line1',
      type: 'circleLine',
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
      details: [
        { cat: 'pv', values: [20, 30, 40, 30, 30], color: '#5B8FF9' },
        { cat: 'dal', values: [40, 30, 20, 30, 50], color: '#5AD8A6' },
        { cat: 'uv', values: [40, 30, 30, 40, 40], color: '#5D7092' },
        { cat: 'sal', values: [20, 30, 50, 20, 20], color: '#F6BD16' },
        { cat: 'cal', values: [10, 10, 20, 20, 20], color: '#E8684A' },
      ],
      centerColor: '#5b8ff9',
    },
    {
      id: 'nodeB2',
      x: 500,
      y: 150,
      label: 'Line2',
      type: 'circleLine',
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
      details: [
        { cat: 'pv', values: [10, 10, 50, 20, 10], color: '#5ad8a6' },
        { cat: 'dal', values: [20, 30, 10, 50, 40], color: '#ff99c3' },
        { cat: 'uv', values: [10, 50, 30, 20, 30], color: '#6dc8ec' },
        { cat: 'sal', values: [50, 30, 20, 20, 20], color: '#269a99' },
        { cat: 'cal', values: [50, 10, 20, 50, 30], color: '#9270CA' },
      ],
      centerColor: '#5b8ff9',
    },
  ],
  edges: [
    {
      source: 'nodeB',
      target: 'nodeB2',
    },
  ],
};

// graph.get('container').style.background = '#5d7092';

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u4F7F\u7528 G \u81EA\u5B9A\u4E49\u7684\u6298\u7EBF\u56FE\u8282\u70B9",en:"Line Chart Node"},filename:"lineChart.js",isNew:!1},{id:"barChart",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*lX3gRZWvbp4AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * Custom a Nightingale char node
 * by Jingxi
 */

/**
 * Custom a Nightingale char node
 */

const getPath = (cx, cy, rs, re, startAngle, endAngle, clockwise) => {
  const flag1 = clockwise ? 1 : 0;
  const flag2 = clockwise ? 0 : 1;
  return [
    ['M', Math.cos(startAngle) * rs + cx, Math.sin(startAngle) * rs + cy],
    ['L', Math.cos(startAngle) * re + cx, Math.sin(startAngle) * re + cy],
    ['A', re, re, 0, 0, flag1, Math.cos(endAngle) * re + cx, Math.sin(endAngle) * re + cy],
    ['L', Math.cos(endAngle) * rs + cx, Math.sin(endAngle) * rs + cy],
    ['A', rs, rs, 0, 0, flag2, Math.cos(startAngle) * rs + cx, Math.sin(startAngle) * rs + cy],
    ['Z'],
  ];
};
G6.registerNode('circleBar', {
  draw(cfg, group) {
    /*
      G:
      Fan
      x: the circle center of the fan
      y: the circle center of the fan
      rs: inner radius
      re: outer radius
      startAngle: start angle
      endAngle: end angle
      clockwise: render clockwisely if it is true
    */
    const baseR = 30;
    let nowAngle = 0;
    const everyIncAngle = (2 * Math.PI * (360 / 5 / 5)) / 360;
    cfg.details.forEach((cat) => {
      cat.values.forEach((item) => {
        const re = item + baseR;
        const path0 = getPath(
          0,
          0,
          baseR,
          item + baseR,
          nowAngle,
          (nowAngle += everyIncAngle),
          false,
        );
        const fan = group.addShape('path', {
          attrs: {
            path: path0,
            stroke: 'darkgray',
            fill: cat.color,
          },
          name: 'path-shape',
        });
        // behavior animation
        fan.on('mouseenter', () => {
          fan.animate(
            {
              re: re + 8,
            },
            {
              repeat: false,
              duration: 300,
            },
          );
        });
        fan.on('mouseleave', () => {
          fan.animate(
            {
              re,
            },
            {
              repeat: false,
              duration: 300,
            },
          );
        });
        // set the name
        fan.set('name', 'littleCircle');
      });
    });
    group.addShape('circle', {
      attrs: {
        x: 0,
        y: 0,
        r: baseR,
        fill: cfg.centerColor,
        stroke: 'darkgray',
      },
      name: 'circle-shape',
    });
    if (cfg.label) {
      group.addShape('text', {
        attrs: {
          x: 0,
          y: 0,
          textAlign: 'center',
          textBaseline: 'middle',
          text: cfg.label,
          fill: 'white',
          fontStyle: 'bold',
        },
        name: 'text-shape',
      });
    }
    return group;
  },
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
});

const data = {
  nodes: [
    {
      id: 'nodeA',
      x: 150,
      y: 150,
      label: 'Bar1',
      type: 'circleBar',
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
      details: [
        { cat: 'pv', values: [20, 30, 40, 30, 30], color: '#5B8FF9' },
        { cat: 'dal', values: [40, 30, 20, 30, 50], color: '#5AD8A6' },
        { cat: 'uv', values: [40, 30, 30, 40, 40], color: '#5D7092' },
        { cat: 'sal', values: [20, 30, 50, 20, 20], color: '#F6BD16' },
        { cat: 'cal', values: [10, 10, 20, 20, 20], color: '#E8684A' },
      ],
      centerColor: '#5b8ff9',
    },
    {
      id: 'nodeA2',
      x: 500,
      y: 150,
      label: 'Bar2',
      type: 'circleBar',
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
      details: [
        { cat: 'pv', values: [10, 10, 80, 20, 10], color: '#5ad8a6' },
        { cat: 'dal', values: [20, 30, 10, 50, 40], color: '#ff99c3' },
        { cat: 'uv', values: [10, 50, 30, 20, 30], color: '#6dc8ec' },
        { cat: 'sal', values: [70, 30, 20, 20, 20], color: '#269a99' },
        { cat: 'cal', values: [50, 10, 20, 70, 30], color: '#9270CA' },
      ],
      centerColor: '#5b8ff9',
    },
  ],
  edges: [
    {
      source: 'nodeA',
      target: 'nodeA2',
    },
  ],
};

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u4F7F\u7528 G \u81EA\u5B9A\u4E49\u7684\u5357\u4E01\u683C\u5C14\u56FE\u8282\u70B9",en:"Nightingale Node"},filename:"barChart.js",isNew:!1},{id:"pointChart",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*M0ycSarMV2sAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

// Custom a mark node
G6.registerNode('justPoints', {
  draw(cfg, group) {
    const baseR = 30;
    let nowAngle = 0;

    // Ref line
    let refR = baseR;
    const refInc = 10;
    for (let i = 0; i < 5; i++) {
      group.addShape('circle', {
        attrs: {
          x: 0,
          y: 0,
          r: (refR += refInc),
          stroke: '#5ad8a6',
          lineDash: [4, 4],
        },
        name: 'circle-shape',
      });
    }
    const everyIncAngle = (2 * Math.PI * (360 / 5 / 5)) / 360;
    nowAngle = nowAngle + everyIncAngle / 2;
    cfg.details.forEach((cat) => {
      // Calculate the positions for vertexes
      const postions = [];
      cat.values.forEach((item, index) => {
        const r = baseR + item;
        const xPos = r * Math.cos(nowAngle);
        const yPos = r * Math.sin(nowAngle);
        nowAngle += everyIncAngle;
        postions.push([xPos, yPos]);
        if (index === 4) {
          const r = baseR + item;
          const xPos = r * Math.cos(nowAngle);
          const yPos = r * Math.sin(nowAngle);
          postions.push([xPos, yPos]);
        }
      });

      // add marks
      postions.forEach((pos, index) => {
        if (index !== 5) {
          group.addShape('circle', {
            attrs: {
              x: pos[0],
              y: pos[1],
              r: 3,
              lineWidth: 2,
              stroke: cat.color,
            },
            name: 'circle-marker-shape',
          });
        }
      });
    });

    let nowAngle2 = 0;
    const everyIncAngleCat = (2 * Math.PI * (360 / 5)) / 360;
    for (let i = 0; i < 5; i++) {
      const r = 30 + 50;
      const xPos = r * Math.cos(nowAngle2);
      const yPos = r * Math.sin(nowAngle2);

      group.addShape('path', {
        attrs: {
          path: [
            ['M', 0, 0],
            ['L', xPos, yPos],
          ],
          lineDash: [4, 4],
          stroke: '#5ad8a6',
        },
        name: 'path-shape',
      });
      nowAngle2 += everyIncAngleCat;
    }
    // add a circle with the same color with the background color
    group.addShape('circle', {
      attrs: {
        x: 0,
        y: 0,
        r: baseR,
        fill: cfg.centerColor,
        stroke: 'darkgray',
      },
      name: 'circle-shape',
    });

    if (cfg.label) {
      group.addShape('text', {
        attrs: {
          x: 0,
          y: 0,
          textAlign: 'center',
          textBaseline: 'middle',
          text: cfg.label,
          fill: '#fff',
          fontStyle: 'bold',
        },
        name: 'text-shape',
      });
    }
    return group;
  },
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
});

const data = {
  nodes: [
    {
      id: 'nodeC',
      x: 150,
      y: 150,
      label: 'Point2',
      type: 'justPoints',
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
      details: [
        { cat: 'pv', values: [20, 30, 40, 30, 30], color: '#5B8FF9' },
        { cat: 'dal', values: [40, 30, 20, 30, 50], color: '#5AD8A6' },
        { cat: 'uv', values: [40, 30, 30, 40, 40], color: '#5D7092' },
        { cat: 'sal', values: [20, 30, 50, 20, 20], color: '#F6BD16' },
        { cat: 'cal', values: [10, 10, 20, 20, 20], color: '#E8684A' },
      ],
      centerColor: '#5b8ff9',
    },
    {
      id: 'nodeC2',
      x: 500,
      y: 150,
      label: 'Point2',
      type: 'justPoints',
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
      details: [
        { cat: 'pv', values: [10, 10, 50, 20, 10], color: '#5ad8a6' },
        { cat: 'dal', values: [20, 30, 10, 50, 40], color: '#ff99c3' },
        { cat: 'uv', values: [10, 50, 30, 20, 30], color: '#6dc8ec' },
        { cat: 'sal', values: [50, 30, 20, 20, 20], color: '#269a99' },
        { cat: 'cal', values: [50, 10, 20, 50, 30], color: '#9270CA' },
      ],
      centerColor: '#5b8ff9',
    },
  ],
  edges: [
    {
      source: 'nodeC',
      target: 'nodeC2',
    },
  ],
};

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u4F7F\u7528 G \u81EA\u5B9A\u4E49\u7684\u70B9\u7EBF\u56FE\u8282\u70B9",en:"Point Chart Node"},filename:"pointChart.js",isNew:!1},{id:"pieChart",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*idENQpnwA1sAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * Custom a pie chart node
 * by Shiwu
 *
 */
const lightBlue = '#5b8ff9';
const lightOrange = '#5ad8a6';

// register a pie chart node
G6.registerNode('pie-node', {
  draw: (cfg, group) => {
    const radius = cfg.size / 2; // node radius
    const inPercentage = cfg.inDegree / cfg.degree; // the ratio of indegree to outdegree
    const inAngle = inPercentage * Math.PI * 2; // the anble for the indegree fan
    const inArcEnd = [radius * Math.cos(inAngle), -radius * Math.sin(inAngle)]; // the end position for the in-degree fan
    let isInBigArc = 0,
      isOutBigArc = 1;
    if (inAngle > Math.PI) {
      isInBigArc = 1;
      isOutBigArc = 0;
    }
    // fan shape for the in degree
    const fanIn = group.addShape('path', {
      attrs: {
        path: [
          ['M', radius, 0],
          ['A', radius, radius, 0, isInBigArc, 0, inArcEnd[0], inArcEnd[1]],
          ['L', 0, 0],
          ['Z'],
        ],
        lineWidth: 0,
        fill: lightOrange,
      },
      name: 'in-fan-shape',
    });
    // draw the fan shape
    group.addShape('path', {
      attrs: {
        path: [
          ['M', inArcEnd[0], inArcEnd[1]],
          ['A', radius, radius, 0, isOutBigArc, 0, radius, 0],
          ['L', 0, 0],
          ['Z'],
        ],
        lineWidth: 0,
        fill: lightBlue,
      },
      name: 'out-fan-shape',
    });
    // \u8FD4\u56DE keyshape
    return fanIn;
  },
});

const data = {
  nodes: [
    {
      id: 'pie1',
      size: 80,
      inDegree: 80,
      degree: 360,
      x: 150,
      y: 150,
    },
    {
      id: 'pie2',
      size: 80,
      inDegree: 280,
      degree: 360,
      x: 350,
      y: 150,
    },
  ],
  edges: [
    {
      source: 'pie1',
      target: 'pie2',
    },
  ],
};
const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  linkCenter: true,
  defaultNode: {
    type: 'pie-node',
  },
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u4F7F\u7528 G \u81EA\u5B9A\u4E49\u7684\u997C\u56FE\u8282\u70B9",en:"Pie Chart Node"},filename:"pieChart.js",isNew:!1},{id:"list",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*pxKjQ5dZx80AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * \u8BE5\u6848\u4F8B\u6F14\u793A\u4EE5\u4E0B\u529F\u80FD\uFF1A
 * 1\u3001\u4F7F\u7528G6\u5982\u4F55\u81EA\u5B9A\u4E49\u5217\u8868\u8282\u70B9\uFF1B
 * 2\u3001\u5217\u8868\u8282\u70B9\u4E2D\u5982\u4F55\u5305\u62EC\u8BE6\u60C5\u4FE1\u606F\uFF1B
 * 3\u3001\u70B9\u51FB\u8282\u70B9\uFF0C\u53EF\u5C55\u5F00\u8BE6\u60C5\u5217\u8868\u4FE1\u606F\u3002
 *
 */
G6.registerNode('expandNode', {
  draw: function draw(cfg, group) {
    const mainGroup = group.addGroup({
      id: 'main-group',
    });
    const keyShape = mainGroup.addShape('rect', {
      attrs: {
        x: 0,
        y: 0,
        width: 100 + 60 * cfg.values.length,
        height: 50,
        fill: '#C6E5FF',
      },
      name: 'key-rect-shape',
    });

    // name text
    mainGroup.addShape('text', {
      attrs: {
        text: cfg.name,
        fill: '#000',
        width: 130,
        x: 10,
        y: 32,
      },
      name: 'name-text-shape',
    });

    const subGroup = group.addGroup({
      id: 'sub-group',
    });
    cfg.values.forEach(function (data, index) {
      subGroup.addShape('rect', {
        attrs: {
          x: 110 + index * 60,
          y: 0,
          width: 50,
          height: 50,
        },
        name: 'rect-shape',
      });

      subGroup.addShape('text', {
        attrs: {
          text: data.key,
          fill: '#000',
          x: 130 + index * 60,
          y: 20,
          fontSize: 10,
          textBaseline: 'middle',
          className: 'sub-group-text',
        },
        name: 'sub-text-shape1',
      });

      subGroup.addShape('text', {
        attrs: {
          text: data.value,
          fill: '#000',
          x: 130 + index * 60,
          y: 30,
          fontSize: 10,
          textBaseline: 'middle',
          textAlign: 'left',
          className: 'sub-group-text',
        },
        name: 'name-text-shape2',
      });
    });

    const listGroup = group.addGroup({
      id: 'detail-list-group',
    });

    listGroup.addShape('rect', {
      attrs: {
        width: 100 + 60 * cfg.values.length - 70,
        height: 30 * cfg.properties.length + 20,
        fill: '#fff',
        x: 70,
        y: 30,
      },
      name: 'list-rect-shape1',
    });

    const rectWidth = 100 + 60 * cfg.values.length - 80;
    cfg.properties.forEach(function (property, index) {
      listGroup.addShape('rect', {
        attrs: {
          width: rectWidth,
          height: 30,
          fill: '#9EC9FF',
          x: 80,
          y: 40 * index + 40,
        },
        name: 'list-rect-shape2',
      });
      let count = 0;
      for (const p in property) {
        // \u6BCF\u4E2Arect\u4E2D\u6DFB\u52A05\u4E2A\u6587\u672C
        listGroup.addShape('text', {
          attrs: {
            text: property[p],
            fill: '#000',
            x: 85 + count * (rectWidth / cfg.values.length) - count * 10,
            y: 40 * index + 40 + 15,
            fontSize: 10,
            textBaseline: 'middle',
            textAlign: 'left',
          },
          name: 'text-shape',
        });
        count++;
      }
    });
    listGroup.hide();
    return keyShape;
  },
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas'],
  },
  fitView: true,
});

const data = {
  nodes: [
    {
      id: 'shape2',
      x: 0,
      y: 0,
      type: 'expandNode',
      name: '\u7F51\u7AD9\u5F15\u6D41',
      values: [
        {
          key: '\u66DD\u5149\u7387',
          value: '19.09',
        },
        {
          key: '\u6D41\u5165UV',
          value: '910',
        },
        {
          key: '\u70B9\u51FB\u7387',
          value: '90',
        },
        {
          key: '\u5360\u6BD4',
          value: '90',
        },
      ],
      properties: [
        {
          name: '\u641C\u7D22',
          value1: '102',
          value2: '102',
          value3: '102',
          value4: '102',
        },
        {
          name: '\u626B\u4E00\u626B',
          value1: '102',
          value2: '102',
          value3: '102',
          value4: '102',
        },
      ],
    },
  ],
};
graph.data(data);
graph.render();

// \u70B9\u51FBnode\uFF0C\u5C55\u5F00\u8BE6\u60C5
graph.on('node:click', function (evt) {
  const target = evt.target;

  const parentGroup = target.get('parent').get('parent');
  const detailGroup = parentGroup.findById('detail-list-group');
  // \u5C06sub-group\u4E2D\u7684\u5185\u5BB9\u7F51\u4E0A\u79FB\u52A8\u4E00\u6BB5\u8DDD\u79BB
  const subGroup = parentGroup.findById('sub-group');
  const keyTexts = subGroup.findAll(function (item) {
    return item.attr('className') === 'sub-group-text';
  });
  const isVisible = detailGroup.get('visible');
  if (isVisible) {
    detailGroup.hide();
    keyTexts.forEach(function (text) {
      const top = text.attr('y');
      text.attr('y', top + 10);
    });
  } else {
    keyTexts.forEach(function (text) {
      const top = text.attr('y');
      text.attr('y', top - 10);
    });
    detailGroup.show();
  }
  graph.paint();
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u5217\u8868",en:"List"},filename:"list.js",isNew:!1},{id:"scrollNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*n-ipTrTaPD4AAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const {
  Util,
  registerBehavior,
  registerEdge,
  registerNode
} = G6;

const rawData = [{
    "id": "info",
    "label": "Employee",
    "attrs": [{
        "key": "id",
        "type": "number(6)"
      },
      {
        "key": "key",
        "type": "varchar(255)"
      },
      {
        "key": "gender",
        "type": "enum(M, F)"
      },
      {
        "key": "birthday",
        "type": "date"
      },
      {
        "key": "hometown",
        "type": "varchar(255)"
      },
      {
        "key": "country",
        "type": "varchar(255)"
      },
      {
        "key": "nation",
        "type": "varchar(255)"
      },
      {
        "key": "jobId",
        "type": "number(3)",
        "relation": [{
          "key": "id",
          "nodeId": "job"
        }]
      },
      {
        "key": "phone",
        "type": "varchar(255)"
      },
      {
        "key": "deptId",
        "type": "number(6)",
        "relation": [{
          "key": "id",
          "nodeId": "dept"
        }]
      },
      {
        "key": "startTime",
        "type": "date"
      },
      {
        "key": "leaveTime",
        "type": "date"
      }
    ]
  },
  {
    "id": "dept",
    "label": "Department",
    "attrs": [{
        "key": "id",
        "type": "number(6)"
      },
      {
        "key": "title",
        "type": "varchar(255)"
      },
      {
        "key": "desc",
        "type": "text"
      },
      {
        "key": "parent",
        "type": "number(6)",
        "relation": [{
          "key": "id",
          "nodeId": "dept"
        }]
      },
      {
        "key": "manager",
        "type": "number(6)"
      }
    ]
  }
]

const isInBBox = (point, bbox) => {
  const {
    x,
    y
  } = point;
  const {
    minX,
    minY,
    maxX,
    maxY
  } = bbox;

  return x < maxX && x > minX && y > minY && y < maxY;
};

const itemHeight = 20;
registerBehavior("dice-er-scroll", {
  getDefaultCfg() {
    return {
      multiple: true,
    };
  },
  getEvents() {
    return {
      itemHeight,
      wheel: "scorll",
      click: "click",
      "node:mousemove": "move",
    };
  },
  scorll(e) {
    e.preventDefault();
    const {
      graph
    } = this;
    const nodes = graph.getNodes().filter((n) => {
      const bbox = n.getBBox();

      return isInBBox(graph.getPointByClient(e.clientX, e.clientY), bbox);
    });

    const x = e.deltaX || e.movementX;
    let y = e.deltaY || e.movementY;
    if (!y && navigator.userAgent.indexOf('Firefox') > -1) y = (-e.wheelDelta * 125) / 3

    if (nodes) {
      nodes.forEach((node) => {
        const model = node.getModel();
        if (model.attrs.length < 2) {
          return;
        }
        const idx = model.startIndex || 0;
        let startX = model.startX || 0.5;
        let startIndex = idx + y * 0.02;
        startX -= x;
        if (startIndex < 0) {
          startIndex = 0;
        }
        if (startX > 0) {
          startX = 0;
        }
        if (startIndex > model.attrs.length - 1) {
          startIndex = model.attrs.length - 1;
        }
        graph.update(node, {
          startIndex,
          startX,
        });
      });
    }


  },
  click(e) {
    const {
      graph
    } = this;
    const {
      y
    } = e;
    const item = e.item;
    const shape = e.shape;
    if (!item) {
      return;
    }
    const model = item.getModel();

    if (shape.get("name") === "collapse") {
      graph.updateItem(item, {
        collapsed: true,
        size: [300, 50],
      });
      setTimeout(() => graph.layout(), 100);
    } else if (shape.get("name") === "expand") {
      graph.updateItem(item, {
        collapsed: false,
        size: [300, 80],
      });
      setTimeout(() => graph.layout(), 100);
    }
  },
  move(e) {
    const name = e.shape.get("name");
    const item = e.item;

    if (name && name.startsWith("item")) {
      this.graph.updateItem(item, {
        selectedIndex: Number(name.split("-")[1]),
      });
    } else {
      this.graph.updateItem(item, {
        selectedIndex: NaN,
      });
    }
  },
});

registerEdge("dice-er-edge", {
  draw(cfg, group) {
    const edge = group.cfg.item;
    const sourceNode = edge.getSource().getModel();
    const targetNode = edge.getTarget().getModel();

    const sourceIndex = sourceNode.attrs.findIndex(
      (e) => e.key === cfg.sourceKey
    );

    const sourceStartIndex = sourceNode.startIndex || 0;

    let sourceY = 15;

    if (!sourceNode.collapsed && sourceIndex > sourceStartIndex - 1) {
      sourceY = 30 + (sourceIndex - sourceStartIndex + 0.5) * 30;
      sourceY = Math.min(sourceY, 80);
    }

    const targetIndex = targetNode.attrs.findIndex(
      (e) => e.key === cfg.targetKey
    );

    const targetStartIndex = targetNode.startIndex || 0;

    let targetY = 15;

    if (!targetNode.collapsed && targetIndex > targetStartIndex - 1) {
      targetY = (targetIndex - targetStartIndex + 0.5) * 30 + 30;
      targetY = Math.min(targetY, 80);
    }

    const startPoint = {
      ...cfg.startPoint
    };
    const endPoint = {
      ...cfg.endPoint
    };

    startPoint.y = startPoint.y + sourceY;
    endPoint.y = endPoint.y + targetY;

    let shape;
    if (sourceNode.id !== targetNode.id) {
      shape = group.addShape("path", {
        attrs: {
          stroke: "#5B8FF9",
          path: [
            ["M", startPoint.x, startPoint.y],
            [
              "C",
              endPoint.x / 3 + (2 / 3) * startPoint.x,
              startPoint.y,
              endPoint.x / 3 + (2 / 3) * startPoint.x,
              endPoint.y,
              endPoint.x,
              endPoint.y,
            ],
          ],
          endArrow: true,
        },
        name: "path-shape",
      });
    } else if (!sourceNode.collapsed) {
      let gap = Math.abs((startPoint.y - endPoint.y) / 3);
      if (startPoint["index"] === 1) {
        gap = -gap;
      }
      shape = group.addShape("path", {
        attrs: {
          stroke: "#5B8FF9",
          path: [
            ["M", startPoint.x, startPoint.y],
            [
              "C",
              startPoint.x - gap,
              startPoint.y,
              startPoint.x - gap,
              endPoint.y,
              startPoint.x,
              endPoint.y,
            ],
          ],
          endArrow: true,
        },
        name: "path-shape",
      });
    }

    return shape;
  },
  afterDraw(cfg, group) {
    const labelCfg = cfg.labelCfg || {};
    const edge = group.cfg.item;
    const sourceNode = edge.getSource().getModel();
    const targetNode = edge.getTarget().getModel();
    if (sourceNode.collapsed && targetNode.collapsed) {
      return;
    }
    const path = group.find(
      (element) => element.get("name") === "path-shape"
    );

    const labelStyle = Util.getLabelPosition(path, 0.5, 0, 0, true);
    const label = group.addShape("text", {
      attrs: {
        ...labelStyle,
        text: cfg.label || '',
        fill: "#000",
        textAlign: "center",
        stroke: "#fff",
        lineWidth: 1,
      },
    });
    label.rotateAtStart(labelStyle.rotate);
  },
});

registerNode("dice-er-box", {
  draw(cfg, group) {
    const width = 250;
    const height = 96;
    const itemCount = 10;
    const boxStyle = {
      stroke: "#096DD9",
      radius: 4,
    };

    const {
      attrs = [],
        startIndex = 0,
        selectedIndex,
        collapsed,
        icon,
    } = cfg;
    const list = attrs;
    const afterList = list.slice(
      Math.floor(startIndex),
      Math.floor(startIndex + itemCount - 1)
    );
    const offsetY = (0.5 - (startIndex % 1)) * itemHeight + 30;

    group.addShape("rect", {
      attrs: {
        fill: boxStyle.stroke,
        height: 30,
        width,
        radius: [boxStyle.radius, boxStyle.radius, 0, 0],
      },
      draggable: true,
    });

    let fontLeft = 12;

    if (icon && icon.show !== false) {
      group.addShape("image", {
        attrs: {
          x: 8,
          y: 8,
          height: 16,
          width: 16,
          ...icon,
        },
      });
      fontLeft += 18;
    }

    group.addShape("text", {
      attrs: {
        y: 22,
        x: fontLeft,
        fill: "#fff",
        text: cfg.label,
        fontSize: 12,
        fontWeight: 500,
      },
    });

    group.addShape("rect", {
      attrs: {
        x: 0,
        y: collapsed ? 30 : 80,
        height: 15,
        width,
        fill: "#eee",
        radius: [0, 0, boxStyle.radius, boxStyle.radius],
        cursor: "pointer",
      },
      name: collapsed ? "expand" : "collapse",
    });

    group.addShape("text", {
      attrs: {
        x: width / 2 - 6,
        y: (collapsed ? 30 : 80) + 12,
        text: collapsed ? "+" : "-",
        width,
        fill: "#000",
        radius: [0, 0, boxStyle.radius, boxStyle.radius],
        cursor: "pointer",
      },
      name: collapsed ? "expand" : "collapse",
    });

    const keyshape = group.addShape("rect", {
      attrs: {
        x: 0,
        y: 0,
        width,
        height: collapsed ? 45 : height,
        ...boxStyle,
      },
      draggable: true,
    });

    if (collapsed) {
      return keyshape;
    }

    const listContainer = group.addGroup({});
    listContainer.setClip({
      type: "rect",
      attrs: {
        x: -8,
        y: 30,
        width: width + 16,
        height: 80 - 30,
      },
    });
    listContainer.addShape({
      type: "rect",
      attrs: {
        x: 1,
        y: 30,
        width: width - 2,
        height: 80 - 30,
        fill: "#fff",
      },
      draggable: true,
    });

    if (list.length > itemCount) {
      const barStyle = {
        width: 4,
        padding: 0,
        boxStyle: {
          stroke: "#00000022",
        },
        innerStyle: {
          fill: "#00000022",
        },
      };

      listContainer.addShape("rect", {
        attrs: {
          y: 30,
          x: width - barStyle.padding - barStyle.width,
          width: barStyle.width,
          height: height - 30,
          ...barStyle.boxStyle,
        },
      });

      const indexHeight =
        afterList.length > itemCount ?
        (afterList.length / list.length) * height :
        10;

      listContainer.addShape("rect", {
        attrs: {
          y: 30 +
            barStyle.padding +
            (startIndex / list.length) * (height - 30),
          x: width - barStyle.padding - barStyle.width,
          width: barStyle.width,
          height: Math.min(height, indexHeight),
          ...barStyle.innerStyle,
        },
      });
    }
    if (afterList) {
      afterList.forEach((e, i) => {
        const isSelected =
          Math.floor(startIndex) + i === Number(selectedIndex);
        let {
          key = "", type
        } = e;
        if (type) {
          key += " - " + type;
        }
        const label = key.length > 26 ? key.slice(0, 24) + "..." : key;

        listContainer.addShape("rect", {
          attrs: {
            x: 1,
            y: i * itemHeight - itemHeight / 2 + offsetY,
            width: width - 4,
            height: itemHeight,
            radius: 2,
            lineWidth: 1,
            cursor: "pointer",
          },
          name: \`item-\${Math.floor(startIndex) + i}-content\`,
          draggable: true,
        });

        if (!cfg.hideDot) {
          listContainer.addShape("circle", {
            attrs: {
              x: 0,
              y: i * itemHeight + offsetY,
              r: 3,
              stroke: boxStyle.stroke,
              fill: "white",
              radius: 2,
              lineWidth: 1,
              cursor: "pointer",
            },
          });
          listContainer.addShape("circle", {
            attrs: {
              x: width,
              y: i * itemHeight + offsetY,
              r: 3,
              stroke: boxStyle.stroke,
              fill: "white",
              radius: 2,
              lineWidth: 1,
              cursor: "pointer",
            },
          });
        }

        listContainer.addShape("text", {
          attrs: {
            x: 12,
            y: i * itemHeight + offsetY + 6,
            text: label,
            fontSize: 12,
            fill: "#000",
            fontFamily: "Avenir,-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol",
            full: e,
            fontWeight: isSelected ? 500 : 100,
            cursor: "pointer",
          },
          name: \`item-\${Math.floor(startIndex) + i}\`,
        });
      });
    }



    return keyshape;
  },
  getAnchorPoints() {
    return [
      [0, 0],
      [1, 0],
    ];
  },
});

const dataTransform = (data) => {
  const nodes = [];
  const edges = [];

  data.map((node) => {
    nodes.push({
      ...node
    });
    if (node.attrs) {
      node.attrs.forEach((attr) => {
        if (attr.relation) {
          attr.relation.forEach((relation) => {
            edges.push({
              source: node.id,
              target: relation.nodeId,
              sourceKey: attr.key,
              targetKey: relation.key,
              label: relation.label,
            });
          });
        }

      });
    }
  });

  return {
    nodes,
    edges,
  };
}

const container = document.getElementById('container');

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  defaultNode: {
    size: [300, 200],
    type: 'dice-er-box',
    color: '#5B8FF9',
    style: {
      fill: '#9EC9FF',
      lineWidth: 3,
    },
    labelCfg: {
      style: {
        fill: 'black',
        fontSize: 20,
      },
    },
  },
  defaultEdge: {
    type: 'dice-er-edge',
    style: {
      stroke: '#e2e2e2',
      lineWidth: 4,
      endArrow: true,
    },
  },
  modes: {
    default: ['dice-er-scroll', 'drag-node', 'drag-canvas'],
  },
  layout: {
    type: 'dagre',
    rankdir: 'LR',
    align: 'UL',
    controlPoints: true,
    nodesepFunc: () => 0.2,
    ranksepFunc: () => 0.5,
  },
  animate: true,
  fitView: true
})

graph.data(dataTransform(rawData));

graph.render();
`,title:{zh:"\u8282\u70B9\u5185\u5BB9\u53EF\u6EDA\u52A8",en:"Scrollable Node"},filename:"scrollNode.js",isNew:!1}],icon:"",id:"customNode",title:{en:"Custom Node",zh:"\u81EA\u5B9A\u4E49\u8282\u70B9"},childrenKey:"demos",order:4},{demos:[{id:"extraShape",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*L4rZQbqwaRYAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

/**
 * Custom the edge with extra shapes
 * by Shiwu
 */

// custom the edge with an extra rect
G6.registerEdge(
  'extra-shape-edge',
  {
    afterDraw(cfg, group) {
      // get the first shape in the graphics group of this edge, it is the path of the edge here
      // \u83B7\u53D6\u56FE\u5F62\u7EC4\u4E2D\u7684\u7B2C\u4E00\u4E2A\u56FE\u5F62\uFF0C\u5728\u8FD9\u91CC\u5C31\u662F\u8FB9\u7684\u8DEF\u5F84\u56FE\u5F62
      const shape = group.get('children')[0];
      // get the coordinate of the mid point on the path
      // \u83B7\u53D6\u8DEF\u5F84\u56FE\u5F62\u7684\u4E2D\u70B9\u5750\u6807
      const midPoint = shape.getPoint(0.5);
      const rectColor = cfg.midPointColor || '#333';
      // add a rect on the mid point of the path. note that the origin of a rect shape is on its lefttop
      // \u5728\u4E2D\u70B9\u589E\u52A0\u4E00\u4E2A\u77E9\u5F62\uFF0C\u6CE8\u610F\u77E9\u5F62\u7684\u539F\u70B9\u5728\u5176\u5DE6\u4E0A\u89D2
      group.addShape('rect', {
        attrs: {
          width: 10,
          height: 10,
          fill: rectColor || '#333',
          // x and y should be minus width / 2 and height / 2 respectively to translate the center of the rect to the midPoint
          // x \u548C y \u5206\u522B\u51CF\u53BB width / 2 \u4E0E height / 2\uFF0C\u4F7F\u77E9\u5F62\u4E2D\u5FC3\u5728 midPoint \u4E0A
          x: midPoint.x - 5,
          y: midPoint.y - 5,
        },
      });

      // get the coordinate of the quatile on the path
      // \u83B7\u53D6\u8DEF\u5F84\u4E0A\u7684\u56DB\u5206\u4F4D\u70B9\u5750\u6807
      const quatile = shape.getPoint(0.25);
      const quatileColor = cfg.quatileColor || '#333';
      // add a circle on the quatile of the path
      // \u5728\u56DB\u5206\u4F4D\u70B9\u4E0A\u653E\u7F6E\u4E00\u4E2A\u5706\u5F62
      group.addShape('circle', {
        attrs: {
          r: 5,
          fill: quatileColor || '#333',
          x: quatile.x,
          y: quatile.y,
        },
      });
    },
    update: undefined,
  },
  'cubic',
);

const data = {
  nodes: [
    {
      id: 'node1',
      x: 100,
      y: 100,
    },
    {
      id: 'node2',
      x: 300,
      y: 100,
    },
    {
      id: 'node3',
      x: 300,
      y: 200,
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
      midPointColor: '#f00',
      quatileColor: '#f00',
    },
    {
      source: 'node1',
      target: 'node3',
      midPointColor: '#0f0',
      quatileColor: '#0f0',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    default: ['drag-node', 'drag-canvas'],
  },
  defaultEdge: {
    type: 'extra-shape-edge',
    style: {
      stroke: '#F6BD16',
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u6DFB\u52A0\u989D\u5916\u56FE\u5F62",en:"Custom Edge with Extra Shapes"},filename:"extraShape.js",isNew:!1},{id:"customPolyline",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*FuS3Qq_lDiIAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * Extend the built-in line edge and override getPath and getShapeStyle to custom a polyline edge
 * by siogo's issue\uFF08https://github.com/antvis/g6/issues/814\uFF09
 *
 * If you want to fit the dragging, you need to adjust the controlpoints while dragging
 *
 */

G6.registerEdge(
  'line-arrow',
  {
    getPath(points) {
      const startPoint = points[0];
      const endPoint = points[1];
      return [
        ['M', startPoint.x, startPoint.y],
        ['L', endPoint.x / 3 + (2 / 3) * startPoint.x, startPoint.y],
        ['L', endPoint.x / 3 + (2 / 3) * startPoint.x, endPoint.y],
        ['L', endPoint.x, endPoint.y],
      ];
    },
    getShapeStyle(cfg) {
      const startPoint = cfg.startPoint;
      const endPoint = cfg.endPoint;
      const controlPoints = this.getControlPoints(cfg);
      let points = [startPoint]; // the start point
      // the control points
      if (controlPoints) {
        points = points.concat(controlPoints);
      }
      // the end point
      points.push(endPoint);
      const path = this.getPath(points);
      const style = Object.assign(
        {},
        G6.Global.defaultEdge.style,
        {
          stroke: '#BBB',
          lineWidth: 1,
          path,
        },
        cfg.style,
      );
      return style;
    },
  },
  'line',
);

const data = {
  nodes: [
    {
      id: '7',
      x: 150,
      y: 100,
      size: 40,
      anchorPoints: [
        [1, 0.5],
        [1, 0],
      ],
    },
    {
      id: '8',
      x: 300,
      y: 200,
      size: 40,
      anchorPoints: [
        [0, 0.5],
        [0, 1],
      ],
    },
  ],
  edges: [
    {
      source: '7',
      target: '8',
      sourceAnchor: 0,
      targetAnchor: 0,
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    // behavior
    default: ['drag-node', 'drag-canvas'],
  },
  defaultNode: {
    type: 'circle',
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
    linkPoints: {
      left: true,
      right: true,
      fill: '#fff',
      stroke: '#1890FF',
      size: 3,
    },
  },
  defaultEdge: {
    type: 'line-arrow',
    style: {
      stroke: '#F6BD16',
      startArrow: {
        path: 'M 0,0 L 12,6 L 9,0 L 12,-6 Z',
        fill: '#F6BD16',
      },
      endArrow: {
        path: 'M 0,0 L 12,6 L 9,0 L 12,-6 Z',
        fill: '#F6BD16',
      },
    },
  },
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u81EA\u5B9A\u4E49\u6298\u7EBF",en:"Custom Polyline"},filename:"customPolyline.js",isNew:!1},{id:"customPolyline2",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ACNnQLPy20EAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * Custom a new polyline
 * by siogo's issue\uFF08https://github.com/antvis/g6/issues/814\uFF09
 *
 * If you want to fit the dragging, you need to adjust the controlpoints while dragging
 */
G6.registerEdge('line-arrow', {
  options: {
    style: {
      stroke: '#ccc',
    },
  },
  draw: function draw(cfg, group) {
    const startPoint = cfg.startPoint;
    const endPoint = cfg.endPoint;

    const stroke = (cfg.style && cfg.style.stroke) || this.options.style.stroke;
    const startArrow = (cfg.style && cfg.style.startArrow) || undefined;
    const endArrow = (cfg.style && cfg.style.endArrow) || undefined;

    const keyShape = group.addShape('path', {
      attrs: {
        path: [
          ['M', startPoint.x, startPoint.y],
          ['L', endPoint.x / 3 + (2 / 3) * startPoint.x, startPoint.y],
          ['L', endPoint.x / 3 + (2 / 3) * startPoint.x, endPoint.y],
          ['L', endPoint.x, endPoint.y],
        ],
        stroke,
        lineWidth: 1,
        startArrow,
        endArrow,
      },
      className: 'edge-shape',
      name: 'edge-shape',
    });
    return keyShape;
  },
});

const data = {
  nodes: [
    {
      id: '7',
      x: 150,
      y: 100,
      size: 40,
      anchorPoints: [
        [1, 0.5],
        [1, 0],
      ],
    },
    {
      id: '8',
      x: 300,
      y: 200,
      size: 40,
      anchorPoints: [
        [0, 0.5],
        [0, 1],
      ],
    },
  ],
  edges: [
    {
      source: '7',
      target: '8',
      sourceAnchor: 0,
      targetAnchor: 0,
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    // behavior
    default: ['drag-node', 'drag-canvas'],
  },
  defaultNode: {
    type: 'circle',
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
    linkPoints: {
      left: true,
      right: true,
      fill: '#fff',
      stroke: '#1890FF',
      size: 3,
    },
  },
  defaultEdge: {
    type: 'line-arrow',
    style: {
      stroke: '#F6BD16',
      startArrow: {
        path: 'M 0,0 L 12,6 L 9,0 L 12,-6 Z',
        fill: '#F6BD16',
      },
      endArrow: {
        path: 'M 0,0 L 12,6 L 9,0 L 12,-6 Z',
        fill: '#F6BD16',
      },
    },
  },
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u81EA\u5B9A\u4E49\u6298\u7EBF 2",en:"Custom Polyline 2"},filename:"customPolyline2.js",isNew:!1},{id:"edgeMulLabel",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*01YORI5jRp8AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * Custom the edge with multiple labels
 * by Changzhe
 */

// custom the edge with multiple labels
G6.registerEdge('multipleLabelsEdge', {
  options: {
    style: {
      stroke: '#000',
    },
  },
  labelAutoRotate: true,
  draw(cfg, group) {
    const startPoint = cfg.startPoint;
    const endPoint = cfg.endPoint;
    const stroke = (cfg.style && cfg.style.stroke) || this.options.style.stroke;

    const shape = group.addShape('path', {
      attrs: {
        stroke,
        path: [
          ['M', startPoint.x, startPoint.y],
          ['L', endPoint.x, endPoint.y],
        ],
      },
      name: 'path-shape',
    });
    if (cfg.label && cfg.label.length) {
      // the left label
      group.addShape('text', {
        attrs: {
          text: cfg.label[0],
          fill: '#595959',
          textAlign: 'start',
          textBaseline: 'middle',
          x: startPoint.x,
          y: startPoint.y - 10,
        },
        name: 'left-text-shape',
      });
      if (cfg.label.length > 1) {
        // the right label
        group.addShape('text', {
          attrs: {
            text: cfg.label[1],
            fill: '#595959',
            textAlign: 'end',
            textBaseline: 'middle',
            x: endPoint.x,
            y: endPoint.y - 10,
          },
          name: 'right-text-shape',
        });
      }
    }
    // return the keyShape
    return shape;
  },
});

const data = {
  nodes: [
    {
      id: 'node1',
      x: 100,
      y: 100,
      label: 'node1',
    },
    {
      id: 'node2',
      x: 300,
      y: 100,
      label: 'node2',
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
      // The left and right labels
      label: ['hello', 'world'],
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  modes: {
    default: [
      {
        type: 'drag-node',
        delegate: false,
      },
      'drag-canvas',
      {
        type: 'zoom-canvas',
        sensitivity: 0.5,
      },
    ],
  },
  defaultNode: {
    type: 'circle',
    size: [50],
    linkPoints: {
      left: true,
      right: true,
    },
  },
  defaultEdge: {
    type: 'multipleLabelsEdge',
    style: {
      stroke: '#F6BD16',
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u591A\u6807\u7B7E\u8FB9",en:"Multiple Labels"},filename:"edgeMulLabel.js",isNew:!1}],icon:"",id:"customEdge",title:{en:"Custom Edge",zh:"\u81EA\u5B9A\u4E49\u8FB9"},childrenKey:"demos",order:5},{demos:[{id:"cCircle",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1LelSq5TP9EAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * The demo shows customing a combo type by extending the built-in circle combo
 * by Shiwu
 *
 */

// The symbols for the marker inside the combo
const collapseIcon = (x, y, r) => {
  return [
    ['M', x - r, y],
    ['a', r, r, 0, 1, 0, r * 2, 0],
    ['a', r, r, 0, 1, 0, -r * 2, 0],
    ['M', x - r + 4, y],
    ['L', x - r + 2 * r - 4, y],
  ];
};
const expandIcon = (x, y, r) => {
  return [
    ['M', x - r, y],
    ['a', r, r, 0, 1, 0, r * 2, 0],
    ['a', r, r, 0, 1, 0, -r * 2, 0],
    ['M', x - r + 4, y],
    ['L', x - r + 2 * r - 4, y],
    ['M', x - r + r, y - r + 4],
    ['L', x, y + r - 4],
  ];
};

G6.registerCombo(
  'cCircle',
  {
    drawShape: function draw(cfg, group) {
      const self = this;
      // Get the shape style, where the style.r corresponds to the R in the Illustration of Built-in Rect Combo
      const style = self.getShapeStyle(cfg);
      // Add a circle shape as keyShape which is the same as the extended 'circle' type Combo
      const circle = group.addShape('circle', {
        attrs: {
          ...style,
          x: 0,
          y: 0,
          r: style.r,
        },
        draggable: true,
        name: 'combo-keyShape',
      });
      // Add the marker on the bottom
      const marker = group.addShape('marker', {
        attrs: {
          ...style,
          fill: '#fff',
          opacity: 1,
          x: 0,
          y: style.r,
          r: 10,
          symbol: collapseIcon,
        },
        draggable: true,
        name: 'combo-marker-shape',
      });

      return circle;
    },
    // Define the updating logic for the marker
    afterUpdate: function afterUpdate(cfg, combo) {
      const self = this;
      // Get the shape style, where the style.r corresponds to the R in the Illustration of Built-in Rect Combo
      const style = self.getShapeStyle(cfg);
      const group = combo.get('group');
      // Find the marker shape in the graphics group of the Combo
      const marker = group.find((ele) => ele.get('name') === 'combo-marker-shape');
      // Update the marker shape
      marker.attr({
        x: 0,
        y: style.r,
        // The property 'collapsed' in the combo data represents the collapsing state of the Combo
        // Update the symbol according to 'collapsed'
        symbol: cfg.collapsed ? expandIcon : collapseIcon,
      });
    },
  },
  'circle',
);

const data = {
  nodes: [
    { id: 'node1', x: 250, y: 200, comboId: 'combo1' },
    { id: 'node2', x: 300, y: 200, comboId: 'combo1' },
    { id: 'node3', x: 100, y: 200, comboId: 'combo3' },
  ],
  combos: [
    { id: 'combo1', label: 'Combo 1', parentId: 'combo2' },
    { id: 'combo2', label: 'Combo 2' },
    { id: 'combo3', label: 'Combo 3', collapsed: true },
  ],
};

const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = 'Click the bottom marker to collapse/expand the combo.';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos
  groupByTypes: false,
  // Configure the combos globally
  defaultCombo: {
    // The type of the combos. You can also assign type in the data of combos
    type: 'cCircle',
    labelCfg: {
      refY: 2,
    },
    // ... Other global configurations for combos
  },
  modes: {
    default: ['drag-combo', 'drag-node', 'drag-canvas'],
  },
});
graph.data(data);
graph.render();

// collapse/expand when click the marker
graph.on('combo:click', (e) => {
  if (e.target.get('name') === 'combo-marker-shape') {
    // graph.collapseExpandCombo(e.item.getModel().id);
    graph.collapseExpandCombo(e.item);
    if (graph.get('layout')) graph.layout();
    else graph.refreshPositions();
  }
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:"\u5E26\u6709 Marker \u7684 Circle",filename:"cCircle.js",isNew:!1},{id:"cRect",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*rQGaT4kiaYoAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * The demo shows customing a combo type by extending the built-in circle combo
 * by Shiwu
 *
 */

// The symbols for the marker inside the combo
const collapseIcon = (x, y, r) => {
  return [
    ['M', x - r, y],
    ['a', r, r, 0, 1, 0, r * 2, 0],
    ['a', r, r, 0, 1, 0, -r * 2, 0],
    ['M', x - r + 4, y],
    ['L', x - r + 2 * r - 4, y],
  ];
};
const expandIcon = (x, y, r) => {
  return [
    ['M', x - r, y],
    ['a', r, r, 0, 1, 0, r * 2, 0],
    ['a', r, r, 0, 1, 0, -r * 2, 0],
    ['M', x - r + 4, y],
    ['L', x - r + 2 * r - 4, y],
    ['M', x - r + r, y - r + 4],
    ['L', x, y + r - 4],
  ];
};

G6.registerCombo(
  'cRect',
  {
    drawShape: function drawShape(cfg, group) {
      const self = this;
      // Get the padding from the configuration
      cfg.padding = cfg.padding || [50, 20, 20, 20];
      // Get the shape's style, where the style.width and style.height correspond to the width and height in the figure of Illustration of Built-in Rect Combo
      const style = self.getShapeStyle(cfg);
      // Add a rect shape as the keyShape which is the same as the extended rect Combo
      const rect = group.addShape('rect', {
        attrs: {
          ...style,
          x: -style.width / 2 - (cfg.padding[3] - cfg.padding[1]) / 2,
          y: -style.height / 2 - (cfg.padding[0] - cfg.padding[2]) / 2,
          width: style.width,
          height: style.height,
        },
        draggable: true,
        name: 'combo-keyShape',
      });
      // Add the circle on the right
      group.addShape('marker', {
        attrs: {
          ...style,
          fill: '#fff',
          opacity: 1,
          // cfg.style.width and cfg.style.heigth correspond to the innerWidth and innerHeight in the figure of Illustration of Built-in Rect Combo
          x: cfg.style.width / 2 + cfg.padding[1],
          y: (cfg.padding[2] - cfg.padding[0]) / 2,
          r: 10,
          symbol: collapseIcon,
        },
        draggable: true,
        name: 'combo-marker-shape',
      });
      return rect;
    },
    // Define the updating logic of the right circle
    afterUpdate: function afterUpdate(cfg, combo) {
      const group = combo.get('group');
      // Find the circle shape in the graphics group of the Combo by name
      const marker = group.find((ele) => ele.get('name') === 'combo-marker-shape');
      // Update the position of the right circle
      marker.attr({
        // cfg.style.width and cfg.style.heigth correspond to the innerWidth and innerHeight in the figure of Illustration of Built-in Rect Combo
        x: cfg.style.width / 2 + cfg.padding[1],
        y: (cfg.padding[2] - cfg.padding[0]) / 2,
        // The property 'collapsed' in the combo data represents the collapsing state of the Combo
        // Update the symbol according to 'collapsed'
        symbol: cfg.collapsed ? expandIcon : collapseIcon,
      });
    },
  },
  'rect',
);

const data = {
  nodes: [
    { id: 'node1', x: 250, y: 200, comboId: 'combo1' },
    { id: 'node2', x: 300, y: 200, comboId: 'combo1' },
    { id: 'node3', x: 100, y: 200, comboId: 'combo3' },
  ],
  combos: [
    { id: 'combo1', label: 'Combo 1', parentId: 'combo2' },
    { id: 'combo2', label: 'Combo 2' },
    { id: 'combo3', label: 'Combo 3', collapsed: true },
  ],
};

const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = 'Click the right marker to collapse/expand the combo.';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos
  groupByTypes: false,
  // Configure the combos globally
  defaultCombo: {
    // The type of the combos. You can also assign type in the data of combos
    type: 'cRect',
    // ... Other global configurations for combos
  },
  modes: {
    default: ['drag-combo', 'drag-node', 'drag-canvas'],
  },
});
graph.data(data);
graph.render();

// collapse/expand when click the marker
graph.on('combo:click', (e) => {
  if (e.target.get('name') === 'combo-marker-shape') {
    // graph.collapseExpandCombo(e.item.getModel().id);
    graph.collapseExpandCombo(e.item);
    if (graph.get('layout')) graph.layout();
    else graph.refreshPositions();
  }
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:"\u5E26\u6709 Marker \u7684 Rect",filename:"cRect.js",isNew:!1}],icon:"",id:"customCombo",title:{en:"Custom Combo",zh:"\u81EA\u5B9A\u4E49 Combo"},childrenKey:"demos",order:6},{demos:[{id:"copyLabel",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*O5DCQ4ziMisAAAAAAAAAAAAAARQnAQ",source:`import G6 from "@antv/g6";

/**
 * Process the long label, hover to show the complete label, click the icon to copy the label
 * provided by GitHub user @WontonCat
 * Thanks for contributing!
 */

 const tipDiv = document.createElement('div');
 tipDiv.innerHTML = \`Hover to show the complete label, click the icon to copy the content. Hover \u663E\u793A\u5B8C\u6574 label\uFF0C\u70B9\u51FB\u5DE6\u4FA7 icon \u590D\u5236 label \u5185\u5BB9\`;
 document.getElementById('container').appendChild(tipDiv);


/**
 * format the string
 * @param {string} str The origin string
 * @param {number} maxWidth max width
 * @param {number} fontSize font size
 * @return {string} the processed result
 */
const fittingString = (str, maxWidth, fontSize) => {
  const ellipsis = "...";
  const ellipsisLength = G6.Util.getTextSize(ellipsis, fontSize)[0];
  let currentWidth = 0;
  let res = str;
  const pattern = new RegExp("[\\u4E00-\\u9FA5]+"); // distinguish the Chinese charactors and letters
  str.split("").forEach((letter, i) => {
    if (currentWidth > maxWidth - ellipsisLength) return;
    if (pattern.test(letter)) {
      // Chinese charactors
      currentWidth += fontSize;
    } else {
      // get the width of single letter according to the fontSize
      currentWidth += G6.Util.getLetterWidth(letter, fontSize);
    }
    if (currentWidth > maxWidth - ellipsisLength) {
      res = \`\${str.substr(0, i)}\${ellipsis}\`;
    }
  });
  return res;
};

const copyStr = (str) => {
  const input = document.createElement("textarea");
  input.value = str;
  document.body.appendChild(input);
  input.select();
  document.execCommand("Copy");
  document.body.removeChild(input);
  alert("Copy Success!");
};

const data = {
  nodes: [
    {
      x: 100,
      y: 0,
      id: "node1",
      topText: "This label is too long to be displayed",
      bottomText: "This label is too long to be displayed"
    },
    {
      x: 100,
      y: 100,
      id: "node2",
      topText: "Short Label",
      bottomText: "Click the Logo to Copy!"
    }
  ]
};

const width = document.getElementById("container").scrollWidth;
const height = document.getElementById("container").scrollHeight || 500;
const graph = new G6.Graph({
  container: "container",
  width,
  height: height - 50,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  defaultNode: {
    type: "copy-node"
  },
  defaultEdge: {
    color: "#F6BD16"
  }
});

const nodeHeight = 80;
const nodeWidth = 200;
const fillColor = "#f6e9d7";
const fontColor = "#ff7900";
const padding = 7;

G6.registerNode(
  "copy-node",
  {
    drawShape: function drawShape(cfg, group) {
      const rect = group.addShape("rect", {
        attrs: {
          x: 0,
          y: 0,
          height: nodeHeight,
          width: nodeWidth,
          fill: fillColor,
          stroke: fontColor,
          lineWidth: 2,
          radius: 5
        }
      });

      // \u4E0A\u90E8\u6587\u5B57\u533A\u57DF
      const topGroup = group.addGroup({
        name: "top-group"
      });

      topGroup.addShape("rect", {
        attrs: {
          fill: "#fff",
          stroke: "#c7d0d1",
          x: padding,
          y: padding,
          width: nodeWidth - padding * 2,
          height: 0.5 * nodeHeight - padding,
          lineWidth: 1.5,
          radius: 4
        }
      });

      topGroup.addShape("text", {
        attrs: {
          text: fittingString(cfg.topText, nodeWidth - padding * 2 - 10, 14),
          x: 0.5 * nodeWidth,
          y: (0.5 * nodeHeight + padding) * 0.5,
          fontSize: 14,
          textAlign: "center",
          textBaseline: "middle",
          shadowColor: fontColor,
          fill: fontColor
        },
        name: "top-text"
      });

      topGroup.addShape("image", {
        attrs: {
          x: padding + 5,
          y: padding + (0.5 * nodeHeight - padding) * 0.5 - 10,
          height: 20,
          width: 20,
          img: "https://gw.alipayobjects.com/zos/antfincdn/FLrTNDvlna/antv.png",
          opacity: 0,
          cursor: "pointer"
        },
        name: "top-copy-img"
      });

      // \u4E0B\u90E8\u6587\u5B57\u533A\u57DF
      const bottomGroup = group.addGroup({
        name: "bottom-group"
      });

      bottomGroup.addShape("text", {
        attrs: {
          text: fittingString(cfg.bottomText, nodeWidth - 10, 14),
          x: 0.5 * nodeWidth,
          y: nodeHeight - (0.5 * nodeHeight + padding) * 0.5,
          fontSize: 14,
          textAlign: "center",
          textBaseline: "middle",
          shadowColor: fontColor,
          fill: fontColor
        },
        name: "bottom-text"
      });

      bottomGroup.addShape("image", {
        attrs: {
          x: 5,
          y: 0.5 * nodeHeight + 8,
          height: 20,
          width: 20,
          img: "https://gw.alipayobjects.com/zos/antfincdn/FLrTNDvlna/antv.png",
          opacity: 0,
          cursor: "pointer"
        },
        name: "bottom-copy-img"
      });

      return rect;
    },
    setState(name, value, item) {
      const group = item.get("group");
      const model = item.get("model");
      const { topText, bottomText } = model;

      if (name === "top-group-active") {
        const img = group.find((e) => e.get("name") === "top-copy-img");
        img.attr({
          opacity: value ? 1 : 0
        });

        const text = group.find((e) => e.get("name") === "top-text");
        // \u533A\u57DF\u662F\u5426\u591F\u957F ? \u5C45\u4E2D\uFF0C \u5C55\u793A\u5185\u5BB9\u4E0D\u53D8 : \u5DE6\u5BF9\u5176\uFF0C \u5C55\u793A\u5B8C\u6574
        const cutStr = fittingString(topText, nodeWidth - padding * 2 - 10, 14);
        if (cutStr === topText) {
          text.attr({
            fontWeight: value ? 800 : 700,
            shadowBlur: value ? 12.2 : 0,
            text: value
              ? topText
              : fittingString(topText, nodeWidth - padding * 2 - 10, 14)
          });
        } else {
          text.attr({
            fontWeight: value ? 800 : 700,
            x: value ? padding + 30 : 0.5 * nodeWidth,
            shadowBlur: value ? 12.2 : 0,
            textAlign: value ? "left" : "center",
            text: value
              ? topText
              : fittingString(topText, nodeWidth - padding * 2 - 10, 14)
          });
        }
      }

      if (name === "bottom-group-active") {
        const img = group.find((e) => e.get("name") === "bottom-copy-img");
        img.attr({
          opacity: value ? 1 : 0
        });

        const text = group.find((e) => e.get("name") === "bottom-text");
        const cutStr = fittingString(bottomText, nodeWidth - 10, 14);

        if (cutStr === bottomText) {
          text.attr({
            fontWeight: value ? 800 : 700,
            shadowBlur: value ? 12.2 : 0,
            text: value
              ? bottomText
              : fittingString(bottomText, nodeWidth - 10, 14)
          });
        } else {
          text.attr({
            fontWeight: value ? 800 : 700,
            x: value ? 30 : 0.5 * nodeWidth,
            shadowBlur: value ? 12.2 : 0,
            textAlign: value ? "left" : "center",
            text: value
              ? bottomText
              : fittingString(bottomText, nodeWidth - 10, 14)
          });
        }
      }
    }
  },
  "single-node"
);

graph.on("top-group:mouseenter", (e) => {
  graph.setItemState(e.item, "top-group-active", true);
});
graph.on("top-group:mouseleave", (e) => {
  graph.setItemState(e.item, "top-group-active", false);
});
graph.on("bottom-group:mouseenter", (e) => {
  graph.setItemState(e.item, "bottom-group-active", true);
});
graph.on("bottom-group:mouseleave", (e) => {
  graph.setItemState(e.item, "bottom-group-active", false);
});

graph.on("node:click", (e) => {
  const name = e.target.get("name");
  const model = e.item.get("model");
  if (name === "top-copy-img") {
    const text = model.topText;
    copyStr(text);
  } else if (name === "bottom-copy-img") {
    const text = model.bottomText;
    copyStr(text);
  }
});
graph.data(data);
graph.render();
`,title:{zh:"\u6587\u672C\u8D85\u957F\u4EA4\u4E92\u4E0E\u590D\u5236",en:"Long Label Show and Copy"},filename:"copyLabel.js",isNew:!1},{id:"labelLen",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*FNzAQKvcW1kAAAAAAAAAAABkARQnAQ",source:`/**
 * When the label is too long to be displayed, hide the overflow characters and show a ellipsis instead
 * There are two ways to process the long labels
 * 1. Process in the data;
 * 2. Process when custom the edge or node like this:
 *  group.addShape('text', {
 *     attrs: {
 *       text: fittingString(cfg.label, 50, 12),
 *       ...
 *     },
 *     name: 'text-shape'
 *  })
 *
 */
import G6 from '@antv/g6';

/**
 * format the string
 * @param {string} str The origin string
 * @param {number} maxWidth max width
 * @param {number} fontSize font size
 * @return {string} the processed result
 */
const fittingString = (str, maxWidth, fontSize) => {
  const ellipsis = '...';
  const ellipsisLength = G6.Util.getTextSize(ellipsis, fontSize)[0];
  let currentWidth = 0;
  let res = str;
  const pattern = new RegExp('[\\u4E00-\\u9FA5]+'); // distinguish the Chinese charactors and letters
  str.split('').forEach((letter, i) => {
    if (currentWidth > maxWidth - ellipsisLength) return;
    if (pattern.test(letter)) {
      // Chinese charactors
      currentWidth += fontSize;
    } else {
      // get the width of single letter according to the fontSize
      currentWidth += G6.Util.getLetterWidth(letter, fontSize);
    }
    if (currentWidth > maxWidth - ellipsisLength) {
      res = \`\${str.substr(0, i)}\${ellipsis}\`;
    }
  });
  return res;
};

const globalFontSize = 12;

const data = {
  nodes: [
    {
      x: 100,
      y: 100,
      size: 40,
      label: 'This label is too long to be displayed',
      id: 'node1',
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
    },
    {
      x: 300,
      y: 100,
      size: 80,
      label: 'This label is also too long to be displayed',
      id: 'node2',
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
      label: 'This label is too long to be displayed',
      labelCfg: {
        refY: 20,
        style: {
          fontSize: globalFontSize,
        },
      },
      style: {
        endArrow: true,
      },
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  defaultNode: {
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
    labelCfg: {
      style: {
        fontSize: globalFontSize,
      },
    },
  },
  defaultEdge: {
    color: '#F6BD16',
  },
});

// Modify the label in the data
data.nodes.forEach(function (node) {
  node.label = fittingString(node.label, node.size, globalFontSize);
});
data.edges.forEach(function (edge) {
  edge.label = fittingString(edge.label, 120, globalFontSize);
});

graph.data(data);
graph.render();
`,title:{zh:"\u6587\u672C\u8D85\u957F",en:"Long Label"},filename:"labelLen.js",isNew:!1},{id:"labelLen1",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*EC0-R7tAn0MAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
/**
 * Process the long label by breaking the text
 * by Jingxi
 *
 */

/**
 * format the string
 * @param {string} str The origin string
 * @param {number} maxWidth max width
 * @param {number} fontSize font size
 * @return {string} the processed result
 */
const fittingString = (str, maxWidth, fontSize) => {
  let currentWidth = 0;
  let res = str;
  const pattern = new RegExp('[\\u4E00-\\u9FA5]+'); // distinguish the Chinese charactors and letters
  str.split('').forEach((letter, i) => {
    if (currentWidth > maxWidth) return;
    if (pattern.test(letter)) {
      // Chinese charactors
      currentWidth += fontSize;
    } else {
      // get the width of single letter according to the fontSize
      currentWidth += G6.Util.getLetterWidth(letter, fontSize);
    }
    if (currentWidth > maxWidth) {
      res = \`\${str.substr(0, i)}\\n\${str.substr(i)}\`;
    }
  });
  return res;
};

const globalFontSize = 12;
const data = {
  nodes: [
    {
      x: 100,
      y: 100,
      label: fittingString('Break the line if it is too long', 80, globalFontSize),
      id: 'node1',
      labelCfg: {
        position: 'bottom',
      },
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
    },
    {
      x: 300,
      y: 100,
      label: fittingString('Break the line if it is too long', 80, globalFontSize),
      id: 'node2',
      labelCfg: {
        position: 'bottom',
      },
      anchorPoints: [
        [0, 0.5],
        [1, 0.5],
      ],
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
      label: fittingString('Break the line if it is too long', 100, globalFontSize),
      labelCfg: {
        refY: 20,
      },
      style: {
        endArrow: true,
      },
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  defaultNode: {
    type: 'rect',
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    color: '#F6BD16',
  },
});
graph.data(data);
graph.render();
`,title:{zh:"\u4F7F\u7528\u6362\u884C\u7B26\u5904\u7406\u6587\u672C\u8D85\u957F",en:"Break Line for Long Label"},filename:"labelLen1.js",isNew:!1}],icon:"",id:"label",title:{en:"Long Label",zh:"\u8D85\u957F\u6587\u672C"},childrenKey:"demos",order:7},{demos:[{id:"nodeBg",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*m5ABT5ra4w4AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: 'node1',
      x: 150,
      y: 50,
      label: 'node1',
    },
    {
      id: 'node2',
      x: 250,
      y: 200,
      label: 'node2',
    },
    {
      id: 'node3',
      x: 100,
      y: 350,
      label: 'node3',
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
      label: 'edge 1',
    },
    {
      source: 'node2',
      target: 'node3',
      label: 'edge 2',
    },
    {
      source: 'node3',
      target: 'node1',
      label: 'edge 3',
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  defaultNode: {
    type: 'circle',
    labelCfg: {
      style: {
        fill: '#1890ff',
        fontSize: 14,
        background: {
          fill: '#ffffff',
          stroke: '#9EC9FF',
          padding: [2, 2, 2, 2],
          radius: 2,
        },
      },
      position: 'bottom',
    },
  },
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  nodeStateStyles: {
    // style configurations for hover state
    hover: {
      fillOpacity: 0.8,
    },
    // style configurations for selected state
    selected: {
      lineWidth: 5,
    },
  },
});

graph.data(data);
graph.render();
`,title:{zh:"\u8BBE\u7F6E\u8282\u70B9\u6587\u672C\u80CC\u666F",en:"Set Node Label Background"},filename:"nodeBg.js",isNew:!1},{id:"edgeBg",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*w_bNSZTlPXUAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: 'node1',
      x: 150,
      y: 50,
      label: 'node1',
    },
    {
      id: 'node2',
      x: 250,
      y: 200,
      label: 'node2',
    },
    {
      id: 'node3',
      x: 100,
      y: 350,
      label: 'node3',
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
      label: 'edge 1',
    },
    {
      source: 'node2',
      target: 'node3',
      label: 'edge 2',
    },
    {
      source: 'node3',
      target: 'node1',
      label: 'edge 3',
    },
  ],
};

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  defaultNode: {
    type: 'circle',
    labelCfg: {
      position: 'bottom',
    },
  },
  defaultEdge: {
    labelCfg: {
      autoRotate: true,
      style: {
        fill: '#1890ff',
        fontSize: 14,
        background: {
          fill: '#ffffff',
          stroke: '#9EC9FF',
          padding: [2, 2, 2, 2],
          radius: 2,
        },
      },
    },
  },
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  nodeStateStyles: {
    // style configurations for hover state
    hover: {
      fillOpacity: 0.8,
    },
    // style configurations for selected state
    selected: {
      lineWidth: 5,
    },
  },
});

graph.data(data);
graph.render();
`,title:{zh:"\u8BBE\u7F6E\u8FB9\u4E0A\u6587\u672C\u80CC\u666F",en:"Set Edge label Background"},filename:"edgeBg.js",isNew:!1}],icon:"",id:"labelBg",title:{en:"Label Background",zh:"\u8BBE\u7F6E\u6587\u672C\u80CC\u666F"},childrenKey:"demos",order:8},{demos:[{id:"multiEdges",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*g2p_Qa_wZcIAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: 'node1',
      x: 50,
      y: 350,
      label: 'A',
    },
    {
      id: 'node2',
      x: 250,
      y: 150,
      label: 'B',
    },
    {
      id: 'node3',
      x: 450,
      y: 350,
      label: 'C',
    },
  ],
  edges: [],
};

for (let i = 0; i < 10; i++) {
  data.edges.push({
    source: 'node1',
    target: 'node2',
    label: \`\${i}th edge of A-B\`,
  });
}
for (let i = 0; i < 5; i++) {
  data.edges.push({
    source: 'node2',
    target: 'node3',
    label: \`\${i}th edge of B-C\`,
  });
}

G6.Util.processParallelEdges(data.edges);

const width = document.getElementById('container').scrollWidth;
const height = document.getElementById('container').scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // translate the graph to align the canvas's center, support by v3.5.1
  fitCenter: true,
  // the edges are linked to the center of source and target ndoes
  linkCenter: true,
  defaultNode: {
    type: 'circle',
    size: [40],
    color: '#5B8FF9',
    style: {
      fill: '#9EC9FF',
      lineWidth: 3,
    },
    labelCfg: {
      style: {
        fill: '#000',
        fontSize: 14,
      },
    },
  },
  defaultEdge: {
    type: 'quadratic',
    labelCfg: {
      autoRotate: true,
    },
  },
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  nodeStateStyles: {
    // style configurations for hover state
    hover: {
      fillOpacity: 0.8,
    },
    // style configurations for selected state
    selected: {
      lineWidth: 5,
    },
  },
});

graph.data(data);
graph.render();
`,title:{zh:"\u4E24\u8282\u70B9\u95F4\u5B58\u5728\u591A\u6761\u8FB9",en:"Multiple Edges Between 2 Nodes"},filename:"multiEdges.js",isNew:!1}],icon:"",id:"multiEdge",title:{en:"Multiple Edges Between 2 Nodes",zh:"\u4E24\u8282\u70B9\u95F4\u5B58\u5728\u591A\u6761\u8FB9"},childrenKey:"demos",order:9}],childrenKey:"examples"},{id:"interaction",title:{zh:"\u4EA4\u4E92",en:"Interaction"},icon:"interaction",examples:[{demos:[{id:"activateRelations",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*A3iMQo8L_McAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

insertCss(\`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #000;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
\`);

const tooltip = new G6.Tooltip({
  offsetX: 10,
  offsetY: 10,
  fixToNode: [1, 0.5],
  // the types of items that allow the tooltip show up
  // \u5141\u8BB8\u51FA\u73B0 tooltip \u7684 item \u7C7B\u578B
  itemTypes: ['node', 'edge'],
  // custom the tooltip's content
  // \u81EA\u5B9A\u4E49 tooltip \u5185\u5BB9
  getContent: (e) => {
    const outDiv = document.createElement('div');
    outDiv.style.width = 'fit-content';
    outDiv.style.height = 'fit-content';
    const model = e.item.getModel();
    if (e.item.getType() === 'node') {
      outDiv.innerHTML = \`\${model.name}\`;
    } else {
      const source = e.item.getSource();
      const target = e.item.getTarget();
      outDiv.innerHTML = \`\u6765\u6E90\uFF1A\${source.getModel().name}<br/>\u53BB\u5411\uFF1A\${target.getModel().name}\`;
    }
    return outDiv;
  },
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  layout: {
    type: 'force',
    edgeStrength: 0.7,
  },
  plugins: [tooltip],
  modes: {
    default: ['drag-canvas', 'activate-relations'],
  },
  defaultNode: {
    size: [10, 10],
    /* style for the keyShape */
    // style: {
    //   lineWidth: 2,
    //   fill: '#DEE9FF',
    //   stroke: '#5B8FF9',
    // },
  },
  defaultEdge: {
    /* style for the keyShape */
    style: {
      stroke: '#aaa',
      lineAppendWidth: 2,
      opacity: 0.3,
    },
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */
  // nodeStateStyles: {
  //   active: {
  //     opacity: 1,
  //   },
  //   inactive: {
  //     opacity: 0.2,
  //   },
  // },
  // edgeStateStyles: {
  //   active: {
  //     stroke: '#999',
  //   },
  // },
});

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/xiaomi.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data(data);
    graph.render();
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u5185\u7F6E\u7684\u9AD8\u4EAE\u8282\u70B9",en:"Activate Relations"},filename:"activateRelations.js",isNew:!1},{id:"highlightDark",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*A3iMQo8L_McAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

insertCss(\`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #000;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
\`);

const tooltip = new G6.Tooltip({
  offsetX: 10,
  offsetY: 10,
  fixToNode: [1, 0.5],
  // the types of items that allow the tooltip show up
  // \u5141\u8BB8\u51FA\u73B0 tooltip \u7684 item \u7C7B\u578B
  itemTypes: ['node', 'edge'],
  // custom the tooltip's content
  // \u81EA\u5B9A\u4E49 tooltip \u5185\u5BB9
  getContent: (e) => {
    const outDiv = document.createElement('div');
    outDiv.style.width = 'fit-content';
    outDiv.style.height = 'fit-content';
    const model = e.item.getModel();
    if (e.item.getType() === 'node') {
      outDiv.innerHTML = \`\${model.name}\`;
    } else {
      const source = e.item.getSource();
      const target = e.item.getTarget();
      outDiv.innerHTML = \`\u6765\u6E90\uFF1A\${source.getModel().name}<br/>\u53BB\u5411\uFF1A\${target.getModel().name}\`;
    }
    return outDiv;
  },
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  plugins: [tooltip],
  layout: {
    type: 'force',
    edgeStrength: 0.7,
  },
  modes: {
    default: ['drag-canvas'],
  },
  defaultNode: {
    size: [10, 10],
    style: {
      lineWidth: 2,
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    size: 1,
    style: {
      stroke: '#e2e2e2',
      lineAppendWidth: 2,
    },
  },
  nodeStateStyles: {
    highlight: {
      opacity: 1,
    },
    dark: {
      opacity: 0.2,
    },
  },
  edgeStateStyles: {
    highlight: {
      stroke: '#999',
    },
  },
});

function clearAllStats() {
  graph.setAutoPaint(false);
  graph.getNodes().forEach(function (node) {
    graph.clearItemStates(node);
  });
  graph.getEdges().forEach(function (edge) {
    graph.clearItemStates(edge);
  });
  graph.paint();
  graph.setAutoPaint(true);
}

graph.on('node:mouseenter', function (e) {
  const item = e.item;
  graph.setAutoPaint(false);
  graph.getNodes().forEach(function (node) {
    graph.clearItemStates(node);
    graph.setItemState(node, 'dark', true);
  });
  graph.setItemState(item, 'dark', false);
  graph.setItemState(item, 'highlight', true);
  graph.getEdges().forEach(function (edge) {
    if (edge.getSource() === item) {
      graph.setItemState(edge.getTarget(), 'dark', false);
      graph.setItemState(edge.getTarget(), 'highlight', true);
      graph.setItemState(edge, 'highlight', true);
      edge.toFront();
    } else if (edge.getTarget() === item) {
      graph.setItemState(edge.getSource(), 'dark', false);
      graph.setItemState(edge.getSource(), 'highlight', true);
      graph.setItemState(edge, 'highlight', true);
      edge.toFront();
    } else {
      graph.setItemState(edge, 'highlight', false);
    }
  });
  graph.paint();
  graph.setAutoPaint(true);
});
graph.on('node:mouseleave', clearAllStats);
graph.on('canvas:click', clearAllStats);

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/xiaomi.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data({
      nodes: data.nodes,
      edges: data.edges.map(function (edge, i) {
        edge.id = 'edge' + i;
        return Object.assign({}, edge);
      }),
    });

    graph.render();
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u81EA\u5B9A\u4E49\u9AD8\u4EAE",en:"Custom Highlight"},filename:"highlightDark.js",isNew:!1}],icon:"",id:"highlight",title:{en:"Highlight Nodes",zh:"\u9AD8\u4EAE\u76F8\u90BB\u8282\u70B9"},childrenKey:"demos",order:0},{demos:[{id:"dragSubtree",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*EU_yRa8hMJUAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML =
  'Move a subtree to a new parent by dragging the root node of the subtree.';
container.appendChild(descriptionDiv);

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')
  .then((res) => res.json())
  .then((data) => {
    const container = document.getElementById('container');
    const width = container.scrollWidth;
    const height = (container.scrollHeight || 500) - 20;
    const graph = new G6.TreeGraph({
      container: 'container',
      width,
      height,
      modes: {
        default: [
          'drag-canvas',
          'zoom-canvas',
          {
            type: 'drag-node',
            enableDelegate: true,
          },
        ],
      },
      defaultNode: {
        size: [26, 26],
        anchorPoints: [
          [0, 0.5],
          [1, 0.5],
        ],
        style: {
          fill: '#C6E5FF',
          stroke: '#5B8FF9',
        },
      },
      defaultEdge: {
        type: 'cubic-horizontal',
        style: {
          stroke: '#A3B1BF',
        },
      },
      nodeStateStyles: {
        closest: {
          fill: '#f00',
        },
      },
      layout: {
        type: 'compactBox',
        direction: 'LR',
        getId: function getId(d) {
          return d.id;
        },
        getHeight: function getHeight() {
          return 16;
        },
        getWidth: function getWidth() {
          return 16;
        },
        getVGap: function getVGap() {
          return 10;
        },
        getHGap: function getHGap() {
          return 100;
        },
      },
    });

    graph.node(function (node) {
      return {
        label: node.id,
        labelCfg: {
          offset: 10,
          position: node.children && node.children.length > 0 ? 'left' : 'right',
        },
      };
    });

    graph.data(data);
    graph.render();
    graph.fitView();

    let minDisNode;
    graph.on('node:dragstart', (e) => {
      minDisNode = undefined;
    });
    graph.on('node:drag', (e) => {
      minDisNode = undefined;
      const item = e.item;
      const model = item.getModel();
      const nodes = graph.getNodes();
      let minDis = Infinity;
      nodes.forEach((inode) => {
        graph.setItemState(inode, 'closest', false);
        const node = inode.getModel();
        if (node.id === model.id) return;
        const dis = (node.x - e.x) * (node.x - e.x) + (node.y - e.y) * (node.y - e.y);
        if (dis < minDis) {
          minDis = dis;
          minDisNode = inode;
        }
      });
      console.log('minDis', minDis, minDisNode);
      if (minDis < 2000) graph.setItemState(minDisNode, 'closest', true);
      else minDisNode = undefined;
    });

    graph.on('node:dragend', (e) => {
      if (!minDisNode) {
        descriptionDiv.innerHTML = 'Failed. No node close to the dragged node.';
        return;
      }
      const item = e.item;
      const id = item.getID();
      const data = graph.findDataById(id);
      // if the minDisNode is a descent of the dragged node, return
      let isDescent = false;
      const minDisNodeId = minDisNode.getID();
      console.log('dragend', minDisNodeId, isDescent, data, id);

      G6.Util.traverseTree(data, (d) => {
        if (d.id === minDisNodeId) isDescent = true;
      });
      if (isDescent) {
        descriptionDiv.innerHTML = 'Failed. The target node is a descendant of the dragged node.';
        return;
      }
      graph.removeChild(id);

      setTimeout(() => {
        const newParentData = graph.findDataById(minDisNodeId);
        let newChildren = newParentData.children;
        if (newChildren) newChildren.push(data);
        else newChildren = [data];
        graph.updateChildren(newChildren, minDisNodeId);
        descriptionDiv.innerHTML = 'Success.';
      }, 600);
    });

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
      };
  });
`,title:{zh:"\u62D6\u62FD\u5B50\u6811\u6539\u53D8\u7ED3\u6784",en:"Move Subtree to New Parent"},filename:"dragSubtree.js",isNew:!1},{id:"collapseSlibing",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ugs9Qad-bQMAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

/**
 * \u8BE5\u6848\u4F8B\u6F14\u793A\uFF0C\u70B9\u51FB\u4E00\u4E2A\u8282\u70B9\uFF0C\u540C\u5C42\u7684\u540C\u7C7B\u8282\u70B9\u5408\u5E76\u4E3A\u4E00\u4E2A\u805A\u5408\u8282\u70B9\u3002\u518D\u6B21\u70B9\u51FB\u5219\u5C55\u5F00\u3002
 * \u6765\u793A\u4F8B\u542F\u53D1\u81EA GitHub \u7528\u6237 @c1105590204 
 * by \u5341\u543E
 * 
 * Click a node to collapse the siblings with same type, and click again to expand
 * This demo is inspired by the GitHub User @c1105590204 
 * by Yanyan-Wang
 */

const container = document.getElementById('container');
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML =
  'Click a node to collapse the siblings with same cluster, and click again to expand';
container.appendChild(descriptionDiv);

// custom the collapse-sibling behavior
G6.registerBehavior('collapse-slibing', {
  getEvents() {
    return {
      'node:click': 'onClick',
    };
  },
  onClick(evt) {
    const { item } = evt;
    const model = item.getModel();
    const cluster = model.cluster;
    const parentData = item.get('parent').getModel();

    if (model.collapsedSiblings) {
      graph.removeChild(model.id);
      setTimeout(() => {
        const children = parentData.children;
        for (let i = model.collapsedSiblings.length - 1; i >= 0; i --) {
          const add = model.collapsedSiblings[i];
          children.splice(add.idx, 0, add);
        }
        delete model.collapsedSiblings;
        this.graph.updateChildren(children, parentData.id)
      }, 550);
      return;
    }
    const siblingData = parentData.children;
    if (siblingData.length <= 1) return;
    let count = 0;
    const aggregateNode = {
      id: \`aggregate-node-\${model.id}\`,
      children: [],
      cluster,
      collapsedSiblings: []
    }
    let modelIdx = siblingData.length - 1;
    for (let i = siblingData.length - 1; i >= 0; i --) {
      const sibling = siblingData[i]
      if (sibling.id === model.id) {

        const remove = siblingData[i]
        remove.idx = i;
        aggregateNode.collapsedSiblings.push(remove);
        modelIdx = Math.min(i, modelIdx);

        aggregateNode.children = (siblingData[i].children || []).concat(aggregateNode.children);
      }
      else if (sibling.cluster === cluster && sibling.id !== model.id) {
        count ++;
        aggregateNode.children = (siblingData[i].children || []).concat(aggregateNode.children);
        const remove = siblingData.splice(i, 1)[0]
        remove.idx = i;
        aggregateNode.collapsedSiblings.push(remove);
        modelIdx = Math.min(i, modelIdx);
      }
    }
    if (!count) return;
    aggregateNode.label = count + 1;
    aggregateNode.size = 16 + (count + 1) * 4;

    graph.removeChild(model.id);
    siblingData.splice(modelIdx, 0, aggregateNode);
    
    setTimeout(() => {
      this.graph.updateChildren(siblingData, parentData.id)
    }, 550);

    return;
  },
});

// givin subject colors, getColorSetsBySubjectColors returns colorsets
const colors = [ '#5F95FF', '#61DDAA', '#65789B' ];
const colorSets = G6.Util.getColorSetsBySubjectColors(colors, '#fff', 'default', '#777');

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 50;
const graph = new G6.TreeGraph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['collapse-slibing', 'drag-canvas'],
  },
  fitView: true,
  layout: {
    type: 'compactBox',
    direction: 'LR',
    defalutPosition: [],
    getId: function getId(d) {
      return d.id;
    },
    getHeight: function getHeight() {
      return 16;
    },
    getWidth: function getWidth() {
      return 16;
    },
    getVGap: function getVGap(d) {
      return 10;
    },
    getHGap: function getHGap(d) {
      return 50;
    },
  },
  defaultEdge: {
    type: 'cubic-horizontal',
    color: '#A3B1BF',
  }
});
graph.node(function (node) {
  const colorSet = colorSets[(+node.cluster.replace('c', ''))]
  return {
    size: node.size || 16,
    style: {
      fill: colorSet?.mainFill || '#DEE9FF',
      stroke: colorSet?.mainStroke || '#5B8FF9',
    },
  };
});

// data with cluster info
const data = {
  isRoot: true,
  id: 'Root',
  cluster: 'c0',
  children: [
    {
      id: 'SubTreeNode1',
      cluster: 'c0',
      raw: {},
      children: [
        {
          id: 'SubTreeNode1.1',
          cluster: 'c1',
        },
        {
          id: 'SubTreeNode1.2',
          cluster: 'c1',
          children: [
            {
              id: 'SubTreeNode1.2.1',
              cluster: 'c0',
            },
            {
              id: 'SubTreeNode1.2.2',
              cluster: 'c0',
            },
            {
              id: 'SubTreeNode1.2.3',
              cluster: 'c1',
            },
          ],
        },
      ],
    },
    {
      id: 'SubTreeNode2',
      cluster: 'c0',
      children: [
        {
          id: 'SubTreeNode2.1',
          cluster: 'c2',
        },
      ],
    },
    {
      id: 'SubTreeNode3',
      cluster: 'c0',
      children: [
        {
          id: 'SubTreeNode3.1',
          cluster: 'c2',
        },
        {
          id: 'SubTreeNode3.2',
          cluster: 'c2',
        },
        {
          id: 'SubTreeNode3.3',
          cluster: 'c2',
        },
      ],
    },
    {
      id: 'SubTreeNode4',
      cluster: 'c1',
    },
    {
      id: 'SubTreeNode5',
      cluster: 'c1',
    },
    {
      id: 'SubTreeNode6',
      cluster: 'c1',
    },
  ],
};
graph.data(data);
graph.render();


if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u5408\u5E76\u540C\u7C7B\u5144\u5F1F\u8282\u70B9",en:"Collapse the Sibling Nodes"},filename:"collapseSlibing.js",isNew:!1},{id:"changeData",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*wc1-QaqOPsgAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * \u8BE5\u6848\u4F8B\u6F14\u793A\uFF0C\u5F53\u70B9\u51FB\u53F6\u5B50\u8282\u70B9\u65F6\uFF0C\u5982\u4F55\u52A8\u6001\u5411\u6811\u56FE\u4E2D\u6DFB\u52A0\u591A\u6761\u6570\u636E\u3002
 * \u4E3B\u8981\u6F14\u793AchangeData\u7684\u7528\u6CD5\u3002
 */

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.TreeGraph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['collapse-expand', 'drag-canvas'],
  },
  fitView: true,
  layout: {
    type: 'compactBox',
    direction: 'LR',
    defalutPosition: [],
    getId: function getId(d) {
      return d.id;
    },
    getHeight: function getHeight() {
      return 16;
    },
    getWidth: function getWidth() {
      return 16;
    },
    getVGap: function getVGap() {
      return 50;
    },
    getHGap: function getHGap() {
      return 100;
    },
  },
});
graph.node(function (node) {
  return {
    size: 16,
    anchorPoints: [
      [0, 0.5],
      [1, 0.5],
    ],
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
    label: node.id,
    labelCfg: {
      position: node.children && node.children.length > 0 ? 'left' : 'right',
    },
  };
});
let i = 0;
graph.edge(function () {
  i++;
  return {
    type: 'cubic-horizontal',
    color: '#A3B1BF',
    label: i,
  };
});

const data = {
  isRoot: true,
  id: 'Root',
  style: {
    fill: 'red',
  },
  children: [
    {
      id: 'SubTreeNode1',
      raw: {},
      children: [
        {
          id: 'SubTreeNode1.1',
        },
        {
          id: 'SubTreeNode1.2',
          children: [
            {
              id: 'SubTreeNode1.2.1',
            },
            {
              id: 'SubTreeNode1.2.2',
            },
            {
              id: 'SubTreeNode1.2.3',
            },
          ],
        },
      ],
    },
    {
      id: 'SubTreeNode2',
      children: [
        {
          id: 'SubTreeNode2.1',
        },
      ],
    },
    {
      id: 'SubTreeNode3',
      children: [
        {
          id: 'SubTreeNode3.1',
        },
        {
          id: 'SubTreeNode3.2',
        },
        {
          id: 'SubTreeNode3.3',
        },
      ],
    },
    {
      id: 'SubTreeNode4',
    },
    {
      id: 'SubTreeNode5',
    },
    {
      id: 'SubTreeNode6',
    },
  ],
};
graph.data(data);
graph.render();

let count = 0;

graph.on('node:click', function (evt) {
  const item = evt.item;

  const nodeId = item.get('id');
  const model = item.getModel();
  const children = model.children;
  if (!children || children.length === 0) {
    const childData = [
      {
        id: 'child-data-' + count,
        type: 'rect',
        children: [
          {
            id: 'x-' + count,
          },
          {
            id: 'y-' + count,
          },
        ],
      },
      {
        id: 'child-data1-' + count,
        children: [
          {
            id: 'x1-' + count,
          },
          {
            id: 'y1-' + count,
          },
        ],
      },
    ];

    const parentData = graph.findDataById(nodeId);
    if (!parentData.children) {
      parentData.children = [];
    }
    // \u5982\u679CchildData\u662F\u4E00\u4E2A\u6570\u7EC4\uFF0C\u5219\u76F4\u63A5\u8D4B\u503C\u7ED9parentData.children
    // \u5982\u679C\u662F\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u5219\u4F7F\u7528parentData.children.push(obj)
    parentData.children = childData;
    graph.changeData();
    count++;
  }
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u4F7F\u7528 changeData",en:"Using changeData"},filename:"changeData.js",isNew:!1},{id:"loadTreeData",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*wc1-QaqOPsgAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * \u8BE5\u6848\u4F8B\u6F14\u793A\uFF0C\u5F53\u70B9\u51FB\u53F6\u5B50\u8282\u70B9\u65F6\uFF0C\u5982\u4F55\u5411\u6811\u56FE\u4E2D\u52A8\u6001\u6DFB\u52A0\u6570\u636E\u3002
 * \u4E3B\u8981\u6F14\u793A addChild \u548C layout \u7684\u7528\u6CD5\u3002
 */

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.TreeGraph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['collapse-expand', 'drag-canvas'],
  },
  fitView: true,
  layout: {
    type: 'compactBox',
    direction: 'LR',
    defalutPosition: [],
    getId: function getId(d) {
      return d.id;
    },
    getHeight: function getHeight() {
      return 16;
    },
    getWidth: function getWidth() {
      return 16;
    },
    getVGap: function getVGap() {
      return 50;
    },
    getHGap: function getHGap() {
      return 100;
    },
  },
});
graph.node(function (node) {
  return {
    size: 16,
    anchorPoints: [
      [0, 0.5],
      [1, 0.5],
    ],
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
    label: node.id,
    labelCfg: {
      position: node.children && node.children.length > 0 ? 'left' : 'right',
    },
  };
});

graph.edge(function () {
  return {
    type: 'cubic-horizontal',
    color: '#A3B1BF',
  };
});

const data = {
  isRoot: true,
  id: 'Root',
  style: {
    fill: 'red',
  },
  children: [
    {
      id: 'SubTreeNode1',
      raw: {},
      children: [
        {
          id: 'SubTreeNode1.1',
        },
        {
          id: 'SubTreeNode1.2',
          children: [
            {
              id: 'SubTreeNode1.2.1',
            },
            {
              id: 'SubTreeNode1.2.2',
            },
            {
              id: 'SubTreeNode1.2.3',
            },
          ],
        },
      ],
    },
    {
      id: 'SubTreeNode2',
      children: [
        {
          id: 'SubTreeNode2.1',
        },
      ],
    },
    {
      id: 'SubTreeNode3',
      children: [
        {
          id: 'SubTreeNode3.1',
        },
        {
          id: 'SubTreeNode3.2',
        },
        {
          id: 'SubTreeNode3.3',
        },
      ],
    },
    {
      id: 'SubTreeNode4',
    },
    {
      id: 'SubTreeNode5',
    },
    {
      id: 'SubTreeNode6',
    },
  ],
};
graph.data(data);
graph.render();

let count = 0;

graph.on('node:click', function (evt) {
  const item = evt.item;

  const nodeId = item.get('id');
  const model = item.getModel();
  const children = model.children;
  if (!children || children.length === 0) {
    const childData = {
      id: 'child-data-' + count,
      type: 'rect',
      children: [
        {
          id: 'x-' + count,
        },
        {
          id: 'y-' + count,
        },
      ],
    };
    graph.addChild(childData, nodeId);
    count++;
  }
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u4F7F\u7528 addChild",en:"Using addChild"},filename:"loadTreeData.js",isNew:!1}],icon:"",id:"treeBehavior",title:{en:"Custom Tree Graph Behavior",zh:"\u81EA\u5B9A\u4E49\u6811\u56FE\u4EA4\u4E92"},childrenKey:"demos",order:1},{demos:[{id:"update",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*NJm8S4sfgp4AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
/**
 * \u672C\u793A\u4F8B\u6F14\u793A\u4EE5\u4E0B\u529F\u80FD\uFF1A
 * \u9F20\u6807 hover \u8282\u70B9\u66F4\u65B0\u8282\u70B9\u6837\u5F0F\u53CA\u5176\u6807\u7B7E\u6587\u672C
 * \u9F20\u6807 hover \u8FB9\u66F4\u65B0\u8FB9\u6837\u5F0F\u53CA\u5176\u6807\u7B7E\u6587\u672C
 * by \u5341\u543E
 */

const data = {
  nodes: [
    {
      id: 'node1',
      x: 100,
      y: 100,
      label: 'label before\\nbeen hovered',
    },
    {
      id: 'node2',
      x: 400,
      y: 100,
      label: 'label before\\nbeen hovered',
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
      label: 'label before\\nbeen hovered',
      labelCfg: {
        refY: 10,
      },
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  defaultEdge: {
    color: '#e2e2e2',
    lineAppendWidth: 3,
  },
});
graph.data(data);
graph.render();

graph.on('node:mouseenter', function (evt) {
  const node = evt.item;
  const model = node.getModel();
  model.oriLabel = model.label;
  graph.updateItem(node, {
    label: \`after been hovered \${model.id}\`,
    labelCfg: {
      style: {
        fill: '#003a8c',
      },
    },
  });
});

graph.on('node:mouseleave', function (evt) {
  const node = evt.item;
  const model = node.getModel();
  graph.updateItem(node, {
    label: model.oriLabel,
    labelCfg: {
      style: {
        fill: '#555',
      },
    },
  });
});

graph.on('edge:mouseenter', function (evt) {
  const edge = evt.item;
  const model = edge.getModel();
  model.oriLabel = model.label;
  graph.updateItem(edge, {
    label: 'after been hovered',
    labelCfg: {
      style: {
        fill: '#003a8c',
      },
    },
  });
});

graph.on('edge:mouseleave', function (evt) {
  const edge = evt.item;
  graph.setItemState(edge, 'hover', false);
  graph.updateItem(edge, {
    label: 'label before \\n been hovered',
    labelCfg: {
      style: {
        fill: '#555',
      },
    },
  });
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u66F4\u65B0\u8282\u70B9\u6216\u8FB9\u4E0A\u7684\u6807\u7B7E",en:"Update the Label"},filename:"update.js",isNew:!1},{id:"changeImg",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kwp1S6PJIVUAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * \u672C\u793A\u4F8B\u6F14\u793A\u4EE5\u4E0B\u529F\u80FD\uFF1A
 * 1\u3001\u5982\u4F55\u4F7F\u7528\u56FE\u7247\u4F5C\u4E3A\u8282\u70B9\u80CC\u666F\uFF1B
 * 2\u3001\u70B9\u51FB\u5207\u6362\u8282\u70B9\u80CC\u666F\u56FE\u7247\u3002
 *
 */

const img = new Image();
img.src = 'https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg';

// \u70B9\u51FB\u56FE\u7247\u8282\u70B9\uFF0C\u5207\u6362\u80CC\u666F\u56FE\u7247
const img2 = new Image();
img2.src = 'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*wAmHQJbNVdwAAAAAAAAAAABkARQnAQ';
const data = {
  nodes: [
    {
      x: 150,
      y: 100,
      type: 'circleNode',
      label: 'circle',
      id: 'node1',
      labelCfg: {
        position: 'center',
      },
    },
    {
      x: 350,
      y: 100,
      type: 'image',
      id: 'node2',
      img: img.src,
      size: [120, 60],
      label: 'avatar',
      style: {
        cursor: 'pointer',
      },
      labelCfg: {
        position: 'bottom',
      },
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
      label: 'line',
      labelCfg: {
        refY: 10,
      },
    },
  ],
};
// \u907F\u514D\u62D6\u52A8\u8FC7\u7A0B\u4E2D\u95EA\u70C1\uFF1A\u4F7F\u7528\u52A0\u8F7D\u5DF2\u7ECFLOAD\u597D\u7684\u56FE\u7247
img.onload = function () {
  const container = document.getElementById('container');
  const width = container.scrollWidth;
  const height = container.scrollHeight || 500;
  const graph = new G6.Graph({
    container: 'container',
    width,
    height,
    defaultNode: {
      style: {
        fill: '#DEE9FF',
        stroke: '#5B8FF9',
      },
    },
    defaultEdge: {
      color: '#e2e2e2',
    },
    modes: {
      default: [
        'drag-node',
        {
          type: 'drag-node',
        },
      ],
    },
  });
  graph.data(data);
  graph.render();

  graph.on('node:click', function (evt) {
    const target = evt.target;

    const type = target.get('type');
    const hasChangeBg = target.get('hasChangeBg');
    if (type === 'image') {
      if (!hasChangeBg) {
        // \u70B9\u51FB\u56FE\u7247\u8282\u70B9\u65F6\uFF0C\u5207\u6362\u80CC\u666F\u56FE\u7247
        target.attr('img', img2);
        target.attr('imgSrc', 'http://seopic.699pic.com/photo/50055/5642.jpg_wh1200.jpg');
        target.set('hasChangeBg', true);
      } else {
        target.attr('img', img);
        target.attr(
          'imgSrc',
          'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1566553535233&di=b0b17eeea7bd7356a6f42ebfd48e9441&imgtype=0&src=http%3A%2F%2Fa2.att.hudong.com%2F64%2F29%2F01300543361379145388299988437_s.jpg',
        );
        target.set('hasChangeBg', false);
      }
      graph.paint();
    }
  });

  if (typeof window !== 'undefined')
    window.onresize = () => {
      if (!graph || graph.get('destroyed')) return;
      if (!container || !container.scrollWidth || !container.scrollHeight) return;
      graph.changeSize(container.scrollWidth, container.scrollHeight);
    };
};
`,title:{zh:"\u5207\u6362\u8282\u70B9\u80CC\u666F\u56FE\u7247",en:"Change the Image"},filename:"changeImg.js",isNew:!1}],icon:"",id:"label",title:{en:"Label and Background Updating",zh:"\u6539\u53D8\u6807\u7B7E\u6216\u80CC\u666F"},childrenKey:"demos",order:3},{demos:[{id:"circle",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Rvx9SYSHGsIAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    { id: 'node1', x: 350, y: 200, comboId: 'combo1' },
    { id: 'node2', x: 350, y: 250, comboId: 'combo1' },
    { id: 'node3', x: 100, y: 200, comboId: 'combo3' },
  ],
  edges: [
    { source: 'node1', target: 'node2' },
    { source: 'node1', target: 'node3' },
    { source: 'combo1', target: 'node3' },
  ],
  combos: [
    { id: 'combo1', label: 'Combo 1', parentId: 'combo2' },
    { id: 'combo2', label: 'Combo 2' },
    { id: 'combo3', label: 'Combo 3', collapsed: true },
  ],
};

const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML =
  'Double click the combo to collapse/expand it. Drag the node or combo to change the hierarchy.';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos
  groupByTypes: false,
  defaultCombo: {
    type: 'circle',
    style: {
      lineWidth: 1,
    },
    labelCfg: {
      refY: 15,
      position: 'bottom',
    },
  },
  comboStateStyles: {
    dragenter: {
      lineWidth: 4,
      stroke: '#FE9797',
    },
  },
  modes: {
    default: ['drag-canvas', 'drag-node', 'drag-combo', 'collapse-expand-combo', 'click-select'],
  },
});

graph.data(data);
graph.render();

graph.on('combo:dragend', (e) => {
  graph.getCombos().forEach((combo) => {
    graph.setItemState(combo, 'dragenter', false);
  });
});
graph.on('node:dragend', (e) => {
  graph.getCombos().forEach((combo) => {
    graph.setItemState(combo, 'dragenter', false);
  });
});
graph.on('combo:dragenter', (e) => {
  graph.setItemState(e.item, 'dragenter', true);
});
graph.on('combo:dragleave', (e) => {
  graph.setItemState(e.item, 'dragenter', false);
});

graph.on('combo:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('combo:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:"\u5706\u5F62 Combo",filename:"circle.js",isNew:!1},{id:"rect",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*qvmVTZc-iNcAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    { id: 'node1', x: 350, y: 200, comboId: 'combo1' },
    { id: 'node2', x: 350, y: 250, comboId: 'combo1' },
    { id: 'node3', x: 100, y: 200, comboId: 'combo3' },
  ],
  edges: [
    { source: 'node1', target: 'node2' },
    { source: 'node1', target: 'node3' },
    { source: 'combo1', target: 'node3' },
  ],
  combos: [
    { id: 'combo1', label: 'Combo 1', parentId: 'combo2' },
    { id: 'combo2', label: 'Combo 2' },
    { id: 'combo3', label: 'Combo 3' },
  ],
};
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML =
  'Double click the combo to collapse/expand it. Drag the node or combo to change the hierarchy.';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos
  groupByTypes: false,
  defaultCombo: {
    type: 'rect',
    size: [40, 10], // The minimum size of the Combo
    padding: [30, 20, 10, 20],
    style: {
      lineWidth: 1,
    },
    labelCfg: {
      refY: 10,
      refX: 20,
      position: 'top',
    },
  },
  comboStateStyles: {
    dragenter: {
      lineWidth: 4,
      stroke: '#FE9797',
    },
  },
  modes: {
    default: ['drag-canvas', 'drag-node', 'drag-combo', 'collapse-expand-combo', 'click-select'],
  },
});

graph.data(data);
graph.render();

graph.on('combo:dragend', (e) => {
  graph.getCombos().forEach((combo) => {
    graph.setItemState(combo, 'dragenter', false);
  });
});
graph.on('node:dragend', (e) => {
  graph.getCombos().forEach((combo) => {
    graph.setItemState(combo, 'dragenter', false);
  });
});

graph.on('combo:dragenter', (e) => {
  graph.setItemState(e.item, 'dragenter', true);
});
graph.on('combo:dragleave', (e) => {
  graph.setItemState(e.item, 'dragenter', false);
});

graph.on('combo:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('combo:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:"\u77E9\u5F62 Combo",filename:"rect.js",isNew:!1},{id:"cCircle",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1LelSq5TP9EAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * The demo shows customing a combo type by extending the built-in circle combo
 * by Shiwu
 *
 */

// The symbols for the marker inside the combo
const collapseIcon = (x, y, r) => {
  return [
    ['M', x - r, y],
    ['a', r, r, 0, 1, 0, r * 2, 0],
    ['a', r, r, 0, 1, 0, -r * 2, 0],
    ['M', x - r + 4, y],
    ['L', x - r + 2 * r - 4, y],
  ];
};
const expandIcon = (x, y, r) => {
  return [
    ['M', x - r, y],
    ['a', r, r, 0, 1, 0, r * 2, 0],
    ['a', r, r, 0, 1, 0, -r * 2, 0],
    ['M', x - r + 4, y],
    ['L', x - r + 2 * r - 4, y],
    ['M', x - r + r, y - r + 4],
    ['L', x, y + r - 4],
  ];
};

G6.registerCombo(
  'cCircle',
  {
    drawShape: function draw(cfg, group) {
      const self = this;
      // Get the shape style, where the style.r corresponds to the R in the Illustration of Built-in Rect Combo
      const style = self.getShapeStyle(cfg);
      // Add a circle shape as keyShape which is the same as the extended 'circle' type Combo
      const circle = group.addShape('circle', {
        attrs: {
          ...style,
          x: 0,
          y: 0,
          r: style.r,
        },
        draggable: true,
        name: 'combo-keyShape',
      });
      // Add the marker on the bottom
      const marker = group.addShape('marker', {
        attrs: {
          ...style,
          fill: '#fff',
          opacity: 1,
          x: 0,
          y: style.r,
          r: 10,
          symbol: collapseIcon,
        },
        draggable: true,
        name: 'combo-marker-shape',
      });

      return circle;
    },
    // Define the updating logic for the marker
    afterUpdate: function afterUpdate(cfg, combo) {
      const self = this;
      // Get the shape style, where the style.r corresponds to the R in the Illustration of Built-in Rect Combo
      const style = self.getShapeStyle(cfg);
      const group = combo.get('group');
      // Find the marker shape in the graphics group of the Combo
      const marker = group.find((ele) => ele.get('name') === 'combo-marker-shape');
      // Update the marker shape
      marker.attr({
        x: 0,
        y: style.r,
        // The property 'collapsed' in the combo data represents the collapsing state of the Combo
        // Update the symbol according to 'collapsed'
        symbol: cfg.collapsed ? expandIcon : collapseIcon,
      });
    },
  },
  'circle',
);

const data = {
  nodes: [
    { id: 'node1', x: 250, y: 200, comboId: 'combo1' },
    { id: 'node2', x: 300, y: 200, comboId: 'combo1' },
    { id: 'node3', x: 100, y: 200, comboId: 'combo3' },
  ],
  combos: [
    { id: 'combo1', label: 'Combo 1', parentId: 'combo2' },
    { id: 'combo2', label: 'Combo 2' },
    { id: 'combo3', label: 'Combo 3', collapsed: true },
  ],
};

const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = 'Click the bottom marker to collapse/expand the combo.';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos
  groupByTypes: false,
  // Configure the combos globally
  defaultCombo: {
    // The type of the combos. You can also assign type in the data of combos
    type: 'cCircle',
    labelCfg: {
      refY: 2,
    },
    // ... Other global configurations for combos
  },
  comboStateStyles: {
    dragenter: {
      lineWidth: 4,
      stroke: '#FE9797',
    },
  },
  modes: {
    default: ['drag-combo', 'drag-node', 'drag-canvas', 'click-select'],
  },
});
graph.data(data);
graph.render();

// collapse/expand when click the marker
graph.on('combo:click', (e) => {
  if (e.target.get('name') === 'combo-marker-shape') {
    // graph.collapseExpandCombo(e.item.getModel().id);
    graph.collapseExpandCombo(e.item);
    if (graph.get('layout')) graph.layout();
    else graph.refreshPositions();
  }
});

graph.on('combo:dragend', (e) => {
  graph.getCombos().forEach((combo) => {
    graph.setItemState(combo, 'dragenter', false);
  });
});
graph.on('node:dragend', (e) => {
  graph.getCombos().forEach((combo) => {
    graph.setItemState(combo, 'dragenter', false);
  });
});

graph.on('combo:dragenter', (e) => {
  graph.setItemState(e.item, 'dragenter', true);
});
graph.on('combo:dragleave', (e) => {
  graph.setItemState(e.item, 'dragenter', false);
});

graph.on('combo:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('combo:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:"\u6269\u5C55\u5706\u5F62 Combo",filename:"cCircle.js",isNew:!1},{id:"cRect",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*rQGaT4kiaYoAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * The demo shows customing a combo type by extending the built-in circle combo
 * by Shiwu
 *
 */

// The symbols for the marker inside the combo
const collapseIcon = (x, y, r) => {
  return [
    ['M', x - r, y],
    ['a', r, r, 0, 1, 0, r * 2, 0],
    ['a', r, r, 0, 1, 0, -r * 2, 0],
    ['M', x - r + 4, y],
    ['L', x - r + 2 * r - 4, y],
  ];
};
const expandIcon = (x, y, r) => {
  return [
    ['M', x - r, y],
    ['a', r, r, 0, 1, 0, r * 2, 0],
    ['a', r, r, 0, 1, 0, -r * 2, 0],
    ['M', x - r + 4, y],
    ['L', x - r + 2 * r - 4, y],
    ['M', x - r + r, y - r + 4],
    ['L', x, y + r - 4],
  ];
};

G6.registerCombo(
  'cRect',
  {
    drawShape: function drawShape(cfg, group) {
      const self = this;
      // Get the padding from the configuration
      cfg.padding = cfg.padding || [50, 20, 20, 20];
      // Get the shape's style, where the style.width and style.height correspond to the width and height in the figure of Illustration of Built-in Rect Combo
      const style = self.getShapeStyle(cfg);
      // Add a rect shape as the keyShape which is the same as the extended rect Combo
      const rect = group.addShape('rect', {
        attrs: {
          ...style,
          x: -style.width / 2 - (cfg.padding[3] - cfg.padding[1]) / 2,
          y: -style.height / 2 - (cfg.padding[0] - cfg.padding[2]) / 2,
          width: style.width,
          height: style.height,
        },
        draggable: true,
        name: 'combo-keyShape',
      });
      // Add the circle on the right
      group.addShape('marker', {
        attrs: {
          ...style,
          fill: '#fff',
          opacity: 1,
          // cfg.style.width and cfg.style.heigth correspond to the innerWidth and innerHeight in the figure of Illustration of Built-in Rect Combo
          x: cfg.style.width / 2 + cfg.padding[1],
          y: (cfg.padding[2] - cfg.padding[0]) / 2,
          r: 10,
          symbol: collapseIcon,
        },
        draggable: true,
        name: 'combo-marker-shape',
      });
      return rect;
    },
    // Define the updating logic of the right circle
    afterUpdate: function afterUpdate(cfg, combo) {
      const group = combo.get('group');
      // Find the circle shape in the graphics group of the Combo by name
      const marker = group.find((ele) => ele.get('name') === 'combo-marker-shape');
      // Update the position of the right circle
      marker.attr({
        // cfg.style.width and cfg.style.heigth correspond to the innerWidth and innerHeight in the figure of Illustration of Built-in Rect Combo
        x: cfg.style.width / 2 + cfg.padding[1],
        y: (cfg.padding[2] - cfg.padding[0]) / 2,
        // The property 'collapsed' in the combo data represents the collapsing state of the Combo
        // Update the symbol according to 'collapsed'
        symbol: cfg.collapsed ? expandIcon : collapseIcon,
      });
    },
  },
  'rect',
);

const data = {
  nodes: [
    { id: 'node1', x: 250, y: 200, comboId: 'combo1' },
    { id: 'node2', x: 300, y: 200, comboId: 'combo1' },
    { id: 'node3', x: 100, y: 200, comboId: 'combo3' },
  ],
  combos: [
    { id: 'combo1', label: 'Combo 1', parentId: 'combo2' },
    { id: 'combo2', label: 'Combo 2' },
    { id: 'combo3', label: 'Combo 3', collapsed: true },
  ],
};

const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = 'Click the right marker to collapse/expand the combo.';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos
  groupByTypes: false,
  // Configure the combos globally
  defaultCombo: {
    // The type of the combos. You can also assign type in the data of combos
    type: 'cRect',
    // ... Other global configurations for combos
  },
  comboStateStyles: {
    dragenter: {
      lineWidth: 4,
      stroke: '#FE9797',
    },
  },
  modes: {
    default: ['drag-combo', 'drag-node', 'drag-canvas', 'click-select'],
  },
});
graph.data(data);
graph.render();

// collapse/expand when click the marker
graph.on('combo:click', (e) => {
  if (e.target.get('name') === 'combo-marker-shape') {
    // graph.collapseExpandCombo(e.item.getModel().id);
    graph.collapseExpandCombo(e.item);
    if (graph.get('layout')) graph.layout();
    else graph.refreshPositions();
  }
});

graph.on('combo:dragend', (e) => {
  graph.getCombos().forEach((combo) => {
    graph.setItemState(combo, 'dragenter', false);
  });
});
graph.on('node:dragend', (e) => {
  graph.getCombos().forEach((combo) => {
    graph.setItemState(combo, 'dragenter', false);
  });
});

graph.on('combo:dragenter', (e) => {
  graph.setItemState(e.item, 'dragenter', true);
});
graph.on('combo:dragleave', (e) => {
  graph.setItemState(e.item, 'dragenter', false);
});

graph.on('combo:mouseenter', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', true);
});

graph.on('combo:mouseleave', (evt) => {
  const { item } = evt;
  graph.setItemState(item, 'active', false);
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:"\u6269\u5C55\u77E9\u5F62 Combo",filename:"cRect.js",isNew:!1}],icon:"",id:"combo",title:{en:"Node Combo",zh:"\u8282\u70B9\u5206\u7EC4 Combo"},childrenKey:"demos",order:4},{demos:[{id:"hull",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*krsJQb6tH-oAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    { id: 'node0', size: 50 },
    { id: 'node1', size: 30 },
    { id: 'node2', size: 30 },
    { id: 'node3', size: 30 },
    { id: 'node4', size: 30, isLeaf: true },
    { id: 'node5', size: 30, isLeaf: true },
    { id: 'node6', size: 15, isLeaf: true },
    { id: 'node7', size: 15, isLeaf: true },
    { id: 'node8', size: 15, isLeaf: true },
    { id: 'node9', size: 15, isLeaf: true },
    { id: 'node10', size: 15, isLeaf: true },
    { id: 'node11', size: 15, isLeaf: true },
    { id: 'node12', size: 15, isLeaf: true },
    { id: 'node13', size: 15, isLeaf: true },
    { id: 'node14', size: 15, isLeaf: true },
    { id: 'node15', size: 15, isLeaf: true },
    { id: 'node16', size: 15, isLeaf: true },
  ],
  edges: [
    { source: 'node0', target: 'node1' },
    { source: 'node0', target: 'node2' },
    { source: 'node0', target: 'node3' },
    { source: 'node0', target: 'node4' },
    { source: 'node0', target: 'node5' },
    { source: 'node1', target: 'node6' },
    { source: 'node1', target: 'node7' },
    { source: 'node2', target: 'node8' },
    { source: 'node2', target: 'node9' },
    { source: 'node2', target: 'node10' },
    { source: 'node2', target: 'node11' },
    { source: 'node2', target: 'node12' },
    { source: 'node2', target: 'node13' },
    { source: 'node3', target: 'node14' },
    { source: 'node3', target: 'node15' },
    { source: 'node3', target: 'node16' },
  ],
};
const nodes = data.nodes;

const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = 'Wait for the layout to complete...';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'zoom-canvas', 'drag-node', 'lasso-select'],
  },
  layout: {
    type: 'force',
    preventOverlap: true,
    linkDistance: (d) => {
      if (d.source.id === 'node0') {
        return 300;
      }
      return 60;
    },
    nodeStrength: (d) => {
      if (d.isLeaf) {
        return -50;
      }
      return -10;
    },
    edgeStrength: (d) => {
      if (d.source.id === 'node1' || d.source.id === 'node2' || d.source.id === 'node3') {
        return 0.7;
      }
      return 0.1;
    },
  },
});
graph.data({
  nodes,
  edges: data.edges.map(function (edge, i) {
    edge['id'] = 'edge' + i;
    return Object.assign({}, edge);
  }),
});
graph.render();

let centerNodes = graph.getNodes().filter((node) => !node.getModel().isLeaf);

graph.on('afterlayout', () => {
  descriptionDiv.innerHTML = '';
  const hull1 = graph.createHull({
    id: 'centerNode-hull',
    type: 'bubble',
    members: centerNodes,
    padding: 10,
  });

  const hull2 = graph.createHull({
    id: 'leafNode-hull1',
    members: ['node6', 'node7'],
    padding: 10,
    style: {
      fill: 'lightgreen',
      stroke: 'green',
    },
  });

  const hull3 = graph.createHull({
    id: 'leafNode-hull2',
    members: ['node8', 'node9', 'node10', 'node11', 'node12', 'node13'],
    padding: 10,
    style: {
      fill: 'lightgreen',
      stroke: 'green',
    },
  });

  graph.on('afterupdateitem', (e) => {
    hull1.updateData(hull1.members);
    hull2.updateData(hull2.members);
    hull3.updateData(hull3.members);
  });
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:{zh:"\u7528\u8F6E\u5ED3\u5305\u88F9\u8282\u70B9\u96C6\u5408",en:"Use hulls to wrap the node sets."},filename:"hull.js",isNew:!1},{id:"changeMembers",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*TNxDRL0t0GsAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '1',
      label: '\u516C\u53F81',
      group: 1,
    },
    {
      id: '2',
      label: '\u516C\u53F82',
      group: 1,
    },
    {
      id: '3',
      label: '\u516C\u53F83',
      group: 1,
    },
    {
      id: '4',
      label: '\u516C\u53F84',
      group: 1,
    },
    {
      id: '5',
      label: '\u516C\u53F85',
      group: 2,
    },
    {
      id: '6',
      label: '\u516C\u53F86',
      group: 2,
    },
    {
      id: '7',
      label: '\u516C\u53F87',
      group: 2,
    },
    {
      id: '8',
      label: '\u516C\u53F88',
      group: 2,
    },
    {
      id: '9',
      label: '\u516C\u53F89',
      group: 2,
    },
  ],
  edges: [
    {
      source: '1',
      target: '1',
      type: 'loop',
    },
    {
      source: '2',
      target: '2',
      type: 'loop',
    },
    {
      source: '1',
      target: '2',
      data: {
        type: 'A',
        amount: '100,000 \u5143',
        date: '2019-08-03',
      },
    },
    {
      source: '1',
      target: '3',
      data: {
        type: 'B',
        amount: '100,000 \u5143',
        date: '2019-08-03',
      },
    },
    {
      source: '2',
      target: '5',
      data: {
        type: 'C',
        amount: '100,000 \u5143',
        date: '2019-08-03',
      },
    },
    {
      source: '5',
      target: '6',
      data: {
        type: 'B',
        amount: '100,000 \u5143',
        date: '2019-08-03',
      },
    },
    {
      source: '3',
      target: '4',
      data: {
        type: 'C',
        amount: '100,000 \u5143',
        date: '2019-08-03',
      },
    },
    {
      source: '4',
      target: '7',
      data: {
        type: 'B',
        amount: '100,000 \u5143',
        date: '2019-08-03',
      },
    },
    {
      source: '1',
      target: '8',
      data: {
        type: 'B',
        amount: '100,000 \u5143',
        date: '2019-08-03',
      },
    },
    {
      source: '1',
      target: '9',
      data: {
        type: 'C',
        amount: '100,000 \u5143',
        date: '2019-08-03',
      },
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'zoom-canvas', 'drag-node'],
  },
  fitView: true,
  layout: {
    type: 'grid',
  },
});

graph.data(data);
graph.render();

const hull1 = graph.createHull({
  id: 'hull1',
  type: 'smooth-convex',
  padding: 15,
  members: graph.getNodes().filter((node) => node.getModel().group === 1),
});
const hull2 = graph.createHull({
  id: 'hull2',
  members: graph.getNodes().filter((node) => node.getModel().group === 2),
  padding: 15,
  type: 'bubble',
  style: {
    fill: 'pink',
    stroke: 'red',
  },
  update: 'drag',
});

graph.on('canvas:contextmenu', (ev) => {
  ev.preventDefault();
  ev.stopPropagation();
  const item = graph.addItem('node', {
    x: ev.x,
    y: ev.y,
    id: Math.random(),
    group: 2,
  });
  hull2.addMember(item);
});

graph.on('afterupdateitem', (e) => {
  if (hull1.members.indexOf(e.item) > -1 || hull1.nonMembers.indexOf(e.item) > -1) {
    hull1.updateData(hull1.members);
  }
});

graph.on('node:dragend', (e) => {
  const item = e.item;
  const memberIdx = hull2.members.indexOf(item);
  if (memberIdx > -1) {
    // \u5982\u679C\u79FB\u51FA\u539Fhull\u8303\u56F4\uFF0C\u5219\u53BB\u6389
    if (!hull2.contain(item)) {
      hull2.removeMember(item);
    } else {
      hull2.updateData(hull2.members);
    }
  } else {
    if (hull2.contain(item)) hull2.addMember(item);
  }
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u4FEE\u6539\u5305\u88F9\u5185\u90E8\u6210\u5458",en:"Interactively change the members in the hull."},filename:"changeMembers.js",isNew:!1}],icon:"",id:"hull",title:{en:"Hull",zh:"\u8282\u70B9\u96C6\u8F6E\u5ED3\u5305\u88F9"},childrenKey:"demos",order:5},{demos:[{id:"moveAnimate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*yPb-SKNZ5YYAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
/**
 * Focus a node with Animation
 * by Changzhe
 */
const data = {
  nodes: [
    {
      id: 'node1',
      x: 150,
      y: 50,
      label: 'node1',
    },
    {
      id: 'node2',
      x: 200,
      y: 150,
      label: 'node2',
    },
    {
      id: 'node3',
      x: 100,
      y: 150,
      label: 'node3',
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
    },
    {
      source: 'node2',
      target: 'node3',
    },
    {
      source: 'node3',
      target: 'node1',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitView: false,
  defaultNode: {
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    style: {
      stroke: '#b5b5b5',
    },
  },
  // The global configuration for graph animation also takes effect on the focusItem
  // animate: true,
  // animateCfg: {
  //   easing: 'easeCubic',
  //   duration: 500
  // }
});
graph.data(data);
graph.render();

function handleNodeClick(event) {
  const item = event.item;
  // animately move the graph to focus on the item.
  // the second parameter controlls whether move with animation, the third parameter is the animate configuration
  graph.focusItem(item, true, {
    easing: 'easeCubic',
    duration: 500,
  });
}

// listen to the node click event
graph.on('node:click', handleNodeClick);

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u70B9\u51FB\u8282\u70B9\u5E26\u6709\u52A8\u753B\u5730\u79FB\u52A8\u5230\u753B\u5E03\u4E2D\u5FC3",en:"Click to Animately Focus a Node"},filename:"moveAnimate.js",isNew:!1},{id:"move",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*yPb-SKNZ5YYAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
/**
 * Focus a node
 * by Changzhe
 */
const data = {
  nodes: [
    {
      id: 'node1',
      x: 150,
      y: 50,
      label: 'node1',
    },
    {
      id: 'node2',
      x: 200,
      y: 150,
      label: 'node2',
    },
    {
      id: 'node3',
      x: 100,
      y: 150,
      label: 'node3',
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
    },
    {
      source: 'node2',
      target: 'node3',
    },
    {
      source: 'node3',
      target: 'node1',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitView: false,
  defaultNode: {
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    style: {
      stroke: '#b5b5b5',
    },
  },
});
graph.data(data);
graph.render();

function handleNodeClick(event) {
  const item = event.item;
  // animately move the graph to focus on the item.
  graph.focusItem(item);
}

// listen to the node click event
graph.on('node:click', handleNodeClick);

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u70B9\u51FB\u8282\u70B9\u79FB\u52A8\u5230\u753B\u5E03\u4E2D\u5FC3",en:"Click to Focus a Node"},filename:"move.js",isNew:!1}],icon:"",id:"position",title:{en:"Click to Focus a Node",zh:"\u805A\u7126\u4E00\u4E2A\u8282\u70B9"},childrenKey:"demos",order:6},{demos:[{id:"partialNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*rszjRrAopBkAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
/**
 * \u6F14\u793A\u5982\u4F55\u54CD\u5E94\u8282\u70B9\u67D0\u4E00\u533A\u57DF\u4E0A\u7684\u70B9\u51FB\u4E8B\u4EF6
 * by \u957F\u54F2
 */

const GRAPH_CONTAINER = 'container';

// \u6CE8\u518C\u81EA\u5B9A\u4E49\u8282\u70B9
G6.registerNode(
  'customNode',
  {
    // \u7ED8\u5236\u8282\u70B9
    drawShape: function drawShape(cfg, group) {
      const shapeType = this.shapeType;
      const style = Object.assign({}, this.getShapeStyle(cfg), {
        x: 0,
        y: 0,
        r: 50,
      });
      const shape = group.addShape(shapeType, {
        attrs: style,
        name: 'key-shape',
      });
      // \u7ED8\u5236\u8282\u70B9\u91CC\u9762\u7684\u5C0F\u5706\u3002\u70B9\u51FB\u8FD9\u4E2A\u5C0F\u5706\u4F1A\u663E\u793Atooltip
      group.addShape('circle', {
        attrs: {
          x: 0,
          y: -30,
          r: 10,
          fill: '#096dd9',
          cursor: 'pointer',
        },
        name: 'circle-shape',
      });
      return shape;
    },
  },
  'circle',
);

const data = {
  nodes: [
    {
      id: 'node1',
      x: 100,
      y: 150,
      label: 'node1',
      size: 100,
      type: 'customNode',
    },
    {
      id: 'node2',
      x: 300,
      y: 150,
      label: 'node2',
      size: 100,
      type: 'customNode',
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: GRAPH_CONTAINER,
  width,
  height,
  modes: {
    default: [
      {
        type: 'drag-node',
        delegate: false,
      },
    ],
  },
  defaultNode: {
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
    labelCfg: {
      style: {
        fontSize: 12,
      },
    },
  },
  defaultEdge: {
    style: {
      stroke: '#e2e2e2',
    },
  },
  nodeStateStyles: {
    selected: {
      stroke: 'red',
    },
  },
});

graph.data(data);
graph.render();

// \u8282\u70B9\u4E0A\u7684\u70B9\u51FB\u4E8B\u4EF6
graph.on('node:click', function (event) {
  const { item } = event;
  graph.setItemState(item, 'selected', true);
});

graph.on('circle-shape:click', (evt) => {
  const { item } = evt;
  graph.updateItem(item, {
    label: '\u70B9\u51FB\u4E86\u5C40\u90E8',
    labelCfg: {
      style: {
        fill: '#003a8c',
        fontSize: 16,
      },
    },
  });
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u54CD\u5E94\u8282\u70B9\u4E2D\u90E8\u5206\u533A\u57DF",en:"Region Response"},filename:"partialNode.js",isNew:!1}],icon:"",id:"partialResponse",title:{en:"Region Response",zh:"\u54CD\u5E94\u533A\u57DF\u4E8B\u4EF6"},childrenKey:"demos",order:7},{demos:[{id:"setMode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*y1qkTKqhQXkAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * \u8BE5\u6848\u4F8B\u6F14\u793A\u5207\u6362\u4EA4\u4E92\u6A21\u5F0F\uFF0C\u5728\u4E0D\u540C\u6A21\u5F0F\u4E0B\u5B9E\u73B0\u62D6\u52A8\u8282\u70B9\u3001\u589E\u52A0\u8282\u70B9\u3001\u589E\u52A0\u8FB9\u7684\u4EA4\u4E92\u884C\u4E3A\u3002
 */
let addedCount = 0;
// Register a custom behavior: add a node when user click the blank part of canvas
G6.registerBehavior('click-add-node', {
  // Set the events and the corresponding responsing function for this behavior
  getEvents() {
    // The event is canvas:click, the responsing function is onClick
    return {
      'canvas:click': 'onClick',
    };
  },
  // Click event
  onClick(ev) {
    const self = this;
    const graph = self.graph;
    // Add a new node
    graph.addItem('node', {
      x: ev.canvasX,
      y: ev.canvasY,
      id: \`node-\${addedCount}\`, // Generate the unique id
    });
    addedCount++;
  },
});
// Register a custom behavior: click two end nodes to add an edge
G6.registerBehavior('click-add-edge', {
  // Set the events and the corresponding responsing function for this behavior
  getEvents() {
    return {
      'node:click': 'onClick', // The event is canvas:click, the responsing function is onClick
      mousemove: 'onMousemove', // The event is mousemove, the responsing function is onMousemove
      'edge:click': 'onEdgeClick', // The event is edge:click, the responsing function is onEdgeClick
    };
  },
  // The responsing function for node:click defined in getEvents
  onClick(ev) {
    const self = this;
    const node = ev.item;
    const graph = self.graph;
    // The position where the mouse clicks
    const point = { x: ev.x, y: ev.y };
    const model = node.getModel();
    if (self.addingEdge && self.edge) {
      graph.updateItem(self.edge, {
        target: model.id,
      });

      self.edge = null;
      self.addingEdge = false;
    } else {
      // Add anew edge, the end node is the current node user clicks
      self.edge = graph.addItem('edge', {
        source: model.id,
        target: model.id,
      });
      self.addingEdge = true;
    }
  },
  // The responsing function for mousemove defined in getEvents
  onMousemove(ev) {
    const self = this;
    // The current position the mouse clicks
    const point = { x: ev.x, y: ev.y };
    if (self.addingEdge && self.edge) {
      // Update the end node to the current node the mouse clicks
      self.graph.updateItem(self.edge, {
        target: point,
      });
    }
  },
  // The responsing function for edge:click defined in getEvents
  onEdgeClick(ev) {
    const self = this;
    const currentEdge = ev.item;
    if (self.addingEdge && self.edge === currentEdge) {
      self.graph.removeItem(self.edge);
      self.edge = null;
      self.addingEdge = false;
    }
  },
});
// Initial data
const data = {
  nodes: [
    {
      id: 'node1',
      x: 100,
      y: 200,
    },
    {
      id: 'node2',
      x: 300,
      y: 200,
    },
    {
      id: 'node3',
      x: 300,
      y: 300,
    },
  ],
  edges: [
    {
      id: 'edge1',
      target: 'node2',
      source: 'node1',
    },
  ],
};

const container = document.getElementById('container');

// Add a selector to DOM
const selector = document.createElement('select');
selector.id = 'selector';
const selection1 = document.createElement('option');
selection1.value = 'default';
selection1.innerHTML = 'Default Mode';
const selection2 = document.createElement('option');
selection2.value = 'addNode';
selection2.innerHTML = 'Add Node (By clicking canvas)';
const selection3 = document.createElement('option');
selection3.value = 'addEdge';
selection3.innerHTML = 'Add Edge (By clicking two end nodes)';
selector.appendChild(selection1);
selector.appendChild(selection2);
selector.appendChild(selection3);
container.appendChild(selector);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 30;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  // The sets of behavior modes
  modes: {
    // Defualt mode
    default: ['drag-node', 'click-select'],
    // Adding node mode
    addNode: ['click-add-node', 'click-select'],
    // Adding edge mode
    addEdge: ['click-add-edge', 'click-select'],
  },
  // The node styles in different states
  nodeStateStyles: {
    // The node styles in selected state
    selected: {
      stroke: '#666',
      lineWidth: 2,
      fill: 'steelblue',
    },
  },
});
graph.data(data);
graph.render();

// Listen to the selector, change the mode when the selector is changed
selector.addEventListener('change', (e) => {
  const value = e.target.value;
  // change the behavior mode
  graph.setMode(value);
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);
  };
`,title:{zh:"\u8BBE\u7F6E\u4EA4\u4E92\u6A21\u5F0F",en:"Set Mode"},filename:"setMode.js",isNew:!1}],icon:"",id:"setMode",title:{en:"Change Mode to Add items",zh:"\u5207\u6362\u6A21\u5F0F\u589E\u52A0\u70B9\u548C\u8FB9"},childrenKey:"demos",order:8},{demos:[{id:"dragCanvasTwoFingers",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eePLR7boe38AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

/**
 * This demo shows how to custom a behavior to allow drag and zoom canvas with two fingers on touchpad and wheel
 * By Shiwu
 */
G6.registerBehavior('double-finger-drag-canvas', {
  getEvents: function getEvents() {
    return {
      wheel: 'onWheel',
    };
  },

  onWheel: function onWheel(ev) {
    if (ev.ctrlKey) {
      const canvas = graph.get('canvas');
      const point = canvas.getPointByClient(ev.clientX, ev.clientY);
      let ratio = graph.getZoom();
      if (ev.wheelDelta > 0) {
        ratio = ratio + ratio * 0.05;
      } else {
        ratio = ratio - ratio * 0.05;
      }
      graph.zoomTo(ratio, {
        x: point.x,
        y: point.y,
      });
    } else {
      const x = ev.deltaX || ev.movementX;
      let y = ev.deltaY || ev.movementY;
      if (!y && navigator.userAgent.indexOf('Firefox') > -1) y = (-ev.wheelDelta * 125) / 3
      graph.translate(-x, -y);
    }
    ev.preventDefault();
  },
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['double-finger-drag-canvas'],
  },
  layout: {
    type: 'force',
  },
});

graph.get('canvas').set('localRefresh', false);

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data(data);
    graph.render();
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u4E24\u6307\u5E73\u79FB\u753B\u5E03",en:"Drag Canvas by Two fingers"},filename:"dragCanvasTwoFingers.js",isNew:!1}],icon:"",id:"customBehavior",title:{en:"Custom Behavior",zh:"\u81EA\u5B9A\u4E49\u4EA4\u4E92"},childrenKey:"demos",order:10},{demos:[{id:"fixItem",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*nmaeRqYi9CMAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    { id: 'node0', size: 50, label: '0', x: 326, y: 268 },
    { id: 'node1', size: 30, label: '1', x: 280, y: 384 },
    { id: 'node2', size: 30, label: '2', x: 234, y: 167 },
    { id: 'node3', size: 30, label: '3', x: 391, y: 368 },
    { id: 'node4', size: 30, label: '4', x: 444, y: 209 },
    { id: 'node5', size: 30, label: '5', x: 378, y: 157 },
    { id: 'node6', size: 15, label: '6', x: 229, y: 400 },
    { id: 'node7', size: 15, label: '7', x: 281, y: 440 },
    { id: 'node8', size: 15, label: '8', x: 188, y: 119 },
    { id: 'node9', size: 15, label: '9', x: 287, y: 157 },
    { id: 'node10', size: 15, label: '10', x: 185, y: 200 },
    { id: 'node11', size: 15, label: '11', x: 238, y: 110 },
    { id: 'node12', size: 15, label: '12', x: 239, y: 221 },
    { id: 'node13', size: 15, label: '13', x: 176, y: 160 },
    { id: 'node14', size: 15, label: '14', x: 389, y: 423 },
    { id: 'node15', size: 15, label: '15', x: 441, y: 341 },
    { id: 'node16', size: 15, label: '16', x: 442, y: 398 },
  ],
  edges: [
    { source: 'node0', target: 'node1', label: '0-1' },
    { source: 'node0', target: 'node2', label: '0-2' },
    { source: 'node0', target: 'node3', label: '0-3' },
    { source: 'node0', target: 'node4', label: '0-4' },
    { source: 'node0', target: 'node5', label: '0-5' },
    { source: 'node1', target: 'node6', label: '1-6' },
    { source: 'node1', target: 'node7', label: '1-7' },
    { source: 'node2', target: 'node8', label: '2-8' },
    { source: 'node2', target: 'node9', label: '2-9' },
    { source: 'node2', target: 'node10', label: '2-10' },
    { source: 'node2', target: 'node11', label: '2-11' },
    { source: 'node2', target: 'node12', label: '2-12' },
    { source: 'node2', target: 'node13', label: '2-13' },
    { source: 'node3', target: 'node14', label: '3-14' },
    { source: 'node3', target: 'node15', label: '3-15' },
    { source: 'node3', target: 'node16', label: '3-16' },
  ],
};

const container = document.getElementById('container');

// Add a selector to DOM
const selector = document.createElement('select');
selector.id = 'selector';
const selection1 = document.createElement('option');
selection1.value = 'fixAll';
selection1.innerHTML = 'Fix all';
const selection2 = document.createElement('option');
selection2.value = 'fixLabel';
selection2.innerHTML = 'Fix fontSize of label';
const selection3 = document.createElement('option');
selection3.value = 'fixLineWidth';
selection3.innerHTML = 'Fix lineWidth of keyShape';
selector.appendChild(selection1);
selector.appendChild(selection2);
selector.appendChild(selection3);
container.appendChild(selector);

let fixSelectedItems = {
  fixAll: true,
  fixState: 'yourStateName', // 'selected' by default
};

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 30;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: [
      'drag-canvas',
      'drag-node',
      {
        type: 'zoom-canvas',
        fixSelectedItems,
      },
    ],
  },
  defaultNode: {
    size: [10, 10],
    style: {
      lineWidth: 2,
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    size: 1,
    style: {
      stroke: '#e2e2e2',
      lineAppendWidth: 2,
    },
  },
  nodeStateStyles: {
    yourStateName: {
      stroke: '#f00',
      lineWidth: 3,
    },
  },
  edgeStateStyles: {
    yourStateName: {
      stroke: '#f00',
      lineWidth: 3,
    },
  },
});

graph.on('node:click', (e) => {
  graph.setItemState(e.item, 'yourStateName', true);
});
graph.on('edge:click', (e) => {
  graph.setItemState(e.item, 'yourStateName', true);
});

graph.on('canvas:click', (e) => {
  graph.findAllByState('node', 'yourStateName').forEach((node) => {
    graph.setItemState(node, 'yourStateName', false);
  });
  graph.findAllByState('edge', 'yourStateName').forEach((edge) => {
    graph.setItemState(edge, 'yourStateName', false);
  });
});

graph.data(data);
graph.render();

// Listen to the selector, change the mode when the selector is changed
selector.addEventListener('change', (e) => {
  const value = e.target.value;
  Object.keys(fixSelectedItems).forEach((key) => {
    if (key !== 'fixState') fixSelectedItems[key] = false;
  });
  fixSelectedItems[value] = true;
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);
  };
`,title:{zh:"\u7F29\u653E\u753B\u5E03\u65F6\u56FA\u5B9A\u5143\u7D20",en:"Fix Items while Zooming"},filename:"fixItem.js",isNew:!1}],icon:"",id:"zoomCanvasFixItem",title:{en:"Fix Items while Zooming",zh:"\u7F29\u653E\u753B\u5E03\u65F6\u56FA\u5B9A\u9009\u4E2D\u5143\u7D20"},childrenKey:"demos",order:12},{demos:[{id:"click",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*B9dxR4x8UmUAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    { id: 'node1', x: 350, y: 200 },
    { id: 'node2', x: 350, y: 250 },
    { id: 'node3', x: 100, y: 200 },
  ],
};
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = 'Click the source and target node to create a new edge.';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  modes: {
    default: ['create-edge'],
  },
  defaultEdge: {
    type: 'quadratic',
    style: {
      stroke: '#F6BD16',
      lineWidth: 2,
    },
  },
});

graph.data(data);
graph.render();

graph.on('aftercreateedge', (e) => {
  const edges = graph.save().edges;
  G6.Util.processParallelEdges(edges);
  graph.getEdges().forEach((edge, i) => {
    graph.updateItem(edge, {
      curveOffset: edges[i].curveOffset,
      curvePosition: edges[i].curvePosition,
    });
  });
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:"\u70B9\u51FB\u7AEF\u70B9",filename:"click.js",isNew:!1},{id:"drag",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*B9dxR4x8UmUAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    { id: 'node1', x: 350, y: 200 },
    { id: 'node2', x: 350, y: 250 },
    { id: 'node3', x: 100, y: 200 },
  ],
};
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML =
  "Drag from a source node to a target node to create a new edge. Note that in trigger: 'drag' mode cannot create a self-loop edge";
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  modes: {
    default: [
      {
        type: 'create-edge',
        trigger: 'drag', // 'click' by default. options: 'drag', 'click'
      },
    ],
  },
  defaultEdge: {
    style: {
      stroke: '#F6BD16',
      lineWidth: 2,
    },
  },
});

graph.data(data);
graph.render();

graph.on('aftercreateedge', (e) => {
  const edges = graph.save().edges;
  G6.Util.processParallelEdges(edges);
  graph.getEdges().forEach((edge, i) => {
    graph.updateItem(edge, {
      curveOffset: edges[i].curveOffset,
      curvePosition: edges[i].curvePosition,
    });
  });
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:"\u4ECE\u4E00\u4E2A\u8282\u70B9\u62D6\u62FD\u5230\u53E6\u4E00\u4E2A\u8282\u70B9",filename:"drag.js",isNew:!1},{id:"click-and-key",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*B9dxR4x8UmUAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    { id: 'node1', x: 350, y: 200 },
    { id: 'node2', x: 350, y: 250 },
    { id: 'node3', x: 100, y: 200 },
  ],
};
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML =
  'Press the shift key and click the source and target node to create a new edge.';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: [
      {
        type: 'create-edge',
        key: 'shift', // undefined by default, options: 'shift', 'control', 'ctrl', 'meta', 'alt'
      },
    ],
  },
  defaultEdge: {
    style: {
      stroke: '#F6BD16',
      lineWidth: 2,
    },
  },
  linkCenter: true,
});

graph.data(data);
graph.render();

graph.on('aftercreateedge', (e) => {
  const edges = graph.save().edges;
  G6.Util.processParallelEdges(edges);
  graph.getEdges().forEach((edge, i) => {
    graph.updateItem(edge, {
      curveOffset: edges[i].curveOffset,
      curvePosition: edges[i].curvePosition,
    });
  });
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:"\u6309\u4F4F shift \u5E76\u70B9\u51FB\u7AEF\u70B9",filename:"click-and-key.js",isNew:!1},{id:"click-link-point",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*WAQ6T4pqCd8AAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

// G6.Util.processParallelEdges processes the edges with same source node and target node,
// on this basis, processParallelEdgesOnAnchorPoint consider the end nodes and anchor points in the same time.
const processParallelEdgesOnAnchorPoint = (
  edges,
  offsetDiff = 15,
  multiEdgeType = 'quadratic',
  singleEdgeType = undefined,
  loopEdgeType = undefined
) => {
  const len = edges.length;
  const cod = offsetDiff * 2;
  const loopPosition = [
    'top',
    'top-right',
    'right',
    'bottom-right',
    'bottom',
    'bottom-left',
    'left',
    'top-left',
  ];
  const edgeMap = {};
  const tags = [];
  const reverses = {};
  for (let i = 0; i < len; i++) {
    const edge = edges[i];
    const { source, target, sourceAnchor, targetAnchor } = edge;
    const sourceTarget = \`\${source}|\${sourceAnchor}-\${target}|\${targetAnchor}\`;

    if (tags[i]) continue;
    if (!edgeMap[sourceTarget]) {
      edgeMap[sourceTarget] = [];
    }
    tags[i] = true;
    edgeMap[sourceTarget].push(edge);
    for (let j = 0; j < len; j++) {
      if (i === j) continue;
      const sedge = edges[j];
      const { source: src, target: dst, sourceAnchor: srcAnchor, targetAnchor: dstAnchor } = sedge;

      // \u4E24\u4E2A\u8282\u70B9\u4E4B\u95F4\u5171\u540C\u7684\u8FB9
      // \u7B2C\u4E00\u6761\u7684source = \u7B2C\u4E8C\u6761\u7684target
      // \u7B2C\u4E00\u6761\u7684target = \u7B2C\u4E8C\u6761\u7684source
      if (!tags[j]) {
        if (source === dst && sourceAnchor === dstAnchor
            && target === src && targetAnchor === srcAnchor) {
          edgeMap[sourceTarget].push(sedge);
          tags[j] = true;
          reverses[\`\${src}|\${srcAnchor}|\${dst}|\${dstAnchor}|\${edgeMap[sourceTarget].length - 1}\`] = true;
        } else if (source === src && sourceAnchor === srcAnchor
           && target === dst  && targetAnchor === dstAnchor) {
          edgeMap[sourceTarget].push(sedge);
          tags[j] = true;
        }
      }
    }
  }

  for (const key in edgeMap) {
    const arcEdges = edgeMap[key];
    const { length } = arcEdges;
    for (let k = 0; k < length; k++) {
      const current = arcEdges[k];
      if (current.source === current.target) {
        if (loopEdgeType) current.type = loopEdgeType;
        // \u8D85\u8FC78\u6761\u81EA\u73AF\u8FB9\uFF0C\u5219\u9700\u8981\u91CD\u65B0\u5904\u7406
        current.loopCfg = {
          position: loopPosition[k % 8],
          dist: Math.floor(k / 8) * 20 + 50,
        };
        continue;
      }
      if (length === 1 && singleEdgeType && (current.source !== current.target || current.sourceAnchor !== current.targetAnchor)) {
        current.type = singleEdgeType;
        continue;
      }
      current.type = multiEdgeType;
      const sign =
        (k % 2 === 0 ? 1 : -1) * (reverses[\`\${current.source}|\${current.sourceAnchor}|\${current.target}|\${current.targetAnchor}|\${k}\`] ? -1 : 1);
      if (length % 2 === 1) {
        current.curveOffset = sign * Math.ceil(k / 2) * cod;
      } else {
        current.curveOffset = sign * (Math.floor(k / 2) * cod + offsetDiff);
      }
    }
  }
  return edges;
};


const data = {
  nodes: [
    { id: 'node1', x: 350, y: 100 },
    { id: 'node2', x: 350, y: 250 },
  ],
};
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = 'Hover the node and the anchor points will show up, click anchor points to create edges.';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

// custom a node with anchor-point shapes
G6.registerNode('rect-node', {
  // draw anchor-point circles according to the anchorPoints in afterDraw
  afterDraw(cfg, group) {
    const bbox = group.getBBox();
    const anchorPoints = this.getAnchorPoints(cfg)
    anchorPoints.forEach((anchorPos, i) => {
      group.addShape('circle', {
        attrs: {
          r: 5,
          x: bbox.x + bbox.width * anchorPos[0],
          y: bbox.y + bbox.height * anchorPos[1],
          fill: '#fff',
          stroke: '#5F95FF'
        },
        name: \`anchor-point\`, // the name, for searching by group.find(ele => ele.get('name') === 'anchor-point')
        anchorPointIdx: i, // flag the idx of the anchor-point circle
        links: 0, // cache the number of edges connected to this shape
        visible: false, // invisible by default, shows up when links > 1 or the node is in showAnchors state
      })
    })
  },
  getAnchorPoints(cfg) {
    return cfg.anchorPoints || [[0, 0.5], [0.33, 0], [0.66, 0], [1, 0.5], [0.33, 1], [0.66, 1]];
  },
  // response the state changes and show/hide the link-point circles
  setState(name, value, item) {
    if (name === 'showAnchors') {
      const anchorPoints = item.getContainer().findAll(ele => ele.get('name') === 'anchor-point');
      anchorPoints.forEach(point => {
        if (value || point.get('links') > 0) point.show()
        else point.hide()
      })
    }
  }
}, 'rect')

let sourceAnchorIdx, targetAnchorIdx;

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: [
      'drag-node',
      // config the shouldBegin and shouldEnd to make sure the create-edge is began and ended at anchor-point circles
      {
      type: 'create-edge',
      shouldBegin: e => {
        // avoid beginning at other shapes on the node
        if (e.target && e.target.get('name') !== 'anchor-point') return false;
        sourceAnchorIdx = e.target.get('anchorPointIdx');
        e.target.set('links', e.target.get('links') + 1); // cache the number of edge connected to this anchor-point circle
        return true;
      },
      shouldEnd: e => {
        // avoid ending at other shapes on the node
        if (e.target && e.target.get('name') !== 'anchor-point') return false;
        if (e.target) {
          targetAnchorIdx = e.target.get('anchorPointIdx');
          e.target.set('links', e.target.get('links') + 1);  // cache the number of edge connected to this anchor-point circle
          return true;
        }
        targetAnchorIdx = undefined;
        return true;
      },
      // update the sourceAnchor
      // getEdgeConfig: () => {
      //   return {
      //     sourceAnchor: sourceAnchorIdx
      //   }
      // }
    }],
  },
  defaultNode: {
    type: 'rect-node',
    style: {
      fill: '#eee',
      stroke: '#ccc',
    }
  },
  defaultEdge: {
    type: 'quadratic',
    style: {
      stroke: '#F6BD16',
      lineWidth: 2,
    },
  },
});

graph.data(data);
graph.render();

graph.on('aftercreateedge', (e) => {
  // update the sourceAnchor and targetAnchor for the newly added edge
  graph.updateItem(e.edge, {
    sourceAnchor: sourceAnchorIdx,
    targetAnchor: targetAnchorIdx
  })

  // update the curveOffset for parallel edges
  const edges = graph.save().edges;
  processParallelEdgesOnAnchorPoint(edges);
  graph.getEdges().forEach((edge, i) => {
    graph.updateItem(edge, {
      curveOffset: edges[i].curveOffset,
      curvePosition: edges[i].curvePosition,
    });
  });
});

// if create-edge is canceled before ending, update the 'links' on the anchor-point circles
graph.on('afterremoveitem', e => {
  if (e.item && e.item.source && e.item.target) {
    const sourceNode = graph.findById(e.item.source);
    const targetNode = graph.findById(e.item.target);
    const { sourceAnchor, targetAnchor } = e.item;
    if (sourceNode && !isNaN(sourceAnchor)) {
      const sourceAnchorShape = sourceNode.getContainer().find(ele => (ele.get('name') === 'anchor-point' && ele.get('anchorPointIdx') === sourceAnchor));
      sourceAnchorShape.set('links', sourceAnchorShape.get('links') - 1);
    }
    if (targetNode && !isNaN(targetAnchor)) {
      const targetAnchorShape = targetNode.getContainer().find(ele => (ele.get('name') === 'anchor-point' && ele.get('anchorPointIdx') === targetAnchor));
      targetAnchorShape.set('links', targetAnchorShape.get('links') - 1);
    }
  }
})

// after clicking on the first node, the edge is created, update the sourceAnchor
graph.on('afteradditem', e => {
  if (e.item && e.item.getType() === 'edge') {
    graph.updateItem(e.item, {
      sourceAnchor: sourceAnchorIdx
    });
  }
})


// some listeners to control the state of nodes to show and hide anchor-point circles
graph.on('node:mouseenter', e => {
  graph.setItemState(e.item, 'showAnchors', true);
})
graph.on('node:mouseleave', e => {
  graph.setItemState(e.item, 'showAnchors', false);
})

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:"\u70B9\u51FB\u7AEF\u70B9\u4E0A\u7684\u5B50\u56FE\u5F62",filename:"click-link-point.js",isNew:!1},{id:"drag-link-point",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*WAQ6T4pqCd8AAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

// G6.Util.processParallelEdges processes the edges with same source node and target node,
// on this basis, processParallelEdgesOnAnchorPoint consider the end nodes and anchor points in the same time.
const processParallelEdgesOnAnchorPoint = (
  edges,
  offsetDiff = 15,
  multiEdgeType = 'quadratic',
  singleEdgeType = undefined,
  loopEdgeType = undefined
) => {
  const len = edges.length;
  const cod = offsetDiff * 2;
  const loopPosition = [
    'top',
    'top-right',
    'right',
    'bottom-right',
    'bottom',
    'bottom-left',
    'left',
    'top-left',
  ];
  const edgeMap = {};
  const tags = [];
  const reverses = {};
  for (let i = 0; i < len; i++) {
    const edge = edges[i];
    const { source, target, sourceAnchor, targetAnchor } = edge;
    const sourceTarget = \`\${source}|\${sourceAnchor}-\${target}|\${targetAnchor}\`;

    if (tags[i]) continue;
    if (!edgeMap[sourceTarget]) {
      edgeMap[sourceTarget] = [];
    }
    tags[i] = true;
    edgeMap[sourceTarget].push(edge);
    for (let j = 0; j < len; j++) {
      if (i === j) continue;
      const sedge = edges[j];
      const { source: src, target: dst, sourceAnchor: srcAnchor, targetAnchor: dstAnchor } = sedge;

      // \u4E24\u4E2A\u8282\u70B9\u4E4B\u95F4\u5171\u540C\u7684\u8FB9
      // \u7B2C\u4E00\u6761\u7684source = \u7B2C\u4E8C\u6761\u7684target
      // \u7B2C\u4E00\u6761\u7684target = \u7B2C\u4E8C\u6761\u7684source
      if (!tags[j]) {
        if (source === dst && sourceAnchor === dstAnchor
            && target === src && targetAnchor === srcAnchor) {
          edgeMap[sourceTarget].push(sedge);
          tags[j] = true;
          reverses[\`\${src}|\${srcAnchor}|\${dst}|\${dstAnchor}|\${edgeMap[sourceTarget].length - 1}\`] = true;
        } else if (source === src && sourceAnchor === srcAnchor
           && target === dst  && targetAnchor === dstAnchor) {
          edgeMap[sourceTarget].push(sedge);
          tags[j] = true;
        }
      }
    }
  }

  for (const key in edgeMap) {
    const arcEdges = edgeMap[key];
    const { length } = arcEdges;
    for (let k = 0; k < length; k++) {
      const current = arcEdges[k];
      if (current.source === current.target) {
        if (loopEdgeType) current.type = loopEdgeType;
        // \u8D85\u8FC78\u6761\u81EA\u73AF\u8FB9\uFF0C\u5219\u9700\u8981\u91CD\u65B0\u5904\u7406
        current.loopCfg = {
          position: loopPosition[k % 8],
          dist: Math.floor(k / 8) * 20 + 50,
        };
        continue;
      }
      if (length === 1 && singleEdgeType && (current.source !== current.target || current.sourceAnchor !== current.targetAnchor)) {
        current.type = singleEdgeType;
        continue;
      }
      current.type = multiEdgeType;
      const sign =
        (k % 2 === 0 ? 1 : -1) * (reverses[\`\${current.source}|\${current.sourceAnchor}|\${current.target}|\${current.targetAnchor}|\${k}\`] ? -1 : 1);
      if (length % 2 === 1) {
        current.curveOffset = sign * Math.ceil(k / 2) * cod;
      } else {
        current.curveOffset = sign * (Math.floor(k / 2) * cod + offsetDiff);
      }
    }
  }
  return edges;
};


const data = {
  nodes: [
    { id: 'node1', x: 350, y: 100 },
    { id: 'node2', x: 350, y: 250 },
  ],
};
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = 'Hover the node and the anchor points will show up, drag from and drop on the anchor points to create edges.';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

// custom a node with anchor-point shapes
G6.registerNode('rect-node', {
  // draw anchor-point circles according to the anchorPoints in afterDraw
  afterDraw(cfg, group) {
    const bbox = group.getBBox();
    const anchorPoints = this.getAnchorPoints(cfg)
    anchorPoints.forEach((anchorPos, i) => {
      group.addShape('circle', {
        attrs: {
          r: 5,
          x: bbox.x + bbox.width * anchorPos[0],
          y: bbox.y + bbox.height * anchorPos[1],
          fill: '#fff',
          stroke: '#5F95FF'
        },
        name: \`anchor-point\`, // the name, for searching by group.find(ele => ele.get('name') === 'anchor-point')
        anchorPointIdx: i, // flag the idx of the anchor-point circle
        links: 0, // cache the number of edges connected to this shape
        visible: false, // invisible by default, shows up when links > 1 or the node is in showAnchors state
        draggable: true // allow to catch the drag events on this shape
      })
    })
  },
  getAnchorPoints(cfg) {
    return cfg.anchorPoints || [[0, 0.5], [0.33, 0], [0.66, 0], [1, 0.5], [0.33, 1], [0.66, 1]];
  },
  // response the state changes and show/hide the link-point circles
  setState(name, value, item) {
    if (name === 'showAnchors') {
      const anchorPoints = item.getContainer().findAll(ele => ele.get('name') === 'anchor-point');
      anchorPoints.forEach(point => {
        if (value || point.get('links') > 0) point.show()
        else point.hide()
      })
    }
  }
}, 'rect')

let sourceAnchorIdx, targetAnchorIdx;

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: [
      // config the shouldBegin for drag-node to avoid node moving while dragging on the anchor-point circles
      {
        type: 'drag-node',
        shouldBegin: e => {
          if (e.target.get('name') === 'anchor-point') return false;
          return true;
        }
      },
      // config the shouldBegin and shouldEnd to make sure the create-edge is began and ended at anchor-point circles
      {
      type: 'create-edge',
      trigger: 'drag', // set the trigger to be drag to make the create-edge triggered by drag
      shouldBegin: e => {
        // avoid beginning at other shapes on the node
        if (e.target && e.target.get('name') !== 'anchor-point') return false;
        sourceAnchorIdx = e.target.get('anchorPointIdx');
        e.target.set('links', e.target.get('links') + 1); // cache the number of edge connected to this anchor-point circle
        return true;
      },
      shouldEnd: e => {
        // avoid ending at other shapes on the node
        if (e.target && e.target.get('name') !== 'anchor-point') return false;
        if (e.target) {
          targetAnchorIdx = e.target.get('anchorPointIdx');
          e.target.set('links', e.target.get('links') + 1);  // cache the number of edge connected to this anchor-point circle
          return true;
        }
        targetAnchorIdx = undefined;
        return true;
      },
    }],
  },
  defaultNode: {
    type: 'rect-node',
    style: {
      fill: '#eee',
      stroke: '#ccc',
    }
  },
  defaultEdge: {
    type: 'quadratic',
    style: {
      stroke: '#F6BD16',
      lineWidth: 2,
    },
  },
});

graph.data(data);
graph.render();

graph.on('aftercreateedge', (e) => {
  // update the sourceAnchor and targetAnchor for the newly added edge
  graph.updateItem(e.edge, {
    sourceAnchor: sourceAnchorIdx,
    targetAnchor: targetAnchorIdx
  })

  // update the curveOffset for parallel edges
  const edges = graph.save().edges;
  processParallelEdgesOnAnchorPoint(edges);
  graph.getEdges().forEach((edge, i) => {
    graph.updateItem(edge, {
      curveOffset: edges[i].curveOffset,
      curvePosition: edges[i].curvePosition,
    });
  });
});

// after drag from the first node, the edge is created, update the sourceAnchor
graph.on('afteradditem', e => {
  if (e.item && e.item.getType() === 'edge') {
    graph.updateItem(e.item, {
      sourceAnchor: sourceAnchorIdx
    });
  }
})

// if create-edge is canceled before ending, update the 'links' on the anchor-point circles
graph.on('afterremoveitem', e => {
  if (e.item && e.item.source && e.item.target) {
    const sourceNode = graph.findById(e.item.source);
    const targetNode = graph.findById(e.item.target);
    const { sourceAnchor, targetAnchor } = e.item;
    if (sourceNode && !isNaN(sourceAnchor)) {
      const sourceAnchorShape = sourceNode.getContainer().find(ele => (ele.get('name') === 'anchor-point' && ele.get('anchorPointIdx') === sourceAnchor));
      sourceAnchorShape.set('links', sourceAnchorShape.get('links') - 1);
    }
    if (targetNode && !isNaN(targetAnchor)) {
      const targetAnchorShape = targetNode.getContainer().find(ele => (ele.get('name') === 'anchor-point' && ele.get('anchorPointIdx') === targetAnchor));
      targetAnchorShape.set('links', targetAnchorShape.get('links') - 1);
    }
  }
})

// some listeners to control the state of nodes to show and hide anchor-point circles
graph.on('node:mouseenter', e => {
  graph.setItemState(e.item, 'showAnchors', true);
})
graph.on('node:mouseleave', e => {
  graph.setItemState(e.item, 'showAnchors', false);
})
graph.on('node:dragenter', e => {
  graph.setItemState(e.item, 'showAnchors', true);
})
graph.on('node:dragleave', e => {
  graph.setItemState(e.item, 'showAnchors', false);
})
graph.on('node:dragstart', e => {
  graph.setItemState(e.item, 'showAnchors', true);
})
graph.on('node:dragout', e => {
  graph.setItemState(e.item, 'showAnchors', false);
})

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:"\u4ECE\u7AEF\u70B9\u4E0A\u7684\u5B50\u56FE\u5F62\u62D6\u62FD",filename:"drag-link-point.js",isNew:!1}],icon:"",id:"createEdge",title:{en:"Create Edge",zh:"\u521B\u5EFA\u8FB9"},childrenKey:"demos",order:13},{demos:[{id:"hideItem",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*hld6SrA4qacAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    { id: 'node0', size: 50, label: '0', x: 326, y: 268 },
    { id: 'node1', size: 30, label: '1', x: 280, y: 384 },
    { id: 'node2', size: 30, label: '2', x: 234, y: 167 },
    { id: 'node3', size: 30, label: '3', x: 391, y: 368 },
    { id: 'node4', size: 30, label: '4', x: 444, y: 209 },
    { id: 'node5', size: 30, label: '5', x: 378, y: 157 },
    { id: 'node6', size: 15, label: '6', x: 229, y: 400 },
    { id: 'node7', size: 15, label: '7', x: 281, y: 440 },
    { id: 'node8', size: 15, label: '8', x: 188, y: 119 },
    { id: 'node9', size: 15, label: '9', x: 287, y: 157 },
    { id: 'node10', size: 15, label: '10', x: 185, y: 200 },
    { id: 'node11', size: 15, label: '11', x: 238, y: 110 },
    { id: 'node12', size: 15, label: '12', x: 239, y: 221 },
    { id: 'node13', size: 15, label: '13', x: 176, y: 160 },
    { id: 'node14', size: 15, label: '14', x: 389, y: 423 },
    { id: 'node15', size: 15, label: '15', x: 441, y: 341 },
    { id: 'node16', size: 15, label: '16', x: 442, y: 398 },
  ],
  edges: [
    { source: 'node0', target: 'node1', label: '0-1' },
    { source: 'node0', target: 'node2', label: '0-2' },
    { source: 'node0', target: 'node3', label: '0-3' },
    { source: 'node0', target: 'node4', label: '0-4' },
    { source: 'node0', target: 'node5', label: '0-5' },
    { source: 'node1', target: 'node6', label: '1-6' },
    { source: 'node1', target: 'node7', label: '1-7' },
    { source: 'node2', target: 'node8', label: '2-8' },
    { source: 'node2', target: 'node9', label: '2-9' },
    { source: 'node2', target: 'node10', label: '2-10' },
    { source: 'node2', target: 'node11', label: '2-11' },
    { source: 'node2', target: 'node12', label: '2-12' },
    { source: 'node2', target: 'node13', label: '2-13' },
    { source: 'node3', target: 'node14', label: '3-14' },
    { source: 'node3', target: 'node15', label: '3-15' },
    { source: 'node3', target: 'node16', label: '3-16' },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: [
      'drag-node',
      {
        type: 'drag-canvas',
        enableOptimize: true, // enable the optimize to hide the shapes beside nodes' keyShape
      },
      {
        type: 'zoom-canvas',
        enableOptimize: true, // enable the optimize to hide the shapes beside nodes' keyShape
      },
    ],
  },
  defaultNode: {
    size: [10, 10],
    style: {
      lineWidth: 2,
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    size: 1,
    style: {
      stroke: '#e2e2e2',
      lineAppendWidth: 2,
    },
  },
  nodeStateStyles: {
    yourStateName: {
      stroke: '#f00',
      lineWidth: 3,
    },
  },
  edgeStateStyles: {
    yourStateName: {
      stroke: '#f00',
      lineWidth: 3,
    },
  },
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u62D6\u62FD\u753B\u5E03\u65F6\u9690\u85CF\u8282\u70B9 keyShape \u5916\u6240\u6709\u56FE\u5F62",en:"Hide the Shapes beside keyShape of Nodes while Dragging"},filename:"hideItem.js",isNew:!1}],icon:"",id:"dragCanvasHideItem",title:{en:"Hide Items while Dragging and Zooming",zh:"\u62D6\u62FD\u7F29\u653E\u753B\u5E03\u65F6\u9690\u85CF\u5143\u7D20"},childrenKey:"demos",order:13},{demos:[{id:"click",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*F0RGQ67xbGYAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    { id: 'node1', x: 150, y: 250 },
    { id: 'node2', x: 350, y: 250 },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
    },
  ],
};

let shift = true;

const graphDiv = document.getElementById('container');

const switchDiv = document.createElement('div');
switchDiv.innerHTML = \`Press \\'shift\\' to select multiple nodes. Click Here to switch trigger to key \\'alt\\'
  <br /> \u6309\u4F4F 'shift' \u53EF\u591A\u9009\u8282\u70B9\u3002\u70B9\u51FB\u300C\u8FD9\u91CC\u300D\u5C06 trigger \u5207\u6362\u4E3A 'alt'\`;
graphDiv.appendChild(switchDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 30;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitCenter: true,
  modes: {
    default: ['click-select', 'drag-node'],
    altSelect: [
      {
        type: 'click-select',
        trigger: 'alt',
      },
      'drag-node',
    ],
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable. you can extend or custom it by the following lines */
  /* \u4E0D\u540C\u72B6\u6001\u4E0B\u8282\u70B9\u548C\u8FB9\u7684\u6837\u5F0F\uFF0CG6 \u63D0\u4F9B\u4EE5\u4E0B\u72B6\u6001\u540D\u7684\u9ED8\u8BA4\u6837\u5F0F\uFF1Aactive, inactive, selected, highlight, disable\u3002\u53EF\u4EE5\u901A\u8FC7\u5982\u4E0B\u65B9\u5F0F\u4FEE\u6539\u6216\u8005\u6269\u5C55\u5168\u5C40\u72B6\u6001\u6837\u5F0F*/
  // nodeStateStyles: {
  //   selected: {
  //     stroke: '#f00',
  //     lineWidth: 3
  //   }
  // },
  // edgeStateStyles: {
  //   selected: {
  //     lineWidth: 3,
  //     stroke: '#f00'
  //   }
  // }
});

graph.on('node:mouseenter', (e) => {
  graph.setItemState(e.item, 'active', true);
});

graph.on('node:mouseleave', (e) => {
  graph.setItemState(e.item, 'active', false);
});

graph.on('nodeselectchange', (e) => {
  console.log(e.selectedItems, e.select);
});

switchDiv.addEventListener('click', (e) => {
  shift = !shift;
  if (shift) {
    graph.setMode('default');
    switchDiv.innerHTML = \`Press \\'shift\\' to select multiple nodes. Click Here to switch trigger to key \\'alt\\'
      <br /> \u6309\u4F4F 'shift' \u53EF\u591A\u9009\u8282\u70B9\u3002\u70B9\u51FB\u300C\u8FD9\u91CC\u300D\u5C06 trigger \u5207\u6362\u4E3A 'alt'\`;
  } else {
    graph.setMode('altSelect');
    switchDiv.innerHTML = \`Press \\'alt\\' to select multiple nodes. Click Here to switch trigger to key \\'shift\\'
      <br /> \u6309\u4F4F 'alt' \u53EF\u591A\u9009\u8282\u70B9\u3002\u70B9\u51FB\u300C\u8FD9\u91CC\u300D\u5C06 trigger \u5207\u6362\u4E3A 'shift'\`;
  }
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);
  };
`,title:"\u70B9\u51FB\u5355\u9009\u6216\u591A\u9009",filename:"click.js",isNew:!1},{id:"brush",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ZDEiRIQRByEAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    { id: 'node1', x: 150, y: 250 },
    { id: 'node2', x: 350, y: 250 },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
    },
  ],
};

let shift = true;

const container = document.getElementById('container');

const switchDiv = document.createElement('div');
switchDiv.innerHTML = \`Press 'shift' and drag begin on empty space to brush select. Click \u300CHERE\u300D to switch trigger to \\'drag\\', and disable drag-canvas
  <br /> \u6309\u4F4F 'shift' \u5E76\u4ECE\u753B\u5E03\u7A7A\u767D\u5904\u5F00\u59CB\u62D6\u62FD\u5373\u53EF\u5F00\u59CB\u6846\u9009\u3002\u70B9\u51FB\u300C\u8FD9\u91CC\u300D\u5C06 trigger \u5207\u6362\u4E3A 'drag'\uFF0C\u540C\u65F6\u5173\u95ED\u753B\u5E03\u62D6\u62FD\`;
container.appendChild(switchDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 30;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitCenter: true,
  modes: {
    default: ['brush-select', 'drag-node', 'drag-canvas'],
    altSelect: [
      {
        type: 'brush-select',
        trigger: 'drag',
      },
      'drag-node',
    ],
  },
  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable. you can extend or custom it by the following lines */
  /* \u4E0D\u540C\u72B6\u6001\u4E0B\u8282\u70B9\u548C\u8FB9\u7684\u6837\u5F0F\uFF0CG6 \u63D0\u4F9B\u4EE5\u4E0B\u72B6\u6001\u540D\u7684\u9ED8\u8BA4\u6837\u5F0F\uFF1Aactive, inactive, selected, highlight, disable\u3002\u53EF\u4EE5\u901A\u8FC7\u5982\u4E0B\u65B9\u5F0F\u4FEE\u6539\u6216\u8005\u6269\u5C55\u5168\u5C40\u72B6\u6001\u6837\u5F0F*/
  // nodeStateStyles: {
  //   selected: {
  //     stroke: '#f00',
  //     lineWidth: 3
  //   }
  // },
  // edgeStateStyles: {
  //   selected: {
  //     lineWidth: 3,
  //     stroke: '#f00'
  //   }
  // }
});

graph.on('node:mouseenter', (e) => {
  graph.setItemState(e.item, 'active', true);
});

graph.on('node:mouseleave', (e) => {
  graph.setItemState(e.item, 'active', false);
});

graph.on('nodeselectchange', (e) => {
  console.log(e.selectedItems, e.select);
});

switchDiv.addEventListener('click', (e) => {
  shift = !shift;
  if (shift) {
    graph.setMode('default');
    switchDiv.innerHTML = \`Press \\'shift\\' and drag begin on empty space to brush select. Click Here to switch trigger to \\'drag\\', and disable drag-canvas
      <br /> \u6309\u4F4F 'shift' \u5E76\u4ECE\u753B\u5E03\u7A7A\u767D\u5904\u5F00\u59CB\u62D6\u62FD\u5373\u53EF\u5F00\u59CB\u6846\u9009\u3002\u70B9\u51FB\u300C\u8FD9\u91CC\u300D\u5C06 trigger \u5207\u6362\u4E3A 'drag'\uFF0C\u540C\u65F6\u5173\u95ED\u753B\u5E03\u62D6\u62FD\`;
  } else {
    graph.setMode('altSelect');
    switchDiv.innerHTML = \`Press \\'alt\\' and drag begin on empty space to brush select. Click Here to switch trigger to key \\'shift\\', and enable drag-canvas
      <br /> \u6309\u4F4F 'alt' \u5E76\u4ECE\u753B\u5E03\u7A7A\u767D\u5904\u5F00\u59CB\u62D6\u62FD\u5373\u53EF\u5F00\u59CB\u6846\u9009\u3002\u70B9\u51FB\u300C\u8FD9\u91CC\u300D\u5C06 trigger \u5207\u6362\u4E3A 'shift'\uFF0C\u540C\u65F6\u5F00\u542F\u753B\u5E03\u62D6\u62FD\`;
  }
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);
  };
`,title:"\u6846\u9009",filename:"brush.js",isNew:!1},{id:"lasso",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*8WwrRplTPG8AAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    { id: 'node1', x: 150, y: 250 },
    { id: 'node2', x: 350, y: 250 },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
    },
  ],
};

let shift = true;

const switchDiv = document.createElement('div');
switchDiv.innerHTML = \`Press down the 'shift' on keyboard and drag to begin select.  Click\u300CHERE\u300Dto switch trigger to \\'drag\\', and custom lasso style, and disable drag-canvas
  <br /> \u6309\u4F4F 'shift' \u53EF\u5F00\u59CB\u62C9\u7D22\u9009\u62E9\u3002\u70B9\u51FB\u300C\u8FD9\u91CC\u300D\u5207\u6362 trigger \u4E3A 'drag'\uFF0C\u540C\u65F6\u4FEE\u6539\u62C9\u7D22\u6837\u5F0F\u548C\u5173\u95ED\u753B\u5E03\u62D6\u62FD\`;
const container = document.getElementById('container');
container.appendChild(switchDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 30;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitCenter: true,
  modes: {
    default: ['lasso-select', 'drag-node', 'drag-canvas'],
    dragLasso: [
      {
        type: 'lasso-select',
        delegateStyle: {
          fill: '#f00',
          fillOpacity: 0.05,
          stroke: '#f00',
          lineWidth: 1,
        },
        onSelect: (nodes, edges) => {
          console.log('onSelect', nodes, edges);
        },
        trigger: 'drag',
      },
      'drag-node',
    ],
  },
  nodeStateStyles: {
    selected: {
      stroke: '#f00',
      lineWidth: 3,
    },
  },
  edgeStateStyles: {
    selected: {
      lineWidth: 3,
      stroke: '#f00',
    },
  },
});

graph.data(data);
graph.render();

graph.on('nodeselectchange', (e) => {
  console.log(e.selectedItems, e.select);
});

switchDiv.addEventListener('click', (e) => {
  shift = !shift;
  if (shift) {
    graph.setMode('default');
    switchDiv.innerHTML = \`Press down the 'shift' on keyboard and drag to begin select. Click\u300CHERE\u300Dto switch trigger to \\'drag\\', and custom lasso style, and disable drag-canvas
    <br /> \u6309\u4F4F 'shift' \u53EF\u5F00\u59CB\u62C9\u7D22\u9009\u62E9\u3002\u70B9\u51FB\u300C\u8FD9\u91CC\u300D\u5207\u6362 trigger \u4E3A 'drag'\uFF0C\u540C\u65F6\u4FEE\u6539\u62C9\u7D22\u6837\u5F0F\u548C\u5173\u95ED\u753B\u5E03\u62D6\u62FD\`;
  } else {
    graph.setMode('dragLasso');
    switchDiv.innerHTML = \`Drag on the canvas to begin lasso select. Click\u300CHERE\u300Dto switch trigger to \\'shift\\', and enable drag-canvas
    <br /> \u62D6\u62FD\u753B\u5E03\u5373\u53EF\u8FDB\u884C\u62C9\u7D22\u9009\u62E9\u3002\u70B9\u51FB\u300C\u8FD9\u91CC\u300D\u5207\u6362 trigger \u4E3A 'drag'\uFF0C\u540C\u65F6\u5F00\u542F\u753B\u5E03\u62D6\u62FD\`;
  }
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);
  };
`,title:"\u62C9\u7D22\u9009\u62E9",filename:"lasso.js",isNew:!1}],icon:"",id:"select",title:{en:"Select",zh:"\u9009\u4E2D"},childrenKey:"demos",order:14},{demos:[{id:"fitView",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*FALhS5MhAzAAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');

const tipDiv = document.createElement('div');
tipDiv.innerHTML = \`Press both the keys 'control' and '1' to call graph.fitView. The keys and the called function can be configured.\u3010ATTENTION\u3011: make sure the focus is on the canvas when you pressing keys
  <br /> \u6309\u4F4F 'control' \u5E76\u6309\u4E0B '1' \u952E\uFF0C\u5C06\u4F1A\u8C03\u7528 graph.fitView\u3002\u7EC4\u5408\u6309\u952E\u53CA\u88AB\u8C03\u7528\u7684\u51FD\u6570\u53CA\u5176\u53C2\u6570\u5747\u53EF\u88AB\u914D\u7F6E\u3002\u3010\u6CE8\u610F\u3011\uFF1A\u4F7F\u7528\u7EC4\u5408\u4EF6\u8C03\u7528\u51FD\u6570\u65F6\uFF0C\u8BF7\u4FDD\u8BC1\u5F53\u524D\u7126\u70B9\u5728\u753B\u5E03\u4E0A\`;
container.appendChild(tipDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 100;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitCenter: true,
  modes: {
    default: ['shortcuts-call'],
  },
});
fetch('https://gw.alipayobjects.com/os/bmw-prod/b0ca4b15-bd0c-43ec-ae41-c810374a1d55.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data(data);
    graph.render();
    graph.zoom(2);
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 100);
  };
`,title:"\u4F7F\u7528\u5FEB\u6377\u952E\u9002\u914D\u753B\u5E03",filename:"fitView.js",isNew:!1},{id:"moveTo",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*7RPkSJpwzrQAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');

const tipDiv = document.createElement('div');
tipDiv.innerHTML = \`Press both the keys 'control' and 'm' to call graph.fitView. The keys and the called function can be configured.\u3010ATTENTION\u3011: make sure the focus is on the canvas when you pressing keys
  <br /> \u6309\u4F4F 'control' \u5E76\u6309\u4E0B 'm' \u952E\uFF0C\u5C06\u4F1A\u8C03\u7528 graph.moveTo\u3002\u7EC4\u5408\u6309\u952E\u53CA\u88AB\u8C03\u7528\u7684\u51FD\u6570\u53CA\u5176\u53C2\u6570\u5747\u53EF\u88AB\u914D\u7F6E\u3002\u3010\u6CE8\u610F\u3011\uFF1A\u4F7F\u7528\u7EC4\u5408\u4EF6\u8C03\u7528\u51FD\u6570\u65F6\uFF0C\u8BF7\u4FDD\u8BC1\u5F53\u524D\u7126\u70B9\u5728\u753B\u5E03\u4E0A\`;
container.appendChild(tipDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 100;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitCenter: true,
  modes: {
    default: [
      {
        type: 'shortcuts-call',
        functionName: 'moveTo',
        functionParams: [0, 0],
        combinedKey: 'm',
      },
    ],
  },
});
fetch('https://gw.alipayobjects.com/os/bmw-prod/b0ca4b15-bd0c-43ec-ae41-c810374a1d55.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data(data);
    graph.render();
    graph.zoom(2);
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 100);
  };
`,title:"\u4F7F\u7528\u5FEB\u6377\u952E\u79FB\u52A8\u5230\u5DE6\u4E0A\u89D2",filename:"moveTo.js",isNew:!1}],icon:"",id:"fitView",title:{en:"Fit View with Shortcuts",zh:"\u5FEB\u6377\u952E\u9002\u5E94\u753B\u5E03"},childrenKey:"demos",order:15},{demos:[{id:"treePagination",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*v7yASaVZDisAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

// the max number of nodes for each subtree
const MAX_NUM_EACH_SUBTREE = 3;

const container = document.getElementById('container');
const tipDiv = document.createElement('div');
tipDiv.id = 'tip';
tipDiv.innerHTML = \`<div>Hover the nodes of a subtree, and click the triangle icons to switch the nodes patination.</div>
<div>\u5C06\u9F20\u6807\u79FB\u52A8\u5230\u6709\u591A\u4E2A\u5B50\u8282\u70B9\u7684\u5B50\u6811\u4E0A\uFF0C\u70B9\u51FB\u5DE6\u53F3\u5C0F\u4E09\u89D2\u6309\u94AE\u4EE5\u5207\u6362\u8BE5\u5C42\u7EA7\u7684\u8282\u70B9\uFF0C\u8FBE\u5230\u5206\u9875\u6548\u679C</div>\`;
container.appendChild(tipDiv);

fetch('https://gw.alipayobjects.com/os/bmw-prod/a3ae9b40-ff40-434a-894f-b10c535f8b9f.json')
  .then((res) => res.json())
  .then((data) => {
    const stashSubtrees = {};
    G6.Util.traverseTreeUp(data, (subtree) => {
      // process the label
      (subtree.label = subtree.id),
        (subtree.labelCfg = {
          offset: 10,
          position: subtree.children && subtree.children.length > 0 ? 'left' : 'right',
        });

      // stash the origin children for the subtree to be pruned
      if (subtree.children && subtree.children.length > MAX_NUM_EACH_SUBTREE) {
        subtree.overflow = true;
        const stashChildren = [];
        subtree.children.forEach((child) => {
          stashChildren.push(Object.assign({}, child));
        });
        stashSubtrees[subtree.id] = {
          oriChildren: stashChildren,
          curBeginIdx: 0,
          curEndIdx: MAX_NUM_EACH_SUBTREE,
        };
      }
    });

    // pruning the tree
    G6.Util.traverseTree(data, (subtree) => {
      if (subtree.overflow) subtree.children = subtree.children.slice(0, MAX_NUM_EACH_SUBTREE);
    });

    const width = container.scrollWidth;
    const height = (container.scrollHeight || 500) - 50;
    const graph = new G6.TreeGraph({
      container: 'container',
      width,
      height,
      modes: {
        default: [
          {
            type: 'collapse-expand',
            onChange: function onChange(item, collapsed) {
              item.getModel().collapsed = collapsed;
              Object.keys(iconMap).forEach((parentId) => {
                if (!iconMap[parentId] || iconMap[parentId].destroyed) return;
                destroyIcons(parentId);
              });
              return true;
            },
          },
          'drag-canvas',
          'zoom-canvas',
        ],
      },
      defaultNode: {
        size: 26,
        anchorPoints: [
          [0, 0.5],
          [1, 0.5],
        ],
        style: {
          fill: '#C6E5FF',
          stroke: '#5B8FF9',
        },
      },
      defaultEdge: {
        type: 'cubic-horizontal',
        style: {
          stroke: '#A3B1BF',
        },
      },
      layout: {
        type: 'compactBox',
        direction: 'LR',
        getId: function getId(d) {
          return d.id;
        },
        getHeight: function getHeight() {
          return 16;
        },
        getWidth: function getWidth() {
          return 16;
        },
        getVGap: function getVGap() {
          return 10;
        },
        getHGap: function getHGap() {
          return 100;
        },
      },
      fitView: true,
    });

    if (typeof window !== 'undefined')
      window.onresize = () => {
        if (!graph || graph.get('destroyed')) return;
        if (!container || !container.scrollWidth || !container.scrollHeight) return;
        graph.changeSize(container.scrollWidth, container.scrollHeight - 50);
      };

    const iconMap = {};

    // draw the icons on the root graphics group of the graph
    const drawIcons = (parentId) => {
      const parentNode = graph.findById(parentId);
      const model = parentNode.getModel();
      delayDestroyIcons(parentId, 2000);
      if (model.overflow) {
        if (iconMap[parentId] && !iconMap[parentId].destroyed) return;
        const graphicsGroup = graph.getGroup();
        const children = model.children;
        const stashSubtree = stashSubtrees[parentId];
        const prePos = [children[0].x, children[0].y - (children[0].size || 26)];
        const nextPos = [children[2].x, children[2].y + (children[0].size || 26)];
        const preIcon = graphicsGroup.addShape('marker', {
          attrs: {
            symbol: 'triangle',
            x: prePos[0],
            y: prePos[1],
            r: 6,
            fill: '#333',
            opacity: 0,
            cursor: 'pointer',
          },
          name: \`pre-icon\`,
          subtreeID: model.id,
        });
        const nextIcon = graphicsGroup.addShape('marker', {
          attrs: {
            symbol: 'triangle-down',
            x: nextPos[0],
            y: nextPos[1],
            r: 6,
            fill: '#333',
            opacity: 0,
            cursor: 'pointer',
          },
          name: \`next-icon\`,
          subtreeID: model.id,
        });

        if (stashSubtree.curBeginIdx > 0) {
          preIcon.animate(
            {
              opacity: 0.5,
            },
            {
              duration: 150,
              repeat: false,
            },
          );
        }
        if (stashSubtree.curEndIdx < stashSubtree.oriChildren.length) {
          nextIcon.animate(
            {
              opacity: 0.5,
            },
            {
              duration: 150,
              repeat: false,
            },
          );
        }

        iconMap[parentId] = {
          preIcon,
          nextIcon,
          destroyed: false,
        };
        return true;
      }
      return false;
    };

    // update the icons
    const updateIcons = (parentId) => {
      if (!parentId || !iconMap[parentId]) return;
      const preIcon = iconMap[parentId].preIcon;
      const nextIcon = iconMap[parentId].nextIcon;
      const stashSubtree = stashSubtrees[parentId];

      const parentModel = graph.findById(parentId).getModel();
      const children = parentModel.children;
      if (!children) return;
      const prePos = [children[0].x, children[0].y - (children[0].size || 26)];
      const nextPos = [children[2].x, children[2].y + (children[0].size || 26)];
      preIcon.attr({
        opacity: stashSubtree.curBeginIdx <= 0 || parentModel.collapsed ? 0 : 0.5,
        x: prePos[0],
        y: prePos[1],
      });
      nextIcon.attr({
        opacity:
          stashSubtree.curEndIdx >= stashSubtree.oriChildren.length || parentModel.collapsed
            ? 0
            : 0.5,
        x: nextPos[0],
        y: nextPos[1],
      });
    };

    // destroy the icons
    const destroyIcons = (parentId) => {
      if (!iconMap[parentId]) return;
      const preIcon = iconMap[parentId].preIcon;
      const nextIcon = iconMap[parentId].nextIcon;
      if (preIcon && !preIcon.destroyed) {
        preIcon.animate(
          {
            opacity: 0,
          },
          {
            duration: 150,
            repeat: false,
          },
        );
        setTimeout(() => {
          preIcon.remove();
          preIcon.destroy();
        }, 150);
      }
      if (nextIcon && !nextIcon.destroyed) {
        nextIcon.animate(
          {
            opacity: 0,
          },
          {
            duration: 150,
            repeat: false,
          },
        );
        setTimeout(() => {
          nextIcon.remove();
          nextIcon.destroy();
        }, 150);
      }
      iconMap[parentId].destroyed = true;
    };

    // destroy the icons with delay
    const delayDestroyIcons = (parentId, delay = 2000) => {
      if (!iconMap[parentId] || window || typeof window === 'undefined') return;
      if (iconMap[parentId].timeouter) {
        window.clearTimeout(iconMap[parentId].timeouter);
      }
      iconMap[parentId].timeouter = window.setTimeout(() => {
        destroyIcons(parentId);
      }, delay);
    };

    // mouseenter the node to show the previous/next icons
    graph.on('node:mouseenter', (e) => {
      const parentNode = e.item.get('parent');
      if (!parentNode) return;
      const parentId = parentNode.getID();
      drawIcons(parentId);
    });

    // mouseleave the node to destroy the icons
    graph.on('node:mouseleave', (e) => {
      const parentNode = e.item.get('parent');
      if (!parentNode) return;
      const parentId = parentNode.getID();
      delayDestroyIcons(parentId, 2000);
    });

    // click the icon to changeData
    graph.on('click', (e) => {
      if (e.name === 'click') return;
      const target = e.target;
      const targetName = target.get('name');
      if (targetName !== 'pre-icon' && targetName !== 'next-icon') return;
      const parentId = target.get('subtreeID');
      const stashSubtree = stashSubtrees[parentId];
      const oriChildren = stashSubtree.oriChildren;
      if (targetName === 'pre-icon') {
        if (stashSubtree.curBeginIdx <= 0) return; // touch the top
        stashSubtree.curBeginIdx--;
        stashSubtree.curEndIdx--;
      } else {
        if (stashSubtree.curEndIdx >= oriChildren.length) return; // touch the bottom
        stashSubtree.curBeginIdx++;
        stashSubtree.curEndIdx++;
      }
      const newChildren = oriChildren.slice(stashSubtree.curBeginIdx, stashSubtree.curEndIdx);
      newChildren.forEach((childTree) => {
        G6.Util.traverseTreeUp(childTree, (subChildTree) => {
          if (subChildTree.children && subChildTree.children.length > MAX_NUM_EACH_SUBTREE) {
            subChildTree.children = subChildTree.children.slice(0, MAX_NUM_EACH_SUBTREE);
          }
        });
      });
      graph.updateChildren(newChildren, parentId);
    });

    graph.on('afterlayout', (e) => {
      Object.keys(iconMap).forEach((parentId) => {
        if (!iconMap[parentId] || iconMap[parentId].destroyed) return;
        updateIcons(parentId);
      });
    });

    graph.data(data);
    graph.render();
  });
`,title:{zh:"\u5B50\u6811\u8282\u70B9\u5206\u9875",en:"Pagination for Subtree"},filename:"treePagination.js",isNew:!1},{id:"dagrePagination",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ztMMS5WPancAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

// the max number of nodes for each level
const MAX_NUM_EACH_LEVEL = 3;
let nodeMap = {};
let curNewNodeIds = [];

const data = {
  nodes: [
    {
      id: '1',
      label: 'level 1',
    },
    {
      id: '2-1',
      label: 'level 2-1',
    },
    {
      id: '2-2',
      label: 'level 2-2',
    },
    {
      id: '2-3',
      label: 'level 2-3',
    },
    {
      id: '2-4',
      label: 'level 2-4',
    },
    {
      id: '2-5',
      label: 'level 2-5',
    },
    {
      id: '2-6',
      label: 'level 2-6',
    },
    {
      id: '3',
      label: 'level 3',
    },
    {
      id: '4',
      label: 'level 4',
    },
    {
      id: '5-1',
      label: 'level 5-1',
    },
    {
      id: '5-2',
      label: 'level 5-2',
    },
    {
      id: '5-3',
      label: 'level 5-3',
    },
    {
      id: '5-4',
      label: 'level 5-4',
    },
    {
      id: '5-5',
      label: 'level 5-5',
    },
    {
      id: '5-6',
      label: 'level 5-6',
    },
    {
      id: '5-7',
      label: 'level 5-7',
    },
    {
      id: '5-8',
      label: 'level 5-8',
    },
  ],
  edges: [
    {
      source: '1',
      target: '2-1',
    },
    {
      source: '1',
      target: '2-2',
    },
    {
      source: '1',
      target: '2-3',
    },
    {
      source: '1',
      target: '2-4',
    },
    {
      source: '1',
      target: '2-5',
    },
    {
      source: '1',
      target: '2-6',
    },
    {
      source: '2-1',
      target: '3',
    },
    {
      source: '2-2',
      target: '3',
    },
    {
      source: '2-3',
      target: '3',
    },
    {
      source: '2-4',
      target: '3',
    },
    {
      source: '2-5',
      target: '3',
    },
    {
      source: '2-6',
      target: '3',
    },
    {
      source: '3',
      target: '4',
    },
    {
      source: '4',
      target: '5-1',
    },
    {
      source: '4',
      target: '5-2',
    },
    {
      source: '4',
      target: '5-3',
    },
    {
      source: '4',
      target: '5-4',
    },
    {
      source: '4',
      target: '5-5',
    },
    {
      source: '4',
      target: '5-6',
    },
    {
      source: '4',
      target: '5-7',
    },
    {
      source: '4',
      target: '5-8',
    },
  ],
};

const compare = (property) => {
  return (obj1, obj2) => {
    return obj1[property] - obj2[property];
  };
};

const curNodesToNewData = (levels, initPos) => {
  const resData = { nodes: [], edges: [] };
  curNewNodeIds = [];
  let newNodeMap = {};
  levels.forEach((level) => {
    if (level.curNodes) {
      for (let i = 0; i < level.nodes.length; i++) {
        const node = level.nodes[i];
        if (i >= level.curBeginIdx && i < level.curEndIdx) {
          if (!node.x || !node.y) {
            node.x = initPos[0];
            node.y = initPos[1];
          }
        } else {
          node.x = undefined;
          node.y = undefined;
        }
      }
      resData.nodes = resData.nodes.concat(level.curNodes);
    } else {
      resData.nodes = resData.nodes.concat(level.nodes);
    }
  });
  resData.nodes.forEach((node) => {
    newNodeMap[node.id] = node;
    if (Object.keys(nodeMap).length !== 0 && !nodeMap[node.id]) {
      curNewNodeIds.push(node.id);
    }
  });

  data.edges.forEach((edge) => {
    if (newNodeMap[edge.source] && newNodeMap[edge.target]) {
      resData.edges.push(edge);
    }
  });
  nodeMap = newNodeMap;
  return resData;
};

const container = document.getElementById('container');
const tipDiv = document.createElement('div');
tipDiv.id = 'tip';
tipDiv.innerHTML = \`<div>Hover the nodes of level 2 and leve 5, and click the triangle icons to switch the nodes patination.</div>
<div>\u5C06\u9F20\u6807\u79FB\u52A8\u5230 level 2 \u548C level 5 \u7684\u8282\u70B9\u4E0A\u540E\uFF0C\u70B9\u51FB\u5DE6\u53F3\u5C0F\u4E09\u89D2\u6309\u94AE\u4EE5\u5207\u6362\u8BE5\u5C42\u7EA7\u7684\u8282\u70B9\uFF0C\u8FBE\u5230\u5206\u9875\u6548\u679C</div>\`;
container.appendChild(tipDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 50;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  layout: {
    type: 'dagre',
    nodesepFunc: (d) => {
      return 20;
    },
    ranksep: 30,
    controlPoints: true,
  },
  defaultNode: {
    type: 'rect',
    size: [70, 30],
    style: {
      radius: 10,
    },
  },
  defaultEdge: {
    type: 'cubic-vertical',
    style: {
      radius: 20,
      offset: 45,
      endArrow: true,
      lineWidth: 2,
      stroke: '#C2C8D5',
    },
  },
  nodeStateStyles: {
    selected: {
      stroke: '#d9d9d9',
      fill: '#5394ef',
    },
  },
  modes: {
    default: ['drag-canvas', 'zoom-canvas', 'click-select'],
  },
});
graph.data(data);
graph.render();

// stash origin data
const levelsMap = {};
// group the nodes according to their y, which indicates the level
data.nodes.forEach((node) => {
  if (!levelsMap[node.y]) {
    levelsMap[node.y] = {
      y: node.y,
      nodes: [],
    };
  }
  levelsMap[node.y].nodes.push(node);
});
const unsortedlevels = [];
Object.keys(levelsMap).forEach((key) => {
  unsortedlevels.push(levelsMap[key]);
});
// sort the levels according to the y.
// and slice the nodes for each level if the num of nodes is over MAX_NUM_EACH_LEVEL
const levels = unsortedlevels.sort(compare('y'));
levels.forEach((level, k) => {
  if (level.nodes.length > MAX_NUM_EACH_LEVEL) {
    level.curBeginIdx = 0;
    level.curEndIdx = MAX_NUM_EACH_LEVEL;
    level.curNodes = [];
    level.nodes.forEach((levelNode, i) => {
      levelNode.overflow = true;
      levelNode.levelIdx = k;
      if (i < MAX_NUM_EACH_LEVEL && i >= 0) {
        level.curNodes.push(levelNode);
      }
    });
  } else {
    level.nodes.forEach((levelNode) => {
      levelNode.levelIdx = k;
    });
  }
});

graph.changeData(curNodesToNewData(levels));
graph.fitView();
graph.set('animate', true);

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 50);
  };

const iconMap = {};

// draw the icons on the root graphics group of the graph
const drawIcons = (nodeId) => {
  const node = graph.findById(nodeId);
  const model = node.getModel();
  delayDestroyIcons(nodeId, 2000);
  if (model.overflow) {
    const levelIdx = model.levelIdx;
    const y = model.y;
    if (iconMap[levelIdx] && !iconMap[levelIdx].destroyed) return;
    const level = levels[levelIdx];
    const graphicsGroup = graph.getGroup();
    const prePos = [level.curNodes[0].x - (level.curNodes[0].size[0] / 2 || 20) - 10, y];
    const nextPos = [level.curNodes[2].x + (level.curNodes[0].size[0] / 2 || 20) + 10, y];
    const preIcon = graphicsGroup.addShape('marker', {
      attrs: {
        symbol: 'triangle',
        x: prePos[0],
        y: prePos[1],
        r: 5,
        fill: '#333',
        opacity: 0,
        cursor: 'pointer',
      },
      name: \`pre-icon\`,
      levelIdx,
    });
    const nextIcon = graphicsGroup.addShape('marker', {
      attrs: {
        symbol: 'triangle-down',
        x: nextPos[0],
        y: nextPos[1],
        r: 5,
        fill: '#333',
        opacity: 0,
        cursor: 'pointer',
      },
      name: \`next-icon\`,
      levelIdx,
    });

    if (level.curBeginIdx > 0) {
      preIcon.animate(
        {
          opacity: 1,
        },
        {
          duration: 150,
          repeat: false,
        },
      );
    }
    if (level.curEndIdx < level.nodes.length) {
      nextIcon.animate(
        {
          opacity: 1,
        },
        {
          duration: 150,
          repeat: false,
        },
      );
    }

    iconMap[levelIdx] = {
      preIcon,
      nextIcon,
      destroyed: false,
    };
    return true;
  }
  return false;
};

// update the icons
const updateIcons = (levelIdx) => {
  if (!levelIdx || !iconMap[levelIdx]) return;
  const preIcon = iconMap[levelIdx].preIcon;
  const nextIcon = iconMap[levelIdx].nextIcon;
  const level = levels[levelIdx];

  const curNodes = level.curNodes;
  if (!curNodes) return;
  const prePos = [curNodes[0].x - (curNodes[0].size[0] / 2 || 20) - 10, curNodes[0].y];
  const nextPos = [curNodes[2].x + (curNodes[0].size[0] / 2 || 20) + 10, curNodes[2].y];
  preIcon.attr({
    opacity: level.curBeginIdx <= 0 ? 0 : 1,
    x: prePos[0],
    y: prePos[1],
  });
  nextIcon.attr({
    opacity: level.curEndIdx >= level.nodes.length ? 0 : 1,
    x: nextPos[0],
    y: nextPos[1],
  });
};

// destroy the icons
const destroyIcons = (levelIdx) => {
  if (!iconMap[levelIdx]) return;
  const preIcon = iconMap[levelIdx].preIcon;
  const nextIcon = iconMap[levelIdx].nextIcon;
  if (preIcon && !preIcon.destroyed) {
    preIcon.animate(
      {
        opacity: 0,
      },
      {
        duration: 150,
        repeat: false,
      },
    );
    setTimeout(() => {
      preIcon.remove();
      preIcon.destroy();
    }, 150);
  }
  if (nextIcon && !nextIcon.destroyed) {
    nextIcon.animate(
      {
        opacity: 0,
      },
      {
        duration: 150,
        repeat: false,
      },
    );
    setTimeout(() => {
      nextIcon.remove();
      nextIcon.destroy();
    }, 150);
  }
  iconMap[levelIdx].destroyed = true;
};

// destroy the icons with delay
const delayDestroyIcons = (levelIdx, delay = 2000) => {
  if (!iconMap[levelIdx] || typeof window === 'undefined') return;
  if (iconMap[levelIdx].timeouter) {
    window.clearTimeout(iconMap[levelIdx].timeouter);
  }
  iconMap[levelIdx].timeouter = window.setTimeout(() => {
    destroyIcons(levelIdx);
  }, delay);
};

// mouseenter the node to show the previous/next icons
graph.on('node:mouseenter', (e) => {
  drawIcons(e.item.getID());
});

// mouseleave the node to destroy the icons
graph.on('node:mouseleave', (e) => {
  const levelIdx = e.item.getModel().levelIdx;
  delayDestroyIcons(levelIdx, 2000);
});

// click the icon to changeData
graph.on('click', (e) => {
  if (e.name === 'click') return;
  const marker = e.target;
  const targetName = marker.get('name');
  if (targetName !== 'pre-icon' && targetName !== 'next-icon') return;
  const levelIdx = marker.get('levelIdx');
  const level = levels[levelIdx];
  const oriNodes = level.nodes;
  if (targetName === 'pre-icon') {
    if (level.curBeginIdx <= 0) return; // touch the top
    level.curBeginIdx--;
    level.curEndIdx--;
  } else {
    if (level.curEndIdx >= oriNodes.length) return; // touch the bottom
    level.curBeginIdx++;
    level.curEndIdx++;
  }
  level.curNodes = oriNodes.slice(level.curBeginIdx, level.curEndIdx);

  const initPos = [marker.attr('x'), level.y];

  graph.changeData(curNodesToNewData(levels, initPos));
  curNewNodeIds.forEach((newId) => {
    const newNode = graph.findById(newId);
    const nodeGroup = newNode.getContainer();
    nodeGroup.attr('opacity', 0);
    nodeGroup.animate(
      {
        opacity: 1,
      },
      150,
    );
  });
});

// update the icon after changeData
graph.on('afterlayout', (e) => {
  Object.keys(iconMap).forEach((levelIdx) => {
    if (!iconMap[levelIdx] || iconMap[levelIdx].destroyed) return;
    updateIcons(levelIdx);
  });
});
`,title:{zh:"dagre \u8282\u70B9\u5206\u9875",en:"Pagination for Dagre Graph"},filename:"dagrePagination.js",isNew:!1}],icon:"",id:"pagination",title:{en:"Nodes Paginaion",zh:"\u8282\u70B9\u5206\u9875\u5668"},childrenKey:"demos",order:15}],childrenKey:"examples"},{id:"scatter",title:{zh:"\u52A8\u753B",en:"Animation"},icon:"scatter",examples:[{demos:[{id:"default",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*HRIpRobLTr0AAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const tipDiv = document.createElement('div');
tipDiv.innerHTML = \`Click node or edge to focus on it with animate. \u70B9\u51FB\u8282\u70B9\u6216\u8FB9\u53EF\u5E26\u52A8\u753B\u5730\u805A\u7126\u5230\u8BE5\u5143\u7D20\u4E0A\`;
document.getElementById('container').appendChild(tipDiv);
const tipDiv2 = document.createElement('div');
tipDiv2.innerHTML = \`Click the button on toolbar to see viewport change animately. \u70B9\u51FB Toolbar \u4E0A\u7684\u6309\u94AE\u53EF\u5E26\u52A8\u753B\u5730\u64CD\u4F5C\u89C6\u56FE\`;
document.getElementById('container').appendChild(tipDiv2);

const data = {
  nodes: [
    {
      id: 'a',
      x: 200,
      y: 100,
      style: { fill: '#5B8FF9', stroke: null },
    },
    {
      id: 'b',
      x: 100,
      y: 200,
      style: { fill: '#5AD8A6', stroke: null },
    },
    {
      id: 'c',
      x: 300,
      y: 200,
      style: { fill: '#5D7092', stroke: null },
    },
  ],
  edges: [
    {
      id: 'a2b',
      source: 'a',
      target: 'b',
    },
    {
      id: 'a2c',
      source: 'a',
      target: 'c',
    },
  ],
};

const animateCfg = { duration: 200, easing: 'easeCubic' }

const toolbar = new G6.ToolBar({
  position: { x: 10, y: 70 },
  getContent: () => \`
  <ul class='g6-component-toolbar'>
    <li  code='zoomOut'>
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
        <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
      </svg>
    </li>
    <li code='zoomIn'>
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
        <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
      </svg>
    </li>
    <li code='realZoom'>
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
        <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
      </svg>
    </li>
    <li code='autoZoom'>
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
        <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
      </svg>
    </li>
  </ul>\`,
  handleClick: (code, graph) => {
    switch (code) {
      case 'zoomOut':
        graph.zoom(1.2, undefined, true, animateCfg);
        break;
      case 'zoomIn':
        graph.zoom(0.8, undefined, true, animateCfg);
        break;
      case 'realZoom':
        graph.zoomTo(1, undefined, true, animateCfg);
        break;
      case 'autoZoom':
        graph.fitView(20, undefined, true, animateCfg);
        break;
    }
  }
})

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 50;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  plugins: [toolbar],
});

graph.data(data);
graph.render();

graph.on('node:click', e => {
  graph.focusItem(e.item, true, animateCfg)
})
graph.on('edge:click', e => {
  graph.focusItem(e.item, true, animateCfg)
})

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u89C6\u53E3\u53D8\u6362\u52A8\u753B",en:"Viewport Animation"},filename:"default.js",isNew:!1}],icon:"",id:"viewport",title:{en:"Viewport Animation",zh:"\u89C6\u53E3\u53D8\u6362\u52A8\u753B"},childrenKey:"demos",order:0},{demos:[{id:"node",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*MDDjSov7gMkAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const Util = G6.Util;
const data = {
  nodes: [
    {
      id: 'node1',
      x: 100,
      y: 100,
      type: 'circle-animate',
      size: 20,
      label: 'Scale Animation',
      labelCfg: {
        position: 'top',
      },
    },
    {
      id: 'node2',
      x: 300,
      y: 200,
      type: 'background-animate',
      color: '#40a9ff',
      size: 20,
      label: 'Background Animation',
      labelCfg: {
        position: 'left',
        offset: 10,
      },
    },
    {
      id: 'node3',
      x: 400,
      y: 100,
      size: [40, 40],
      type: 'inner-animate',
      img:
        'data:image/webp;base64,UklGRq4FAABXRUJQVlA4IKIFAABwHwCdASo8ADwAPiEMhEGhhv6rQAYAgS2NHsdCq/4D8AOoA64OEUAj/XPxVwyvRGvyO/gGxN/t3oK/1X6zesX3L/p/RP/2HCgKAB9AGeAbCB+AGwAbQBtA/8c/m/4PYHTonm+SzRH6B9sv2i/rOZC+G/ln9l/ML/GdoD7APcA/TD+09QDzAfrX+vHYM9AD+Uf0zrAPQA/bH0vv2t+CH9qf2R+A39e6X098/I7IAcLcs8Gjmc/9T7gPbX9H+wJ+rPVV9En9ZmBI5oUiYhkYHIVjRr9hzCTPcV5Rs/wjjIHkxPgtr/3ALZSuUm146HHwqQVA23hnnqH/4aJ/k4v4hU6RBZ0AAAD+//8ARPyL9yWIlAbWBAD0oKSqlYWreuRa3Oj02u+TvSQS8iwMYewUYTWLDNp9wOlFJaWnqE+za35UwUXuDAT6T0I4fwY+u+qrRVhl+S1ir4X7BQiNswug5AX+MjQcXEeUwfSIEUT+DFPCr+BUiwTbFxLni7fv61vRbmXoauLz4tiqOFTzEGP8tNXP5+H7mZVGfNjIxapT3FGUtqBdp/SD5cTOYOkn2fawkpqpCSqf2+CfiGWtIF673fEzlk/hIbWDhQ81C/ddxLn609d/5efckbdZ8HZbhhVmM82/Uat7CFmw1SH5xCxRxEEhjpf1EP1Xn5q9VZfm1+OFTab/MN67Xha8K//5oVBlMgZALE653X0fas/+2xMqiyCu5Wa7PHsCwbBwqROfNmzi4LPOTjkFPHVKDD1Nfj4/sul6cANdF68rf2jszlyZsUUoLTP7H3swSroc3ssNXSRVAcYd7+iBZpfoAYWvKgnr+Hv62fHZX5ZbjYbYzVjq6fsXkubto858NuUx4+ILb5y7dP6W3/IYVeUSF0yZseKIZhOMs9BBf5uB2Y3Ott//+1OG7hYINzcqigrzWAOJbSmVw3G0ULywkobx+rvfk8VmZFzQGgP/+4T74mp/vsZyM1NLguiTO2gNO05tcpXwveq5mrcweXrJ/bRZDmU2KBrnXhkXq+735c+UHTFq4h4jMOPm5shKioB6XaqhUf3DJlMg8937g/SKjrgD0H5sNm0/k4FfilBbcrsjc3dd6cwEYJo3CNhe3SpNJ2geNXyV4/hq/BZXZ1kiVknjmf5cUx7Tv/9Sb+fQ/DgAsRNSz1wiVodiLjP7aVrkxbWx5gJ8U/j0o1Ipm/nyDZRPrQXmbPAcy1eDDejxTDBKe42ElHpC2QlFdhOedsp4i9QVjt8EqWGy1YzPaGqZhCVg/LWt8/+4BmiCzNGtpR21MGJf4kI/n/1sbe36e1QBCBAx4EVfTM82ZM2lh0P189e7eY0A3NzXWVrUek8SEn+DYYCQeEaC5hDHGreFHT1baY6KyrFx3G9oMm3fLrCqmNjFRnZa3LB/5m8FgCpq9B/1OCLRE5GzVTZnVzj/4V38PgCIpX16Kznijf01+MkDeS9oCF2hEXQ9tr+mPLrjGy4Cg5fyLgyCj1fUq33nMf79Svli2h83m3gqkoxJcXvBetFQP8V/gRjBNGmFXK5TfwLhbolWEjDqUGK3n+hxzQLif9zreYO88EIRTUNbzE1/Sn7rBEtjB0uawNje5OubWsB62SOlMZoZpxrDbMb4UvQrODPhSafmhcYe9zm/dHxssMfUthhDKjyMhoRhngPjbzfGXmIV2Omgrn/zbefK/PawUGSH6x4Qk4HCN4/X8S+XCf51JJtOQeHST/yfwg69uMkE07SONnhGUrL6j5oQn6JI+zkaH/H/P/Ti/pfOTfAWxQNiMvWX08mqbuUweFSQ/G5YUP/uCvZAXutf1+Nhl2jj/n4/fPOihPjwvfFnnjOaQvs9PSpF33d+396LASZ3IID/4UP4pf9eOMXw82ccoUUUHX6MfBWyBDvARCrdPmerUwKwW+lBIAe1dsAAAA==',
      label: 'Image Rotate',
      labelCfg: {
        position: 'right',
      },
    },
    {
      id: 'node4',
      x: 300,
      y: 300,
      type: 'rect',
      label: 'No Animation',
      labelCfg: {
        position: 'bottom',
      },
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
    },
    {
      source: 'node3',
      target: 'node2',
    },
    {
      source: 'node2',
      target: 'node4',
    },
  ],
};

// Scale Animation
G6.registerNode(
  'circle-animate',
  {
    afterDraw(cfg, group) {
      const shape = group.get('children')[0];
      shape.animate(
        (ratio) => {
          const diff = ratio <= 0.5 ? ratio * 10 : (1 - ratio) * 10;
          return {
            r: cfg.size / 2 + diff,
          };
        },
        {
          repeat: true,
          duration: 3000,
          easing: 'easeCubic',
        },
      );
    },
  },
  'circle',
);

// Background Animation
G6.registerNode(
  'background-animate',
  {
    afterDraw(cfg, group) {
      const r = cfg.size / 2;
      const back1 = group.addShape('circle', {
        zIndex: -3,
        attrs: {
          x: 0,
          y: 0,
          r,
          fill: cfg.color,
          opacity: 0.6,
        },
        name: 'back1-shape',
      });
      const back2 = group.addShape('circle', {
        zIndex: -2,
        attrs: {
          x: 0,
          y: 0,
          r,
          fill: cfg.color,
          opacity: 0.6,
        },
        name: 'back2-shape',
      });
      const back3 = group.addShape('circle', {
        zIndex: -1,
        attrs: {
          x: 0,
          y: 0,
          r,
          fill: cfg.color,
          opacity: 0.6,
        },
        name: 'back3-shape',
      });
      group.sort(); // Sort according to the zIndex
      back1.animate(
        {
          // Magnifying and disappearing
          r: r + 10,
          opacity: 0.1,
        },
        {
          duration: 3000,
          easing: 'easeCubic',
          delay: 0,
          repeat: true, // repeat
        },
      ); // no delay
      back2.animate(
        {
          // Magnifying and disappearing
          r: r + 10,
          opacity: 0.1,
        },
        {
          duration: 3000,
          easing: 'easeCubic',
          delay: 1000,
          repeat: true, // repeat
        },
      ); // 1s delay
      back3.animate(
        {
          // Magnifying and disappearing
          r: r + 10,
          opacity: 0.1,
        },
        {
          duration: 3000,
          easing: 'easeCubic',
          delay: 2000,
          repeat: true, // repeat
        },
      ); // 3s delay
    },
  },
  'circle',
);

// Image animation
G6.registerNode(
  'inner-animate',
  {
    afterDraw(cfg, group) {
      const size = cfg.size;
      const width = size[0] - 12;
      const height = size[1] - 12;
      const image = group.addShape('image', {
        attrs: {
          x: -width / 2,
          y: -height / 2,
          width,
          height,
          img: cfg.img,
        },
        name: 'image-shape',
      });
      image.animate(
        (ratio) => {
          const toMatrix = Util.transform(
            [1, 0, 0, 0, 1, 0, 0, 0, 1],
            [['r', ratio * Math.PI * 2]],
          );
          return {
            matrix: toMatrix,
          };
        },
        {
          repeat: true,
          duration: 3000,
          easing: 'easeCubic',
        },
      );
    },
  },
  'rect',
);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  defaultNode: {
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    style: {
      lineWidth: 1,
      stroke: '#b5b5b5',
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u8282\u70B9\u52A8\u753B",en:"Node Animation"},filename:"node.js",isNew:!1}],icon:"",id:"node",title:{en:"Node Animation",zh:"\u8282\u70B9\u52A8\u753B"},childrenKey:"demos",order:1},{demos:[{id:"arrowAnimate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*KZNLQrnz3o0AAAAAAAAAAAAAARQnAQ",source:`import G6 from "@antv/g6";
import { ext } from "@antv/matrix-util";

const { getLabelPosition, transform } = G6.Util;

G6.registerEdge(
  "arrow-running",
  {
    afterDraw(cfg, group) {
      // get the first shape in the group, it is the edge's path here=
      const shape = group.get("children")[0];

      const arrow = group.addShape("marker", {
        attrs: {
          x: 16,
          y: 0,
          r: 8,
          lineWidth: 2,
          stroke: "#3370ff",
          fill: "#fff",
          symbol: (x, y, r) => {
            return [
              ["M", x - 6, y - 4],
              ["L", x - 2, y],
              ["L", x - 6, y + 4]
            ];
          }
        }
      });

      // animation for the red circle
      arrow.animate(
        (ratio) => {
          // the operations in each frame. Ratio ranges from 0 to 1 indicating the prograss of the animation. Returns the modified configurations
          // get the position on the edge according to the ratio
          const tmpPoint = shape.getPoint(ratio);
          const pos = getLabelPosition(shape, ratio);
          let matrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];
          matrix = transform(matrix, [
            ["t", -tmpPoint.x, -tmpPoint.y],
            ["r", pos.angle],
            ["t", tmpPoint.x, tmpPoint.y]
          ]);

          // returns the modified configurations here, x and y here
          return {
            x: tmpPoint.x,
            y: tmpPoint.y,
            matrix
          };
        },
        {
          // repeat: true, // Whether executes the animation repeatly
          duration: 3000 // the duration for executing once
        }
      );
    }
  },
  "cubic" // extend the built-in edge 'cubic'
);

const data = {
  nodes: [
    {
      id: "node1",
      x: 100,
      y: 100,
      label: "Node 1",
      labelCfg: {
        position: "top"
      }
    },
    {
      id: "node2",
      x: 300,
      y: 200,
      color: "#40a9ff",
      label: "Node 2",
      labelCfg: {
        position: "left",
        offset: 10
      }
    }
  ],
  edges: [
    {
      source: "node1",
      target: "node2"
    }
  ]
};

const container = document.getElementById("container");
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: "container",
  width,
  height,
  defaultEdge: {
    type: "arrow-running",
    style: {
      lineWidth: 2,
      stroke: "#bae7ff"
    }
  }
});
graph.data(data);
graph.render();

if (typeof window !== "undefined")
  window.onresize = () => {
    if (!graph || graph.get("destroyed")) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u7BAD\u5934\u6CBF\u8FB9\u8FD0\u52A8",en:"Running Arrow"},filename:"arrowAnimate.js",isNew:!1},{id:"pointInLine",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*HqX_Q7lljpsAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
G6.registerEdge(
  'circle-running',
  {
    afterDraw(cfg, group) {
      // get the first shape in the group, it is the edge's path here=
      const shape = group.get('children')[0];
      // the start position of the edge's path
      const startPoint = shape.getPoint(0);

      // add red circle shape
      const circle = group.addShape('circle', {
        attrs: {
          x: startPoint.x,
          y: startPoint.y,
          fill: '#1890ff',
          r: 3,
        },
        name: 'circle-shape',
      });

      // animation for the red circle
      circle.animate(
        (ratio) => {
          // the operations in each frame. Ratio ranges from 0 to 1 indicating the prograss of the animation. Returns the modified configurations
          // get the position on the edge according to the ratio
          const tmpPoint = shape.getPoint(ratio);
          // returns the modified configurations here, x and y here
          return {
            x: tmpPoint.x,
            y: tmpPoint.y,
          };
        },
        {
          repeat: true, // Whether executes the animation repeatly
          duration: 3000, // the duration for executing once
        },
      );
    },
  },
  'cubic', // extend the built-in edge 'cubic'
);

const data = {
  nodes: [
    {
      id: 'node1',
      x: 100,
      y: 100,
      label: 'Node 1',
      labelCfg: {
        position: 'top',
      },
    },
    {
      id: 'node2',
      x: 300,
      y: 200,
      color: '#40a9ff',
      label: 'Node 2',
      labelCfg: {
        position: 'left',
        offset: 10,
      },
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  defaultEdge: {
    type: 'circle-running',
    style: {
      lineWidth: 2,
      stroke: '#bae7ff',
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u5706\u70B9\u6CBF\u8FB9\u8FD0\u52A8",en:"Running Circle"},filename:"pointInLine.js",isNew:!1},{id:"edge",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*70lpSLPAxb8AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const lineDash = [4, 2, 1, 2];
G6.registerEdge(
  'line-dash',
  {
    afterDraw(cfg, group) {
      // get the first shape in the group, it is the edge's path here=
      const shape = group.get('children')[0];
      let index = 0;
      // Define the animation
      shape.animate(
        () => {
          index++;
          if (index > 9) {
            index = 0;
          }
          const res = {
            lineDash,
            lineDashOffset: -index,
          };
          // returns the modified configurations here, lineDash and lineDashOffset here
          return res;
        },
        {
          repeat: true, // whether executes the animation repeatly
          duration: 3000, // the duration for executing once
        },
      );
    },
  },
  'cubic', // extend the built-in edge 'cubic'
);

const data = {
  nodes: [
    {
      id: 'node1',
      x: 100,
      y: 100,
      label: 'Node 1',
      labelCfg: {
        position: 'top',
      },
    },
    {
      id: 'node2',
      x: 300,
      y: 200,
      color: '#40a9ff',
      label: 'Node 2',
      labelCfg: {
        position: 'left',
        offset: 10,
      },
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  defaultEdge: {
    type: 'line-dash',
    style: {
      lineWidth: 2,
      stroke: '#bae7ff',
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u865A\u7EBF\u8FD0\u52A8",en:"Running Dashed Edge"},filename:"edge.js",isNew:!1},{id:"lineGrowth",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*W40_RKyCrDsAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

G6.registerEdge(
  'line-growth',
  {
    afterDraw(cfg, group) {
      const shape = group.get('children')[0];
      const length = shape.getTotalLength();
      shape.animate(
        (ratio) => {
          // the operations in each frame. Ratio ranges from 0 to 1 indicating the prograss of the animation. Returns the modified configurations
          const startLen = ratio * length;
          // Calculate the lineDash
          const cfg = {
            lineDash: [startLen, length - startLen],
          };
          return cfg;
        },
        {
          repeat: true, // Whether executes the animation repeatly
          duration: 2000, // the duration for executing once
        },
      );
    },
  },
  'cubic', // extend the built-in edge 'cubic'
);

const data = {
  nodes: [
    {
      id: 'node1',
      x: 100,
      y: 100,
      label: 'Node 1',
      labelCfg: {
        position: 'top',
      },
    },
    {
      id: 'node2',
      x: 300,
      y: 200,
      color: '#40a9ff',
      label: 'Node 2',
      labelCfg: {
        position: 'left',
        offset: 10,
      },
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  defaultEdge: {
    type: 'line-growth',
    style: {
      lineWidth: 2,
      stroke: '#bae7ff',
    },
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u65E0\u5230\u6709\u7684\u8FB9",en:"Growing Edge"},filename:"lineGrowth.js",isNew:!1}],icon:"",id:"edge",title:{en:"Edge Animation",zh:"\u8FB9\u52A8\u753B"},childrenKey:"demos",order:2},{demos:[{id:"hover",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*WJhtR4pSJssAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const nodes = [];
const edges = [];

// Center node
const centerNode = {
  id: 'center',
  x: 500,
  y: 300,
  type: 'center-node',
  size: 20,
};
nodes.push(centerNode);
// Add 4 nodes on the left
for (let i = 0; i < 4; i++) {
  const id = 'left' + i;
  nodes.push({
    id,
    x: 250,
    y: (i + 1) * 100 + 50,
    type: 'leaf-node',
  });
  edges.push({ source: id, target: 'center', type: 'can-running' });
}
// Add 6 nodes on the right
for (let i = 0; i < 6; i++) {
  const id = 'right' + i;
  nodes.push({
    id,
    x: 750,
    y: i * 100 + 50,
    type: 'leaf-node',
  });
  edges.push({ source: 'center', target: id, type: 'can-running' });
}

G6.registerNode(
  'leaf-node',
  {
    afterDraw(cfg, group) {
      group.addShape('circle', {
        attrs: {
          x: 0,
          y: 0,
          r: 5,
          fill: cfg.color || '#5B8FF9',
        },
        name: 'circle-shape',
      });
    },
    getAnchorPoints() {
      return [
        [0, 0.5],
        [1, 0.5],
      ];
    },
  },
  'circle',
);

G6.registerNode(
  'center-node',
  {
    afterDraw(cfg, group) {
      const r = cfg.size / 2;
      group.addShape('circle', {
        zIndex: -3,
        attrs: {
          x: 0,
          y: 0,
          r: r + 10,
          fill: 'gray',
          opacity: 0.4,
        },
        name: 'circle-shape1',
      });
      group.addShape('circle', {
        zIndex: -2,
        attrs: {
          x: 0,
          y: 0,
          r: r + 20,
          fill: 'gray',
          opacity: 0.2,
        },
        name: 'circle-shape2',
      });
      group.sort();
    },
    getAnchorPoints() {
      return [
        [0, 0.5],
        [1, 0.5],
      ];
    },
  },
  'circle',
);

// lineDash array
const lineDash = [4, 2, 1, 2];

G6.registerEdge(
  'can-running',
  {
    setState(name, value, item) {
      const shape = item.get('keyShape');
      if (name === 'running') {
        if (value) {
          let index = 0;
          shape.animate(
            () => {
              index++;
              if (index > 9) {
                index = 0;
              }
              const res = {
                lineDash,
                lineDashOffset: -index,
              };
              // return the params for this frame
              return res;
            },
            {
              repeat: true,
              duration: 3000,
            },
          );
        } else {
          shape.stopAnimate();
          shape.attr('lineDash', null);
        }
      }
    },
  },
  'cubic-horizontal',
);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  defaultNode: {
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    style: {
      stroke: '#b5b5b5',
    },
  },
});
graph.data({ nodes, edges });
graph.render();
graph.fitView();

// set hover state
graph.on('node:mouseenter', (ev) => {
  const node = ev.item;
  const edges = node.getEdges();
  edges.forEach((edge) => graph.setItemState(edge, 'running', true));
});
graph.on('node:mouseleave', (ev) => {
  const node = ev.item;
  const edges = node.getEdges();
  edges.forEach((edge) => graph.setItemState(edge, 'running', false));
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u72B6\u6001\u4E0E\u52A8\u753B",en:"State and Animation"},filename:"hover.js",isNew:!1}],icon:"",id:"stateChange",title:{en:"State Switch",zh:"\u72B6\u6001\u5207\u6362"},childrenKey:"demos",order:3},{demos:[{id:"default",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*M-EGS5v6RnUAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: 'a',
      x: 200,
      y: 100,
      style: { fill: '#5B8FF9', stroke: null },
    },
    {
      id: 'b',
      x: 100,
      y: 200,
      style: { fill: '#5AD8A6', stroke: null },
    },
    {
      id: 'c',
      x: 300,
      y: 200,
      style: { fill: '#5D7092', stroke: null },
    },
  ],
  edges: [
    {
      id: 'a2b',
      source: 'a',
      target: 'b',
    },
    {
      id: 'a2c',
      source: 'a',
      target: 'c',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  animate: true,
});

graph.data(data);
graph.render();

setInterval(() => {
  data.nodes.forEach((node) => {
    node.x += Math.random() * 50 - 25;
    node.y += Math.random() * 50 - 25;
  });
  graph.changeData(data);
}, 600);

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u8282\u70B9\u79FB\u52A8\u52A8\u753B",en:"Node Move Animation"},filename:"default.js",isNew:!1}],icon:"",id:"changePosition",title:{en:"Node Move Animation",zh:"\u8282\u70B9\u79FB\u52A8\u52A8\u753B"},childrenKey:"demos",order:5},{demos:[{id:"position",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*tN3KQ59_XO8AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const r = 50;
const radius = Math.PI;

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  animate: true,
  animateCfg: {
    duration: 1000,
    onFrame(node, ratio, toAttrs, fromAttrs) {
      const current = radius * ratio;
      let x = fromAttrs.x;
      let y = fromAttrs.y;
      if (fromAttrs.x > toAttrs.x) {
        x = x - r + r * Math.cos(current);
        y += r * Math.sin(current);
      } else {
        x = x + r - r * Math.cos(current);
        y -= r * Math.sin(current);
      }
      return { x, y };
    },
  },
});

// \u52A0\u5165\u4E24\u4E2A\u8282\u70B9
const node1 = graph.addItem('node', {
  id: 'node1',
  x: 100,
  y: 100,
  type: 'circle',
  style: { fill: '#5B8FF9', lineWidth: 0 },
});
const node2 = graph.addItem('node', {
  id: 'node2',
  x: 200,
  y: 100,
  type: 'circle',
  style: { fill: '#5AD8A6', lineWidth: 0 },
});

// \u5FAA\u73AF\u52A8\u753B
let count = 0;
setInterval(() => {
  if (count % 2 === 0) {
    node1.get('model').x = 200;
    node2.get('model').x = 100;
  } else {
    node1.get('model').x = 100;
    node2.get('model').x = 200;
  }
  count++;
  graph.refresh();
}, 1000);

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u81EA\u5B9A\u4E49\u52A8\u753B",en:"Custom Animation"},filename:"position.js",isNew:!1}],icon:"",id:"customAnimate",title:{en:"Custom Animation",zh:"\u81EA\u5B9A\u4E49\u52A8\u753B"},childrenKey:"demos",order:6}],childrenKey:"examples"},{id:"tool",title:{zh:"\u7EC4\u4EF6",en:"Component"},icon:"tool",examples:[{demos:[{id:"tooltipPlugin",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kjsSQ5pgVmoAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

insertCss(\`
  .g6-component-tooltip {
    background-color: rgba(255, 255, 255, 0.8);
    padding: 0px 10px 24px 10px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
\`);

const data = {
  nodes: [
    {
      id: '0',
      label: 'node-0',
      x: 100,
      y: 100,
      description: 'This is node-0.',
      subdescription: 'This is subdescription of node-0.',
    },
    {
      id: '1',
      label: 'node-1',
      x: 250,
      y: 100,
      description: 'This is node-1.',
      subdescription: 'This is subdescription of node-1.',
    },
    {
      id: '2',
      label: 'node-2',
      x: 150,
      y: 310,
      description: 'This is node-2.',
      subdescription: 'This is subdescription of node-2.',
    },
    {
      id: '3',
      label: 'node-3',
      x: 320,
      y: 310,
      description: 'This is node-3.',
      subdescription: 'This is subdescription of node-3.',
    },
  ],
  edges: [
    {
      id: 'e0',
      source: '0',
      target: '1',
      description: 'This is edge from node 0 to node 1.',
    },
    {
      id: 'e1',
      source: '0',
      target: '2',
      description: 'This is edge from node 0 to node 2.',
    },
    {
      id: 'e2',
      source: '0',
      target: '3',
      description: 'This is edge from node 0 to node 3.',
    },
  ],
};
const tooltip = new G6.Tooltip({
  offsetX: 10,
  offsetY: 10,
  // the types of items that allow the tooltip show up
  // \u5141\u8BB8\u51FA\u73B0 tooltip \u7684 item \u7C7B\u578B
  itemTypes: ['node', 'edge'],
  // custom the tooltip's content
  // \u81EA\u5B9A\u4E49 tooltip \u5185\u5BB9
  getContent: (e) => {
    const outDiv = document.createElement('div');
    outDiv.style.width = 'fit-content';
    //outDiv.style.padding = '0px 0px 20px 0px';
    outDiv.innerHTML = \`
      <h4>Custom Content</h4>
      <ul>
        <li>Type: \${e.item.getType()}</li>
      </ul>
      <ul>
        <li>Label: \${e.item.getModel().label || e.item.getModel().id}</li>
      </ul>\`;
    return outDiv;
  },
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  plugins: [tooltip],
  modes: {
    default: ['drag-node'],
  },
  defaultNode: {
    size: [80, 40],
    type: 'rect',
  },
  defaultEdge: {
    style: {
      stroke: '#b5b5b5',
      lineAppendWidth: 3,
    },
  },
});
graph.data(data);
graph.render();

graph.on('node:mouseenter', (e) => {
  graph.setItemState(e.item, 'active', true);
});
graph.on('node:mouseleave', (e) => {
  graph.setItemState(e.item, 'active', false);
});
graph.on('edge:mouseenter', (e) => {
  graph.setItemState(e.item, 'active', true);
});
graph.on('edge:mouseleave', (e) => {
  graph.setItemState(e.item, 'active', false);
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u63D0\u793A\u6846\u63D2\u4EF6",en:"Tooltip Plugin"},filename:"tooltipPlugin.js",isNew:!1},{id:"tooltipFix",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kjsSQ5pgVmoAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

insertCss(\`
  .g6-component-tooltip {
    background-color: rgba(255, 255, 255, 0.8);
    padding: 0px 10px 24px 10px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
\`);

const data = {
  nodes: [
    {
      id: '0',
      label: 'node-0',
      x: 100,
      y: 100,
      description: 'This is node-0.',
      subdescription: 'This is subdescription of node-0.',
    },
    {
      id: '1',
      label: 'node-1',
      x: 250,
      y: 100,
      description: 'This is node-1.',
      subdescription: 'This is subdescription of node-1.',
    },
    {
      id: '2',
      label: 'node-2',
      x: 150,
      y: 310,
      description: 'This is node-2.',
      subdescription: 'This is subdescription of node-2.',
    },
    {
      id: '3',
      label: 'node-3',
      x: 320,
      y: 310,
      description: 'This is node-3.',
      subdescription: 'This is subdescription of node-3.',
    },
  ],
  edges: [
    {
      id: 'e0',
      source: '0',
      target: '1',
      description: 'This is edge from node 0 to node 1.',
    },
    {
      id: 'e1',
      source: '0',
      target: '2',
      description: 'This is edge from node 0 to node 2.',
    },
    {
      id: 'e2',
      source: '0',
      target: '3',
      description: 'This is edge from node 0 to node 3.',
    },
  ],
};
const tooltip = new G6.Tooltip({
  offsetX: 10,
  offsetY: 0,
  // v4.2.1 \u8D77\u652F\u6301 fixToNode\uFF0Ctooltip \u76F8\u5BF9\u4E8E\u8282\u70B9\u56FA\u5B9A\u4F4D\u7F6E
  fixToNode: [1, 0],
  // the types of items that allow the tooltip show up
  // \u5141\u8BB8\u51FA\u73B0 tooltip \u7684 item \u7C7B\u578B
  itemTypes: ['node', 'edge'],
  // custom the tooltip's content
  // \u81EA\u5B9A\u4E49 tooltip \u5185\u5BB9
  getContent: (e) => {
    const outDiv = document.createElement('div');
    outDiv.style.width = 'fit-content';
    //outDiv.style.padding = '0px 0px 20px 0px';
    outDiv.innerHTML = \`
      <h4>Custom Content</h4>
      <ul>
        <li>Type: \${e.item.getType()}</li>
      </ul>
      <ul>
        <li>Label: \${e.item.getModel().label || e.item.getModel().id}</li>
      </ul>\`;
    return outDiv;
  },
});
const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  plugins: [tooltip],
  modes: {
    default: ['drag-node'],
  },
  defaultNode: {
    size: [80, 40],
    type: 'rect',
  },
});
graph.data(data);
graph.render();

graph.on('node:mouseenter', (e) => {
  graph.setItemState(e.item, 'active', true);
});
graph.on('node:mouseleave', (e) => {
  graph.setItemState(e.item, 'active', false);
});
graph.on('edge:mouseenter', (e) => {
  graph.setItemState(e.item, 'active', true);
});
graph.on('edge:mouseleave', (e) => {
  graph.setItemState(e.item, 'active', false);
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u56FA\u5B9A\u63D0\u793A\u6846\u4F4D\u7F6E",en:"Tooltip Plugin with fixToNode"},filename:"tooltipFix.js",isNew:!1},{id:"tooltipPluginLocal",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kjsSQ5pgVmoAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

insertCss(\`
  .g6-component-tooltip {
    background-color: rgba(255, 255, 255, 0.8);
    padding: 0px 10px 24px 10px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
\`);

const data = {
  nodes: [
    {
      id: '0',
      label: 'Has Tooltip - node0',
      x: 100,
      y: 100,
      description: 'This is node-0.',
      subdescription: 'This is subdescription of node-0.',
    },
    {
      id: '1',
      label: 'No Tooltip - node1',
      x: 250,
      y: 100,
      description: 'This is node-1.',
      subdescription: 'This is subdescription of node-1.',
    },
    {
      id: '2',
      label: 'Tooltip on Text - node2',
      x: 150,
      y: 310,
      description: 'This is node-2.',
      subdescription: 'This is subdescription of node-2.',
    },
    {
      id: '3',
      label: 'Tooltip on KeyShape - node-3',
      x: 320,
      y: 310,
      description: 'This is node-3.',
      subdescription: 'This is subdescription of node-3.',
    },
  ],
  edges: [
    {
      id: 'e0',
      source: '0',
      target: '1',
      description: 'This is edge from node 0 to node 1.',
    },
    {
      id: 'e1',
      source: '0',
      target: '2',
      description: 'This is edge from node 0 to node 2.',
    },
    {
      id: 'e2',
      source: '0',
      target: '3',
      description: 'This is edge from node 0 to node 3.',
    },
  ],
};
const tooltip = new G6.Tooltip({
  offsetX: 10,
  offsetY: 10,
  // the types of items that allow the tooltip show up
  // \u5141\u8BB8\u51FA\u73B0 tooltip \u7684 item \u7C7B\u578B
  itemTypes: ['node', 'edge'],
  // custom the tooltip's content
  // \u81EA\u5B9A\u4E49 tooltip \u5185\u5BB9
  getContent: (e) => {
    const outDiv = document.createElement('div');
    outDiv.style.width = 'fit-content';
    //outDiv.style.padding = '0px 0px 20px 0px';
    outDiv.innerHTML = \`
      <h4>Custom Content</h4>
      <ul>
        <li>Type: \${e.item.getType()}</li>
      </ul>
      <ul>
        <li>Label: \${e.item.getModel().label || e.item.getModel().id}</li>
      </ul>\`;
    return outDiv;
  },
  shouldBegin: (e) => {
    console.log(e.target);
    let res = true;
    switch (e.item.getModel().id) {
      case '1':
        res = false;
        break;
      case '2':
        if (e.target.get('name') === 'text-shape') res = true;
        else res = false;
        break;
      case '3':
        if (e.target.get('name') !== 'text-shape') res = true;
        else res = false;
        break;
      default:
        res = true;
        break;
    }
    return res;
  },
});

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  plugins: [tooltip],
  modes: {
    default: ['drag-node'],
  },
  defaultNode: {
    size: [80, 40],
    type: 'rect',
  },
});
graph.data(data);
graph.render();

graph.on('node:mouseenter', (e) => {
  graph.setItemState(e.item, 'active', true);
});
graph.on('node:mouseleave', (e) => {
  graph.setItemState(e.item, 'active', false);
});
graph.on('edge:mouseenter', (e) => {
  graph.setItemState(e.item, 'active', true);
});
graph.on('edge:mouseleave', (e) => {
  graph.setItemState(e.item, 'active', false);
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u63D0\u793A\u6846\u63D2\u4EF6\u5C40\u90E8\u751F\u6548",en:"Local Tooltip Plugin"},filename:"tooltipPluginLocal.js",isNew:!1},{id:"tooltipClick",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kjsSQ5pgVmoAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

insertCss(\`
  .g6-component-tooltip {
    background-color: rgba(255, 255, 255, 0.8);
    padding: 0px 10px 24px 10px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
\`);

const data = {
  nodes: [
    {
      id: '0',
      label: 'node-0',
      x: 100,
      y: 100,
      description: 'This is node-0.',
      subdescription: 'This is subdescription of node-0.',
    },
    {
      id: '1',
      label: 'node-1',
      x: 250,
      y: 100,
      description: 'This is node-1.',
      subdescription: 'This is subdescription of node-1.',
    },
    {
      id: '2',
      label: 'node-2',
      x: 150,
      y: 310,
      description: 'This is node-2.',
      subdescription: 'This is subdescription of node-2.',
    },
    {
      id: '3',
      label: 'node-3',
      x: 320,
      y: 310,
      description: 'This is node-3.',
      subdescription: 'This is subdescription of node-3.',
    },
  ],
  edges: [
    {
      id: 'e0',
      source: '0',
      target: '1',
      description: 'This is edge from node 0 to node 1.',
    },
    {
      id: 'e1',
      source: '0',
      target: '2',
      description: 'This is edge from node 0 to node 2.',
    },
    {
      id: 'e2',
      source: '0',
      target: '3',
      description: 'This is edge from node 0 to node 3.',
    },
  ],
};
const tooltip = new G6.Tooltip({
  offsetX: 10,
  offsetY: 10,
  // v4.2.1 \u8D77\u652F\u6301\u914D\u7F6E trigger\uFF0Cclick \u4EE3\u8868\u70B9\u51FB\u540E\u51FA\u73B0 tooltip\u3002\u9ED8\u8BA4\u4E3A mouseenter
  trigger: 'click',
  // the types of items that allow the tooltip show up
  // \u5141\u8BB8\u51FA\u73B0 tooltip \u7684 item \u7C7B\u578B
  itemTypes: ['node', 'edge'],
  // custom the tooltip's content
  // \u81EA\u5B9A\u4E49 tooltip \u5185\u5BB9
  getContent: (e) => {
    const outDiv = document.createElement('div');
    outDiv.style.width = 'fit-content';
    //outDiv.style.padding = '0px 0px 20px 0px';
    outDiv.innerHTML = \`
      <h4>Custom Content</h4>
      <ul>
        <li>Type: \${e.item.getType()}</li>
      </ul>
      <ul>
        <li>Label: \${e.item.getModel().label || e.item.getModel().id}</li>
      </ul>\`;
    return outDiv;
  },
});
const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  plugins: [tooltip],
  modes: {
    default: ['drag-node'],
  },
  defaultNode: {
    size: [80, 40],
    type: 'rect',
  },
});
graph.data(data);
graph.render();

graph.on('node:mouseenter', (e) => {
  graph.setItemState(e.item, 'active', true);
});
graph.on('node:mouseleave', (e) => {
  graph.setItemState(e.item, 'active', false);
});
graph.on('edge:mouseenter', (e) => {
  graph.setItemState(e.item, 'active', true);
});
graph.on('edge:mouseleave', (e) => {
  graph.setItemState(e.item, 'active', false);
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u70B9\u51FB\u51FA\u73B0\u63D0\u793A\u6846",en:"Tooltip Plugin with Click Trigger"},filename:"tooltipClick.js",isNew:!1},{id:"tooltipLocalCustom",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*bIHUToKq6OYAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

insertCss(\`
  .g6-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
\`);

G6.registerNode(
  'rNode',
  {
    drawShape: (cfg, group) => {
      const rect = group.addShape('rect', {
        attrs: {
          x: -cfg.size[0] / 2,
          y: -cfg.size[1] / 2,
          width: cfg.size[0],
          height: cfg.size[1],
          ...cfg.style,
        },
        name: 'rect-shape',
      });
      const responseRect = group.addShape('rect', {
        attrs: {
          width: 30,
          height: 15,
          x: -cfg.size[0] / 2 + 5,
          y: -cfg.size[1] / 2 + 5,
          fill: '#fff',
          stroke: cfg.style.stroke,
          lineWidth: 1,
        },
        name: 'tooltip-response-shape',
      });
      const responseText = group.addShape('text', {
        attrs: {
          text: 'hover here!',
          fill: '#f00',
          x: -cfg.size[0] / 2 + 10,
          y: -cfg.size[1] / 2 + 10,
          textBaseline: 'top',
        },
        name: 'tooltip-response-text-shape',
      });
      const textBBox = responseText.getBBox();
      responseRect.attr({
        width: textBBox.width + 10,
        height: textBBox.height + 10,
      });
      return rect;
    },
  },
  'rect',
);
const data = {
  nodes: [
    {
      id: '0',
      label: 'A',
      x: 220,
      y: 100,
      description: 'This is node A.',
      subdescription: 'This is subdescription of node A.',
    },
    {
      id: '2',
      label: 'No Tooltip',
      x: 150,
      y: 310,
      description: 'This is node B.',
      subdescription: 'This is subdescription of node B.',
    },
    {
      id: '3',
      label: 'C',
      x: 320,
      y: 310,
      description: 'This is node C.',
      subdescription: 'This is subdescription of node C.',
    },
  ],
  edges: [
    {
      id: 'e1',
      source: '0',
      target: '2',
      description: 'This is edge from node 0 to node 2.',
    },
    {
      id: 'e2',
      source: '0',
      target: '3',
      description: 'This is edge from node 0 to node 3.',
    },
  ],
};
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = 'Hover the sub rect with red border to show the tooltip.';
const container = document.getElementById('container');
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 30;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  defaultNode: {
    size: [100, 100],
    type: 'rNode',
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    style: {
      stroke: '#b5b5b5',
      lineAppendWidth: 3,
    },
  },
  modes: {
    default: [
      'drag-node',
      {
        type: 'tooltip',
        formatText: function formatText(model) {
          const text = 'description: ' + model.description;
          return text;
        },
        offset: 30,
        shouldBegin: (e) => {
          if (e.item.getModel().id === '2') return false;
          const target = e.target;
          if (target.get('name') === 'tooltip-response-text-shape') return true;
          return false;
        },
      },
    ],
  },
});
graph.data(data);
graph.render();

graph.on('node:mouseenter', (e) => {
  graph.setItemState(e.item, 'active', true);
});
graph.on('node:mouseleave', (e) => {
  graph.setItemState(e.item, 'active', false);
});
graph.on('edge:mouseenter', (e) => {
  graph.setItemState(e.item, 'active', true);
});
graph.on('edge:mouseleave', (e) => {
  graph.setItemState(e.item, 'active', false);
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);
  };
`,title:{zh:"\u5C40\u90E8\u56FE\u5F62\u54CD\u5E94\u63D0\u793A\u6846 behavior-\u81EA\u5B9A\u4E49\u8282\u70B9",en:"Local Tooltip Behavor"},filename:"tooltipLocalCustom.js",isNew:!1}],icon:"",id:"tooltip",title:{en:"Tooltip",zh:"\u63D0\u793A\u6846"},childrenKey:"demos",order:0},{demos:[{id:"contextMenu",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*YtBHR5akE2gAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

// define the CSS with the id of your menu

insertCss(\`
  #contextMenu {
    position: absolute;
    list-style-type: none;
    padding: 10px 8px;
    left: -150px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
  }
  #contextMenu li {
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  #contextMenu li:hover {
    color: #aaa;
  }
\`);

const descriptionDiv = document.createElement('div');
descriptionDiv.id = 'discription';
descriptionDiv.innerHTML = 'Right click a node to activate a contextMenu.';
document.getElementById('container').appendChild(descriptionDiv);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;

const contextMenu = new G6.Menu({
  getContent(evt) {
    let header;
    if (evt.target && evt.target.isCanvas && evt.target.isCanvas()) {
      header = 'Canvas ContextMenu';
    } else if (evt.item) {
      const itemType = evt.item.getType();
      header = \`\${itemType.toUpperCase()} ContextMenu\`;
    }
    return \`
    <h3>\${header}</h3>
    <ul>
      <li title='1'>li 1</li>
      <li title='2'>li 2</li>
      <li>li 3</li>
      <li>li 4</li>
      <li>li 5</li>
    </ul>\`;
  },
  handleMenuClick: (target, item) => {
    console.log(target, item);
  },
  // offsetX and offsetY include the padding of the parent container
  // \u9700\u8981\u52A0\u4E0A\u7236\u7EA7\u5BB9\u5668\u7684 padding-left 16 \u4E0E\u81EA\u8EAB\u504F\u79FB\u91CF 10
  offsetX: 16 + 10,
  // \u9700\u8981\u52A0\u4E0A\u7236\u7EA7\u5BB9\u5668\u7684 padding-top 24 \u3001\u753B\u5E03\u5144\u5F1F\u5143\u7D20\u9AD8\u5EA6\u3001\u4E0E\u81EA\u8EAB\u504F\u79FB\u91CF 10
  offsetY: 0,
  // the types of items that allow the menu show up
  // \u5728\u54EA\u4E9B\u7C7B\u578B\u7684\u5143\u7D20\u4E0A\u54CD\u5E94
  itemTypes: ['node', 'edge', 'canvas'],
});

const graph = new G6.Graph({
  // \u4F7F\u7528 contextMenu plugins \u65F6\uFF0C\u9700\u8981\u5C06 container \u8BBE\u7F6E\u4E3A position: relative;
  container: 'container',
  width,
  height,
  linkCenter: true,
  plugins: [contextMenu],
  defaultNode: {
    size: [80, 40],
    type: 'rect',
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    style: {
      stroke: '#b5b5b5',
      lineAppendWidth: 3, // Enlarge the range the edge to be hitted
    },
    labelCfg: {
      autoRotate: true,
      style: {
        // A white stroke with width 5 helps show the label more clearly avoiding the interference of the overlapped edge
        stroke: 'white',
        lineWidth: 5,
      },
    },
  },
  modes: {
    default: ['drag-node'],
  },
});

const data = {
  nodes: [
    {
      id: 'node1',
      label: 'node1',
      x: 200,
      y: 100,
      type: 'rect',
    },
    {
      id: 'node2',
      label: 'node2',
      x: 250,
      y: 250,
      type: 'rect',
    },
    {
      id: 'node3',
      label: 'node3',
      x: 350,
      y: 100,
      type: 'rect',
    },
  ],
  edges: [
    {
      source: 'node1',
      target: 'node2',
      label: 'Test Label',
    },
    {
      source: 'node1',
      target: 'node3',
      label: 'Test Label 2',
    },
  ],
};

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u4E0A\u4E0B\u6587\u83DC\u5355",en:"Context Menu"},filename:"contextMenu.js",isNew:!1}],icon:"",id:"contextMenu",title:{en:"ContextMenu",zh:"\u4E0A\u4E0B\u6587\u83DC\u5355"},childrenKey:"demos",order:1},{demos:[{id:"minimap",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*r3dAQo-R3BoAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

insertCss(\`
  .g6-minimap-container {
    border: 1px solid #e2e2e2;
  }
  .g6-minimap-viewport {
    border: 2px solid rgb(25, 128, 255);
  }
\`);
const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 110;
const minimap = new G6.Minimap({
  size: [150, 100],
});
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  layout: {
    type: 'dagre',
    rankdir: 'LR',
    align: 'DL',
    nodesepFunc: () => 1,
    ranksepFunc: () => 1,
  },
  defaultNode: {
    size: [80, 40],
    type: 'rect',
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    style: {
      stroke: '#b5b5b5',
      lineAppendWidth: 3,
    },
  },
  modes: {
    default: ['drag-canvas', 'zoom-canvas'],
  },
  plugins: [minimap],
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 110);
  };
`,title:{zh:"\u5C0F\u5730\u56FE",en:"Minimap"},filename:"minimap.js",isNew:!1},{id:"imageMinimap",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*r3dAQo-R3BoAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

insertCss(\`
  .g6-minimap-container {
    border: 1px solid #e2e2e2;
  }
  .g6-minimap-viewport {
    border: 2px solid rgb(25, 128, 255);
  }
\`);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 110;
const minimap = new G6.ImageMinimap({
  height: 100,
  padding: 10,
  graphImg: 'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*DcGMQ7AN3Z0AAAAAAAAAAABkARQnAQ',
});
const graph = new G6.TreeGraph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  layout: {
    type: 'dendrogram',
    direction: 'LR', // H / V / LR / RL / TB / BT
    nodeSep: 30,
    rankSep: 100,
  },
  defaultNode: {
    size: 26,
    style: {
      fill: '#C6E5FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    type: 'cubic-horizontal',
    style: {
      stroke: '#A3B1BF',
    },
  },
  modes: {
    default: ['drag-canvas', 'zoom-canvas'],
  },
  plugins: [minimap],
});

graph.node(function (node) {
  return {
    label: node.id,
    labelCfg: {
      position: node.children && node.children.length > 0 ? 'left' : 'right',
      offset: 5,
    },
  };
});

fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data(data);
    graph.render();
  });

graph.on('canvas:click', () => {
  minimap.updateGraphImg(
    'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*7QSRRJwAWxQAAAAAAAAAAABkARQnAQ',
  );
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 110);
  };
`,title:{zh:"\u4F7F\u7528\u56FE\u7247\u7684\u5C0F\u5730\u56FE",en:"Image Minimap"},filename:"imageMinimap.js",isNew:!1}],icon:"",id:"minimap",title:{en:"Minimap",zh:"Minimap"},childrenKey:"demos",order:2},{demos:[{id:"edgeBundling",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*7g4iRqVfkHQAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
    {
      id: '16',
      label: '16',
    },
    {
      id: '17',
      label: '17',
    },
    {
      id: '18',
      label: '18',
    },
    {
      id: '19',
      label: '19',
    },
    {
      id: '20',
      label: '20',
    },
    {
      id: '21',
      label: '21',
    },
    {
      id: '22',
      label: '22',
    },
    {
      id: '23',
      label: '23',
    },
    {
      id: '24',
      label: '24',
    },
    {
      id: '25',
      label: '25',
    },
    {
      id: '26',
      label: '26',
    },
    {
      id: '27',
      label: '27',
    },
    {
      id: '28',
      label: '28',
    },
    {
      id: '29',
      label: '29',
    },
    {
      id: '30',
      label: '30',
    },
    {
      id: '31',
      label: '31',
    },
    {
      id: '32',
      label: '32',
    },
    {
      id: '33',
      label: '33',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;

const edgeBundling = new G6.Bundling({
  bundleThreshold: 0.1,
});

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  layout: {
    type: 'circular',
    center: [width / 2, height / 2],
    radius: height / 2.5,
    ordering: null,
  },
  plugins: [edgeBundling],
  defaultNode: {
    size: [20, 20],
    color: 'steelblue',
  },
  defaultEdge: {
    size: 1,
    color: '#999',
  },
});
graph.data(data);
graph.render();

setTimeout(() => {
  edgeBundling.bundling(data);
}, 1000);

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u8FB9\u7ED1\u5B9A",en:"Edge Bundling"},filename:"edgeBundling.js",isNew:!1}],icon:"",id:"edgeBundling",title:{en:"Edge Bundling",zh:"\u8FB9\u7ED1\u5B9A"},childrenKey:"demos",order:3},{demos:[{id:"toolbar",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*MhpmS68lZW0AAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

insertCss(\`
  .g6-component-toolbar li {
    list-style-type: none !important;
  }
\`);

const data = {
  nodes: [
    {
      id: '0',
      label: 'node-0',
      x: 100,
      y: 100,
      description: 'This is node-0.',
      subdescription: 'This is subdescription of node-0.',
    },
    {
      id: '1',
      label: 'node-1',
      x: 250,
      y: 100,
      description: 'This is node-1.',
      subdescription: 'This is subdescription of node-1.',
    },
    {
      id: '2',
      label: 'node-2',
      x: 150,
      y: 310,
      description: 'This is node-2.',
      subdescription: 'This is subdescription of node-2.',
    },
    {
      id: '3',
      label: 'node-3',
      x: 320,
      y: 310,
      description: 'This is node-3.',
      subdescription: 'This is subdescription of node-3.',
    },
  ],
  edges: [
    {
      id: 'e0',
      source: '0',
      target: '1',
      description: 'This is edge from node 0 to node 1.',
    },
    {
      id: 'e1',
      source: '0',
      target: '2',
      description: 'This is edge from node 0 to node 2.',
    },
    {
      id: 'e2',
      source: '0',
      target: '3',
      description: 'This is edge from node 0 to node 3.',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;

const toolbar = new G6.ToolBar({
  position: { x: 10, y: 10 },
});

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  plugins: [toolbar],
  // \u8BBE\u7F6E\u4E3Atrue\uFF0C\u542F\u7528 redo & undo \u6808\u529F\u80FD
  enabledStack: true,
  defaultNode: {
    size: [80, 40],
    type: 'rect',
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    style: {
      stroke: '#b5b5b5',
      lineAppendWidth: 3,
    },
  },
  modes: {
    default: ['drag-node'],
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u5DE5\u5177\u680F",en:"ToolBar"},filename:"toolbar.js",isNew:!1},{id:"self-toolbar",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ljOiTJAuQnIAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';
import insertCss from 'insert-css';

insertCss(\`
  .g6-toolbar-ul {
    position: absolute;
    top: 70px;
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
    width: 100px;
    cursor: pointer;
  }
\`);

const data = {
  nodes: [
    {
      id: '0',
      label: 'node-0',
      x: 100,
      y: 100,
      description: 'This is node-0.',
      subdescription: 'This is subdescription of node-0.',
    },
    {
      id: '1',
      label: 'node-1',
      x: 250,
      y: 100,
      description: 'This is node-1.',
      subdescription: 'This is subdescription of node-1.',
    },
    {
      id: '2',
      label: 'node-2',
      x: 150,
      y: 310,
      description: 'This is node-2.',
      subdescription: 'This is subdescription of node-2.',
    },
    {
      id: '3',
      label: 'node-3',
      x: 320,
      y: 310,
      description: 'This is node-3.',
      subdescription: 'This is subdescription of node-3.',
    },
  ],
  edges: [
    {
      id: 'e0',
      source: '0',
      target: '1',
      description: 'This is edge from node 0 to node 1.',
    },
    {
      id: 'e1',
      source: '0',
      target: '2',
      description: 'This is edge from node 0 to node 2.',
    },
    {
      id: 'e2',
      source: '0',
      target: '3',
      description: 'This is edge from node 0 to node 3.',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;

const toolbar = new G6.ToolBar({
  // container: tc,
  className: 'g6-toolbar-ul',
  getContent: () => {
    return \`
      <ul>
        <li code='add'>\u589E\u52A0\u8282\u70B9</li>
        <li code='undo'>\u64A4\u9500</li>
        <li code='redo'>\u56DE\u9000</li>
      </ul>
    \`;
  },
  handleClick: (code, graph) => {
    if (code === 'add') {
      graph.addItem('node', {
        id: 'node2',
        label: 'node2',
        x: 300,
        y: 150,
      });
    } else if (code === 'undo') {
      toolbar.undo();
    } else if (code === 'redo') {
      toolbar.redo();
    }
  },
});

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  // \u8BBE\u7F6E\u4E3Atrue\uFF0C\u542F\u7528 redo & undo \u6808\u529F\u80FD
  enabledStack: true,
  plugins: [toolbar],
  defaultNode: {
    size: [80, 40],
    type: 'rect',
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  defaultEdge: {
    style: {
      stroke: '#b5b5b5',
      lineAppendWidth: 3,
    },
  },
  modes: {
    default: ['drag-node'],
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u81EA\u5B9A\u4E49\u5DE5\u5177\u680F",en:"ToolBar"},filename:"self-toolbar.js",isNew:!1}],icon:"",id:"toolbar",title:{en:"ToolBar",zh:"\u5DE5\u5177\u680F"},childrenKey:"demos",order:4},{demos:[{id:"timebar",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*lfvIQJYbs7oAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [],
  edges: [],
};

for (let i = 0; i < 100; i++) {
  const id = \`node-\${i}\`;
  data.nodes.push({
    id,
    date: \`2020\${i}\`,
    value: Math.round(Math.random() * 300),
  });

  data.edges.push({
    source: \`node-\${Math.round(Math.random() * 90)}\`,
    target: \`node-\${Math.round(Math.random() * 90)}\`,
  });
}

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 100;
const timeBarData = [];

const nodeSize = 20;

for (let i = 0; i < 100; i++) {
  timeBarData.push({
    date: \`2020\${i}\`,
    value: Math.round(Math.random() * 300),
  });
}

const timebar = new G6.TimeBar({
  x: 0,
  y: 0,
  width,
  height: 150,
  padding: 10,
  type: 'trend',
  trend: {
    data: timeBarData,
  },
});

// constrained the layout inside the area
const constrainBox = { x: 10, y: 10, width: 580, height: 450 };

const onTick = () => {
  let minx = 99999999;
  let maxx = -99999999;
  let miny = 99999999;
  let maxy = -99999999;
  let maxsize = -9999999;
  data.nodes.forEach((node) => {
    if (minx > node.x) {
      minx = node.x;
    }
    if (maxx < node.x) {
      maxx = node.x;
    }
    if (miny > node.y) {
      miny = node.y;
    }
    if (maxy < node.y) {
      maxy = node.y;
    }
  });
  const scalex = (constrainBox.width - nodeSize / 2) / (maxx - minx);
  const scaley = (constrainBox.height - nodeSize / 2) / (maxy - miny);
  data.nodes.forEach((node) => {
    node.x = (node.x - minx) * scalex + constrainBox.x;
    node.y = (node.y - miny) * scaley + constrainBox.y;
  });
};

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  plugins: [timebar],
  layout: {
    type: 'force',
    preventOverlap: true,
    onTick,
  },
  defaultNode: {
    size: nodeSize,
    type: 'circle',
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  modes: {
    default: ['drag-node'],
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 100);
  };
`,title:{zh:"\u8D8B\u52BF\u65F6\u95F4\u8F74",en:"TrendTimeBar"},filename:"timebar.js",isNew:!1},{id:"simple-timebar",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*g2zhQqP6ruYAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [],
  edges: [],
};

for (let i = 0; i < 100; i++) {
  const id = \`node-\${i}\`;
  data.nodes.push({
    id,
    date: \`2020\${i}\`,
    value: Math.round(Math.random() * 300),
  });

  data.edges.push({
    source: \`node-\${Math.round(Math.random() * 90)}\`,
    target: \`node-\${Math.round(Math.random() * 90)}\`,
  });
}

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 100;

const timeBarData = [];

const nodeSize = 20;

for (let i = 0; i < 100; i++) {
  timeBarData.push({
    date: \`2020\${i}\`,
    value: Math.round(Math.random() * 300),
  });
}

const timebar = new G6.TimeBar({
  x: 0,
  y: 0,
  width,
  height: 150,
  padding: 10,
  type: 'simple',
  trend: {
    data: timeBarData,
  },
});

// constrained the layout inside the area
const constrainBox = { x: 10, y: 10, width: 580, height: 450 };

const onTick = () => {
  let minx = 99999999;
  let maxx = -99999999;
  let miny = 99999999;
  let maxy = -99999999;
  data.nodes.forEach((node) => {
    if (minx > node.x) {
      minx = node.x;
    }
    if (maxx < node.x) {
      maxx = node.x;
    }
    if (miny > node.y) {
      miny = node.y;
    }
    if (maxy < node.y) {
      maxy = node.y;
    }
  });
  const scalex = (constrainBox.width - nodeSize / 2) / (maxx - minx);
  const scaley = (constrainBox.height - nodeSize / 2) / (maxy - miny);
  data.nodes.forEach((node) => {
    node.x = (node.x - minx) * scalex + constrainBox.x;
    node.y = (node.y - miny) * scaley + constrainBox.y;
  });
};

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  plugins: [timebar],
  layout: {
    type: 'force',
    preventOverlap: true,
    onTick,
  },
  defaultNode: {
    size: nodeSize,
    type: 'circle',
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  modes: {
    default: ['drag-node'],
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 100);
  };
`,title:{zh:"\u7B80\u6613\u65F6\u95F4\u8F74",en:"SimperTimeBar"},filename:"simple-timebar.js",isNew:!1},{id:"slice-timebar",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*n6ECQ7Jn5pQAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [],
  edges: [],
};

for (let i = 1; i < 60; i++) {
  const id = \`node-\${i}\`;
  const month = i < 30 ? '01' : '02';
  const day = i % 30 < 10 ? \`0\${i % 30}\` : \`\${i % 30}\`;
  data.nodes.push({
    id,
    date: parseInt(\`2020\${month}\${day}\`),
    value: Math.round(Math.random() * 300),
    label: parseInt(\`2020\${i}\`),
  });

  data.edges.push({
    source: \`node-\${Math.round(Math.random() * 60)}\`,
    target: \`node-\${Math.round(Math.random() * 60)}\`,
  });
}

const timeBarData = [];

for (let i = 1; i < 60; i++) {
  const month = i < 30 ? '01' : '02';
  const day = i % 30 < 10 ? \`0\${i % 30}\` : \`\${i % 30}\`;
  timeBarData.push({
    date: parseInt(\`2020\${month}\${day}\`),
    value: Math.round(Math.random() * 300),
  });
}

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 100;

const nodeSize = 20;

let count = 0;
const timebar = new G6.TimeBar({
  x: 0,
  y: 0,
  width,
  height: 150,
  padding: 10,
  type: 'tick',
  tick: {
    data: timeBarData,
    width: width,
    height: 42,
    padding: 2,
    tickLabelFormatter: (d) => {
      count++;
      const dateStr = \`\${d.date}\`;
      if ((count - 1) % 10 === 0) {
        return \`\${dateStr.substr(0, 4)}-\${dateStr.substr(4, 2)}-\${dateStr.substr(6, 2)}\`;
      }
      return false;
    },
    tooltipFomatter: (d) => {
      const dateStr = \`\${d}\`;
      return \`\${dateStr.substr(0, 4)}-\${dateStr.substr(4, 2)}-\${dateStr.substr(6, 2)}\`;
    },
  },
});

// constrained the layout inside the area
const constrainBox = { x: 10, y: 10, width: 580, height: 450 };

const onTick = () => {
  let minx = 99999999;
  let maxx = -99999999;
  let miny = 99999999;
  let maxy = -99999999;
  data.nodes.forEach((node) => {
    if (minx > node.x) {
      minx = node.x;
    }
    if (maxx < node.x) {
      maxx = node.x;
    }
    if (miny > node.y) {
      miny = node.y;
    }
    if (maxy < node.y) {
      maxy = node.y;
    }
  });
  const scalex = (constrainBox.width - nodeSize / 2) / (maxx - minx);
  const scaley = (constrainBox.height - nodeSize / 2) / (maxy - miny);
  data.nodes.forEach((node) => {
    node.x = (node.x - minx) * scalex + constrainBox.x;
    node.y = (node.y - miny) * scaley + constrainBox.y;
  });
};

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  plugins: [timebar],
  layout: {
    type: 'force',
    preventOverlap: true,
    onTick,
  },
  defaultNode: {
    size: nodeSize,
    type: 'circle',
    style: {
      fill: '#DEE9FF',
      stroke: '#5B8FF9',
    },
  },
  modes: {
    default: ['drag-node'],
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 100);
  };
`,title:{zh:"\u523B\u5EA6\u65F6\u95F4\u8F74",en:"SliceTimeBar"},filename:"slice-timebar.js",isNew:!1}],icon:"",id:"timebar",title:{en:"TimeBar",zh:"\u65F6\u95F4\u8F74"},childrenKey:"demos",order:5},{demos:[{id:"fisheye",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kHtkQ5N4TNEAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

let fisheye = new G6.Fisheye({
  r: 200,
  showLabel: true,
});
const colors = [
  '#8FE9FF',
  '#87EAEF',
  '#FFC9E3',
  '#A7C2FF',
  '#FFA1E3',
  '#FFE269',
  '#BFCFEE',
  '#FFA0C5',
  '#D5FF86',
];

// ================= The DOMs for configurations =============== //
const graphDiv = document.getElementById('container');

const buttonContainer = document.createElement('div');
buttonContainer.style.display = 'inline-block';
buttonContainer.style.height = '35px';
buttonContainer.style.width = '100%';
buttonContainer.style.textAlign = 'center';

// clear the fisheye effect button
const clearButton = document.createElement('input');
clearButton.type = 'button';
clearButton.value = 'Clear';
clearButton.style.height = '25px';
clearButton.style.width = '60px';
buttonContainer.appendChild(clearButton);

// enable/disable the fisheye lens button
const swithButton = document.createElement('input');
swithButton.type = 'button';
swithButton.value = 'Disable';
swithButton.style.height = '25px';
swithButton.style.width = '60px';
swithButton.style.marginLeft = '16px';
buttonContainer.appendChild(swithButton);

buttonContainer.appendChild(document.createElement('br'));

// list for changing trigger
const trigger = document.createElement('span');
trigger.innerHTML = 'Trigger:';
trigger.style.marginLeft = '16px';
buttonContainer.appendChild(trigger);
const configTrigger = document.createElement('select');
configTrigger.value = 'mousemove';
configTrigger.style.height = '25px';
configTrigger.style.width = '100px';
configTrigger.style.marginLeft = '8px';
const mousemoveTrigger = document.createElement('option');
mousemoveTrigger.value = 'mousemove';
mousemoveTrigger.innerHTML = 'mousemove';
configTrigger.appendChild(mousemoveTrigger);
const dragTrigger = document.createElement('option');
dragTrigger.value = 'drag';
dragTrigger.innerHTML = 'drag';
configTrigger.appendChild(dragTrigger);
const clickTrigger = document.createElement('option');
clickTrigger.value = 'click';
clickTrigger.innerHTML = 'click';
configTrigger.appendChild(clickTrigger);
buttonContainer.appendChild(configTrigger);

// list for changing scaleRBy
const scaleR = document.createElement('span');
scaleR.innerHTML = 'Scale r by:';
scaleR.style.marginLeft = '16px';
buttonContainer.appendChild(scaleR);
const configScaleRBy = document.createElement('select');
configScaleRBy.value = 'unset';
configScaleRBy.style.height = '25px';
configScaleRBy.style.width = '100px';
configScaleRBy.style.marginLeft = '8px';
const scaleRByUnset = document.createElement('option');
scaleRByUnset.value = 'unset';
scaleRByUnset.innerHTML = 'unset';
configScaleRBy.appendChild(scaleRByUnset);
const scaleRByWheel = document.createElement('option');
scaleRByWheel.value = 'wheel';
scaleRByWheel.innerHTML = 'wheel';
configScaleRBy.appendChild(scaleRByWheel);
const scaleRByDrag = document.createElement('option');
scaleRByDrag.value = 'drag';
scaleRByDrag.innerHTML = 'drag';
configScaleRBy.appendChild(scaleRByDrag);
buttonContainer.appendChild(configScaleRBy);

// list for changing scaleDBy
const scaleD = document.createElement('span');
scaleD.innerHTML = 'Scale d by:';
scaleD.style.marginLeft = '16px';
buttonContainer.appendChild(scaleD);
const configScaleDBy = document.createElement('select');
configScaleDBy.value = 'unset';
configScaleDBy.style.height = '25px';
configScaleDBy.style.width = '100px';
configScaleDBy.style.marginLeft = '8px';
const scaleDByUnset = document.createElement('option');
scaleDByUnset.value = 'unset';
scaleDByUnset.innerHTML = 'unset';
configScaleDBy.appendChild(scaleDByUnset);
const scaleDByWheel = document.createElement('option');
scaleDByWheel.value = 'wheel';
scaleDByWheel.innerHTML = 'wheel';
configScaleDBy.appendChild(scaleDByWheel);
const scaleDByDrag = document.createElement('option');
scaleDByDrag.value = 'drag';
scaleDByDrag.innerHTML = 'drag';
configScaleDBy.appendChild(scaleDByDrag);
buttonContainer.appendChild(configScaleDBy);

graphDiv.parentNode.appendChild(buttonContainer);

// ========================================================= //

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  plugins: [fisheye],
});

clearButton.addEventListener('click', (e) => {
  fisheye.clear();
});
swithButton.addEventListener('click', (e) => {
  if (swithButton.value === 'Disable') {
    swithButton.value = 'Enable';
    graph.removePlugin(fisheye);
  } else {
    swithButton.value = 'Disable';
    fisheye = new G6.Fisheye({
      r: 200,
      showLabel: true,
    });
    graph.addPlugin(fisheye);
  }
});
configScaleRBy.addEventListener('change', (e) => {
  fisheye.updateParams({ scaleRBy: e.target.value });
});
configScaleDBy.addEventListener('change', (e) => {
  fisheye.updateParams({ scaleDBy: e.target.value });
});
configTrigger.addEventListener('change', (e) => {
  const fisheyConfigs = fisheye._cfgs;
  graph.removePlugin(fisheye);
  fisheye = new G6.Fisheye({
    ...fisheyConfigs,
    trigger: e.target.value,
  });
  graph.addPlugin(fisheye);
});

fetch('https://gw.alipayobjects.com/os/bmw-prod/afe8b2a6-f691-4070-aa73-46fc07fd1171.json')
  .then((res) => res.json())
  .then((data) => {
    data.nodes.forEach((node) => {
      node.label = node.id;
      node.size = Math.random() * 30 + 10;
      node.style = {
        fill: colors[Math.floor(Math.random() * 9)],
        lineWidth: 0,
      };
    });
    graph.data(data);
    graph.render();
    graph.getNodes().forEach((node) => {
      node
        .getContainer()
        .getChildren()
        .forEach((shape) => {
          if (shape.get('type') === 'text') shape.hide();
        });
    });
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u9C7C\u773C\u653E\u5927\u955C",en:"Fisheye Lens"},filename:"fisheye.js",isNew:!1},{id:"fisheyeStyle",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kHtkQ5N4TNEAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

let fisheye = new G6.Fisheye({
  r: 200,
  showLabel: true,
  delegateStyle: {
    fill: '#f00',
    lineDash: [5, 5],
    stroke: '#666',
  },
});
const colors = [
  '#8FE9FF',
  '#87EAEF',
  '#FFC9E3',
  '#A7C2FF',
  '#FFA1E3',
  '#FFE269',
  '#BFCFEE',
  '#FFA0C5',
  '#D5FF86',
];

const graphDiv = document.getElementById('container');

const buttonContainer = document.createElement('div');
buttonContainer.style.display = 'inline-block';
buttonContainer.style.height = '35px';
buttonContainer.style.width = '220px';

// clear the fisheye effect button
const clearButton = document.createElement('input');
clearButton.type = 'button';
clearButton.value = 'Clear';
clearButton.style.height = '25px';
clearButton.style.width = '100px';
buttonContainer.appendChild(clearButton);

// enable/disable the fisheye lens button
const switchButton = document.createElement('input');
switchButton.type = 'button';
switchButton.value = 'Disable';
switchButton.style.height = '25px';
switchButton.style.width = '100px';
switchButton.style.marginLeft = '10px';
buttonContainer.appendChild(switchButton);

graphDiv.parentNode.appendChild(buttonContainer);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  plugins: [fisheye],
});

clearButton.addEventListener('click', (e) => {
  fisheye.clear();
});
switchButton.addEventListener('click', (e) => {
  if (switchButton.value === 'Disable') {
    switchButton.value = 'Enable';
    graph.removePlugin(fisheye);
  } else {
    switchButton.value = 'Disable';
    fisheye = new G6.Fisheye({
      r: 200,
      showLabel: true,
    });
    graph.addPlugin(fisheye);
  }
});

fetch('https://gw.alipayobjects.com/os/bmw-prod/afe8b2a6-f691-4070-aa73-46fc07fd1171.json')
  .then((res) => res.json())
  .then((data) => {
    data.nodes.forEach((node) => {
      node.label = node.id;
      node.size = Math.random() * 30 + 10;
      node.style = {
        fill: colors[Math.floor(Math.random() * 9)],
        lineWidth: 0,
      };
    });
    graph.data(data);
    graph.render();
    graph.getNodes().forEach((node) => {
      node
        .getContainer()
        .getChildren()
        .forEach((shape) => {
          if (shape.get('type') === 'text') shape.hide();
        });
    });
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u9C7C\u773C\u653E\u5927\u955C\u6837\u5F0F",en:"Fisheye Lens Style"},filename:"fisheyeStyle.js",isNew:!1}],icon:"",id:"fisheye",title:{en:"Fisheye",zh:"\u9C7C\u773C\u653E\u5927\u955C"},childrenKey:"demos",order:6},{demos:[{id:"edgeFilter",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*elTYSJwOR7MAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

let trigger = 'mousemove';
const filterConfigs = {
  trigger,
  showLabel: 'edge',
  r: 60,
};
let filterLens = new G6.EdgeFilterLens(filterConfigs);

// ================= The DOMs for configurations =============== //
const graphDiv = document.getElementById('container');

const buttonContainer = document.createElement('div');
buttonContainer.style.display = 'inline-block';
buttonContainer.style.height = '35px';
buttonContainer.style.width = '100%';
buttonContainer.style.textAlign = 'center';

// tip
const tip = document.createElement('span');
tip.innerHTML = '\u70B9\u51FB\u753B\u5E03\u4EFB\u610F\u4F4D\u7F6E\u5F00\u59CB\u63A2\u7D22\u3002\u8FC7\u6EE4\u955C\u4E2D\u663E\u793A\u4E24\u7AEF\u8282\u70B9\u5747\u5728\u8FC7\u6EE4\u955C\u4E2D\u7684\u8FB9\u3002';
buttonContainer.appendChild(tip);

buttonContainer.appendChild(document.createElement('br'));

// tip english
const tipEn = document.createElement('span');
tipEn.innerHTML =
  'Click the canvas to begin. Show the edge whose both end nodes are inside the lens.';
buttonContainer.appendChild(tipEn);

buttonContainer.appendChild(document.createElement('br'));

// enable/disable the fisheye lens button
const swithButton = document.createElement('input');
swithButton.type = 'button';
swithButton.value = 'Disable';
swithButton.style.height = '25px';
swithButton.style.width = '60px';
swithButton.style.marginLeft = '16px';
buttonContainer.appendChild(swithButton);

// list for changing trigger
const triggerTag = document.createElement('span');
triggerTag.innerHTML = 'Trigger:';
triggerTag.style.marginLeft = '16px';
buttonContainer.appendChild(triggerTag);
const configTrigger = document.createElement('select');
configTrigger.value = 'mousemove';
configTrigger.style.height = '25px';
configTrigger.style.width = '100px';
configTrigger.style.marginLeft = '8px';
const mousemoveTrigger = document.createElement('option');
mousemoveTrigger.value = 'mousemove';
mousemoveTrigger.innerHTML = 'mousemove';
configTrigger.appendChild(mousemoveTrigger);
const dragTrigger = document.createElement('option');
dragTrigger.value = 'drag';
dragTrigger.innerHTML = 'drag';
configTrigger.appendChild(dragTrigger);
const clickTrigger = document.createElement('option');
clickTrigger.value = 'click';
clickTrigger.innerHTML = 'click';
configTrigger.appendChild(clickTrigger);
buttonContainer.appendChild(configTrigger);

// list for changing scaleRBy
const scaleR = document.createElement('span');
scaleR.innerHTML = 'Scale r by:';
scaleR.style.marginLeft = '16px';
buttonContainer.appendChild(scaleR);
const configScaleRBy = document.createElement('select');
configScaleRBy.value = 'wheel';
configScaleRBy.style.height = '25px';
configScaleRBy.style.width = '100px';
configScaleRBy.style.marginLeft = '8px';
const scaleRByWheel = document.createElement('option');
scaleRByWheel.value = 'wheel';
scaleRByWheel.innerHTML = 'wheel';
configScaleRBy.appendChild(scaleRByWheel);
const scaleRByUnset = document.createElement('option');
scaleRByUnset.value = undefined;
scaleRByUnset.innerHTML = 'undefined';
configScaleRBy.appendChild(scaleRByUnset);
buttonContainer.appendChild(configScaleRBy);

graphDiv.appendChild(buttonContainer);

// ========================================================= //

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 60;
const graph = new G6.Graph({
  container: 'container',
  width,
  height: height,
  plugins: [filterLens],
  fitView: true,
  defaultEdge: {
    labelCfg: {
      autoRotate: true,
      style: {
        stroke: '#fff',
        lineWidth: 2,
      },
    },
  },
  defaultNode: {
    size: 15,
    color: '#5B8FF9',
    style: {
      lineWidth: 2,
      fill: '#C6E5FF',
    },
  },
  modes: {
    default: ['drag-canvas'],
  },
});

swithButton.addEventListener('click', (e) => {
  if (swithButton.value === 'Disable') {
    swithButton.value = 'Enable';
    graph.removePlugin(filterLens);
  } else {
    swithButton.value = 'Disable';
    filterLens = new G6.EdgeFilterLens({
      ...filterConfigs,
      trigger,
    });
    graph.addPlugin(filterLens);
  }
});
configScaleRBy.addEventListener('change', (e) => {
  filterLens.updateParams({ scaleRBy: e.target.value });
});
configTrigger.addEventListener('change', (e) => {
  const filterLensConfigs = filterLens._cfgs;
  graph.removePlugin(filterLens);
  trigger = e.target.value;
  filterLens = new G6.EdgeFilterLens({
    ...filterLensConfigs,
    trigger,
  });
  graph.addPlugin(filterLens);
});

fetch('https://gw.alipayobjects.com/os/bmw-prod/afe8b2a6-f691-4070-aa73-46fc07fd1171.json')
  .then((res) => res.json())
  .then((data) => {
    data.edges.forEach((edge) => {
      edge.color = '#aaa';
      edge.size = 2;
      edge.style = {
        opacity: 0.7,
      };
      edge.label = 'a';
    });
    graph.data(data);
    graph.render();
    graph.getEdges().forEach((edge) => {
      edge
        .getContainer()
        .getChildren()
        .forEach((shape) => {
          if (shape.get('type') === 'text') shape.set('visible', false);
        });
    });
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 60);
  };
`,title:{zh:"\u8FB9\u8FC7\u6EE4\u955C",en:"Edge Filter Lens"},filename:"edgeFilter.js",isNew:!1},{id:"edgeFilterConfig",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ZkZ4Q6JeIaQAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

let trigger = 'drag';
const filterConfigs = {
  trigger,
  showLabel: 'edge',
  r: 100,
  shouldShow: (e) => {
    return e.size > 3;
  },
  delegateStyle: {
    fill: '#F8E8D9',
    lineDash: [5, 5],
    stroke: '#666',
  },
};

let filterLens = new G6.EdgeFilterLens(filterConfigs);

// ================= The DOMs for configurations =============== //
const graphDiv = document.getElementById('container');

const buttonContainer = document.createElement('div');
buttonContainer.style.display = 'inline-block';
buttonContainer.style.height = '35px';
buttonContainer.style.width = '100%';
buttonContainer.style.textAlign = 'center';

// tip
const tip = document.createElement('span');
tip.innerHTML =
  '\u70B9\u51FB\u753B\u5E03\u4EFB\u610F\u4F4D\u7F6E\u5F00\u59CB\u63A2\u7D22\u3002\u8FC7\u6EE4\u955C\u4E2D\u663E\u793A\u4E24\u7AEF\u8282\u70B9\u5747\u5728\u8FC7\u6EE4\u955C\u4E2D\uFF0C\u4E14\u6EE1\u8DB3 shouldShow \u6240\u5B9A\u4E49\u7684\u6761\u4EF6\u7684\u8FB9\u3002';
buttonContainer.appendChild(tip);

buttonContainer.appendChild(document.createElement('br'));

// tip english
const tipEn = document.createElement('span');
tipEn.innerHTML =
  'Click the canvas to begin. Show the edge whose both end nodes are inside the lens, meanwhile the edge should meet the requirements defined by shouldShow in.';
buttonContainer.appendChild(tipEn);

buttonContainer.appendChild(document.createElement('br'));

// enable/disable the fisheye lens button
const swithButton = document.createElement('input');
swithButton.type = 'button';
swithButton.value = 'Disable';
swithButton.style.height = '25px';
swithButton.style.width = '60px';
swithButton.style.marginLeft = '16px';
buttonContainer.appendChild(swithButton);

// list for changing trigger
const triggerTag = document.createElement('span');
triggerTag.innerHTML = 'Trigger:';
triggerTag.style.marginLeft = '16px';
buttonContainer.appendChild(triggerTag);
const configTrigger = document.createElement('select');
configTrigger.value = 'drag';
configTrigger.style.height = '25px';
configTrigger.style.width = '100px';
configTrigger.style.marginLeft = '8px';
const dragTrigger = document.createElement('option');
dragTrigger.value = 'drag';
dragTrigger.innerHTML = 'drag';
configTrigger.appendChild(dragTrigger);
const mousemoveTrigger = document.createElement('option');
mousemoveTrigger.value = 'mousemove';
mousemoveTrigger.innerHTML = 'mousemove';
configTrigger.appendChild(mousemoveTrigger);
const clickTrigger = document.createElement('option');
clickTrigger.value = 'click';
clickTrigger.innerHTML = 'click';
configTrigger.appendChild(clickTrigger);
buttonContainer.appendChild(configTrigger);

// list for changing scaleRBy
const scaleR = document.createElement('span');
scaleR.innerHTML = 'Scale r by:';
scaleR.style.marginLeft = '16px';
buttonContainer.appendChild(scaleR);
const configScaleRBy = document.createElement('select');
configScaleRBy.value = 'wheel';
configScaleRBy.style.height = '25px';
configScaleRBy.style.width = '100px';
configScaleRBy.style.marginLeft = '8px';
const scaleRByWheel = document.createElement('option');
scaleRByWheel.value = 'wheel';
scaleRByWheel.innerHTML = 'wheel';
configScaleRBy.appendChild(scaleRByWheel);
const scaleRByUnset = document.createElement('option');
scaleRByUnset.value = undefined;
scaleRByUnset.innerHTML = 'undefined';
configScaleRBy.appendChild(scaleRByUnset);
buttonContainer.appendChild(configScaleRBy);

graphDiv.appendChild(buttonContainer);

// ========================================================= //

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 120;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  plugins: [filterLens],
  fitView: true,
  defaultEdge: {
    labelCfg: {
      autoRotate: true,
      style: {
        stroke: '#fff',
        lineWidth: 2,
      },
    },
  },
  defaultNode: {
    size: 15,
    color: '#5B8FF9',
    style: {
      lineWidth: 2,
      fill: '#C6E5FF',
    },
  },
  modes: {
    default: ['drag-canvas'],
  },
});

swithButton.addEventListener('click', (e) => {
  if (swithButton.value === 'Disable') {
    swithButton.value = 'Enable';
    graph.removePlugin(filterLens);
  } else {
    swithButton.value = 'Disable';
    filterLens = new G6.EdgeFilterLens({
      ...filterConfigs,
      trigger,
    });
    graph.addPlugin(filterLens);
  }
});
configScaleRBy.addEventListener('change', (e) => {
  filterLens.updateParams({ scaleRBy: e.target.value });
});
configTrigger.addEventListener('change', (e) => {
  const filterLensConfigs = filterLens._cfgs;
  graph.removePlugin(filterLens);
  trigger = e.target.value;
  filterLens = new G6.EdgeFilterLens({
    ...filterLensConfigs,
    trigger,
  });
  graph.addPlugin(filterLens);
});

fetch('https://gw.alipayobjects.com/os/bmw-prod/afe8b2a6-f691-4070-aa73-46fc07fd1171.json')
  .then((res) => res.json())
  .then((data) => {
    data.edges.forEach((edge) => {
      edge.size = 1 + Math.random() * 3;
      edge.color = edge.size > 3 ? '#FB4B4B' : '#aaa';
      edge.style = {
        opacity: 0.7,
      };
      edge.label = 'a';
    });
    graph.data(data);
    graph.render();
    graph.getEdges().forEach((edge) => {
      edge
        .getContainer()
        .getChildren()
        .forEach((shape) => {
          if (shape.get('type') === 'text') shape.set('visible', false);
        });
    });
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 120);
  };
`,title:{zh:"\u66F4\u591A\u914D\u7F6E",en:"More Configs"},filename:"edgeFilterConfig.js",isNew:!1}],icon:"",id:"edgeFilterLens",title:{en:"Edge Filter Lens",zh:"\u8FB9\u8FC7\u6EE4\u955C"},childrenKey:"demos",order:7},{demos:[{id:"default",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*fRMFSZCjuoMAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 110;
const snapLine = new G6.SnapLine();

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  defaultNode: {
    size: 30,
  },
  modes: {
    default: ['drag-canvas', 'zoom-canvas', 'drag-node'],
  },
  plugins: [snapLine],
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 110);
  };
`,title:{zh:"\u5BF9\u9F50\u7EBF",en:"SnapLine"},filename:"default.js",isNew:!1},{id:"custom",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*G-vPSa3I1lkAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
    },
    {
      id: '1',
      label: '1',
    },
    {
      id: '2',
      label: '2',
    },
    {
      id: '3',
      label: '3',
    },
    {
      id: '4',
      label: '4',
    },
    {
      id: '5',
      label: '5',
    },
    {
      id: '6',
      label: '6',
    },
    {
      id: '7',
      label: '7',
    },
    {
      id: '8',
      label: '8',
    },
    {
      id: '9',
      label: '9',
    },
    {
      id: '10',
      label: '10',
    },
    {
      id: '11',
      label: '11',
    },
    {
      id: '12',
      label: '12',
    },
    {
      id: '13',
      label: '13',
    },
    {
      id: '14',
      label: '14',
    },
    {
      id: '15',
      label: '15',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
  ],
};

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 110;
const snapLine = new G6.SnapLine({
  line: {
    stroke: 'red',
    lineWidth: 3,
  },
  itemAlignType: true,
});

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  defaultNode: {
    size: 30,
  },
  modes: {
    default: ['drag-canvas', 'zoom-canvas', 'drag-node'],
  },
  plugins: [snapLine],
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 110);
  };
`,title:{zh:"\u81EA\u5B9A\u4E49\u5BF9\u9F50\u7EBF\u6837\u5F0F",en:"Custom SnapLine"},filename:"custom.js",isNew:!1}],icon:"",id:"snapline",title:{en:"SnapLine",zh:"\u5BF9\u9F50\u7EBF"},childrenKey:"demos",order:8},{demos:[{id:"legend",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*0RYmToKWsOQAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6'

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 50;
const el = document.createElement('pre');
el.innerHTML =
  'Click the legend item to filter\\n\u70B9\u51FB\u56FE\u4F8B\u4E0A\u7684\u5143\u7D20\u8FDB\u884C\u7B5B\u9009';
container.appendChild(el);

const typeConfigs = {
  'type1': {
    type: 'circle',
    size: 5,
    style: {
      fill: '#5B8FF9'
    }
  },
  'type2': {
    type: 'circle',
    size: 20,
    style: {
      fill: '#5AD8A6'
    }
  },
  'type3': {
    type: 'rect',
    size: [10, 10],
    style: {
      fill: '#5D7092'
    }
  },
  'eType1': {
    type: 'line',
    style: {
      width: 20,
      stroke: '#F6BD16',
    }
  },
  'eType2': {
    type: 'cubic',
  },
  'eType3': {
    type: 'quadratic',
    style: {
      width: 25,
      stroke: '#6F5EF9'
    }
  }
}

const data = {
  nodes: [
    {
      id: '1',
      label: '1:type1',
      legendType: 'type1',
    },
    {
      id: '2',
      label: '2:type2',
      legendType: 'type2',
    },
    {
      id: '3',
      label: '3:type1',
      legendType: 'type1',
    },
    {
      id: '4',
      label: '4:type3',
      legendType: 'type3',
    },
  ],
  edges: [{
    source: '1',
    target: '2',
    legendType: 'eType1',
    label: '1->2:edge-type1',
  }, {
    source: '1',
    target: '4',
    legendType: 'eType3',
    label: '1->4:edge-type3'
  }, {
    source: '3',
    target: '4'
  }, {
    source: '2',
    target: '4',
    legendType: 'eType1',
    label: '2->4:edge-type1'
  }]
};

data.nodes.forEach(node => {
  if (!node.legendType) return;
  node = Object.assign(node, {...typeConfigs[node.legendType]});
})
data.edges.forEach(edge => {
  if (!edge.legendType) return;
  const config = typeConfigs[edge.legendType];
  edge = Object.assign(edge, {...config});
})

const legendData = {
  nodes: [{
    id: 'type1',
    label: 'node-type1',
    order: 4,
    ...typeConfigs['type1']
  }, {
    id: 'type2',
    label: 'node-type2',
    order: 0,
    ...typeConfigs['type2']
  }, {
    id: 'type3',
    label: 'node-type3',
    order: 2,
    ...typeConfigs['type3']
  }],
  edges: [{
    id: 'eType1',
    label: 'edge-type1',
    order: 2,
    ...typeConfigs['eType1']
  }, {
    id: 'eType2',
    label: 'edge-type2',
    ...typeConfigs['eType2']
  }, {
    id: 'eType3',
    label: 'edge-type3',
    ...typeConfigs['eType3']
  }]
}
const legend = new G6.Legend({
  data: legendData,
  align: 'center',
  layout: 'horizontal', // vertical
  position: 'bottom-right',
  vertiSep: 12,
  horiSep: 24,
  offsetY: -24,
  padding: [4, 16, 8, 16],
  containerStyle: {
    fill: '#ccc',
    lineWidth: 1
  },
  title: 'Legend',
  titleConfig: {
    position: 'center',
    offsetX: 0,
    offsetY: 12,
  },
  filter: {
    enable: true,
    multiple: true,
    trigger: 'click',
    graphActiveState: 'activeByLegend',
    graphInactiveState: 'inactiveByLegend',
    filterFunctions: {
      'type1': (d) => {
        if (d.legendType === 'type1') return true;
        return false
      },
      'type2': (d) => {
        if (d.legendType === 'type2') return true;
        return false
      },
      'type3': (d) => {
        if (d.legendType === 'type3') return true;
        return false
      },
      'eType1': (d) => {
        if (d.legendType === 'eType1') return true;
        return false
      },
      'eType2': (d) => {
        if (d.legendType === 'eType2') return true;
        return false
      },
      'eType3': (d) => {
        if (d.legendType === 'eType3') return true;
        return false
      },
    }
  }
});


const graph = new G6.Graph({
  // \u4F7F\u7528 contextMenu plugins \u65F6\uFF0C\u9700\u8981\u5C06 container \u8BBE\u7F6E\u4E3A position: relative;
  container: 'container',
  width,
  height,
  linkCenter: true,
  defaultNode: {
    labelCfg: {
      position: "bottom",
      style: {
        stroke: '#fff',
        lineWidth: 4
      }
    }
  },
  defaultEdge: {
    labelCfg: {
      autoRotate: true,
      style: {
        stroke: '#fff',
        lineWidth: 4
      }
    }
  },
  nodeStateStyles: {
    activeByLegend: {
      lineWidth: 10,
      strokeOpacity: 0.5
    },
    inactiveByLegend: {
      opacity: 0.5
    }
  },
  edgeStateStyles: {
    activeByLegend: {
      lineWidth: 3
    },
    inactiveByLegend: {
      opacity: 0.5
    }
  },
  plugins: [legend],
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u56FE\u4F8B-\u70B9\u51FB\u7B5B\u9009",en:"Legend with Clicking Filtering"},filename:"legend.js",isNew:!1},{id:"legendMouseenter",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ftAtR6k9RWIAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6'

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 50;
const el = document.createElement('pre');
el.innerHTML =
  'Hover the legend item to filter\\n\u9F20\u6807\u8FDB\u5165\u56FE\u4F8B\u4E0A\u7684\u5143\u7D20\u8FDB\u884C\u7B5B\u9009';
container.appendChild(el);

const typeConfigs = {
  'type1': {
    type: 'circle',
    size: 5,
    style: {
      fill: '#5B8FF9'
    }
  },
  'type2': {
    type: 'circle',
    size: 20,
    style: {
      fill: '#5AD8A6'
    }
  },
  'type3': {
    type: 'rect',
    size: [10, 10],
    style: {
      fill: '#5D7092'
    }
  },
  'eType1': {
    type: 'line',
    style: {
      width: 20,
      stroke: '#F6BD16',
    }
  },
  'eType2': {
    type: 'cubic',
  },
  'eType3': {
    type: 'quadratic',
    style: {
      width: 25,
      stroke: '#6F5EF9'
    }
  }
}

const data = {
  nodes: [
    {
      id: '1',
      label: '1:type1',
      legendType: 'type1',
    },
    {
      id: '2',
      label: '2:type2',
      legendType: 'type2',
    },
    {
      id: '3',
      label: '3:type1',
      legendType: 'type1',
    },
    {
      id: '4',
      label: '4:type3',
      legendType: 'type3',
    },
  ],
  edges: [{
    source: '1',
    target: '2',
    legendType: 'eType1',
    label: '1->2:edge-type1',
  }, {
    source: '1',
    target: '4',
    legendType: 'eType3',
    label: '1->4:edge-type3'
  }, {
    source: '3',
    target: '4'
  }, {
    source: '2',
    target: '4',
    legendType: 'eType1',
    label: '2->4:edge-type1'
  }]
};

data.nodes.forEach(node => {
  if (!node.legendType) return;
  node = Object.assign(node, {...typeConfigs[node.legendType]});
})
data.edges.forEach(edge => {
  if (!edge.legendType) return;
  const config = typeConfigs[edge.legendType];
  edge = Object.assign(edge, {...config});
})

const legendData = {
  nodes: [{
    id: 'type1',
    label: 'node-type1',
    order: 4,
    ...typeConfigs['type1']
  }, {
    id: 'type2',
    label: 'node-type2',
    order: 0,
    ...typeConfigs['type2']
  }, {
    id: 'type3',
    label: 'node-type3',
    order: 2,
    ...typeConfigs['type3']
  }],
  edges: [{
    id: 'eType1',
    label: 'edge-type1',
    order: 2,
    ...typeConfigs['eType1']
  }, {
    id: 'eType2',
    label: 'edge-type2',
    ...typeConfigs['eType2']
  }, {
    id: 'eType3',
    label: 'edge-type3',
    ...typeConfigs['eType3']
  }]
}
const legend = new G6.Legend({
  data: legendData,
  align: 'center',
  layout: 'horizontal', // vertical
  position: 'bottom-right',
  vertiSep: 12,
  horiSep: 24,
  offsetY: -24,
  padding: [4, 16, 8, 16],
  containerStyle: {
    fill: '#ccc',
    lineWidth: 1
  },
  title: 'Legend',
  titleConfig: {
    position: 'center',
    offsetX: 0,
    offsetY: 12,
  },
  filter: {
    enable: true,
    trigger: 'mouseenter',
    graphActiveState: 'activeByLegend',
    graphInactiveState: 'inactiveByLegend',
    filterFunctions: {
      'type1': (d) => {
        if (d.legendType === 'type1') return true;
        return false
      },
      'type2': (d) => {
        if (d.legendType === 'type2') return true;
        return false
      },
      'type3': (d) => {
        if (d.legendType === 'type3') return true;
        return false
      },
      'eType1': (d) => {
        if (d.legendType === 'eType1') return true;
        return false
      },
      'eType2': (d) => {
        if (d.legendType === 'eType2') return true;
        return false
      },
      'eType3': (d) => {
        if (d.legendType === 'eType3') return true;
        return false
      },
    }
  }
});


const graph = new G6.Graph({
  // \u4F7F\u7528 contextMenu plugins \u65F6\uFF0C\u9700\u8981\u5C06 container \u8BBE\u7F6E\u4E3A position: relative;
  container: 'container',
  width,
  height,
  linkCenter: true,
  defaultNode: {
    labelCfg: {
      position: "bottom",
      style: {
        stroke: '#fff',
        lineWidth: 4
      }
    }
  },
  defaultEdge: {
    labelCfg: {
      autoRotate: true,
      style: {
        stroke: '#fff',
        lineWidth: 4
      }
    }
  },
  nodeStateStyles: {
    activeByLegend: {
      lineWidth: 10,
      strokeOpacity: 0.5
    },
    inactiveByLegend: {
      opacity: 0.5
    }
  },
  edgeStateStyles: {
    activeByLegend: {
      lineWidth: 3
    },
    inactiveByLegend: {
      opacity: 0.5
    }
  },
  plugins: [legend],
});

graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u56FE\u4F8B-Hover \u7B5B\u9009",en:"Legend with Hovering Filtering"},filename:"legendMouseenter.js",isNew:!1},{id:"legendClick",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*nCTfRq6522kAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';


const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 50;
const el = document.createElement('pre');
el.innerHTML =
  'Click the legend item to filter\\n\u70B9\u51FB\u56FE\u4F8B\u4E0A\u7684\u5143\u7D20\u8FDB\u884C\u7B5B\u9009';
container.appendChild(el);

const data = {
  nodes: [
    {
      id: '0',
      label: '0',
      cluster: 'a',
    },
    {
      id: '1',
      label: '1',
      cluster: 'a',
    },
    {
      id: '2',
      label: '2',
      cluster: 'a',
    },
    {
      id: '3',
      label: '3',
      cluster: 'a',
    },
    {
      id: '4',
      label: '4',
      cluster: 'a',
    },
    {
      id: '5',
      label: '5',
      cluster: 'a',
    },
    {
      id: '6',
      label: '6',
      cluster: 'a',
    },
    {
      id: '7',
      label: '7',
      cluster: 'a',
    },
    {
      id: '8',
      label: '8',
      cluster: 'a',
    },
    {
      id: '9',
      label: '9',
      cluster: 'a',
    },
    {
      id: '10',
      label: '10',
      cluster: 'a',
    },
    {
      id: '11',
      label: '11',
      cluster: 'a',
    },
    {
      id: '12',
      label: '12',
      cluster: 'a',
    },
    {
      id: '13',
      label: '13',
      cluster: 'b',
    },
    {
      id: '14',
      label: '14',
      cluster: 'b',
    },
    {
      id: '15',
      label: '15',
      cluster: 'b',
    },
    {
      id: '16',
      label: '16',
      cluster: 'b',
    },
    {
      id: '17',
      label: '17',
      cluster: 'b',
    },
    {
      id: '18',
      label: '18',
      cluster: 'c',
    },
    {
      id: '19',
      label: '19',
      cluster: 'c',
    },
    {
      id: '20',
      label: '20',
      cluster: 'c',
    },
    {
      id: '21',
      label: '21',
      cluster: 'c',
    },
    {
      id: '22',
      label: '22',
      cluster: 'c',
    },
    {
      id: '23',
      label: '23',
      cluster: 'c',
    },
    {
      id: '24',
      label: '24',
      cluster: 'c',
    },
    {
      id: '25',
      label: '25',
      cluster: 'c',
    },
    {
      id: '26',
      label: '26',
      cluster: 'c',
    },
    {
      id: '27',
      label: '27',
      cluster: 'c',
    },
    {
      id: '28',
      label: '28',
      cluster: 'c',
    },
    {
      id: '29',
      label: '29',
      cluster: 'c',
    },
    {
      id: '30',
      label: '30',
      cluster: 'c',
    },
    {
      id: '31',
      label: '31',
      cluster: 'd',
    },
    {
      id: '32',
      label: '32',
      cluster: 'd',
    },
    {
      id: '33',
      label: '33',
      cluster: 'd',
    },
  ],
  edges: [
    {
      source: '0',
      target: '1',
    },
    {
      source: '0',
      target: '2',
    },
    {
      source: '0',
      target: '3',
    },
    {
      source: '0',
      target: '4',
    },
    {
      source: '0',
      target: '5',
    },
    {
      source: '0',
      target: '7',
    },
    {
      source: '0',
      target: '8',
    },
    {
      source: '0',
      target: '9',
    },
    {
      source: '0',
      target: '10',
    },
    {
      source: '0',
      target: '11',
    },
    {
      source: '0',
      target: '13',
    },
    {
      source: '0',
      target: '14',
    },
    {
      source: '0',
      target: '15',
    },
    {
      source: '0',
      target: '16',
    },
    {
      source: '2',
      target: '3',
    },
    {
      source: '4',
      target: '5',
    },
    {
      source: '4',
      target: '6',
    },
    {
      source: '5',
      target: '6',
    },
    {
      source: '7',
      target: '13',
    },
    {
      source: '8',
      target: '14',
    },
    {
      source: '9',
      target: '10',
    },
    {
      source: '10',
      target: '22',
    },
    {
      source: '10',
      target: '14',
    },
    {
      source: '10',
      target: '12',
    },
    {
      source: '10',
      target: '24',
    },
    {
      source: '10',
      target: '21',
    },
    {
      source: '10',
      target: '20',
    },
    {
      source: '11',
      target: '24',
    },
    {
      source: '11',
      target: '22',
    },
    {
      source: '11',
      target: '14',
    },
    {
      source: '12',
      target: '13',
    },
    {
      source: '16',
      target: '17',
    },
    {
      source: '16',
      target: '18',
    },
    {
      source: '16',
      target: '21',
    },
    {
      source: '16',
      target: '22',
    },
    {
      source: '17',
      target: '18',
    },
    {
      source: '17',
      target: '20',
    },
    {
      source: '18',
      target: '19',
    },
    {
      source: '19',
      target: '20',
    },
    {
      source: '19',
      target: '33',
    },
    {
      source: '19',
      target: '22',
    },
    {
      source: '19',
      target: '23',
    },
    {
      source: '20',
      target: '21',
    },
    {
      source: '21',
      target: '22',
    },
    {
      source: '22',
      target: '24',
    },
    {
      source: '22',
      target: '25',
    },
    {
      source: '22',
      target: '26',
    },
    {
      source: '22',
      target: '23',
    },
    {
      source: '22',
      target: '28',
    },
    {
      source: '22',
      target: '30',
    },
    {
      source: '22',
      target: '31',
    },
    {
      source: '22',
      target: '32',
    },
    {
      source: '22',
      target: '33',
    },
    {
      source: '23',
      target: '28',
    },
    {
      source: '23',
      target: '27',
    },
    {
      source: '23',
      target: '29',
    },
    {
      source: '23',
      target: '30',
    },
    {
      source: '23',
      target: '31',
    },
    {
      source: '23',
      target: '33',
    },
    {
      source: '32',
      target: '33',
    },
  ],
};

const colors = [
  '#BDD2FD',
  '#BDEFDB',
  '#C2C8D5',
  '#FBE5A2',
  '#F6C3B7',
  '#B6E3F5',
  '#D3C6EA',
  '#FFD8B8',
  '#AAD8D8',
  '#FFD6E7',
];
const strokes = [
  '#5B8FF9',
  '#5AD8A6',
  '#5D7092',
  '#F6BD16',
  '#E8684A',
  '#6DC8EC',
  '#9270CA',
  '#FF9D4D',
  '#269A99',
  '#FF99C3',
];

const clusterMap = new Map();
let clusterId = 0;
data.nodes.forEach(function (node) {
  // cluster
  if (node.cluster && clusterMap.get(node.cluster) === undefined) {
    clusterMap.set(node.cluster, clusterId);
    clusterId++;
  }
  const cid = clusterMap.get(node.cluster);
  if (!node.style) {
    node.style = {};
  }
  node.style.fill = colors[cid % colors.length];
  node.style.stroke = strokes[cid % strokes.length];
});

data.edges.forEach(edge => {
  edge.cluster = data.nodes[+edge.source].cluster;
  const cid = clusterMap.get(edge.cluster);
  console.log(edge.cluster, cid)
  edge.style = {
    stroke: colors[cid % colors.length]
  }
})


const legendData = {
  nodes: [
    { id: 'a', label: 'a', },
    { id: 'b', label: 'b', },
    { id: 'c', label: 'c', },
    { id: 'd', label: 'd', }
  ], edges: [
    { id: 'a', label: 'a', },
    { id: 'b', label: 'b', },
    { id: 'c', label: 'c', },
    { id: 'd', label: 'd', }
  ]
}
legendData.nodes.forEach(node => {
  const cid = clusterMap.get(node.id);
  node.style = {
    fill: colors[cid % colors.length],
    stroke: strokes[cid % strokes.length]
  };
})
legendData.edges.forEach(node => {
  const cid = clusterMap.get(node.id);
  node.style = {
    fill: colors[cid % colors.length],
    stroke: strokes[cid % strokes.length]
  };
})
const legend = new G6.Legend({
  data: legendData,
  align: 'center',
  layout: 'horizontal', // vertical
  position: 'bottom-left',
  vertiSep: 12,
  horiSep: 24,
  offsetY: -24,
  padding: [4, 16, 8, 16],
  containerStyle: {
    fill: '#ccc',
    lineWidth: 1
  },
  title: 'Legend',
  titleConfig: {
    position: 'left',
    offsetX: 0,
    offsetY: 12,
  },
  filter: {
    enable: true,
    multiple: true,
    trigger: 'click',
    graphActiveState: 'activeByLegend',
    graphInactiveState: 'inactiveByLegend',
    filterFunctions: {
      'a': (d) => {
        if (d.cluster === 'a') return true;
        return false
      },
      'b': (d) => {
        if (d.cluster === 'b') return true;
        return false
      },
      'c': (d) => {
        if (d.cluster === 'c') return true;
        return false
      },
      'd': (d) => {
        if (d.cluster === 'd') return true;
        return false
      },
    }
  }
});

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  plugins: [legend],
  animate: true,
  defaultNode: {
    size: 20,
    style: {
      lineWidth: 2,
    },
  },
  defaultEdge: {
    size: 1,
    color: '#e2e2e2',
    style: {
      endArrow: {
        path: 'M 0,0 L 8,4 L 8,-4 Z',
        fill: '#e2e2e2',
      },
    },
  },
  nodeStateStyles: {
    activeByLegend: {
      lineWidth: 5,
      strokeOpacity: 0.5,
      stroke: '#f00'
    },
    inactiveByLegend: {
      opacity: 0.5
    }
  },
  edgeStateStyles: {
    activeByLegend: {
      lineWidth: 10,
      strokeOpacity: 0.5
    },
    inactiveByLegend: {
      opacity: 0.5
    }
  },
  layout: {
    type: 'gForce',
  },
});
graph.data(data);
graph.render();

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"\u56FE\u4F8B-\u70B9\u51FB\u7B5B\u90092",en:"Legend with Clicking Filtering 2"},filename:"legendClick.js",isNew:!1}],icon:"",id:"legend",title:{en:"Legend",zh:"\u56FE\u4F8B Legend"},childrenKey:"demos",order:9}],childrenKey:"examples"},{id:"algorithm",title:{zh:"\u7B97\u6CD5",en:"Algorithm"},icon:"gallery",examples:[{demos:[{id:"gaddi",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ucUBSoDw2TwAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const { GADDI } = G6.Algorithm;

const colors = [
  '#5F95FF', // blue
  '#61DDAA',
  '#65789B',
  '#F6BD16',
  '#7262FD',
  '#78D3F8',
  '#9661BC',
  '#F6903D',
  '#008685',
  '#F08BB4',
];
const colorSets = G6.Util.getColorSetsBySubjectColors(colors, '#fff', 'default', '#777');


const data = {"nodes":[{"id":"0","label":"0","x":217.86420885505296,"y":114.28884847734246,"cluster":"nodeType-0"},{"id":"1","label":"1","x":113.58792632732174,"y":25.785315472468127,"cluster":"nodeType-1"},{"id":"2","label":"2","x":179.59682070334452,"y":38.87850516662148,"cluster":"nodeType-2"},{"id":"3","label":"3","x":204.20226244579672,"y":-5.33508012158744,"cluster":"nodeType-0"},{"id":"4","label":"4","x":308.74171746938134,"y":10.554714934145961,"cluster":"nodeType-1"},{"id":"5","label":"5","x":341.99836557519745,"y":48.30310308747067,"cluster":"nodeType-2"},{"id":"6","label":"6","x":376.62085426957793,"y":-10.286527884559707,"cluster":"nodeType-0"},{"id":"7","label":"7","x":254.42832676365109,"y":62.51510456243093,"cluster":"nodeType-1"},{"id":"8","label":"8","x":139.32504277036227,"y":135.40373347960067,"cluster":"nodeType-2"},{"id":"9","label":"9","x":245.24964464688256,"y":166.03052347036282,"cluster":"nodeType-0"},{"id":"10","label":"10","x":250.33418485239127,"y":227.6830390965898,"cluster":"nodeType-1"},{"id":"11","label":"11","x":176.79897890681895,"y":235.80422881594598,"cluster":"nodeType-2"},{"id":"12","label":"12","x":331.32653587613936,"y":158.8731219947074,"cluster":"nodeType-0"},{"id":"13","label":"13","x":292.8309736938475,"y":106.794007203338,"cluster":"nodeType-1"},{"id":"14","label":"14","x":175.6768625027686,"y":179.3951732038534,"cluster":"nodeType-2"},{"id":"15","label":"15","x":83.26466725029928,"y":96.50488885477502,"cluster":"nodeType-0"},{"id":"16","label":"16","x":318.09206038019914,"y":241.38853020289633,"cluster":"nodeType-1"},{"id":"17","label":"17","x":397.2096443837184,"y":251.11323425020436,"cluster":"nodeType-2"},{"id":"18","label":"18","x":396.9307017482416,"y":305.79619379078093,"cluster":"nodeType-0"},{"id":"19","label":"19","x":323.19884694585255,"y":354.7889914141042,"cluster":"nodeType-1"},{"id":"20","label":"20","x":334.7320270398703,"y":289.0437229111331,"cluster":"nodeType-2"},{"id":"21","label":"21","x":276.9512819725375,"y":284.9808595526045,"cluster":"nodeType-0"},{"id":"22","label":"22","x":235.086300958203,"y":348.23515388308186,"cluster":"nodeType-1"},{"id":"23","label":"23","x":263.36101059763547,"y":442.4976175844671,"cluster":"nodeType-2"},{"id":"24","label":"24","x":195.01142425098806,"y":287.081197770762,"cluster":"nodeType-0"},{"id":"25","label":"25","x":120.39188452563401,"y":337.8524937873151,"cluster":"nodeType-1"},{"id":"26","label":"26","x":109.74700930888443,"y":407.5171194512714,"cluster":"nodeType-2"},{"id":"27","label":"27","x":328.18870325041166,"y":527.9726877901181,"cluster":"nodeType-0"},{"id":"28","label":"28","x":221.745767731853,"y":400.38906283199213,"cluster":"nodeType-1"},{"id":"29","label":"29","x":243.98258526664858,"y":553.9974335527247,"cluster":"nodeType-2"},{"id":"30","label":"30","x":179.30103487685315,"y":433.1126685019916,"cluster":"nodeType-0"},{"id":"31","label":"31","x":221.65781762707928,"y":474.10779931544715,"cluster":"nodeType-1"},{"id":"32","label":"32","x":349.13614579528684,"y":422.65934738145364,"cluster":"nodeType-2"},{"id":"33","label":"33","x":300.5432325124777,"y":401.2786277319002,"cluster":"nodeType-0"}],"edges":[{"source":"0","target":"1","cluster":"edgeType-0"},{"source":"0","target":"2","cluster":"edgeType-1"},{"source":"0","target":"3","cluster":"edgeType-2"},{"source":"0","target":"4","cluster":"edgeType-0"},{"source":"0","target":"5","cluster":"edgeType-1"},{"source":"0","target":"7","cluster":"edgeType-2"},{"source":"0","target":"8","cluster":"edgeType-0"},{"source":"0","target":"9","cluster":"edgeType-1"},{"source":"0","target":"10","cluster":"edgeType-2"},{"source":"0","target":"11","cluster":"edgeType-0"},{"source":"0","target":"13","cluster":"edgeType-1"},{"source":"0","target":"14","cluster":"edgeType-2"},{"source":"0","target":"15","cluster":"edgeType-0"},{"source":"0","target":"16","cluster":"edgeType-1"},{"source":"2","target":"3","cluster":"edgeType-2"},{"source":"4","target":"5","cluster":"edgeType-0"},{"source":"4","target":"6","cluster":"edgeType-1"},{"source":"5","target":"6","cluster":"edgeType-2"},{"source":"7","target":"13","cluster":"edgeType-0"},{"source":"8","target":"14","cluster":"edgeType-1"},{"source":"9","target":"10","cluster":"edgeType-2"},{"source":"10","target":"22","cluster":"edgeType-0"},{"source":"10","target":"14","cluster":"edgeType-1"},{"source":"10","target":"12","cluster":"edgeType-2"},{"source":"10","target":"24","cluster":"edgeType-0"},{"source":"10","target":"21","cluster":"edgeType-1"},{"source":"10","target":"20","cluster":"edgeType-2"},{"source":"11","target":"24","cluster":"edgeType-0"},{"source":"11","target":"22","cluster":"edgeType-1"},{"source":"11","target":"14","cluster":"edgeType-2"},{"source":"12","target":"13","cluster":"edgeType-0"},{"source":"16","target":"17","cluster":"edgeType-1"},{"source":"16","target":"18","cluster":"edgeType-2"},{"source":"16","target":"21","cluster":"edgeType-0"},{"source":"16","target":"22","cluster":"edgeType-1"},{"source":"17","target":"18","cluster":"edgeType-2"},{"source":"17","target":"20","cluster":"edgeType-0"},{"source":"18","target":"19","cluster":"edgeType-1"},{"source":"19","target":"20","cluster":"edgeType-2"},{"source":"19","target":"33","cluster":"edgeType-0"},{"source":"19","target":"22","cluster":"edgeType-1"},{"source":"19","target":"23","cluster":"edgeType-2"},{"source":"20","target":"21","cluster":"edgeType-0"},{"source":"21","target":"22","cluster":"edgeType-1"},{"source":"22","target":"24","cluster":"edgeType-2"},{"source":"22","target":"25","cluster":"edgeType-0"},{"source":"22","target":"26","cluster":"edgeType-1"},{"source":"22","target":"23","cluster":"edgeType-2"},{"source":"22","target":"28","cluster":"edgeType-0"},{"source":"22","target":"30","cluster":"edgeType-1"},{"source":"22","target":"31","cluster":"edgeType-2"},{"source":"22","target":"32","cluster":"edgeType-0"},{"source":"22","target":"33","cluster":"edgeType-1"},{"source":"23","target":"28","cluster":"edgeType-2"},{"source":"23","target":"27","cluster":"edgeType-0"},{"source":"23","target":"29","cluster":"edgeType-1"},{"source":"23","target":"30","cluster":"edgeType-2"},{"source":"23","target":"31","cluster":"edgeType-0"},{"source":"23","target":"33","cluster":"edgeType-1"},{"source":"32","target":"33","cluster":"edgeType-2"}]};
const button = document.createElement('button');
button.innerHTML = \`Click Here to Match \u70B9\u6B64\u5F00\u59CB\u5339\u914D\`;
document.getElementById('container').appendChild(button);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  fitView: true,
  modes: {
    default: ['drag-canvas', 'drag-node', 'zoom-canvas'],
  },
});

const legendDataMap = {}
data.nodes.forEach((node, i) => {
  const colorSet = colorSets[(+node.cluster.split('-')[1])];
  node.style = {
    fill: colorSet.mainFill,
    stroke: colorSet.mainStroke,
  }
  if (!legendDataMap[node.cluster]) {
    legendDataMap[node.cluster] = {
      shape: 'circle',
      r: 6,
      text: node.cluster,
      fill: colorSet.mainFill,
      stroke: colorSet.mainStroke,
    }
  }
})
data.edges.forEach((edge, i) => {
  const colorSet = colorSets[(+edge.cluster.split('-')[1])];
  edge.style = {
    stroke: colorSet.mainStroke,
    lineWidth: 2,
    opacity: 0.3,
    endArrow: true
  }

  if (!legendDataMap[edge.cluster]) {
    legendDataMap[edge.cluster] = {
      shape: 'line',
      text: edge.cluster,
      stroke: colorSet.mainStroke,
      lineWidth: 2,
      opacity: 0.3,
      endArrow: true
    }
  }
})
graph.data(data);
graph.render();

// pattern graph data
const pattern = {
  nodes: [{
    id: 'pn0',
    cluster: 'nodeType-0'
  },{
    id: 'pn1',
    cluster: 'nodeType-1'
  },{
    id: 'pn2',
    cluster: 'nodeType-2'
  }],
  edges: [
    { source: 'pn1', target: 'pn0', cluster: 'edgeType-1' },
    { source: 'pn1', target: 'pn2', cluster: 'edgeType-0' },
    { source: 'pn2', target: 'pn0', cluster: 'edgeType-2' },
  ]
}


// draw pattern graph
pattern.nodes.forEach(pNode => {
  const colorSet = colorSets[(+pNode.cluster.split('-')[1])];
  pNode.style = {
    fill: colorSet.mainFill,
    stroke: colorSet.mainStroke,
  }
});
pattern.edges.forEach(pEdge => {
  const colorSet = colorSets[(+pEdge.cluster.split('-')[1])];
  pEdge.style = {
    stroke: colorSet.mainStroke,
  }
});
const patternGraphWidth = Math.max(width / 5, 100);
const patternGraphHeight = Math.max(height / 5, 100);
const patternGraph = new G6.Graph({
  container: 'container',
  width: patternGraphWidth,
  height: patternGraphHeight,
  fitView: true,
  defaultEdge: {
    style: {
      endArrow: true
    }
  },
  layout: {
    type: 'circular'
  }
})
patternGraph.data(pattern);
patternGraph.render();
const patternCanvas = patternGraph.get('canvas');
const patternCanvasEl = patternCanvas.get('el');
patternCanvasEl.style.position = 'absolute';
patternCanvasEl.style.top = '50px';
patternCanvasEl.style.left = '15px';
patternCanvasEl.style.backgroundColor = '#eee';
patternCanvasEl.style.opacity = 0.7;
patternCanvas.addShape('text', {
  attrs: {
    text: 'Pattern',
    x: patternGraphWidth - 55,
    y: patternGraphHeight - 10,
    fill: '#000',
    fontWeight: 500
  }
})


// draw legend
const legendGroup = graph.get('canvas').addGroup({
  attrs: {
    opacity: 0.7
  }
});
const legendBack = legendGroup.addShape('rect', {
  attrs: {
    height: 10,
    width: 10,
    x: 5,
    y: -10,
    fill: '#eee'
  }
})
legendGroup.addShape('text', {
  attrs: {
    text: 'Legend',
    x: 40,
    y: 5,
    fill: '#000',
    fontWeight: 500
  }
})
Object.keys(legendDataMap).forEach((cluster, i) => {
  const lData = legendDataMap[cluster];
  legendGroup.addShape(lData.shape, {
    attrs: {
      x: 20,
      y: 20 + i * 25,
      x1: 13,
      x2: 28,
      y1: 20 + i * 25,
      y2: 20 + i * 25,
      ...lData
    }
  })
  legendGroup.addShape('text', {
    attrs: {
      x: 35,
      y: 20 + i * 25,
      text: lData.text,
      fill: '#000',
      textBaseline: 'middle'
    }
  })
}) 
const legendBBox = legendGroup.getBBox();
legendBack.attr({
  width: legendBBox.width + 10,
  height: legendBBox.height + 10
})
legendGroup.setMatrix([1, 0, 0, 0, 1, 0, -10, patternGraphHeight + 40, 1])


// click the button to run GADDI graph pattern matching
// and the result will be marked with hull
button.addEventListener('click', (e) => {
  const matches = GADDI(
    data,
    pattern,
    true,
    undefined,
    undefined,
    'cluster',
    'cluster'
  );
  matches.forEach((match, i) => {
    graph.createHull({
      id: \`match-\${i}\`,
      members: match.nodes.map(node => node.id)
    })
  });
  button.innerHTML = \`The results are marked with hulls \u7ED3\u679C\u5DF2\u7528\u8F6E\u5ED3\u6807\u8BB0\`;
  button.disabled = true;
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:{zh:"\u56FE\u6A21\u5F0F\u5339\u914D",en:"Graph Pattern Matching"},filename:"gaddi.js",isNew:!1},{id:"shortestPath",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*pBV2T6BU6g8AAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const tipDiv = document.createElement('div');
tipDiv.innerHTML = \`Press 'shift' and click two nodes to select begin and end nodes. \u6309\u4F4F 'shift' \u5E76\u70B9\u9009\u4E24\u4E2A\u8282\u70B9\u4F5C\u4E3A\u8D77\u70B9\u548C\u7EC8\u70B9\u3002\`;
document.getElementById('container').appendChild(tipDiv);

const button = document.createElement('button');
button.innerHTML = \`\u67E5\u770B\u6700\u77ED\u8DEF\u5F84\`;
document.getElementById('container').appendChild(button);

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 40;

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  modes: {
    default: ['click-select', 'drag-canvas', 'drag-node', 'zoom-canvas'],
  },
  fitView: true,
});
fetch('https://gw.alipayobjects.com/os/bmw-prod/b0ca4b15-bd0c-43ec-ae41-c810374a1d55.json')
  .then((res) => res.json())
  .then((data) => {
    const clearStates = () => {
      graph.getNodes().forEach((node) => {
        graph.clearItemStates(node);
      });
      graph.getEdges().forEach((edge) => {
        graph.clearItemStates(edge);
      });
    };

    graph.on('canvas:click', (e) => {
      clearStates();
    });

    graph.data(data);
    graph.render();

    button.addEventListener('click', (e) => {
      const selectedNodes = graph.findAllByState('node', 'selected');
      if (selectedNodes.length !== 2) {
        alert('Please select TWO nodes!\\n\\r\u8BF7\u9009\u62E9\u6709\u4E14\u4E24\u4E2A\u8282\u70B9\uFF01');
        return;
      }
      clearStates();
      const { findShortestPath } = G6.Algorithm;
      // path \u4E3A\u5176\u4E2D\u4E00\u6761\u6700\u77ED\u8DEF\u5F84\uFF0CallPath \u4E3A\u6240\u6709\u7684\u6700\u77ED\u8DEF\u5F84
      const { path, allPath } = findShortestPath(
        data,
        selectedNodes[0].getID(),
        selectedNodes[1].getID(),
      );

      const pathNodeMap = {};
      path.forEach((id) => {
        const pathNode = graph.findById(id);
        pathNode.toFront();
        graph.setItemState(pathNode, 'highlight', true);
        pathNodeMap[id] = true;
      });
      graph.getEdges().forEach((edge) => {
        const edgeModel = edge.getModel();
        const source = edgeModel.source;
        const target = edgeModel.target;
        const sourceInPathIdx = path.indexOf(source);
        const targetInPathIdx = path.indexOf(target);
        if (sourceInPathIdx === -1 || targetInPathIdx === -1) return;
        if (Math.abs(sourceInPathIdx - targetInPathIdx) === 1) {
          graph.setItemState(edge, 'highlight', true);
        } else {
          graph.setItemState(edge, 'inactive', true);
        }
      });
      graph.getNodes().forEach((node) => {
        if (!pathNodeMap[node.getID()]) {
          graph.setItemState(node, 'inactive', true);
        }
      });
    });
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 40);
  };
`,title:{zh:"\u6700\u77ED\u8DEF\u5F84",en:"Shortest Path"},filename:"shortestPath.js",isNew:!1},{id:"labelPropagation",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*NXkTSbPhEA0AAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const { labelPropagation } = G6.Algorithm;

const button = document.createElement('button');
button.innerHTML = \`Click Here to Clustering \u70B9\u6B64\u81EA\u52A8\u805A\u7C7B\`;
document.getElementById('container').appendChild(button);

// Generate color sets according to subject colors
const subjectColors = [
  '#5F95FF', // blue
  '#61DDAA',
  '#65789B',
  '#F6BD16',
  '#7262FD',
  '#78D3F8',
  '#9661BC',
  '#F6903D',
  '#008685',
  '#F08BB4',
];
const colorSets = G6.Util.getColorSetsBySubjectColors(subjectColors, '#fff', 'default', '#777');

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  modes: {
    default: ['drag-canvas', 'drag-node', 'zoom-canvas'],
  },
  layout: {
    type: 'gForce',
    minMovement: 0.1,
  },
});
fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data(data);
    graph.render();

    button.addEventListener('click', (e) => {
      const clusteredData = labelPropagation(data, false);
      clusteredData.clusters.forEach((cluster, i) => {
        const colorSet = colorSets[i % colorSets.length];
        cluster.nodes.forEach((node) => {
          node.style = {
            fill: colorSet.mainFill,
            stroke: colorSet.mainStroke,
          };
        });
      });
      graph.refresh();
    });
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:{zh:"LP \u81EA\u52A8\u805A\u7C7B",en:"Label Propagation Clustering"},filename:"labelPropagation.js",isNew:!1},{id:"louvain",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*OVgcSa33xBYAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const { louvain } = G6.Algorithm;

const button = document.createElement('button');
button.innerHTML = \`Click Here to Clustering \u70B9\u6B64\u81EA\u52A8\u805A\u7C7B\`;
document.getElementById('container').appendChild(button);

// Generate color sets according to subject colors
const subjectColors = [
  '#5F95FF', // blue
  '#61DDAA',
  '#65789B',
  '#F6BD16',
  '#7262FD',
  '#78D3F8',
  '#9661BC',
  '#F6903D',
  '#008685',
  '#F08BB4',
];
const colorSets = G6.Util.getColorSetsBySubjectColors(subjectColors, '#fff', 'default', '#777');

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 20;

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  modes: {
    default: ['drag-canvas', 'drag-node', 'zoom-canvas'],
  },
  layout: {
    type: 'gForce',
    minMovement: 0.1,
  },
});
fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data(data);
    graph.render();

    button.addEventListener('click', (e) => {
      const clusteredData = louvain(data, false);
      
      clusteredData.clusters.forEach((cluster, i) => {
        const colorSet = colorSets[i % colorSets.length];
        cluster.nodes.forEach((node) => {
          const model = graph.findById(node.id).getModel();
          model.style.fill = colorSet.mainFill
          model.style.stroke = colorSet.mainStroke
        });
      });
      graph.refresh();
    });
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);
  };
`,title:{zh:"LOUVAIN \u81EA\u52A8\u805A\u7C7B",en:"LOUVAIN Clustering"},filename:"louvain.js",isNew:!1},{id:"colorSets",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*hS7MTKlo6LsAAAAAAAAAAAAAARQnAQ",source:`import G6 from '@antv/g6';

const tipDiv = document.createElement('div');
tipDiv.innerHTML = \`These are the suggested categorical color palette in G6. Input the subject colors, 'getColorSetsBySubjectColors' generate a set of colors for different state styles. You can modify the 'subjectColors' in the code to try your subject color. And it also provide default and dark theme with different background colors. <br /> \u4E0B\u9762\u662F G6 \u7684\u63A8\u8350\u8272\u677F\u3002\u8F93\u5165\u4E3B\u9898\u8272\uFF0C'getColorSetsBySubjectColors' \u5C06\u4F1A\u8F93\u51FA\u4E0E\u8BE5\u4E3B\u9898\u8272\u76F8\u5173\u7684\u4E00\u7CFB\u5217\u72B6\u6001\u989C\u8272\u3002\u8FD8\u53EF\u4EE5\u6307\u5B9A\u53E0\u52A0\u80CC\u666F\u8272\u7684\u540C\u65F6\uFF0C\u6307\u5B9A\u4E3B\u9898\u662F default\uFF08\u4EAE\u8272\uFF09\u6216 dark\uFF08\u6697\u8272\uFF09\`;
document.getElementById('container').appendChild(tipDiv);

// Generate color sets according to subject colors
const subjectColors = [
  '#5F95FF', // blue
  '#61DDAA',
  '#65789B',
  '#F6BD16',
  '#7262FD',
  '#78D3F8',
  '#9661BC',
  '#F6903D',
  '#008685',
  '#F08BB4',
];
const backColor = '#fff';
const theme = 'default';
const disableColor = '#777';
const colorSets = G6.Util.getColorSetsBySubjectColors(
  subjectColors,
  backColor,
  theme,
  disableColor,
);

const data = { nodes: [] };

subjectColors.forEach((color, i) => {
  data.nodes.push({
    id: \`node-\${color}\`,
    label: color,
    labelCfg: {
      position: 'bottom',
    },
    style: {
      fill: colorSets[i].mainFill,
      stroke: colorSets[i].mainStroke,
    },
    stateStyles: {
      active: {
        fill: colorSets[i].activeFill,
        stroke: colorSets[i].activeStroke,
        shadowColor: colorSets[i].activeStroke,
      },
      inactive: {
        fill: colorSets[i].inactiveFill,
        stroke: colorSets[i].inactiveStroke,
      },
      selected: {
        fill: colorSets[i].selectedFill,
        stroke: colorSets[i].selectedStroke,
        shadowColor: colorSets[i].selectedStroke,
      },
      highlight: {
        fill: colorSets[i].highlightFill,
        stroke: colorSets[i].highlightStroke,
      },
      disable: {
        fill: colorSets[i].disableFill,
        stroke: colorSets[i].disableStroke,
      },
    },
  });
});

// data.nodes.push({
//   id: \`node-custom\`,
//   label: \`customColor\`
// })

const container = document.getElementById('container');
const width = container.scrollWidth;
const height = (container.scrollHeight || 500) - 160;

G6.Global.nodeStateStyles = {};

const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  linkCenter: true,
  modes: {
    default: ['drag-canvas', 'drag-node', 'zoom-canvas'],
  },
  fitView: true,
  layout: {
    type: 'grid',
  },
  defaultNode: {
    type: 'circle',
    labelCfg: {
      position: 'bottom',
    },
  },
  nodeStateStyles: {
    active: {
      fill: colorSets[1].activeFill,
      stroke: colorSets[1].activeStroke,
    },
  },
});
graph.data(data);
graph.render();

graph.on('node:mouseenter', (e) => {
  graph.getNodes().forEach((node) => {
    graph.setItemState(node, 'active', false);
  });
  graph.setItemState(e.item, 'active', true);
});

graph.on('node:mouseleave', (e) => {
  graph.setItemState(e.item, 'active', false);
});

graph.on('node:click', (e) => {
  graph.getNodes().forEach((node) => {
    graph.setItemState(node, 'selected', false);
  });
  graph.setItemState(e.item, 'selected', true);
});

graph.on('canvas:click', (e) => {
  graph.getNodes().forEach((node) => {
    graph.setItemState(node, 'selected', false);
  });
});

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight - 160);
  };
`,title:{zh:"\u81EA\u52A8\u8BA1\u7B97\u8272\u677F",en:"Color Sets Compoting"},filename:"colorSets.js",isNew:!1}],icon:"",id:"algoDemos",title:{en:"Shortest Path",zh:"\u7B97\u6CD5\u793A\u4F8B"},childrenKey:"demos",order:1}],childrenKey:"examples"},{id:"performance",title:{zh:"\u6027\u80FD\u6D4B\u8BD5",en:"Performance"},icon:"net",examples:[{demos:[{id:"netscience",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Q6eRT7RNwBYAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const mapNodeSize = (nodes, propertyName, visualRange) => {
  let minp = 9999999999;
  let maxp = -9999999999;
  nodes.forEach((node) => {
    node[propertyName] = Math.pow(node[propertyName], 1 / 3);
    minp = node[propertyName] < minp ? node[propertyName] : minp;
    maxp = node[propertyName] > maxp ? node[propertyName] : maxp;
  });
  const rangepLength = maxp - minp;
  const rangevLength = visualRange[1] - visualRange[0];
  nodes.forEach((node) => {
    node.size = ((node[propertyName] - minp) / rangepLength) * rangevLength + visualRange[0];
  });
};

const container = document.getElementById('container');
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = \`\u6B63\u5728\u6E32\u67D3\u5927\u89C4\u6A21\u6570\u636E\uFF0C\u8BF7\u7A0D\u7B49\u2026\u2026\`;
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  defaultNode: {
    size: 2,
    style: {
      fill: '#C6E5FF',
      stroke: '#5B8FF9',
      lineWidth: 0.3,
    },
    labelCfg: {
      style: {
        fontSize: 3,
      },
      position: 'right',
      offset: 1,
    },
  },
  defaultEdge: {
    size: 0.1,
    color: '#333',
  },
  nodeStateStyles: {
    selected: {
      fill: 'steelblue',
      stroke: '#000',
      lineWidth: 1,
    },
  },
  modes: {
    default: [
      {
        type: 'zoom-canvas',
        enableOptimize: true,
        optimizeZoom: 0.9,
      },
      {
        type: 'drag-canvas',
        enableOptimize: true,
      },
      'drag-node',
      'brush-select',
    ],
  },
});

fetch('https://gw.alipayobjects.com/os/basement_prod/da5a1b47-37d6-44d7-8d10-f3e046dabf82.json')
  .then((res) => res.json())
  .then((data) => {
    data.nodes.forEach((node) => {
      node.label = node.olabel;
      node.degree = 0;
      data.edges.forEach((edge) => {
        if (edge.source === node.id || edge.target === node.id) {
          node.degree++;
        }
      });
    });
    mapNodeSize(data.nodes, 'degree', [1, 10]);
    graph.data(data);
    graph.render();

    const graphData = graph.save();
    const nodeLen = graphData.nodes.length;
    const edgeLen = graphData.edges.length;
    descriptionDiv.innerHTML = \`\u8282\u70B9\u6570\u91CF\uFF1A\${nodeLen}, \u8FB9\u6570\u91CF\uFF1A\${edgeLen}, \u56FE\u5143\u6570\u91CF\uFF1A\${
      nodeLen * 2 + edgeLen
    }\`;
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"5000+ \u56FE\u5143",en:"5000+ Graphic Shapes"},filename:"netscience.js",isNew:!1},{id:"eva",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*mysRTLxipwMAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const mapNodeSize = (nodes, propertyName, visualRange) => {
  let minp = 9999999999;
  let maxp = -9999999999;
  nodes.forEach((node) => {
    node[propertyName] = Math.pow(node[propertyName], 1 / 3);
    minp = node[propertyName] < minp ? node[propertyName] : minp;
    maxp = node[propertyName] > maxp ? node[propertyName] : maxp;
  });
  const rangepLength = maxp - minp;
  const rangevLength = visualRange[1] - visualRange[0];
  nodes.forEach((node) => {
    node.size = ((node[propertyName] - minp) / rangepLength) * rangevLength + visualRange[0];
  });
};

const container = document.getElementById('container');
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = \`\u6B63\u5728\u6E32\u67D3\u5927\u89C4\u6A21\u6570\u636E\uFF0C\u8BF7\u7A0D\u7B49\u2026\u2026\`;
container.appendChild(descriptionDiv);

const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  defaultNode: {
    size: 2,
    style: {
      fill: '#C6E5FF',
      stroke: '#5B8FF9',
      lineWidth: 0.3,
    },
    labelCfg: {
      style: {
        fontSize: 3,
      },
      position: 'right',
      offset: 1,
    },
  },
  defaultEdge: {
    size: 0.1,
    color: '#333',
    type: 'line',
  },
  nodeStateStyles: {
    selected: {
      fill: 'steelblue',
      stroke: '#000',
      lineWidth: 1,
    },
    hover: {
      fill: 'red',
      stroke: '#000',
      lineWidth: 1,
    },
  },
  modes: {
    default: [
      {
        type: 'zoom-canvas',
        enableOptimize: true,
        optimizeZoom: 0.9,
      },
      {
        type: 'drag-canvas',
        enableOptimize: true,
      },
      'drag-node',
      'brush-select',
    ], // 'drag-canvas',
  },
});

fetch('https://gw.alipayobjects.com/os/basement_prod/0b9730ff-0850-46ff-84d0-1d4afecd43e6.json')
  .then((res) => res.json())
  .then((data) => {
    data.nodes.forEach((node) => {
      node.label = node.olabel;
      node.labelCfg.style = {
        fontSize: 1.3,
      };
      node.degree = 0;
      data.edges.forEach((edge) => {
        if (edge.source === node.id || edge.target === node.id) {
          node.degree++;
        }
      });
    });
    console.log('\u539F\u59CB\u6570\u636E', data.nodes.length, data.edges.length);
    mapNodeSize(data.nodes, 'degree', [1, 15]);
    // console.log(data.nodes);
    graph.data(data);
    graph.render();
    graph.on('node:mouseenter', (e) => {
      const { item } = e;
      graph.setItemState(item, 'hover', true);
    });
    graph.on('node:mouseleave', (e) => {
      const { item } = e;
      graph.setItemState(item, 'hover', false);
    });

    const graphData = graph.save();
    const nodeLen = graphData.nodes.length;
    const edgeLen = graphData.edges.length;
    descriptionDiv.innerHTML = \`\u8282\u70B9\u6570\u91CF\uFF1A\${nodeLen}, \u8FB9\u6570\u91CF\uFF1A\${edgeLen}, \u56FE\u5143\u6570\u91CF\uFF1A\${
      nodeLen * 2 + edgeLen
    }\`;
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"~20000 \u56FE\u5143",en:"~20000 Graphic Shapes"},filename:"eva.js",isNew:!1},{id:"moreData",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*6U-cSrdpBjYAAAAAAAAAAABkARQnAQ",source:`import G6 from '@antv/g6';

const container = document.getElementById('container');
const descriptionDiv = document.createElement('div');
descriptionDiv.innerHTML = \`\u6B63\u5728\u6E32\u67D3\u5927\u89C4\u6A21\u6570\u636E\uFF0C\u8BF7\u7A0D\u7B49\u2026\u2026\`;
container.appendChild(descriptionDiv);
const width = container.scrollWidth;
const height = container.scrollHeight || 500;
const graph = new G6.Graph({
  container: 'container',
  width,
  height,
  defaultNode: {
    size: 2,
    style: {
      fill: '#C6E5FF',
      stroke: '#5B8FF9',
      lineWidth: 0.3,
    },
    labelCfg: {
      style: {
        fontSize: 3,
      },
      position: 'right',
      offset: 1,
    },
  },
  defaultEdge: {
    size: 0.1,
    color: '#333',
    opacity: 0.2,
  },
  nodeStateStyles: {
    selected: {
      fill: 'steelblue',
      stroke: '#000',
      lineWidth: 1,
    },
  },
  modes: {
    default: [
      {
        type: 'zoom-canvas',
        enableOptimize: true,
        optimizeZoom: 0.9,
      },
      {
        type: 'drag-canvas',
        enableOptimize: true,
      },
      'drag-node',
      'brush-select',
    ],
  },
});

fetch('https://gw.alipayobjects.com/os/bmw-prod/f1565312-d537-4231-adf5-81cb1cd3a0e8.json')
  .then((res) => res.json())
  .then((data) => {
    graph.data(data);
    graph.render();

    const graphData = graph.save();
    const nodeLen = graphData.nodes.length;
    const edgeLen = graphData.edges.length;
    descriptionDiv.innerHTML = \`\u8282\u70B9\u6570\u91CF\uFF1A\${nodeLen}, \u8FB9\u6570\u91CF\uFF1A\${edgeLen}, \u56FE\u5143\u6570\u91CF\uFF1A\${
      nodeLen + edgeLen
    }\`;
  });

if (typeof window !== 'undefined')
  window.onresize = () => {
    if (!graph || graph.get('destroyed')) return;
    if (!container || !container.scrollWidth || !container.scrollHeight) return;
    graph.changeSize(container.scrollWidth, container.scrollHeight);
  };
`,title:{zh:"50000+ \u56FE\u5143",en:"50000+ Graphic Shapes"},filename:"moreData.js",isNew:!1}],icon:"",id:"perf",title:{en:"Performance Case",zh:"\u6027\u80FD\u6848\u4F8B"},childrenKey:"demos",order:0}],childrenKey:"examples"}]}},children:d})}}}]);
